var Hitta=Hitta||{};Hitta.GlobalVars=Hitta.GlobalVars||{};Hitta.GlobalVars.getVar=function(a){if(a!==""&&typeof(this[a])!=="undefined"){return this[a];}return false;};if(!document.createElement("canvas").getContext){(function(){var I=Math;var H=I.round;var N=I.sin;var M=I.cos;var W=I.abs;var O=I.sqrt;var ag=10;var V=ag/2;function Z(){return this.context_||(this.context_=new S(this));}var K=Array.prototype.slice;function J(b,a,d){var c=K.call(arguments,2);return function(){return b.apply(a,c.concat(K.call(arguments)));};}var Y={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var a=b||document;a.createElement("canvas");if(a.readyState!=="complete"){a.attachEvent("onreadystatechange",J(this.init_,this,a));}else{this.init_(a);}}},init_:function(c){if(!c.namespaces.g_vml_){c.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");}if(!c.namespaces.g_o_){c.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");}if(!c.styleSheets.ex_canvas_){var d=c.createStyleSheet();d.owningElement.id="ex_canvas_";d.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}";}var a=c.getElementsByTagName("canvas");for(var b=0;b<a.length;b++){this.initElement(a[b]);}},initElement:function(a){if(!a.getContext){a.getContext=Z;a.innerHTML="";a.attachEvent("onpropertychange",Q);a.attachEvent("onresize",af);var b=a.attributes;if(b.width&&b.width.specified){a.style.width=b.width.nodeValue+"px";}else{a.width=a.clientWidth;}if(b.height&&b.height.specified){a.style.height=b.height.nodeValue+"px";}else{a.height=a.clientHeight;}}return a;}};function Q(a){var b=a.srcElement;switch(a.propertyName){case"width":b.style.width=b.attributes.width.nodeValue+"px";b.getContext().clearRect();break;case"height":b.style.height=b.attributes.height.nodeValue+"px";b.getContext().clearRect();break;}}function af(a){var b=a.srcElement;if(b.firstChild){b.firstChild.style.width=b.clientWidth+"px";b.firstChild.style.height=b.clientHeight+"px";}}Y.init();var ac=[];for(var j=0;j<16;j++){for(var m=0;m<16;m++){ac[j*16+m]=j.toString(16)+m.toString(16);}}function P(){return[[1,0,0],[0,1,0],[0,0,1]];}function ad(g,a){var d=P();for(var f=0;f<3;f++){for(var b=0;b<3;b++){var e=0;for(var c=0;c<3;c++){e+=g[f][c]*a[c][b];}d[f][b]=e;}}return d;}function G(a,b){b.fillStyle=a.fillStyle;b.lineCap=a.lineCap;b.lineJoin=a.lineJoin;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.shadowBlur=a.shadowBlur;b.shadowColor=a.shadowColor;b.shadowOffsetX=a.shadowOffsetX;b.shadowOffsetY=a.shadowOffsetY;b.strokeStyle=a.strokeStyle;b.globalAlpha=a.globalAlpha;b.arcScaleX_=a.arcScaleX_;b.arcScaleY_=a.arcScaleY_;b.lineScale_=a.lineScale_;}function ae(a){var e,f=1;a=String(a);if(a.substring(0,3)=="rgb"){var b=a.indexOf("(",3);var d=a.indexOf(")",b+1);var c=a.substring(b+1,d).split(",");e="#";for(var g=0;g<3;g++){e+=ac[Number(c[g])];}if(c.length==4&&a.substr(3,1)=="a"){f=c[3];}}else{e=a;}return{color:e,alpha:f};}function L(a){switch(a){case"butt":return"flat";case"round":return"round";case"square":default:return"square";}}function S(a){this.m_=P();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=ag*1;this.globalAlpha=1;this.canvas=a;var b=a.ownerDocument.createElement("div");b.style.width=a.clientWidth+"px";b.style.height=a.clientHeight+"px";b.style.overflow="hidden";b.style.position="absolute";a.appendChild(b);this.element_=b;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1;}var X=S.prototype;X.clearRect=function(){this.element_.innerHTML="";};X.beginPath=function(){this.currentPath_=[];};X.moveTo=function(b,c){var a=this.getCoords_(b,c);this.currentPath_.push({type:"moveTo",x:a.x,y:a.y});this.currentX_=a.x;this.currentY_=a.y;};X.lineTo=function(b,c){var a=this.getCoords_(b,c);this.currentPath_.push({type:"lineTo",x:a.x,y:a.y});this.currentX_=a.x;this.currentY_=a.y;};X.bezierCurveTo=function(a,b,d,e,f,h){var c=this.getCoords_(f,h);var g=this.getCoords_(a,b);var k=this.getCoords_(d,e);U(this,g,k,c);};function U(c,d,a,b){c.currentPath_.push({type:"bezierCurveTo",cp1x:d.x,cp1y:d.y,cp2x:a.x,cp2y:a.y,x:b.x,y:b.y});c.currentX_=b.x;c.currentY_=b.y;}X.quadraticCurveTo=function(c,a,e,g){var d=this.getCoords_(c,a);var f=this.getCoords_(e,g);var b={x:this.currentX_+2/3*(d.x-this.currentX_),y:this.currentY_+2/3*(d.y-this.currentY_)};var h={x:b.x+(f.x-this.currentX_)/3,y:b.y+(f.y-this.currentY_)/3};U(this,b,h,f);};X.arc=function(h,l,k,p,b,a){k*=ag;var d=a?"at":"wa";var g=h+M(p)*k-V;var e=l+N(p)*k-V;var c=h+M(b)*k-V;var f=l+N(b)*k-V;if(g==c&&!a){g+=0.125;}var q=this.getCoords_(h,l);var n=this.getCoords_(g,e);var o=this.getCoords_(c,f);this.currentPath_.push({type:d,x:q.x,y:q.y,radius:k,xStart:n.x,yStart:n.y,xEnd:o.x,yEnd:o.y});};X.rect=function(a,b,c,d){this.moveTo(a,b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.closePath();};X.strokeRect=function(a,b,d,e){var c=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+e);this.lineTo(a,b+e);this.closePath();this.stroke();this.currentPath_=c;};X.fillRect=function(a,b,d,e){var c=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+e);this.lineTo(a,b+e);this.closePath();this.fill();this.currentPath_=c;};X.createLinearGradient=function(b,e,d,a){var c=new T("gradient");c.x0_=b;c.y0_=e;c.x1_=d;c.y1_=a;return c;};X.createRadialGradient=function(g,d,a,c,f,e){var b=new T("gradientradial");b.x0_=g;b.y0_=d;b.r0_=a;b.x1_=c;b.y1_=f;b.r1_=e;return b;};X.drawImage=function(f,v){var p,r,n,C,h,l,d,A;var o=f.runtimeStyle.width;var g=f.runtimeStyle.height;f.runtimeStyle.width="auto";f.runtimeStyle.height="auto";var q=f.width;var a=f.height;f.runtimeStyle.width=o;f.runtimeStyle.height=g;if(arguments.length==3){p=arguments[1];r=arguments[2];h=l=0;d=n=q;A=C=a;}else{if(arguments.length==5){p=arguments[1];r=arguments[2];n=arguments[3];C=arguments[4];h=l=0;d=q;A=a;}else{if(arguments.length==9){h=arguments[1];l=arguments[2];d=arguments[3];A=arguments[4];p=arguments[5];r=arguments[6];n=arguments[7];C=arguments[8];}else{throw Error("Invalid number of arguments");}}}var B=this.getCoords_(p,r);var u=d/2;var w=A/2;var D=[];var z=10;var s=10;D.push(" <g_vml_:group",' coordsize="',ag*z,",",ag*s,'"',' coordorigin="0,0"',' style="width:',z,"px;height:",s,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var t=[];t.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",H(B.x/ag),",","Dy=",H(B.y/ag),"");var b=B;var c=this.getCoords_(p+n,r);var e=this.getCoords_(p,r+C);var k=this.getCoords_(p+n,r+C);b.x=I.max(b.x,c.x,e.x,k.x);b.y=I.max(b.y,c.y,e.y,k.y);D.push("padding:0 ",H(b.x/ag),"px ",H(b.y/ag),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",t.join(""),", sizingmethod='clip');");}else{D.push("top:",H(B.y/ag),"px;left:",H(B.x/ag),"px;");}D.push(' ">','<g_vml_:image src="',f.src,'"',' style="width:',ag*n,"px;"," height:",ag*C,'px;"',' cropleft="',h/q,'"',' croptop="',l/a,'"',' cropright="',(q-h-d)/q,'"',' cropbottom="',(a-l-A)/a,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",D.join(""));};X.stroke=function(am){var z=[];var v=false;var l=ae(am?this.fillStyle:this.strokeStyle);var aq=l.color;var w=l.alpha*this.globalAlpha;var F=10;var r=10;z.push("<g_vml_:shape",' filled="',!!am,'"',' style="position:absolute;width:',F,"px;height:",r,'px;"',' coordorigin="0 0" coordsize="',ag*F," ",ag*r,'"',' stroked="',!am,'"',' path="');var t=false;var o={x:null,y:null};var b={x:null,y:null};for(var A=0;A<this.currentPath_.length;A++){var C=this.currentPath_[A];var q;switch(C.type){case"moveTo":q=C;z.push(" m ",H(C.x),",",H(C.y));break;case"lineTo":z.push(" l ",H(C.x),",",H(C.y));break;case"close":z.push(" x ");C=null;break;case"bezierCurveTo":z.push(" c ",H(C.cp1x),",",H(C.cp1y),",",H(C.cp2x),",",H(C.cp2y),",",H(C.x),",",H(C.y));break;case"at":case"wa":z.push(" ",C.type," ",H(C.x-this.arcScaleX_*C.radius),",",H(C.y-this.arcScaleY_*C.radius)," ",H(C.x+this.arcScaleX_*C.radius),",",H(C.y+this.arcScaleY_*C.radius)," ",H(C.xStart),",",H(C.yStart)," ",H(C.xEnd),",",H(C.yEnd));break;}if(C){if(o.x==null||C.x<o.x){o.x=C.x;}if(b.x==null||C.x>b.x){b.x=C.x;}if(o.y==null||C.y<o.y){o.y=C.y;}if(b.y==null||C.y>b.y){b.y=C.y;}}}z.push(' ">');if(!am){var c=this.lineScale_*this.lineWidth;if(c<1){w*=c;}z.push("<g_vml_:stroke",' opacity="',w,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',L(this.lineCap),'"',' weight="',c,'px"',' color="',aq,'" />');}else{if(typeof this.fillStyle=="object"){var p=this.fillStyle;var e=0;var E={x:0,y:0};var ap=0;var h=1;if(p.type_=="gradient"){var k=p.x0_/this.arcScaleX_;var au=p.y0_/this.arcScaleY_;var n=p.x1_/this.arcScaleX_;var g=p.y1_/this.arcScaleY_;var s=this.getCoords_(k,au);var u=this.getCoords_(n,g);var B=u.x-s.x;var D=u.y-s.y;e=Math.atan2(B,D)*180/Math.PI;if(e<0){e+=360;}if(e<0.000001){e=0;}}else{var s=this.getCoords_(p.x0_,p.y0_);var av=b.x-o.x;var al=b.y-o.y;E={x:(s.x-o.x)/av,y:(s.y-o.y)/al};av/=this.arcScaleX_*ag;al/=this.arcScaleY_*ag;var aj=I.max(av,al);ap=2*p.r0_/aj;h=2*p.r1_/aj-ap;}var ar=p.colors_;ar.sort(function(ai,ah){return ai.offset-ah.offset;});var d=ar.length;var at=ar[0].color;var a=ar[d-1].color;var an=ar[0].alpha*this.globalAlpha;var ao=ar[d-1].alpha*this.globalAlpha;var ak=[];for(var A=0;A<d;A++){var f=ar[A];ak.push(f.offset*h+ap+" "+f.color);}z.push('<g_vml_:fill type="',p.type_,'"',' method="none" focus="100%"',' color="',at,'"',' color2="',a,'"',' colors="',ak.join(","),'"',' opacity="',ao,'"',' g_o_:opacity2="',an,'"',' angle="',e,'"',' focusposition="',E.x,",",E.y,'" />');}else{z.push('<g_vml_:fill color="',aq,'" opacity="',w,'" />');}}z.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",z.join(""));};X.fill=function(){this.stroke(true);};X.closePath=function(){this.currentPath_.push({type:"close"});};X.getCoords_=function(c,a){var b=this.m_;return{x:ag*(c*b[0][0]+a*b[1][0]+b[2][0])-V,y:ag*(c*b[0][1]+a*b[1][1]+b[2][1])-V};};X.save=function(){var a={};G(this,a);this.aStack_.push(a);this.mStack_.push(this.m_);this.m_=ad(P(),this.m_);};X.restore=function(){G(this.aStack_.pop(),this);this.m_=this.mStack_.pop();};function aa(b){for(var a=0;a<3;a++){for(var c=0;c<2;c++){if(!isFinite(b[a][c])||isNaN(b[a][c])){return false;}}}return true;}function R(a,c,d){if(!aa(c)){return;}a.m_=c;if(d){var b=c[0][0]*c[1][1]-c[0][1]*c[1][0];a.lineScale_=O(W(b));}}X.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];R(this,ad(c,this.m_),false);};X.rotate=function(b){var d=M(b);var a=N(b);var c=[[d,a,0],[-a,d,0],[0,0,1]];R(this,ad(c,this.m_),false);};X.scale=function(a,b){this.arcScaleX_*=a;this.arcScaleY_*=b;var c=[[a,0,0],[0,b,0],[0,0,1]];R(this,ad(c,this.m_),true);};X.transform=function(f,g,b,d,c,e){var a=[[f,g,0],[b,d,0],[c,e,1]];R(this,ad(a,this.m_),true);};X.setTransform=function(d,f,a,b,g,c){var e=[[d,f,0],[a,b,0],[g,c,1]];R(this,e,true);};X.clip=function(){};X.arcTo=function(){};X.createPattern=function(){return new ab;};function T(a){this.type_=a;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[];}T.prototype.addColorStop=function(a,b){b=ae(b);this.colors_.push({offset:a,color:b.color,alpha:b.alpha});};function ab(){}G_vmlCanvasManager=Y;CanvasRenderingContext2D=S;CanvasGradient=T;CanvasPattern=ab;})();}
/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1;}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement){cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();}d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl);}ck[a]=e;}return ck[a];}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a;});return c;}function ct(){cr=b;}function cs(){setTimeout(ct,0);return cr=f.now();}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP");}catch(b){}}function ci(){try{return new a.XMLHttpRequest;}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);}}l=k,k=d[g];if(k==="*"){k=l;}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break;}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)));}}}return c;}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i]);}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break;}}}if(f[0] in d){j=f[0];}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break;}k||(k=i);}j=j||k;}if(j){j!==f[0]&&f.unshift(j);return d[j];}}function ca(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d);});}else{if(!c&&b!=null&&typeof b=="object"){for(var e in b){ca(a+"["+e+"]",b[e],c,d);}}else{d(a,b);}}}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);}e&&f.extend(!0,a,e);}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));}(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l;}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c);}}};}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border"){for(;g<h;g++){c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;}}return d+"px";}d=bz(a,b,b);if(d<0||d==null){d=a.style[b]||0;}d=parseFloat(d)||0;if(c){for(;g<h;g++){d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);}}return d+"px";}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b);}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild;}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm);}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked;}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[];}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object"){b.outerHTML=a.outerHTML;}else{if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option"){b.selected=a.defaultSelected;}else{if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue;}}}else{a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);}}b.removeAttribute(f.expando);}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data);}}}h.data&&(h.data=f.extend({},h.data));}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a;}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop());}}return c;}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c;});}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c;});}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1;});if(O.test(b)){return f.filter(b,d,!c);}b=f.filter(b,d);}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c;});}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11;}function K(){return !0;}function J(){return !1;}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire());},0);}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue;}if(b!=="toJSON"){return !1;}}return !0;}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d;}catch(g){}f.data(a,c,d);}else{d=b;}}return d;}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0;}return b;}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left");}catch(a){setTimeout(J,1);return;}e.ready();}}var e=function(a,b){return new e.fn.init(a,b,h);},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase();},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this;}if(a.nodeType){this.context=this[0]=a,this.length=1;return this;}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this;}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a);}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a);}this.length=1,this[0]=h;}this.context=c,this.selector=a;return this;}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a);}if(e.isFunction(a)){return f.ready(a);}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this);},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length;},toArray:function(){return F.call(this,0);},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a];},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d;},each:function(a,b){return e.each(this,a,b);},ready:function(a){e.bindReady(),A.add(a);return this;},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","));},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b);}));},end:function(){return this.prevObject||this.constructor(null);},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue;}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f);}}}return i;},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e;},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0);},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1);}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return;}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready");}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1);}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null;}catch(d){}c.documentElement.doScroll&&b&&J();}}}},isFunction:function(a){return e.type(a)==="function";},isArray:Array.isArray||function(a){return e.type(a)==="array";},isWindow:function(a){return a&&typeof a=="object"&&"setInterval" in a;},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a);},type:function(a){return a==null?String(a):I[C.call(a)]||"object";},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1;}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1;}}catch(c){return !1;}var d;for(d in a){}return d===b||D.call(a,d);},isEmptyObject:function(a){for(var b in a){return !1;}return !0;},error:function(a){throw new Error(a);},parseJSON:function(b){if(typeof b!="string"||!b){return null;}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b);}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))();}e.error("Invalid JSON: "+b);},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c));}catch(g){d=b;}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d;},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b);})(b);},camelCase:function(a){return a.replace(w,"ms-").replace(v,x);},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase();},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break;}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break;}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break;}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break;}}}}return a;},trim:G?function(a){return a==null?"":G.call(a);}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"");},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a);}return c;},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c);}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c;}}}return -1;},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e];}}else{while(c[e]!==b){a[d++]=c[e++];}}a.length=d;return a;},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f]);}return d;},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f);}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f);}}return h.concat.apply([],h);},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d;}if(!e.isFunction(a)){return b;}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)));};g.guid=a.guid=a.guid||g.guid||e.guid++;return g;},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c){e.access(a,j,c[j],f,g,d);}return a;}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++){g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);}return a;}return i?g(a[0],c):b;},now:function(){return(new Date).getTime();},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"};},sub:function(){function a(b,c){return new a.fn.init(b,c);}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b);},a.fn.init.prototype=a.fn;var b=a(c);return a;},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase();}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready();}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready());});return e;}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g);}},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++){if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break;}}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])));},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]));}return this;},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique){break;}}}}}return this;},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0;}}}return !1;},empty:function(){c=[];return this;},disable:function(){c=d=e=b;return this;},disabled:function(){return !c;},lock:function(){d=b,(!e||e===!0)&&o.disable();return this;},locked:function(){return !d;},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this;},fire:function(){o.fireWith(this,arguments);return this;},fired:function(){return !!e;}};return o;};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e;},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this;},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this;},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g]);}):i[a](d[e]);});}).promise();},promise:function(a){if(a==null){a=h;}else{for(var b in h){a[b]=h[b];}}return a;}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;}i.done(function(){e="resolved";},c.disable,d.lock).fail(function(){e="rejected";},b.disable,d.lock),a&&a.call(i,i);return i;},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e);};}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b);};}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;}g||j.resolveWith(j,b);}else{j!==a&&j.resolveWith(j,d?[a]:[]);}return k;}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{};}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test;}catch(s){b.deleteExpando=!1;}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1;}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent){for(o in {submit:1,change:1,focusin:1}){n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;}}k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div><table "+n+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i));});return b;}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a);},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return;}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events;}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i;}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return;}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]];}if(!(c?m:f.isEmptyObject)(d)){return;}}}if(!c){delete j[k].data;if(!m(j[k])){return;}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null);}},_data:function(a,b,c){return f.data(a,b,c,!0);},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b;}}return !0;}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++){g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));}f._data(this[0],"parsedAttrs",!0);}}return h;}if(typeof a=="object"){return this.each(function(){f.data(this,a);});}d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h;}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e);});},removeData:function(a){return this.each(function(){f.removeData(this,a);});}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1));},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"));}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[];}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b);},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"));}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b){return f.queue(this[0],a);}return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a);});},dequeue:function(a){return this.each(function(){f.dequeue(this,a);});},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d);};});},clearQueue:function(a){return this.queue(a||"fx",[]);},promise:function(a,c){function m(){--h||d.resolveWith(e,[e]);}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m);}}m();return d.promise();}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr);},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a);});},prop:function(a,b){return f.access(this,a,b,!0,f.prop);},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a];}catch(c){}});},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className));});}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a;}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");}e.className=f.trim(g);}}}}return this;},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className));});}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ");}g.className=f.trim(h);}else{g.className="";}}}}return this;},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b);});}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e);}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||"";}}});},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0;}}return !1;},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+"";})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h;}}});}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d;}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d;}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text;}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null;}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b;}h.push(b);}}if(j&&!h.length&&i.length){return f(i[g]).val();}return h;},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0;}),c.length||(a.selectedIndex=-1);return c;}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d);}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d);}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return;}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g;}a.setAttribute(c,""+d);return d;}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g;}g=a.getAttribute(c);return g===null?b:g;}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++){e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1));}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed");}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b;}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b);}return b in a?a.value:null;},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c);}a.value=b;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c];}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b;}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b;},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c;}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b;},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+"";}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c;}}});}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c);}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d;}});}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b;},set:function(a,b){return a.style.cssText=""+b;}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null;}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value;}};}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0;}}});});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b;},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value));},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1");};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b;},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i);}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0;}a=null;}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0);}continue;}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j]);}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0));}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return;}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return;}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);}return;}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return;}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m;}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s]);}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result;}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++){r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);}q.length&&i.push({elem:l,matches:q});}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace)){c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()));}}}return c.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a;}},fix:function(a){if(a[f.expando]){return a;}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e];}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a;},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c);},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null);}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault();}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1);}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c);},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b);}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0;},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1);},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0);},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation();},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;}return h;}};}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1;}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0);}),d._submit_attached=!0);});},teardown:function(){if(f.nodeName(this,"form")){return !1;}f.event.remove(this,"._submit");}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0);}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0));});}return !1;}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0);}),b._change_attached=!0);});},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments);}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName);}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0);};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0);},teardown:function(){--d===0&&c.removeEventListener(a,e,!0);}};}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a){this.on(i,c,d,a[i],g);}return this;}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J;}else{if(!e){return this;}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments);},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c);});},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1);},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this;}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g]);}return this;}if(c===!1||typeof c=="function"){d=c,c=b;}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c);});},bind:function(a,b,c){return this.on(a,null,b,c);},unbind:function(a,b){return this.off(a,null,b);},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this;},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this;},delegate:function(a,b,c,d){return this.on(b,a,c,d);},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c);},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this);});},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0);}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1;};e.guid=c;while(d<b.length){b[d++].guid=c;}return this.click(e);},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b);},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks);}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break;}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break;}}else{if(m.filter(b,[j]).length>0){k=j;break;}}}j=j[a];}e[h]=k;}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break;}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break;}j=j[a];}e[h]=k;}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0;});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[];}if(!b||typeof b!="string"){return e;}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break;}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f);}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f);}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v);}}else{k=w=[];}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k);}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t]);}}}}else{s(k,e);}l&&(m(l,h,e,f),m.uniqueSort(e));return e;};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1);}}}return a;},m.matches=function(a,b){return m(a,null,null,b);},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0;},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[];}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break;}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a};},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue;}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0;}else{if(f===!0){continue;}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[];}break;}}}if(a===q){if(g==null){m.error(a);}else{break;}}q=a;}return s;},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a);};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string"){return a.textContent;}if(typeof a.innerText=="string"){return a.innerText.replace(k,"");}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a);}}else{if(d===3||d===4){return a.nodeValue;}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c));}}return e;},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href");},type:function(a){return a.getAttribute("type");}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b;}}e&&m.filter(b,a,!0);},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1;}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);}d&&m.filter(b,a,!0);}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c);},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c);}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[];}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e]);}return c.length===0?null:c;}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1]);}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a;}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));}return !1;},ID:function(a){return a[1].replace(j,"");},TAG:function(a,b){return a[1].replace(j,"").toLowerCase();},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0;}else{a[2]&&m.error(a[0]);}a[0]=e++;return a;},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a;},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c);}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1;}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0;}}return b;},POS:function(a){a.unshift(!0);return a;}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden";},disabled:function(a){return a.disabled===!0;},checked:function(a){return a.checked===!0;},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0;},parent:function(a){return !!a.firstChild;},empty:function(a){return !a.firstChild;},has:function(a,b,c){return !!m(c[3],a).length;},header:function(a){return/h\d/i.test(a.nodeName);},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null);},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type;},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type;},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type;},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type;},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type;},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type;},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type;},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button";},input:function(a){return/input|select|textarea|button/i.test(a.nodeName);},focus:function(a){return a===a.ownerDocument.activeElement;}},setFilters:{first:function(a,b){return b===0;},last:function(a,b,c,d){return b===d.length-1;},even:function(a,b){return b%2===0;},odd:function(a,b){return b%2===1;},lt:function(a,b,c){return b<c[3]-0;},gt:function(a,b,c){return b>c[3]-0;},nth:function(a,b,c){return c[3]-0===b;},eq:function(a,b,c){return c[3]-0===b;}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d);}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1;}}return !0;}m.error(e);},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1;}}if(k==="first"){return !0;}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1;}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0;}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i);}g[d]=f;}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0;}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b;},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b;},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1;},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1;},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d);}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1);};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));}var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b;}return a;};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType;}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a);}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c]);}}else{for(;a[c];c++){d.push(a[c]);}}}return d;};}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0;}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}return a.compareDocumentPosition(b)&4?-1:1;}:(u=function(a,b){if(a===b){h=!0;return 0;}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b);}if(!g){return -1;}if(!i){return 1;}while(j){e.unshift(j),j=j.parentNode;}j=i;while(j){f.unshift(j),j=j.parentNode;}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k]);}}return k===c?v(a,f[k],-1):v(e[k],b,1);},v=function(a,b,c){if(a===b){return c;}var d=a.nextSibling;while(d){if(d===b){return -1;}d=d.nextSibling;}return 1;}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[];}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b;}),e.removeChild(a),e=a=null;}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e]);}c=d;}return c;}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2);}),a=null;}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f);}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f);}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f);}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f);}if(i.id===h[3]){return s([i],f);}}try{return s(e.querySelectorAll(b),f);}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f);}}catch(r){}finally{l||k.removeAttribute("id");}}}}return a(b,e,f,g);};for(var e in a){m[e]=a[e];}b=null;}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle");}catch(f){e=!0;}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f;}}}catch(g){}}return m(c,null,null,[a]).length>0;};}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return;}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1]);}},a=null;}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0);}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16);}:m.contains=function(){return !1;},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1;};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"");}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c);}return m.filter(f,e);};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains;}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0;}}});}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break;}}}}}return e;},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0;}}});},not:function(a){return this.pushStack(T(this,a,!1),"not",a);},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a);},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0);},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});}g=g.parentNode,h++;}return c;}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break;}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break;}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a);},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1;}if(typeof a=="string"){return f.inArray(this[0],f(a));}return f.inArray(a.jquery?a[0]:a,this);},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d));},andSelf:function(){return this.add(this.prevObject);}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null;},parents:function(a){return f.dir(a,"parentNode");},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c);},next:function(a){return f.nth(a,2,"nextSibling");},prev:function(a){return f.nth(a,2,"previousSibling");},nextAll:function(a){return f.dir(a,"nextSibling");},prevAll:function(a){return f.dir(a,"previousSibling");},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c);},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c);},siblings:function(a){return f.sibling(a.parentNode.firstChild,a);},children:function(a){return f.sibling(a.firstChild);},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes);}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","));};}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b);},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c];}return e;},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break;}}return a;},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a);}return c;}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a)){return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()));});}if(typeof a!="object"&&a!==b){return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));}return f.text(this);},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b));});}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild;}return a;}).append(this);}return this;},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b));});}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a);});},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a);});},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes);}).end();},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a);});},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild);});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this);});}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling);});}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a;}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);}}return this;},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild);}}return this;},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b);});},html:function(a){if(a===b){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++){this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a);}}catch(e){this.empty().append(a);}}else{f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()));}):this.empty().append(a);}return this;},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d));});}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a);});}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this;},detach:function(a){return this.remove(a,!0);},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0);});}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d);});}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h);}}k.length&&f.each(k,bp);}return this;}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g};},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this;}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j);}return this.pushStack(d,a,e.selector);};}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g]);}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g]);}}}d=e=null;return h;},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k){continue;}if(typeof k=="string"){if(!_.test(k)){k=b.createTextNode(k);}else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--){o=o.lastChild;}if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i){f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i]);}}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes;}}var r;if(!f.support.appendChecked){if(k[0]&&typeof(r=k.length)=="number"){for(i=0;i<r;i++){bn(k[i]);}}else{bn(k);}}k.nodeType?h.push(k):h=f.merge(h,k);}if(d){g=function(a){return !a.type||be.test(a.type);};for(j=0;h[j];j++){if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript")){e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);}else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s));}d.appendChild(h[j]);}}}return h;},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue;}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);}b.handle&&(b.handle.elem=null);}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c];}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b){return this;}return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c);});},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c;}return a.style.opacity;}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g;}return j[c];}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return;}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d;}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e;}if(bz){return bz(a,c);}},swap:function(a,b,c){var d={};for(var e in b){d[e]=a.style[e],a.style[e]=b[e];}c.call(a);for(e in b){a.style[e]=d[e];}}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0){return bC(a,b,d);}f.swap(a,bw,function(){e=bC(a,b,d);});return e;}},set:function(a,b){if(!bt.test(b)){return b;}b=parseFloat(b);if(b>=0){return b+"px";}}};}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":"";},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return;}}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e;}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight;});return c;}});}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c;}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f;}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none";},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a);});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href;}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href;}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS){return bS.apply(this,arguments);}if(!this.length){return this;}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e);}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a;}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a]);}});return this;},serialize:function(){return f.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type));}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")};}):{name:b.name,value:c.replace(bF,"\r\n")};}).get();}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a);};}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g});};}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script");},getJSON:function(a,b,c){return f.get(a,b,c,"json");},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a;},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y;}if(z=v.getResponseHeader("Etag")){f.etag[k]=z;}}if(a===304){w="notmodified",o=!0;}else{try{r=cc(d,x),w="success",o=!0;}catch(A){w="parsererror",u=A;}}}else{u=w;if(!w||a){w="error",a<0&&(a=0);}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"));}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b;}return this;},getAllResponseHeaders:function(){return s===2?n:null;},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n)){o[c[1].toLowerCase()]=c[2];}}c=o[a.toLowerCase()];}return c===b?null:c;},overrideMimeType:function(a){s||(d.mimeType=a);return this;},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this;}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]];}}else{b=a[v.status],v.then(b,b);}}return this;},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2){return !1;}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"");}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u]);}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1;}for(u in {success:1,error:1,complete:1}){v[u](d[u]);}p=b$(bU,d,c,v);if(!p){w(-1,"No Transport");}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout");},d.timeout));try{s=1,p.send(l,w);}catch(z){if(s<2){w(-1,z);}else{throw z;}}}return v;},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b);};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value);});}else{for(var g in a){ca(g,a[g],c,e);}}return d.join("&").replace(bD,"+");}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++;}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a];},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0]);}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0];},b.dataTypes[0]="json";return"script";}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a;}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1);}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success");}},e.insertBefore(d,e.firstChild);},abort:function(){d&&d.onload(0,1);}};}});var cf=a.ActiveXObject?function(){for(var a in ch){ch[a](0,1);}}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ci()||cj();}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a});}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j];}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j]);}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e){h.readyState!==4&&h.abort();}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText;}catch(o){k="";}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204);}}}catch(p){e||g(-1,p);}m&&g(j,k,m,l);},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d);},abort:function(){d&&d(0,1);}};}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(cu("show",3),a,b,c);}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||"";}}}return this;},hide:function(a,b,c){if(a||a===0){return this.animate(cu("hide",3),a,b,c);}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none");}return this;},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]();}):this.animate(cu("toggle",3),a,b,c);return this;},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d);},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this);}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1));}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));}return !0;}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1]);}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g);},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d);}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b);}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));}(!d||!c)&&f.dequeue(this,a);});}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d);};}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx";}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this);};return d;},easing:{linear:function(a,b,c,d){return c+d*a;},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c;}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{};}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a;},custom:function(a,c,d){function h(a){return e.step(a);}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start);},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval));},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show();},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0);},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1);}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a];}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);}}d=i.complete,d&&(i.complete=!1,d.call(h));}return !1;}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0;}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1);}b.length||f.fx.stop();},interval:13,stop:function(){clearInterval(cp),cp=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now);},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now;}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit);};}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem;}).length;});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a){return this.each(function(b){f.offset.setOffset(this,a,b);});}if(!b||!b.ownerDocument){return null;}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b);}try{c=b.getBoundingClientRect();}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b)){return c?{top:c.top,left:c.left}:{top:0,left:0};}var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o};}:f.fn.offset=function(a){var b=this[0];if(a){return this.each(function(b){f.offset.setOffset(this,a,b);});}if(!b||!b.ownerDocument){return null;}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b);}var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed"){break;}c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c;}if(k.position==="relative"||k.position==="static"){l+=i.offsetTop,m+=i.offsetLeft;}f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m};},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c};},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k);}},f.fn.extend({position:function(){if(!this[0]){return null;}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left};},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent;}return a;});}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e){return null;}g=cy(e);return g?"pageXOffset" in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d];}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c;});};}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null;},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null;},f.fn[d]=function(a){var e=this[0];if(!e){return a==null?null:this;}if(f.isFunction(a)){return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()));});}if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g;}if(e.nodeType===9){return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);}if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i;}return this.css(d,typeof a=="string"?a:a+"px");};}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f;});})(window);
/*!
 * jQuery UI 1.8.9
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(d,b){function a(c){return !d(c).parents().andSelf().filter(function(){return d.curCSS(this,"visibility")==="hidden"||d.expr.filters.hidden(this);}).length;}d.ui=d.ui||{};if(!d.ui.version){d.extend(d.ui,{version:"1.8.9",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});d.fn.extend({_focus:d.fn.focus,focus:function(e,c){return typeof e==="number"?this.each(function(){var f=this;setTimeout(function(){d(f).focus();c&&c.call(f);},e);}):this._focus.apply(this,arguments);},scrollParent:function(){var c;c=d.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.curCSS(this,"position",1))&&/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1));}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1));}).eq(0);return/fixed/.test(this.css("position"))||!c.length?d(document):c;},zIndex:function(e){if(e!==b){return this.css("zIndex",e);}if(this.length){e=d(this[0]);for(var c;e.length&&e[0]!==document;){c=e.css("position");if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(e.css("zIndex"),10);if(!isNaN(c)&&c!==0){return c;}}e=e.parent();}}return 0;},disableSelection:function(){return this.bind((d.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(c){c.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});d.each(["Width","Height"],function(f,c){function l(o,n,h,e){d.each(k,function(){n-=parseFloat(d.curCSS(o,"padding"+this,true))||0;if(h){n-=parseFloat(d.curCSS(o,"border"+this+"Width",true))||0;}if(e){n-=parseFloat(d.curCSS(o,"margin"+this,true))||0;}});return n;}var k=c==="Width"?["Left","Right"]:["Top","Bottom"],j=c.toLowerCase(),g={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+c]=function(e){if(e===b){return g["inner"+c].call(this);}return this.each(function(){d(this).css(j,l(this,e)+"px");});};d.fn["outer"+c]=function(h,e){if(typeof h!=="number"){return g["outer"+c].call(this,h);}return this.each(function(){d(this).css(j,l(this,h,true,e)+"px");});};});d.extend(d.expr[":"],{data:function(e,c,f){return !!d.data(e,f[3]);},focusable:function(e){var c=e.nodeName.toLowerCase(),f=d.attr(e,"tabindex");if("area"===c){c=e.parentNode;f=c.name;if(!e.href||!f||c.nodeName.toLowerCase()!=="map"){return false;}e=d("img[usemap=#"+f+"]")[0];return !!e&&a(e);}return(/input|select|textarea|button|object/.test(c)?!e.disabled:"a"==c?e.href||!isNaN(f):!isNaN(f))&&a(e);},tabbable:function(e){var c=d.attr(e,"tabindex");return(isNaN(c)||c>=0)&&d(e).is(":focusable");}});d(function(){var e=document.body,c=e.appendChild(c=document.createElement("div"));d.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});d.support.minHeight=c.offsetHeight===100;d.support.selectstart="onselectstart" in c;e.removeChild(c).style.display="none";});d.extend(d.ui,{plugin:{add:function(f,c,h){f=d.ui[f].prototype;for(var g in h){f.plugins[g]=f.plugins[g]||[];f.plugins[g].push([c,h[g]]);}},call:function(f,c,h){if((c=f.plugins[c])&&f.element[0].parentNode){for(var g=0;g<c.length;g++){f.options[c[g][0]]&&c[g][1].apply(f.element,h);}}}},contains:function(e,c){return document.compareDocumentPosition?e.compareDocumentPosition(c)&16:e!==c&&e.contains(c);},hasScroll:function(e,c){if(d(e).css("overflow")==="hidden"){return false;}c=c&&c==="left"?"scrollLeft":"scrollTop";var f=false;if(e[c]>0){return true;}e[c]=1;f=e[c]>0;e[c]=0;return f;},isOverAxis:function(e,c,f){return e>c&&e<c+f;},isOver:function(f,c,l,k,j,g){return d.ui.isOverAxis(f,l,j)&&d.ui.isOverAxis(c,k,g);}});}})(jQuery);
/*!
 * jQuery UI Widget 1.8.9
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a,e){if(a.cleanData){var d=a.cleanData;a.cleanData=function(b){for(var g=0,f;(f=b[g])!=null;g++){a(f).triggerHandler("remove");}d(b);};}else{var c=a.fn.remove;a.fn.remove=function(b,f){return this.each(function(){if(!f){if(!b||a.filter(b,[this]).length){a("*",this).add([this]).each(function(){a(this).triggerHandler("remove");});}}return c.call(a(this),b,f);});};}a.widget=function(b,k,j){var h=b.split(".")[0],g;b=b.split(".")[1];g=h+"-"+b;if(!j){j=k;k=a.Widget;}a.expr[":"][g]=function(f){return !!a.data(f,b);};a[h]=a[h]||{};a[h][b]=function(f,l){arguments.length&&this._createWidget(f,l);};k=new k;k.options=a.extend(true,{},k.options);a[h][b].prototype=a.extend(true,k,{namespace:h,widgetName:b,widgetEventPrefix:a[h][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},j);a.widget.bridge(b,a[h][b]);};a.widget.bridge=function(b,f){a.fn[b]=function(l){var k=typeof l==="string",j=Array.prototype.slice.call(arguments,1),g=this;l=!k&&j.length?a.extend.apply(null,[true,l].concat(j)):l;if(k&&l.charAt(0)==="_"){return g;}k?this.each(function(){var m=a.data(this,b),h=m&&a.isFunction(m[l])?m[l].apply(m,j):m;if(h!==m&&h!==e){g=h;return false;}}):this.each(function(){var h=a.data(this,b);h?h.option(l||{})._init():a.data(this,b,new f(l,this));});return g;};};a.Widget=function(b,f){arguments.length&&this._createWidget(b,f);};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,g){a.data(g,this.widgetName,this);this.element=a(g);this.options=a.extend(true,{},this.options,this._getCreateOptions(),b);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy();});this._create();this._trigger("create");this._init();},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName];},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");},widget:function(){return this.element;},option:function(b,g){var f=b;if(arguments.length===0){return a.extend({},this.options);}if(typeof b==="string"){if(g===e){return this.options[b];}f={};f[b]=g;}this._setOptions(f);return this;},_setOptions:function(b){var f=this;a.each(b,function(h,g){f._setOption(h,g);});return this;},_setOption:function(b,f){this.options[b]=f;if(b==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f);}return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(b,k,j){var h=this.options[b];k=a.Event(k);k.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();j=j||{};if(k.originalEvent){b=a.event.props.length;for(var g;b;){g=a.event.props[--b];k[g]=k.originalEvent[g];}}this.element.trigger(k,j);return !(a.isFunction(h)&&h.call(this.element[0],k,j)===false||k.isDefaultPrevented());}};})(jQuery);
/*!
 * jQuery UI Mouse 1.8.9
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c);}).bind("click."+this.widgetName,function(c){if(true===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,h=d.which==1,g=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;if(!h||g||!this._mouseCapture(d)){return true;}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true;},this.options.delay);}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true;}}this._mouseMoveDelegate=function(b){return c._mouseMove(b);};this._mouseUpDelegate=function(b){return c._mouseUp(b);};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return d.originalEvent.mouseHandled=true;}},_mouseMove:function(b){if(a.browser.msie&&!(document.documentMode>=9)&&!b.button){return this._mouseUp(b);}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault();}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b);}return !this._mouseStarted;},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",true);this._mouseStop(b);}return false;},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance;},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});})(jQuery);(function(f){f.ui=f.ui||{};var e=/left|center|right/,d=/top|center|bottom/,b=f.fn.position,a=f.fn.offset;f.fn.position=function(c){if(!c||!c.of){return b.apply(this,arguments);}c=f.extend({},c);var l=f(c.of),r=l[0],p=(c.collision||"flip").split(" "),q=c.offset?c.offset.split(" "):[0,0],o,m,n;if(r.nodeType===9){o=l.width();m=l.height();n={top:0,left:0};}else{if(r.setTimeout){o=l.width();m=l.height();n={top:l.scrollTop(),left:l.scrollLeft()};}else{if(r.preventDefault){c.at="left top";o=m=0;n={top:c.of.pageY,left:c.of.pageX};}else{o=l.outerWidth();m=l.outerHeight();n=l.offset();}}}f.each(["my","at"],function(){var g=(c[this]||"").split(" ");if(g.length===1){g=e.test(g[0])?g.concat(["center"]):d.test(g[0])?["center"].concat(g):["center","center"];}g[0]=e.test(g[0])?g[0]:"center";g[1]=d.test(g[1])?g[1]:"center";c[this]=g;});if(p.length===1){p[1]=p[0];}q[0]=parseInt(q[0],10)||0;if(q.length===1){q[1]=q[0];}q[1]=parseInt(q[1],10)||0;if(c.at[0]==="right"){n.left+=o;}else{if(c.at[0]==="center"){n.left+=o/2;}}if(c.at[1]==="bottom"){n.top+=m;}else{if(c.at[1]==="center"){n.top+=m/2;}}n.left+=q[0];n.top+=q[1];return this.each(function(){var u=f(this),s=u.outerWidth(),k=u.outerHeight(),j=parseInt(f.curCSS(this,"marginLeft",true))||0,h=parseInt(f.curCSS(this,"marginTop",true))||0,A=s+j+(parseInt(f.curCSS(this,"marginRight",true))||0),z=k+h+(parseInt(f.curCSS(this,"marginBottom",true))||0),t=f.extend({},n),g;if(c.my[0]==="right"){t.left-=s;}else{if(c.my[0]==="center"){t.left-=s/2;}}if(c.my[1]==="bottom"){t.top-=k;}else{if(c.my[1]==="center"){t.top-=k/2;}}t.left=Math.round(t.left);t.top=Math.round(t.top);g={left:t.left-j,top:t.top-h};f.each(["left","top"],function(w,v){f.ui.position[p[w]]&&f.ui.position[p[w]][v](t,{targetWidth:o,targetHeight:m,elemWidth:s,elemHeight:k,collisionPosition:g,collisionWidth:A,collisionHeight:z,offset:q,my:c.my,at:c.at});});f.fn.bgiframe&&u.bgiframe();u.offset(f.extend(t,{using:c.using}));});};f.ui.position={fit:{left:function(c,g){var h=f(window);h=g.collisionPosition.left+g.collisionWidth-h.width()-h.scrollLeft();c.left=h>0?c.left-h:Math.max(c.left-g.collisionPosition.left,c.left);},top:function(c,g){var h=f(window);h=g.collisionPosition.top+g.collisionHeight-h.height()-h.scrollTop();c.top=h>0?c.top-h:Math.max(c.top-g.collisionPosition.top,c.top);}},flip:{left:function(c,j){if(j.at[0]!=="center"){var n=f(window);n=j.collisionPosition.left+j.collisionWidth-n.width()-n.scrollLeft();var l=j.my[0]==="left"?-j.elemWidth:j.my[0]==="right"?j.elemWidth:0,m=j.at[0]==="left"?j.targetWidth:-j.targetWidth,k=-2*j.offset[0];c.left+=j.collisionPosition.left<0?l+m+k:n>0?l+m+k:0;}},top:function(c,j){if(j.at[1]!=="center"){var n=f(window);n=j.collisionPosition.top+j.collisionHeight-n.height()-n.scrollTop();var l=j.my[1]==="top"?-j.elemHeight:j.my[1]==="bottom"?j.elemHeight:0,m=j.at[1]==="top"?j.targetHeight:-j.targetHeight,k=-2*j.offset[1];c.top+=j.collisionPosition.top<0?l+m+k:n>0?l+m+k:0;}}}};if(!f.offset.setOffset){f.offset.setOffset=function(c,j){if(/static/.test(f.curCSS(c,"position"))){c.style.position="relative";}var n=f(c),l=n.offset(),m=parseInt(f.curCSS(c,"top",true),10)||0,k=parseInt(f.curCSS(c,"left",true),10)||0;l={top:j.top-l.top+m,left:j.left-l.left+k};"using" in j?j.using.call(c,l):n.css(l);};f.fn.offset=function(c){var g=this[0];if(!g||!g.ownerDocument){return null;}if(c){return this.each(function(){f.offset.setOffset(this,c);});}return a.call(this);};}})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative";}this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit();},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this;}},_mouseCapture:function(d){var c=this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle")){return false;}this.handle=this._getHandle(d);if(!this.handle){return false;}return true;},_mouseStart:function(d){var c=this.options;this.helper=this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this;}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false;}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true;},_mouseDrag:function(d,c){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false;}this.position=c.position;}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px";}a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false;},_mouseStop:function(e){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,e);}if(this.dropped){d=this.dropped;this.dropped=false;}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original"){return false;}if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",e)!==false&&f._clear();});}else{this._trigger("stop",e)!==false&&this._clear();}return false;},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this;},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==d.target){c=true;}});return c;},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone():this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d;},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ");}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0};}if("left" in b){this.offset.click.left=b.left+this.margins.left;}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;}if("top" in b){this.offset.click.top=b.top+this.margins.top;}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop();}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0};}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode;}if(e.containment=="document"||e.containment=="window"){this.containment=[(e.containment=="document"?0:a(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(e.containment=="document"?0:a(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(e.containment=="document"?0:a(window).scrollLeft())+a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e.containment=="document"?0:a(window).scrollTop())+(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}if(!/^(document|window|parent)$/.test(e.containment)&&e.containment.constructor!=Array){var d=a(e.containment)[0];if(d){e=a(e.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}}else{if(e.containment.constructor==Array){this.containment=e.containment;}}},_convertPositionTo:function(e,d){if(!d){d=this.position;}e=e=="absolute"?1:-1;var h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(h[0].tagName);return{top:d.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:h.scrollTop())*e),left:d.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*e)};},_generatePosition:function(h){var d=this.options,m=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=/(html|body)/i.test(m[0].tagName),l=h.pageX,j=h.pageY;if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){l=this.containment[0]+this.offset.click.left;}if(h.pageY-this.offset.click.top<this.containment[1]){j=this.containment[1]+this.offset.click.top;}if(h.pageX-this.offset.click.left>this.containment[2]){l=this.containment[2]+this.offset.click.left;}if(h.pageY-this.offset.click.top>this.containment[3]){j=this.containment[3]+this.offset.click.top;}}if(d.grid){j=this.originalPageY+Math.round((j-this.originalPageY)/d.grid[1])*d.grid[1];j=this.containment?!(j-this.offset.click.top<this.containment[1]||j-this.offset.click.top>this.containment[3])?j:!(j-this.offset.click.top<this.containment[1])?j-d.grid[1]:j+d.grid[1]:j;l=this.originalPageX+Math.round((l-this.originalPageX)/d.grid[0])*d.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-d.grid[0]:l+d.grid[0]:l;}}return{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():k?0:m.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():k?0:m.scrollLeft())};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(e,d,f){f=f||this._uiHash();a.ui.plugin.call(this,e,[d,f]);if(e=="drag"){this.positionAbs=this._convertPositionTo("absolute");}return a.Widget.prototype._trigger.call(this,e,d,f);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});a.extend(a.ui.draggable,{version:"1.8.9"});a.ui.plugin.add("draggable","connectToSortable",{start:function(g,d){var k=a(this).data("draggable"),h=k.options,j=a.extend({},d,{item:k.element});k.sortables=[];a(h.connectToSortable).each(function(){var b=a.data(this,"sortable");if(b&&!b.options.disabled){k.sortables.push({instance:b,shouldRevert:b.options.revert});b._refreshItems();b._trigger("activate",g,j);}});},stop:function(e,d){var h=a(this).data("draggable"),g=a.extend({},d,{item:h.element});a.each(h.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;h.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true;}this.instance._mouseStop(e);this.instance.options.helper=this.instance.options._helper;h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"});}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",e,g);}});},drag:function(e,d){var h=a(this).data("draggable"),g=this;a.each(h.sortables,function(){this.instance.positionAbs=h.positionAbs;this.instance.helperProportions=h.helperProportions;this.instance.offset.click=h.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0];};e.target=this.instance.currentItem[0];this.instance._mouseCapture(e,true);this.instance._mouseStart(e,true,true);this.instance.offset.click.top=h.offset.click.top;this.instance.offset.click.left=h.offset.click.left;this.instance.offset.parent.left-=h.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=h.offset.parent.top-this.instance.offset.parent.top;h._trigger("toSortable",e);h.dropped=this.instance.element;h.currentItem=h.element;this.instance.fromOutside=h;}this.instance.currentItem&&this.instance._mouseDrag(e);}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",e,this.instance._uiHash(this.instance));this.instance._mouseStop(e,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();h._trigger("fromSortable",e);h.dropped=false;}}});}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor")){c._cursor=d.css("cursor");}d.css("cursor",c.cursor);},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor);}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=a(this).data("draggable").options;a(b.iframeFix===true?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body");});},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity")){c._opacity=d.css("opacity");}d.css("opacity",c.opacity);},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity);}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset();}},drag:function(e){var d=a(this).data("draggable"),h=d.options,g=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!h.axis||h.axis!="x"){if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-e.pageY<h.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop+h.scrollSpeed;}else{if(e.pageY-d.overflowOffset.top<h.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop-h.scrollSpeed;}}}if(!h.axis||h.axis!="y"){if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-e.pageX<h.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft+h.scrollSpeed;}else{if(e.pageX-d.overflowOffset.left<h.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft-h.scrollSpeed;}}}}else{if(!h.axis||h.axis!="x"){if(e.pageY-a(document).scrollTop()<h.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()-h.scrollSpeed);}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<h.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()+h.scrollSpeed);}}}if(!h.axis||h.axis!="y"){if(e.pageX-a(document).scrollLeft()<h.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()-h.scrollSpeed);}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<h.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()+h.scrollSpeed);}}}}g!==false&&a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,e);}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var e=a(this),b=e.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:b.top,left:b.left});});},drag:function(N,M){for(var L=a(this).data("draggable"),J=L.options,K=J.snapTolerance,I=M.offset.left,B=I+L.helperProportions.width,C=M.offset.top,A=C+L.helperProportions.height,H=L.snapElements.length-1;H>=0;H--){var G=L.snapElements[H].left,E=G+L.snapElements[H].width,F=L.snapElements[H].top,D=F+L.snapElements[H].height;if(G-K<I&&I<E+K&&F-K<C&&C<D+K||G-K<I&&I<E+K&&F-K<A&&A<D+K||G-K<B&&B<E+K&&F-K<C&&C<D+K||G-K<B&&B<E+K&&F-K<A&&A<D+K){if(J.snapMode!="inner"){var z=Math.abs(F-A)<=K,w=Math.abs(D-C)<=K,v=Math.abs(G-B)<=K,u=Math.abs(E-I)<=K;if(z){M.position.top=L._convertPositionTo("relative",{top:F-L.helperProportions.height,left:0}).top-L.margins.top;}if(w){M.position.top=L._convertPositionTo("relative",{top:D,left:0}).top-L.margins.top;}if(v){M.position.left=L._convertPositionTo("relative",{top:0,left:G-L.helperProportions.width}).left-L.margins.left;}if(u){M.position.left=L._convertPositionTo("relative",{top:0,left:E}).left-L.margins.left;}}var d=z||w||v||u;if(J.snapMode!="outer"){z=Math.abs(F-C)<=K;w=Math.abs(D-A)<=K;v=Math.abs(G-I)<=K;u=Math.abs(E-B)<=K;if(z){M.position.top=L._convertPositionTo("relative",{top:F,left:0}).top-L.margins.top;}if(w){M.position.top=L._convertPositionTo("relative",{top:D-L.helperProportions.height,left:0}).top-L.margins.top;}if(v){M.position.left=L._convertPositionTo("relative",{top:0,left:G}).left-L.margins.left;}if(u){M.position.left=L._convertPositionTo("relative",{top:0,left:E-L.helperProportions.width}).left-L.margins.left;}}if(!L.snapElements[H].snapping&&(z||w||v||u||d)){L.options.snap.snap&&L.options.snap.snap.call(L.element,N,a.extend(L._uiHash(),{snapItem:L.snapElements[H].item}));}L.snapElements[H].snapping=z||w||v||u||d;}else{L.snapElements[H].snapping&&L.options.snap.release&&L.options.snap.release.call(L.element,N,a.extend(L._uiHash(),{snapItem:L.snapElements[H].item}));L.snapElements[H].snapping=false;}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(e,b){return(parseInt(a(e).css("zIndex"),10)||0)-(parseInt(a(b).css("zIndex"),10)||0);});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(b){this.style.zIndex=c+b;});this[0].style.zIndex=c+d.length;}}});a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex")){c._zIndex=d.css("zIndex");}d.css("zIndex",c.zIndex);},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex);}});})(jQuery);(function(a){a.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var d=this,c=this.element[0].ownerDocument,e;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(f){if(!(d.options.disabled||d.element.attr("readonly"))){e=false;var b=a.ui.keyCode;switch(f.keyCode){case b.PAGE_UP:d._move("previousPage",f);break;case b.PAGE_DOWN:d._move("nextPage",f);break;case b.UP:d._move("previous",f);f.preventDefault();break;case b.DOWN:d._move("next",f);f.preventDefault();break;case b.ENTER:case b.NUMPAD_ENTER:if(d.menu.active){e=true;f.preventDefault();}case b.TAB:if(!d.menu.active){return;}d.menu.select(f);break;case b.ESCAPE:d.element.val(d.term);d.close(f);break;default:clearTimeout(d.searching);d.searching=setTimeout(function(){if(d.term!=d.element.val()){d.selectedItem=null;d.search(null,f);}},d.options.delay);break;}}}).bind("keypress.autocomplete",function(b){if(e){e=false;b.preventDefault();}}).bind("focus.autocomplete",function(){if(!d.options.disabled){d.selectedItem=null;d.previous=d.element.val();}}).bind("blur.autocomplete",function(b){if(!d.options.disabled){clearTimeout(d.searching);d.closing=setTimeout(function(){d.close(b);d._change(b);},150);}});this._initSource();this.response=function(){return d._response.apply(d,arguments);};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(f){var b=d.menu.element[0];a(f.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(h){h.target!==d.element[0]&&h.target!==b&&!a.ui.contains(b,h.target)&&d.close();});},1);setTimeout(function(){clearTimeout(d.closing);},13);}).menu({focus:function(f,b){b=b.item.data("item.autocomplete");false!==d._trigger("focus",f,{item:b})&&/^key/.test(f.originalEvent.type)&&d.element.val(b.value);},selected:function(k,j){var f=j.item.data("item.autocomplete"),b=d.previous;if(d.element[0]!==c.activeElement){d.element.focus();d.previous=b;setTimeout(function(){d.previous=b;d.selectedItem=f;},1);}false!==d._trigger("select",k,{item:f})&&d.element.val(f.value);d.term=d.element.val();d.close(k);d.selectedItem=f;},blur:function(){d.menu.element.is(":visible")&&d.element.val()!==d.term&&d.element.val(d.term);}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe();},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this);},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d==="source"&&this._initSource();if(d==="appendTo"){this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]);}d==="disabled"&&c&&this.xhr&&this.xhr.abort();},_initSource:function(){var d=this,c,e;if(a.isArray(this.options.source)){c=this.options.source;this.source=function(f,b){b(a.ui.autocomplete.filter(c,f.term));};}else{if(typeof this.options.source==="string"){e=this.options.source;this.source=function(f,b){d.xhr&&d.xhr.abort();d.xhr=a.ajax({url:e,data:f,dataType:"json",success:function(l,k,j){j===d.xhr&&b(l);d.xhr=null;},error:function(h){h===d.xhr&&b([]);d.xhr=null;}});};}else{this.source=this.options.source;}}},search:function(d,c){d=d!=null?d:this.element.val();this.term=this.element.val();if(d.length<this.options.minLength){return this.close(c);}clearTimeout(this.closing);if(this._trigger("search",c)!==false){return this._search(d);}},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:b},this.response);},_response:function(b){if(!this.options.disabled&&b&&b.length){b=this._normalize(b);this._suggest(b);this._trigger("open");}else{this.close();}this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading");},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",b);}},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem});},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b;}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c};}return a.extend({label:c.label||c.value,value:c.value||c.label},c);});},_suggest:function(d){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,d);this.menu.deactivate();this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth(),this.element.outerWidth()));},_renderMenu:function(d,c){var e=this;a.each(c,function(f,b){e._renderItem(d,b);});},_renderItem:function(d,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(d);},_move:function(d,c){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);this.menu.deactivate();}else{this.menu[d](c);}}else{this.search(null,c);}},widget:function(){return this.menu.element;}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");},filter:function(d,c){var e=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(d,function(b){return e.test(b.label||b.value||b);});}});})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();b.select(c);}});this.refresh();},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent());}).mouseleave(function(){b.deactivate();});},activate:function(g,d){this.deactivate();if(this.hasScroll()){var h=d.offset().top-this.element.offset().top,k=this.element.attr("scrollTop"),j=this.element.height();if(h<0){this.element.attr("scrollTop",k+h);}else{h>=j&&this.element.attr("scrollTop",k+h-j+d.height());}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",g,{item:d});},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null;}},next:function(b){this.move("next",".ui-menu-item:first",b);},previous:function(b){this.move("prev",".ui-menu-item:last",b);},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},move:function(d,c,e){if(this.active){d=this.active[d+"All"](".ui-menu-item").eq(0);d.length?this.activate(e,d):this.activate(e,this.element.children(c));}else{this.activate(e,this.element.children(c));}},nextPage:function(e){if(this.hasScroll()){if(!this.active||this.last()){this.activate(e,this.element.children(".ui-menu-item:first"));}else{var d=this.active.offset().top,g=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-d-g+a(this).height();return b<10&&b>-10;});h.length||(h=this.element.children(".ui-menu-item:last"));this.activate(e,h);}}else{this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"));}},previousPage:function(d){if(this.hasScroll()){if(!this.active||this.first()){this.activate(d,this.element.children(".ui-menu-item:last"));}else{var c=this.active.offset().top,e=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+e-a(this).height();return b<10&&b>-10;});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(d,result);}}else{this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"));}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight");},select:function(b){this._trigger("selected",b,{item:this.active});}});})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1;}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000));}else{f=m.expires;}e="; expires="+f.toUTCString();}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("");}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break;}}}return d;}};(function(){var a=false,b=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,j){return function(){var l=this._super;this._super=f[h];var k=j.apply(this,arguments);this._super=l;return k;};})(d,g[d]):g[d];}function c(){if(!a&&this.init){this.init.apply(this,arguments);}}c.prototype=e;c.constructor=c;c.extend=arguments.callee;return c;};})();(function(Z,ac){function aa(){}function I(a){ab=[a];}function R(a){Y.insertBefore(a,Y.firstChild);}function S(a,c,b){return a&&a.apply(c.context||c,b);}function T(a){return/\?/.test(a)?"&":"?";}var Q="async",J="charset",M="",N="error",K="_jqjsp",F="on",P=F+"click",O=F+N,ad=F+"load",V=F+"readystatechange",C="removeChild",X="<script/>",G="success",D="timeout",E=Z.browser,Y=Z("head")[0]||document.documentElement,H={},U=0,ab,W={callback:K,url:location.href};function L(b){b=Z.extend({},W,b);var d=b.complete,q=b.dataFilter,h=b.callbackParameter,c=b.callback,o=b.cache,l=b.pageCache,m=b.charset,a=b.url,j=b.data,e=b.timeout,f,k=0,n=aa;b.abort=function(){!k++&&n();};if(S(b.beforeSend,b,[b])===false||k){return b;}a=a||M;j=j?((typeof j)=="string"?j:Z.param(j,b.traditional)):M;a+=j?(T(a)+j):M;h&&(a+=T(a)+encodeURIComponent(h)+"=?");!o&&!l&&(a+=T(a)+"_"+(new Date()).getTime()+"=");a=a.replace(/=\?(&|$)/,"="+c+"$1");function g(r){!k++&&ac(function(){n();l&&(H[a]={s:[r]});q&&(r=q.apply(b,[r]));S(b.success,b,[r,G]);S(d,b,[b,G]);},0);}function p(r){!k++&&ac(function(){n();l&&r!=D&&(H[a]=r);S(b.error,b,[b,r]);S(d,b,[b,r]);},0);}l&&(f=H[a])?(f.s?g(f.s[0]):p(f)):ac(function(t,u,s){if(!k){s=e>0&&ac(function(){p(D);},e);n=function(){s&&clearTimeout(s);t[V]=t[P]=t[ad]=t[O]=null;Y[C](t);u&&Y[C](u);};window[c]=I;t=Z(X)[0];t.id=K+U++;if(m){t[J]=m;}function r(v){(t[P]||aa)();v=ab;ab=undefined;v?g(v[0]):p(N);}if(E.msie){t.event=P;t.htmlFor=t.id;t[V]=function(){/loaded|complete/.test(t.readyState)&&r();};}else{t[O]=t[ad]=r;E.opera?((u=Z(X)[0]).text="jQuery('#"+t.id+"')[0]."+O+"()"):t[Q]=Q;}t.src=a;R(t);u&&R(u);}},0);return b;}L.setup=function(a){Z.extend(W,a);};Z.jsonp=L;})(jQuery,setTimeout);var RecaptchaTemplates={};RecaptchaTemplates.VertHtml='<table id="recaptcha_table" class="recaptchatable" > <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_image" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" autocorrect="off" autocapitalize="off" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ';RecaptchaTemplates.CleanCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px;padding:7px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto;border:1px solid #dfdfdf!important}.recaptchatable a img{border:0}.recaptchatable a,.recaptchatable a:hover{outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{border:1px solid #dfdfdf!important;margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{font-size:11pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em;border:1px solid #dfdfdf!important}.recaptcha_error_text{color:red}";RecaptchaTemplates.CleanHtml='<table id="recaptcha_table" class="recaptchatable"> <tr height="73"> <td class=\'recaptcha_image_cell\' width="302"><center><div id="recaptcha_image"></div></center></td> <td style="padding: 10px 7px 7px 7px;"> <a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="18" alt="" /></a> <a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="15" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="15" alt=""/></a> <a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a> </td> <td style="padding: 18px 7px 18px 7px;"> <img id=\'recaptcha_logo\' alt="" width="71" height="36" /> </td> </tr> <tr> <td style="padding-left: 7px;"> <div class="recaptcha_input_area" style="padding-top: 2px; padding-bottom: 7px;"> <input style="border: 1px solid #3c3c3c; width: 302px;" name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td></td> <td style="padding: 4px 7px 12px 7px;"> <img id="recaptcha_tagline" width="71" height="17" /> </td> </tr> </table> ';RecaptchaTemplates.ContextHtml='<table id="recaptcha_table" class="recaptchatable"> <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_context" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ';RecaptchaTemplates.VertCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url('IMGROOT/sprite.png') 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url('IMGROOT/sprite.png') -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url('IMGROOT/sprite.png') -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url('IMGROOT/sprite.png') 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url('IMGROOT/sprite.png') -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url('IMGROOT/sprite.png') -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url('IMGROOT/sprite.png') -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url('IMGROOT/sprite.png') -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url('IMGROOT/sprite.png') -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url('IMGROOT/sprite.png') -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url('IMGROOT/sprite.png') -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:146px!important;height:45px!important;margin-left:20px!important;margin-right:5px!important;margin-top:4px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:145px!important;position:absolute!important;bottom:7px!important;padding:0!important;margin:0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em}#recaptcha_instructions_error{color:red!important}";var RecaptchaStr_en={visual_challenge:"Get a visual challenge",audio_challenge:"Get an audio challenge",refresh_btn:"Get a new challenge",instructions_visual:"Type the two words:",instructions_context:"Type the words in the boxes:",instructions_audio:"Type what you hear:",help_btn:"Help",play_again:"Play sound again",cant_hear_this:"Download sound as MP3",incorrect_try_again:"Incorrect. Try again.",image_alt_text:"reCAPTCHA challenge image"},RecaptchaStr_af={visual_challenge:"Kry 'n visuele verifi\u00ebring",audio_challenge:"Kry 'n klankverifi\u00ebring",refresh_btn:"Kry 'n nuwe verifi\u00ebring",instructions_visual:"Tik die twee woorde:",instructions_context:"Tik die woorde in die kassies:",instructions_audio:"Tik wat jy hoor:",help_btn:"Hulp",play_again:"Speel geluid weer",cant_hear_this:"Laai die klank af as MP3",incorrect_try_again:"Verkeerd. Probeer weer.",image_alt_text:"reCAPTCHA-verifieerprent"},RecaptchaStr_am={visual_challenge:"\u12e8\u12a5\u12ed\u1273 \u1270\u130b\u1323\u121a \u12a0\u130d\u129d",audio_challenge:"\u120c\u120b \u12a0\u12f2\u1235 \u12e8\u12f5\u121d\u133d \u1325\u12eb\u1244 \u12ed\u1245\u1228\u1265",refresh_btn:"\u120c\u120b \u12a0\u12f2\u1235 \u1325\u12eb\u1244 \u12ed\u1245\u1228\u1265",instructions_visual:"\u12a5\u1295\u12da\u1205\u1295 \u1201\u1208\u1275 \u1243\u120b\u1275 \u1270\u12ed\u1265 \u1366",instructions_context:"\u1260\u1233\u1325\u1296\u1279 \u12cd\u1235\u1325 \u1243\u120b\u1276\u1279\u1295 \u1270\u12ed\u1265\u1366",instructions_audio:"\u12e8\u121d\u1275\u1230\u121b\u12cd\u1295 \u1270\u12ed\u1265\u1361-",help_btn:"\u12a5\u1308\u12db",play_again:"\u12f5\u121d\u1339\u1295 \u12a5\u1295\u12f0\u1308\u1293 \u12a0\u132b\u12cd\u1275",cant_hear_this:"\u12f5\u121d\u1339\u1295 \u1260MP3 \u1245\u122d\u133d \u12a0\u12cd\u122d\u12f5",incorrect_try_again:"\u1275\u12ad\u12ad\u120d \u12a0\u12ed\u12f0\u1208\u121d\u1362 \u12a5\u1295\u12f0\u1308\u1293 \u121e\u12ad\u122d\u1362",image_alt_text:"reCAPTCHA \u121d\u1235\u120d \u130d\u1320\u121d"},RecaptchaStr_ar={visual_challenge:"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u062a\u062d\u062f\u064d \u0645\u0631\u0626\u064a",audio_challenge:"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u062a\u062d\u062f\u064d \u0635\u0648\u062a\u064a",refresh_btn:"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u062a\u062d\u062f\u064d \u062c\u062f\u064a\u062f",instructions_visual:"\u0627\u0643\u062a\u0628 \u0627\u0644\u0643\u0644\u0645\u062a\u064a\u0646:",instructions_context:"\u0627\u0643\u062a\u0628 \u0627\u0644\u0643\u0644\u0645\u0627\u062a \u0641\u064a \u0627\u0644\u0645\u0631\u0628\u0639\u0627\u062a:",instructions_audio:"\u0627\u0643\u062a\u0628 \u0645\u0627 \u062a\u0633\u0645\u0639\u0647:",help_btn:"\u0645\u0633\u0627\u0639\u062f\u0629",play_again:"\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0635\u0648\u062a \u0645\u0631\u0629 \u0623\u062e\u0631\u0649",cant_hear_this:"\u062a\u0646\u0632\u064a\u0644 \u0627\u0644\u0635\u0648\u062a \u0628\u062a\u0646\u0633\u064a\u0642 MP3",incorrect_try_again:"\u063a\u064a\u0631 \u0635\u062d\u064a\u062d. \u0623\u0639\u062f \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629.",image_alt_text:"\u0635\u0648\u0631\u0629 \u0627\u0644\u062a\u062d\u062f\u064a \u0645\u0646 reCAPTCHA"},RecaptchaStr_bg={visual_challenge:"\u041f\u043e\u043b\u0443\u0447\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0438\u0437\u0443\u0430\u043b\u043d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430",audio_challenge:"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0430\u0443\u0434\u0438\u043e\u0442\u0435\u0441\u0442",refresh_btn:"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u043d\u043e\u0432 \u0442\u0435\u0441\u0442",instructions_visual:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0434\u0432\u0435\u0442\u0435 \u0434\u0443\u043c\u0438:",instructions_context:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0434\u0443\u043c\u0438\u0442\u0435:",instructions_audio:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0447\u0443\u0442\u043e\u0442\u043e:",help_btn:"\u041f\u043e\u043c\u043e\u0449",play_again:"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u043f\u0443\u0441\u043a\u0430\u043d\u0435 \u043d\u0430 \u0437\u0432\u0443\u043a\u0430",cant_hear_this:"\u0418\u0437\u0442\u0435\u0433\u043b\u044f\u043d\u0435 \u043d\u0430 \u0437\u0432\u0443\u043a\u0430 \u0432\u044a\u0432 \u0444\u043e\u0440\u043c\u0430\u0442 MP3",incorrect_try_again:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u043d\u043e. \u041e\u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e.",image_alt_text:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\u0442\u0430 \u0441 reCAPTCHA"},RecaptchaStr_bn={visual_challenge:"\u098f\u0995\u099f\u09bf \u09a6\u09c3\u09b6\u09cd\u09af\u09ae\u09be\u09a8 \u09aa\u09cd\u09b0\u09a4\u09bf\u09a6\u09cd\u09ac\u09a8\u09cd\u09a6\u09cd\u09ac\u09bf\u09a4\u09be \u09aa\u09be\u09a8",audio_challenge:"\u098f\u0995\u099f\u09bf \u0985\u09a1\u09bf\u0993 \u09aa\u09cd\u09b0\u09a4\u09bf\u09a6\u09cd\u09ac\u09a8\u09cd\u09a6\u09cd\u09ac\u09bf\u09a4\u09be  \u09aa\u09be\u09a8",refresh_btn:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09aa\u09cd\u09b0\u09a4\u09bf\u09a6\u09cd\u09ac\u09a8\u09cd\u09a6\u09cd\u09ac\u09bf\u09a4\u09be  \u09aa\u09be\u09a8",instructions_visual:"\u09b6\u09ac\u09cd\u09a6 \u09a6\u09c1\u099f\u09bf \u09b2\u09bf\u0996\u09c1\u09a8:",instructions_context:"\u09ac\u09be\u0995\u09cd\u09b8\u09c7 \u09b6\u09ac\u09cd\u09a6\u0997\u09c1\u09b2\u09bf \u099f\u09be\u0987\u09aa \u0995\u09b0\u09c1\u09a8:",instructions_audio:"\u0986\u09aa\u09a8\u09bf \u09af\u09be \u09b6\u09c1\u09a8\u099b\u09c7\u09a8 \u09a4\u09be \u09b2\u09bf\u0996\u09c1\u09a8:",help_btn:"\u09b8\u09b9\u09be\u09df\u09a4\u09be",play_again:"\u0986\u09ac\u09be\u09b0 \u09b8\u09be\u0989\u09a8\u09cd\u09a1 \u09aa\u09cd\u09b2\u09c7 \u0995\u09b0\u09c1\u09a8",cant_hear_this:"MP3 \u09b0\u09c2\u09aa\u09c7 \u09b6\u09ac\u09cd\u09a6 \u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1 \u0995\u09b0\u09c1\u09a8",incorrect_try_again:"\u09ac\u09c7\u09a0\u09bf\u0995\u09f7 \u0986\u09ac\u09be\u09b0 \u099a\u09c7\u09b7\u09cd\u099f\u09be \u0995\u09b0\u09c1\u09a8\u09f7",image_alt_text:"reCAPTCHA \u099a\u09cd\u09af\u09be\u09b2\u09c7\u099e\u09cd\u099c \u099a\u09bf\u09a4\u09cd\u09b0"},RecaptchaStr_ca={visual_challenge:"Obt\u00e9n un repte visual",audio_challenge:"Obteniu una prova d'\u00e0udio",refresh_btn:"Obteniu una prova nova",instructions_visual:"Escriviu les dues paraules:",instructions_context:"Escriviu les paraules dels quadres:",instructions_audio:"Escriviu el que escolteu:",help_btn:"Ajuda",play_again:"Torna a reproduir el so",cant_hear_this:"Baixa el so com a MP3",incorrect_try_again:"No \u00e9s correcte. Torna-ho a provar.",image_alt_text:"Imatge del repte de reCAPTCHA"},RecaptchaStr_cs={visual_challenge:"Zobrazit vizu\u00e1ln\u00ed podobu v\u00fdrazu",audio_challenge:"P\u0159ehr\u00e1t zvukovou podobu v\u00fdrazu",refresh_btn:"Zobrazit nov\u00fd v\u00fdraz",instructions_visual:"Zadejte dv\u011b slova:",instructions_context:"Zadejte slova uveden\u00e1 v pol\u00edch:",instructions_audio:"Napi\u0161te, co jste sly\u0161eli:",help_btn:"N\u00e1pov\u011bda",play_again:"Znovu p\u0159ehr\u00e1t zvuk",cant_hear_this:"St\u00e1hnout zvuk ve form\u00e1tu MP3",incorrect_try_again:"\u0160patn\u011b. Zkuste to znovu.",image_alt_text:"Obr\u00e1zek reCAPTCHA"},RecaptchaStr_da={visual_challenge:"Hent en visuel udfordring",audio_challenge:"Hent en lydudfordring",refresh_btn:"Hent en ny udfordring",instructions_visual:"Indtast de to ord:",instructions_context:"Indtast ordene i felterne:",instructions_audio:"Indtast det, du h\u00f8rer:",help_btn:"Hj\u00e6lp",play_again:"Afspil lyden igen",cant_hear_this:"Download lyd som MP3",incorrect_try_again:"Forkert. Pr\u00f8v igen.",image_alt_text:"reCAPTCHA-udfordringsbillede"},RecaptchaStr_de={visual_challenge:"Captcha abrufen",audio_challenge:"Audio-Captcha abrufen",refresh_btn:"Neues Captcha abrufen",instructions_visual:"Geben Sie die 2 W\u00f6rter ein:",instructions_context:"Worte aus den Feldern eingeben:",instructions_audio:"Geben Sie das Geh\u00f6rte ein:",help_btn:"Hilfe",play_again:"Wort erneut abspielen",cant_hear_this:"Wort als MP3 herunterladen",incorrect_try_again:"Falsch. Bitte versuchen Sie es erneut.",image_alt_text:"reCAPTCHA-Bild"},RecaptchaStr_el={visual_challenge:"\u039f\u03c0\u03c4\u03b9\u03ba\u03ae \u03c0\u03c1\u03cc\u03ba\u03bb\u03b7\u03c3\u03b7",audio_challenge:"\u0397\u03c7\u03b7\u03c4\u03b9\u03ba\u03ae \u03c0\u03c1\u03cc\u03ba\u03bb\u03b7\u03c3\u03b7",refresh_btn:"\u039d\u03ad\u03b1 \u03c0\u03c1\u03cc\u03ba\u03bb\u03b7\u03c3\u03b7",instructions_visual:"\u03a0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03ae\u03c3\u03c4\u03b5 \u03c4\u03b9\u03c2 \u03bb\u03ad\u03be\u03b5\u03b9\u03c2:",instructions_context:"\u03a0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03ae\u03c3\u03c4\u03b5 \u03c4\u03b9\u03c2 \u03bb\u03ad\u03be\u03b5\u03b9\u03c2:",instructions_audio:"\u03a0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03ae\u03c3\u03c4\u03b5 \u03cc\u03c4\u03b9 \u03b1\u03ba\u03bf\u03cd\u03c4\u03b5:",help_btn:"\u0392\u03bf\u03ae\u03b8\u03b5\u03b9\u03b1",play_again:"\u0391\u03bd\u03b1\u03c0\u03b1\u03c1\u03b1\u03b3\u03c9\u03b3\u03ae \u03ae\u03c7\u03bf\u03c5 \u03be\u03b1\u03bd\u03ac",cant_hear_this:"\u039b\u03ae\u03c8\u03b7 \u03ae\u03c7\u03bf\u03c5 \u03c9\u03c2 \u039c\u03a13",incorrect_try_again:"\u039b\u03ac\u03b8\u03bf\u03c2. \u0394\u03bf\u03ba\u03b9\u03bc\u03ac\u03c3\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac.",image_alt_text:"\u0395\u03b9\u03ba\u03cc\u03bd\u03b1 \u03c0\u03c1\u03cc\u03ba\u03bb\u03b7\u03c3\u03b7\u03c2 reCAPTCHA"},RecaptchaStr_es={visual_challenge:"Obtener una pista visual",audio_challenge:"Obtener una pista sonora",refresh_btn:"Obtener una pista nueva",instructions_visual:"Escribe las dos palabras:",instructions_context:"Escribe las palabras de los cuadros:",instructions_audio:"Escribe lo que oigas:",help_btn:"Ayuda",play_again:"Volver a reproducir el sonido",cant_hear_this:"Descargar el sonido en MP3",incorrect_try_again:"Incorrecto. Vu\u00e9lvelo a intentar.",image_alt_text:"Pista de imagen reCAPTCHA"},RecaptchaStr_es_419={visual_challenge:"Enfrentar un desaf\u00edo visual",audio_challenge:"Enfrentar un desaf\u00edo de audio",refresh_btn:"Enfrentar un nuevo desaf\u00edo",instructions_visual:"Tipea las dos palabras.",instructions_context:"Tipea las palabras en los cuadros",instructions_audio:"Tipea lo que escuchas:",help_btn:"Ayuda",play_again:"Reproducir sonido de nuevo",cant_hear_this:"Descargar sonido en formato MP3",incorrect_try_again:"Incorrecto. Vuelve a intentarlo.",image_alt_text:"Imagen del desaf\u00edo de la reCAPTCHA"},RecaptchaStr_et={visual_challenge:"Kuva kuvap\u00f5hine robotil\u00f5ks",audio_challenge:"Kuva helip\u00f5hine robotil\u00f5ks",refresh_btn:"Kuva uus robotil\u00f5ks",instructions_visual:"Tippige kaks s\u00f5na.",instructions_context:"Tippige kastides olevad s\u00f5nad.",instructions_audio:"Tippige, mida kuulete.",help_btn:"Abi",play_again:"Esita heli uuesti",cant_hear_this:"Laadi heli alla MP3-vormingus",incorrect_try_again:"Vale. Proovige uuesti.",image_alt_text:"reCAPTCHA robotil\u00f5ksu kujutis"},RecaptchaStr_eu={visual_challenge:"Eskuratu ikusizko erronka",audio_challenge:"Eskuratu audio-erronka",refresh_btn:"Eskuratu erronka berria",instructions_visual:"Idatzi bi hitzak:",instructions_context:"Idatzi koadroetako hitzak:",instructions_audio:"Idatzi entzuten duzuna:",help_btn:"Laguntza",play_again:"Erreproduzitu soinua berriro",cant_hear_this:"Deskargatu soinua MP3 gisa",incorrect_try_again:"Ez da zuzena. Saiatu berriro.",image_alt_text:"reCAPTCHA erronkaren irudia"},RecaptchaStr_fa={visual_challenge:"\u062f\u0631\u06cc\u0627\u0641\u062a \u06cc\u06a9 \u0645\u0639\u0645\u0627\u06cc \u062f\u06cc\u062f\u0627\u0631\u06cc",audio_challenge:"\u062f\u0631\u06cc\u0627\u0641\u062a \u06cc\u06a9 \u0645\u0639\u0645\u0627\u06cc \u0635\u0648\u062a\u06cc",refresh_btn:"\u062f\u0631\u06cc\u0627\u0641\u062a \u06cc\u06a9 \u0645\u0639\u0645\u0627\u06cc \u062c\u062f\u06cc\u062f",instructions_visual:"\u0627\u06cc\u0646 \u062f\u0648 \u06a9\u0644\u0645\u0647 \u0631\u0627 \u062a\u0627\u06cc\u067e \u06a9\u0646\u06cc\u062f:",instructions_context:"\u0648\u0627\u0698\u0647 \u0647\u0627\u06cc \u0645\u0648\u062c\u0648\u062f \u062f\u0631 \u06a9\u0627\u062f\u0631\u0647\u0627 \u0631\u0627 \u062a\u0627\u06cc\u067e \u06a9\u0646\u06cc\u062f:",instructions_audio:"\u0622\u0646\u0686\u0647 \u0631\u0627 \u06a9\u0647 \u0645\u06cc \u0634\u0646\u0648\u06cc\u062f \u062a\u0627\u06cc\u067e \u06a9\u0646\u06cc\u062f:",help_btn:"\u0631\u0627\u0647\u0646\u0645\u0627\u06cc\u06cc",play_again:"\u067e\u062e\u0634 \u0645\u062c\u062f\u062f \u0635\u062f\u0627",cant_hear_this:"\u062f\u0627\u0646\u0644\u0648\u062f \u0635\u062f\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a MP3",incorrect_try_again:"\u0646\u0627\u062f\u0631\u0633\u062a. \u062f\u0648\u0628\u0627\u0631\u0647 \u0627\u0645\u062a\u062d\u0627\u0646 \u06a9\u0646\u06cc\u062f.",image_alt_text:""},RecaptchaStr_fi={visual_challenge:"Kuvavahvistus",audio_challenge:"\u00c4\u00e4nivahvistus",refresh_btn:"Uusi kuva",instructions_visual:"Kirjoita n\u00e4kem\u00e4si kaksi sanaa:",instructions_context:"Kirjoita n\u00e4kem\u00e4si sanat:",instructions_audio:"Kirjoita kuulemasi:",help_btn:"Ohje",play_again:"Toista \u00e4\u00e4ni uudelleen",cant_hear_this:"Lataa \u00e4\u00e4ni MP3-tiedostona",incorrect_try_again:"V\u00e4\u00e4rin. Yrit\u00e4 uudelleen.",image_alt_text:"reCAPTCHA-kuva"},RecaptchaStr_fil={visual_challenge:"Kumuha ng pagsubok na visual",audio_challenge:"Kumuha ng pagsubok na audio",refresh_btn:"Kumuha ng bagong pagsubok",instructions_visual:"I-type ang dalawang mga salita:",instructions_context:"I-type ang mga salita sa mga kahon:",instructions_audio:"I-type ang iyong narinig",help_btn:"Tulong",play_again:"I-play muli ang tunog",cant_hear_this:"I-download ang tunog bilang MP3",incorrect_try_again:"Hindi wasto. Muling subukan.",image_alt_text:"larawang panghamon ng reCAPTCHA"},RecaptchaStr_fr={visual_challenge:"Test visuel",audio_challenge:"Test audio",refresh_btn:"Nouveau test",instructions_visual:"Saisissez les deux mots :",instructions_context:"Saisissez les mots ci-dessus :",instructions_audio:"Qu'entendez-vous ?",help_btn:"Aide",play_again:"R\u00e9\u00e9couter",cant_hear_this:"T\u00e9l\u00e9charger l'audio au format MP3",incorrect_try_again:"Incorrect. Veuillez r\u00e9essayer.",image_alt_text:"Image reCAPTCHA"},RecaptchaStr_fr_ca={visual_challenge:"Obtenir un test visuel",audio_challenge:"Obtenir un test audio",refresh_btn:"Obtenir un nouveau test",instructions_visual:"Saisissez les deux mots :",instructions_context:"Tapez les mots dans les bo\u00eetes de texte\u00a0:",instructions_audio:"Qu'entendez-vous?",help_btn:"Aide",play_again:"Jouer le son de nouveau",cant_hear_this:"T\u00e9l\u00e9charger le son en format MP3",incorrect_try_again:"Erreur, essayez \u00e0 nouveau",image_alt_text:"Image reCAPTCHA"},RecaptchaStr_gl={visual_challenge:"Obter unha proba visual",audio_challenge:"Obter unha proba de audio",refresh_btn:"Obter unha proba nova",instructions_visual:"Escribe as d\u00faas palabras:",instructions_context:"Escribe as palabras nas caixas:",instructions_audio:"Escribe o que escoitas:",help_btn:"Axuda",play_again:"Reproducir o son de novo",cant_hear_this:"Descargar son como MP3",incorrect_try_again:"Incorrecto. T\u00e9ntao de novo.",image_alt_text:"Imaxe de proba de reCAPTCHA"},RecaptchaStr_gu={visual_challenge:"\u0a8f\u0a95 \u0aa6\u0ac3\u0ab6\u0acd\u0aaf\u0abe\u0aa4\u0acd\u0aae\u0a95 \u0aaa\u0aa1\u0a95\u0abe\u0ab0 \u0aae\u0ac7\u0ab3\u0ab5\u0acb",audio_challenge:"\u0a8f\u0a95 \u0a91\u0aa1\u0abf\u0a93 \u0aaa\u0aa1\u0a95\u0abe\u0ab0 \u0aae\u0ac7\u0ab3\u0ab5\u0acb",refresh_btn:"\u0a8f\u0a95 \u0aa8\u0ab5\u0acb \u0aaa\u0aa1\u0a95\u0abe\u0ab0 \u0aae\u0ac7\u0ab3\u0ab5\u0acb",instructions_visual:"\u0aac\u0ac7 \u0ab6\u0aac\u0acd\u0aa6 \u0ab2\u0a96\u0acb:",instructions_context:"\u0aac\u0ac9\u0a95\u0acd\u0ab8\u0aae\u0abe\u0a82 \u0ab6\u0aac\u0acd\u0aa6\u0acb \u0ab2\u0a96\u0acb:",instructions_audio:"\u0aa4\u0aae\u0ac7 \u0a9c\u0ac7 \u0ab8\u0abe\u0a82\u0aad\u0ab3\u0acb \u0a9b\u0acb \u0aa4\u0ac7 \u0ab2\u0a96\u0acb:",help_btn:"\u0ab8\u0ab9\u0abe\u0aaf",play_again:"\u0aa7\u0acd\u0ab5\u0aa8\u0abf \u0aab\u0ab0\u0ac0\u0aa5\u0ac0 \u0a9a\u0ab2\u0abe\u0ab5\u0acb",cant_hear_this:"MP3 \u0aa4\u0ab0\u0ac0\u0a95\u0ac7 \u0aa7\u0acd\u0ab5\u0aa8\u0abf\u0aa8\u0ac7 \u0aa1\u0abe\u0a89\u0aa8\u0ab2\u0acb\u0aa1 \u0a95\u0ab0\u0acb",incorrect_try_again:"\u0a96\u0acb\u0a9f\u0ac1\u0a82. \u0aab\u0ab0\u0ac0 \u0aaa\u0acd\u0ab0\u0aaf\u0abe\u0ab8 \u0a95\u0ab0\u0acb.",image_alt_text:"reCAPTCHA \u0aaa\u0aa1\u0a95\u0abe\u0ab0 \u0a9b\u0aac\u0ac0"},RecaptchaStr_hi={visual_challenge:"\u0915\u094b\u0908 \u0935\u093f\u091c\u0941\u0905\u0932 \u091a\u0941\u0928\u094c\u0924\u0940 \u0932\u0947\u0902",audio_challenge:"\u0915\u094b\u0908 \u0911\u0921\u093f\u092f\u094b \u091a\u0941\u0928\u094c\u0924\u0940 \u0932\u0947\u0902",refresh_btn:"\u0915\u094b\u0908 \u0928\u0908 \u091a\u0941\u0928\u094c\u0924\u0940 \u0932\u0947\u0902",instructions_visual:"\u0926\u094b \u0936\u092c\u094d\u200d\u0926 \u0932\u093f\u0916\u0947\u0902:",instructions_context:"\u0936\u092c\u094d\u200d\u0926\u094b\u0902 \u0915\u094b \u092c\u0949\u0915\u094d\u200d\u0938 \u092e\u0947\u0902 \u0932\u093f\u0916\u0947\u0902:",instructions_audio:"\u091c\u094b \u0906\u092a \u0938\u0941\u0928 \u0930\u0939\u0947 \u0939\u0948\u0902 \u0909\u0938\u0947 \u0932\u093f\u0916\u0947\u0902:",help_btn:"\u0938\u0939\u093e\u092f\u0924\u093e",play_again:"\u0927\u094d\u200d\u0935\u0928\u093f \u092a\u0941\u0928: \u091a\u0932\u093e\u090f\u0902",cant_hear_this:"\u0927\u094d\u200d\u0935\u0928\u093f \u0915\u094b MP3 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0921\u093e\u0909\u0928\u0932\u094b\u0921 \u0915\u0930\u0947\u0902",incorrect_try_again:"\u0917\u0932\u0924. \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902.",image_alt_text:"reCAPTCHA \u091a\u0941\u0928\u094c\u0924\u0940 \u091b\u0935\u093f"},RecaptchaStr_hr={visual_challenge:"Dohvati vizualni upit",audio_challenge:"Dohvati zvu\u010dni upit",refresh_btn:"Dohvati novi upit",instructions_visual:"Upi\u0161ite obje rije\u010di:",instructions_context:"Upi\u0161ite rije\u010di u okvire:",instructions_audio:"Upi\u0161ite \u0161to \u010dujete:",help_btn:"Pomo\u0107",play_again:"Ponovi zvuk",cant_hear_this:"Preuzmi zvuk u MP3 formatu",incorrect_try_again:"Nije to\u010dno. Poku\u0161ajte ponovno.",image_alt_text:"Slikovni izazov reCAPTCHA"},RecaptchaStr_hu={visual_challenge:"Vizu\u00e1lis kih\u00edv\u00e1s k\u00e9r\u00e9se",audio_challenge:"Hangkih\u00edv\u00e1s k\u00e9r\u00e9se",refresh_btn:"\u00daj kih\u00edv\u00e1s k\u00e9r\u00e9se",instructions_visual:"Adja meg a k\u00e9t sz\u00f3t:",instructions_context:"\u00cdrja be a szavakat a mez\u0151kbe:",instructions_audio:"\u00cdrja le, amit hall:",help_btn:"S\u00fag\u00f3",play_again:"Hang ism\u00e9telt lej\u00e1tsz\u00e1sa",cant_hear_this:"Hang let\u00f6lt\u00e9se MP3 form\u00e1tumban",incorrect_try_again:"Hib\u00e1s. Pr\u00f3b\u00e1lkozzon \u00fajra.",image_alt_text:"reCAPTCHA ellen\u0151rz\u0151 k\u00e9p"},RecaptchaStr_hy={visual_challenge:"\u054d\u057f\u0561\u0576\u0561\u056c \u057f\u0565\u057d\u0578\u0572\u0561\u056f\u0561\u0576 \u056d\u0576\u0564\u056b\u0580",audio_challenge:"\u054d\u057f\u0561\u0576\u0561\u056c \u0571\u0561\u0575\u0576\u0561\u0575\u056b\u0576 \u056d\u0576\u0564\u056b\u0580",refresh_btn:"\u054d\u057f\u0561\u0576\u0561\u056c \u0576\u0578\u0580 \u056d\u0576\u0564\u056b\u0580",instructions_visual:"\u0544\u0578\u0582\u057f\u0584\u0561\u0563\u0580\u0565\u0584 \u0561\u0575\u057d \u0565\u0580\u056f\u0578\u0582 \u0562\u0561\u057c\u0565\u0580\u0568\u055d",instructions_context:"\u0544\u0578\u0582\u057f\u0584\u0561\u0563\u0580\u0565\u0584 \u0562\u0561\u057c\u0565\u0580\u0568 \u057f\u0578\u0582\u0583\u0565\u0580\u0578\u0582\u0574\u055d",instructions_audio:"\u0544\u0578\u0582\u057f\u0584\u0561\u0563\u0580\u0565\u0584 \u0561\u0575\u0576, \u056b\u0576\u0579 \u056c\u057d\u0578\u0582\u0574 \u0565\u0584\u055d",help_btn:"\u0555\u0563\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576",play_again:"\u0546\u057e\u0561\u0563\u0561\u0580\u056f\u0565\u056c \u0571\u0561\u0575\u0576\u0568 \u056f\u0580\u056f\u056b\u0576",cant_hear_this:"\u0532\u0565\u057c\u0576\u0565\u056c \u0571\u0561\u0575\u0576\u0568 \u0578\u0580\u057a\u0565\u057d MP3",incorrect_try_again:"\u054d\u056d\u0561\u056c \u0567: \u0553\u0578\u0580\u0571\u0565\u0584 \u056f\u0580\u056f\u056b\u0576:",image_alt_text:""},RecaptchaStr_id={visual_challenge:"Dapatkan kata pengujian berbentuk visual",audio_challenge:"Dapatkan kata pengujian berbentuk audio",refresh_btn:"Dapatkan kata pengujian baru",instructions_visual:"Ketik dua kata ini:",instructions_context:"Ketik kata di dalam kotak:",instructions_audio:"Ketik yang Anda dengar:",help_btn:"Bantuan",play_again:"Putar suara sekali lagi",cant_hear_this:"Unduh suara sebagai MP3",incorrect_try_again:"Salah. Coba lagi.",image_alt_text:"Gambar tantangan reCAPTCHA"},RecaptchaStr_is={visual_challenge:"F\u00e1 a\u00f0gangspr\u00f3f sem mynd",audio_challenge:"F\u00e1 hlj\u00f3\u00f0pr\u00f3f",refresh_btn:"F\u00e1 n\u00fdtt a\u00f0gangspr\u00f3f",instructions_visual:"Sl\u00e1\u00f0u inn \u00feessi tv\u00f6 or\u00f0:",instructions_context:"Sl\u00e1\u00f0u or\u00f0in inn \u00ed reitina:",instructions_audio:"Sl\u00e1\u00f0u inn \u00fea\u00f0 sem \u00fe\u00fa heyrir:",help_btn:"Hj\u00e1lp",play_again:"Spila hlj\u00f3\u00f0 aftur",cant_hear_this:"S\u00e6kja hlj\u00f3\u00f0 sem MP3",incorrect_try_again:"Rangt. Reyndu aftur.",image_alt_text:"mynd reCAPTCHA a\u00f0gangspr\u00f3fs"},RecaptchaStr_it={visual_challenge:"Verifica visiva",audio_challenge:"Verifica audio",refresh_btn:"Nuova verifica",instructions_visual:"Digita le due parole:",instructions_context:"Digita le parole nelle caselle:",instructions_audio:"Digita ci\u00f2 che senti:",help_btn:"Guida",play_again:"Riproduci di nuovo audio",cant_hear_this:"Scarica audio in MP3",incorrect_try_again:"Sbagliato. Riprova.",image_alt_text:"Immagine di verifica reCAPTCHA"},RecaptchaStr_iw={visual_challenge:"\u05e7\u05d1\u05dc \u05d0\u05ea\u05d2\u05e8 \u05d7\u05d6\u05d5\u05ea\u05d9",audio_challenge:"\u05e7\u05d1\u05dc \u05d0\u05ea\u05d2\u05e8 \u05e9\u05de\u05e2",refresh_btn:"\u05e7\u05d1\u05dc \u05d0\u05ea\u05d2\u05e8 \u05d7\u05d3\u05e9",instructions_visual:"\u05d4\u05e7\u05dc\u05d3 \u05d0\u05ea \u05e9\u05ea\u05d9 \u05d4\u05de\u05d9\u05dc\u05d9\u05dd:",instructions_context:"\u05d4\u05e7\u05dc\u05d3 \u05d0\u05ea \u05d4\u05de\u05d9\u05dc\u05d9\u05dd \u05d1\u05ea\u05d9\u05d1\u05d5\u05ea:",instructions_audio:"\u05d4\u05e7\u05dc\u05d3 \u05d0\u05ea \u05de\u05d4 \u05e9\u05d0\u05ea\u05d4 \u05e9\u05d5\u05de\u05e2:",help_btn:"\u05e2\u05d6\u05e8\u05d4",play_again:"\u05d4\u05e4\u05e2\u05dc \u05e9\u05d5\u05d1 \u05d0\u05ea \u05d4\u05e9\u05de\u05e2",cant_hear_this:"\u05d4\u05d5\u05e8\u05d3 \u05e9\u05de\u05e2 \u05db-3MP",incorrect_try_again:"\u05e9\u05d2\u05d5\u05d9. \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1.",image_alt_text:"\u05ea\u05de\u05d5\u05e0\u05ea \u05d0\u05ea\u05d2\u05e8 \u05e9\u05dc reCAPTCHA"},RecaptchaStr_ja={visual_challenge:"\u753b\u50cf\u3067\u78ba\u8a8d\u3057\u307e\u3059",audio_challenge:"\u97f3\u58f0\u3067\u78ba\u8a8d\u3057\u307e\u3059",refresh_btn:"\u5225\u306e\u5358\u8a9e\u3067\u3084\u308a\u76f4\u3057\u307e\u3059",instructions_visual:"2 \u3064\u306e\u5358\u8a9e\u3092\u5165\u529b\u3057\u307e\u3059:",instructions_context:"\u30dc\u30c3\u30af\u30b9\u5185\u306e\u5358\u8a9e\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:",instructions_audio:"\u805e\u3053\u3048\u305f\u5358\u8a9e\u3092\u5165\u529b\u3057\u307e\u3059:",help_btn:"\u30d8\u30eb\u30d7",play_again:"\u3082\u3046\u4e00\u5ea6\u805e\u304f",cant_hear_this:"MP3 \u3067\u97f3\u58f0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",incorrect_try_again:"\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002",image_alt_text:"reCAPTCHA \u78ba\u8a8d\u7528\u753b\u50cf"},RecaptchaStr_kn={visual_challenge:"\u0ca6\u0cc3\u0cb6\u0ccd\u0caf \u0cb8\u0cb5\u0cbe\u0cb2\u0cca\u0c82\u0ca6\u0ca8\u0ccd\u0ca8\u0cc1 \u0cb8\u0ccd\u0cb5\u0cc0\u0c95\u0cb0\u0cbf\u0cb8\u0cbf",audio_challenge:"\u0c86\u0ca1\u0cbf\u0caf\u0ccb \u0cb8\u0cb5\u0cbe\u0cb2\u0cca\u0c82\u0ca6\u0ca8\u0ccd\u0ca8\u0cc1 \u0cb8\u0ccd\u0cb5\u0cc0\u0c95\u0cb0\u0cbf\u0cb8\u0cbf",refresh_btn:"\u0cb9\u0cca\u0cb8 \u0cb8\u0cb5\u0cbe\u0cb2\u0cca\u0c82\u0ca6\u0ca8\u0ccd\u0ca8\u0cc1 \u0caa\u0ca1\u0cc6\u0caf\u0cbf\u0cb0\u0cbf",instructions_visual:"\u0c8e\u0cb0\u0ca1\u0cc1 \u0caa\u0ca6\u0c97\u0cb3\u0ca8\u0ccd\u0ca8\u0cc1 \u0c9f\u0cc8\u0caa\u0ccd \u0cae\u0cbe\u0ca1\u0cbf:",instructions_context:"\u0cac\u0cbe\u0c95\u0ccd\u0cb8\u0ccd\u200c\u0ca8\u0cb2\u0ccd\u0cb2\u0cbf \u0caa\u0ca6\u0c97\u0cb3\u0ca8\u0ccd\u0ca8\u0cc1 \u0c9f\u0cc8\u0caa\u0ccd\u200c \u0cae\u0cbe\u0ca1\u0cbf:",instructions_audio:"\u0ca8\u0cbf\u0cae\u0c97\u0cc6 \u0c95\u0cc7\u0cb3\u0cbf\u0cb8\u0cc1\u0cb5\u0cc1\u0ca6\u0ca8\u0ccd\u0ca8\u0cc1 \u0c9f\u0cc8\u0caa\u0ccd\u200c \u0cae\u0cbe\u0ca1\u0cbf:",help_btn:"\u0cb8\u0cb9\u0cbe\u0caf",play_again:"\u0ca7\u0ccd\u0cb5\u0ca8\u0cbf\u0caf\u0ca8\u0ccd\u0ca8\u0cc1 \u0cae\u0ca4\u0ccd\u0ca4\u0cc6 \u0caa\u0ccd\u0cb2\u0cc7 \u0cae\u0cbe\u0ca1\u0cbf",cant_hear_this:"\u0ca7\u0ccd\u0cb5\u0ca8\u0cbf\u0caf\u0ca8\u0ccd\u0ca8\u0cc1 MP3 \u0cb0\u0cc2\u0caa\u0ca6\u0cb2\u0ccd\u0cb2\u0cbf \u0ca1\u0ccc\u0ca8\u0ccd\u200c\u0cb2\u0ccb\u0ca1\u0ccd \u0cae\u0cbe\u0ca1\u0cbf",incorrect_try_again:"\u0ca4\u0caa\u0ccd\u0caa\u0cbe\u0c97\u0cbf\u0ca6\u0cc6. \u0cae\u0ca4\u0ccd\u0ca4\u0cca\u0cae\u0ccd\u0cae\u0cc6 \u0caa\u0ccd\u0cb0\u0caf\u0ca4\u0ccd\u0ca8\u0cbf\u0cb8\u0cbf.",image_alt_text:"reCAPTCHA \u0cb8\u0cb5\u0cbe\u0cb2\u0cc1 \u0c9a\u0cbf\u0ca4\u0ccd\u0cb0"},RecaptchaStr_ko={visual_challenge:"\uadf8\ub9bc\uc73c\ub85c \ubcf4\uc548\ubb38\uc790 \ubc1b\uae30",audio_challenge:"\uc74c\uc131\uc73c\ub85c \ubcf4\uc548\ubb38\uc790 \ubc1b\uae30",refresh_btn:"\ubcf4\uc548\ubb38\uc790 \uc0c8\ub85c \ubc1b\uae30",instructions_visual:"\ub450 \ub2e8\uc5b4 \uc785\ub825:",instructions_context:"\uc785\ub825\ub780\uc5d0 \ub2e8\uc5b4 \uc785\ub825:",instructions_audio:"\uc74c\uc131 \ubcf4\uc548\ubb38\uc790 \uc785\ub825:",help_btn:"\ub3c4\uc6c0\ub9d0",play_again:"\uc74c\uc131 \ub2e4\uc2dc \ub4e3\uae30",cant_hear_this:"\uc74c\uc131\uc744 MP3\ub85c \ub2e4\uc6b4\ub85c\ub4dc",incorrect_try_again:"\ud2c0\ub838\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",image_alt_text:"reCAPTCHA \uc694\uccad \uc774\ubbf8\uc9c0"},RecaptchaStr_lt={visual_challenge:"Gauti vaizdin\u012f atpa\u017einimo test\u0105",audio_challenge:"Gauti garso atpa\u017einimo test\u0105",refresh_btn:"Gauti nauj\u0105 atpa\u017einimo test\u0105",instructions_visual:"\u012eveskite du \u017eod\u017eius:",instructions_context:"\u012eveskite \u017eod\u017eius laukeliuose:",instructions_audio:"\u012eveskite tai, k\u0105 girdite:",help_btn:"Pagalba",play_again:"Dar kart\u0105 paleisti gars\u0105",cant_hear_this:"Atsisi\u0173sti gars\u0105 kaip MP3",incorrect_try_again:"Neteisingai. Bandykite dar kart\u0105.",image_alt_text:"Testo \u201ereCAPTCHA\u201c vaizdas"},RecaptchaStr_lv={visual_challenge:"Sa\u0146emt vizu\u0101lu izaicin\u0101jumu",audio_challenge:"Sa\u0146emt audio izaicin\u0101jumu",refresh_btn:"Sa\u0146emt jaunu izaicin\u0101jumu",instructions_visual:"Ierakstiet divus v\u0101rdus:",instructions_context:"Ierakstiet v\u0101rdus lodzi\u0146os:",instructions_audio:"Ierakstiet dzirdamo:",help_btn:"Pal\u012bdz\u012bba",play_again:"V\u0113lreiz atska\u0146ot ska\u0146u",cant_hear_this:"Lejupiel\u0101d\u0113t ska\u0146u MP3\u00a0form\u0101t\u0101",incorrect_try_again:"Nepareizi. M\u0113\u0123iniet v\u0113lreiz.",image_alt_text:"reCAPTCHA izaicin\u0101juma att\u0113ls"},RecaptchaStr_ml={visual_challenge:"\u0d12\u0d30\u0d41 \u0d26\u0d43\u0d36\u0d4d\u0d2f \u0d1a\u0d32\u0d1e\u0d4d\u0d1a\u0d4d \u0d28\u0d47\u0d1f\u0d41\u0d15",audio_challenge:"\u0d12\u0d30\u0d41 \u0d13\u0d21\u0d3f\u0d2f\u0d4b \u0d1a\u0d32\u0d1e\u0d4d\u0d1a\u0d4d \u0d28\u0d47\u0d1f\u0d41\u0d15",refresh_btn:"\u0d12\u0d30\u0d41 \u0d2a\u0d41\u0d24\u0d3f\u0d2f \u0d1a\u0d32\u0d1e\u0d4d\u0d1a\u0d4d \u0d28\u0d47\u0d1f\u0d41\u0d15",instructions_visual:"\u0d30\u0d23\u0d4d\u0d1f\u0d4d \u0d2a\u0d26\u0d19\u0d4d\u0d19\u0d7e \u0d1f\u0d48\u0d2a\u0d4d\u0d2a\u0d4d \u0d1a\u0d46\u0d2f\u0d4d\u0d2f\u0d41\u0d15:",instructions_context:"\u0d2c\u0d4b\u0d15\u0d4d\u200c\u0d38\u0d41\u0d15\u0d33\u0d3f\u0d32\u0d46 \u0d2a\u0d26\u0d19\u0d4d\u0d19\u0d7e \u0d1f\u0d48\u0d2a\u0d4d\u0d2a\u0d41\u0d1a\u0d46\u0d2f\u0d4d\u0d2f\u0d41\u0d15:",instructions_audio:"\u0d15\u0d47\u0d7e\u0d15\u0d4d\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d24\u0d4d \u0d1f\u0d48\u0d2a\u0d4d\u0d2a\u0d4d \u0d1a\u0d46\u0d2f\u0d4d\u0d2f\u0d42:",help_btn:"\u0d38\u0d39\u0d3e\u0d2f\u0d02",play_again:"\u0d36\u0d2c\u0d4d\u200c\u0d26\u0d02 \u0d35\u0d40\u0d23\u0d4d\u0d1f\u0d41\u0d02 \u0d2a\u0d4d\u0d32\u0d47 \u0d1a\u0d46\u0d2f\u0d4d\u0d2f\u0d41\u0d15",cant_hear_this:"\u0d36\u0d2c\u0d4d\u200c\u0d26\u0d02 MP3 \u0d06\u0d2f\u0d3f \u0d21\u0d57\u0d7a\u0d32\u0d4b\u0d21\u0d4d \u0d1a\u0d46\u0d2f\u0d4d\u0d2f\u0d41\u0d15",incorrect_try_again:"\u0d24\u0d46\u0d31\u0d4d\u0d31\u0d3e\u0d23\u0d4d. \u0d35\u0d40\u0d23\u0d4d\u0d1f\u0d41\u0d02 \u0d36\u0d4d\u0d30\u0d2e\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d15.",image_alt_text:"reCAPTCHA \u0d1a\u0d32\u0d1e\u0d4d\u0d1a\u0d4d \u0d07\u0d2e\u0d47\u0d1c\u0d4d"},RecaptchaStr_mr={visual_challenge:"\u0926\u0943\u0936\u094d\u200d\u092f\u092e\u093e\u0928 \u0906\u0935\u094d\u0939\u093e\u0928 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u093e",audio_challenge:"\u0911\u0921\u0940\u0913 \u0906\u0935\u094d\u0939\u093e\u0928 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u093e",refresh_btn:"\u090f\u0915 \u0928\u0935\u0940\u0928 \u0906\u0935\u094d\u0939\u093e\u0928 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u093e",instructions_visual:"\u0926\u094b\u0928 \u0936\u092c\u094d\u0926 \u091f\u093e\u0907\u092a \u0915\u0930\u093e:",instructions_context:"\u092c\u0949\u0915\u094d\u200d\u0938\u0947\u0938\u092e\u0927\u0940\u0932 \u0936\u092c\u094d\u200d\u0926 \u091f\u093e\u0907\u092a \u0915\u0930\u093e:",instructions_audio:"\u0906\u092a\u0932\u094d\u092f\u093e\u0932\u093e \u091c\u0947 \u0910\u0915\u0942 \u092f\u0947\u0908\u0932 \u0924\u0947 \u091f\u093e\u0907\u092a \u0915\u0930\u093e:",help_btn:"\u092e\u0926\u0924",play_again:"\u0927\u094d\u200d\u0935\u0928\u0940 \u092a\u0941\u0928\u094d\u0939\u093e \u092a\u094d\u200d\u0932\u0947 \u0915\u0930\u093e",cant_hear_this:"MP3 \u0930\u0941\u092a\u093e\u0924 \u0927\u094d\u200d\u0935\u0928\u0940 \u0921\u093e\u0909\u0928\u0932\u094b\u0921 \u0915\u0930\u093e",incorrect_try_again:"\u0905\u092f\u094b\u0917\u094d\u200d\u092f. \u092a\u0941\u0928\u094d\u200d\u0939\u093e \u092a\u094d\u0930\u092f\u0924\u094d\u200d\u0928 \u0915\u0930\u093e.",image_alt_text:"reCAPTCHA \u0906\u0935\u094d\u200d\u0939\u093e\u0928 \u092a\u094d\u0930\u0924\u093f\u092e\u093e"},RecaptchaStr_ms={visual_challenge:"Dapatkan cabaran visual",audio_challenge:"Dapatkan cabaran audio",refresh_btn:"Dapatkan cabaran baru",instructions_visual:"Taip kedua-dua perkataan:",instructions_context:"Taip perkataan dalam kotak:",instructions_audio:"Taip apa yang didengari:",help_btn:"Bantuan",play_again:"Mainkan bunyi sekali lagi",cant_hear_this:"Muat turun bunyi sebagai MP3",incorrect_try_again:"Tidak betul. Cuba lagi.",image_alt_text:"Imej cabaran reCAPTCHA"},RecaptchaStr_nl={visual_challenge:"Een visuele uitdaging proberen",audio_challenge:"Een audio-uitdaging proberen",refresh_btn:"Een nieuwe uitdaging proberen",instructions_visual:"Typ de twee woorden:",instructions_context:"Typ de woorden in de vakken:",instructions_audio:"Typ wat u hoort:",help_btn:"Help",play_again:"Geluid opnieuw afspelen",cant_hear_this:"Geluid downloaden als MP3",incorrect_try_again:"Onjuist. Probeer het opnieuw.",image_alt_text:"reCAPTCHA-uitdagingsafbeelding"},RecaptchaStr_no={visual_challenge:"F\u00e5 en bildeutfordring",audio_challenge:"F\u00e5 en lydutfordring",refresh_btn:"F\u00e5 en ny utfordring",instructions_visual:"Skriv inn de to ordene:",instructions_context:"Skriv inn ordene i feltene:",instructions_audio:"Skriv inn det du h\u00f8rer:",help_btn:"Hjelp",play_again:"Spill av lyd p\u00e5 nytt",cant_hear_this:"Last ned lyd som MP3",incorrect_try_again:"Feil. Pr\u00f8v p\u00e5 nytt.",image_alt_text:"reCAPTCHA-utfordringsbilde"},RecaptchaStr_pl={visual_challenge:"Poka\u017c podpowied\u017a wizualn\u0105",audio_challenge:"Odtw\u00f3rz podpowied\u017a d\u017awi\u0119kow\u0105",refresh_btn:"Nowa podpowied\u017a",instructions_visual:"Wpisz oba wyrazy:",instructions_context:"Wpisz s\u0142owa wy\u015bwietlane w polach:",instructions_audio:"Wpisz us\u0142yszane s\u0142owa:",help_btn:"Pomoc",play_again:"Odtw\u00f3rz d\u017awi\u0119k ponownie",cant_hear_this:"Pobierz d\u017awi\u0119k jako plik MP3",incorrect_try_again:"Nieprawid\u0142owo. Spr\u00f3buj ponownie.",image_alt_text:"Zadanie obrazkowe reCAPTCHA"},RecaptchaStr_pt={visual_challenge:"Obter um desafio visual",audio_challenge:"Obter um desafio de \u00e1udio",refresh_btn:"Obter um novo desafio",instructions_visual:"Digite as duas palavras:",instructions_context:"Digite as palavras das caixas:",instructions_audio:"Digite o que voc\u00ea ouve:",help_btn:"Ajuda",play_again:"Reproduzir som novamente",cant_hear_this:"Fazer download do som no formato MP3",incorrect_try_again:"Incorreto. Tente novamente.",image_alt_text:"Imagem de desafio reCAPTCHA"},RecaptchaStr_pt_pt={visual_challenge:"Obter um desafio visual",audio_challenge:"Obter um desafio de \u00e1udio",refresh_btn:"Obter um novo desafio",instructions_visual:"Escreva as duas palavras:",instructions_context:"Escreva as palavras nas caixas:",instructions_audio:"Escreva o que ouvir:",help_btn:"Ajuda",play_again:"Reproduzir som novamente",cant_hear_this:"Transferir som como MP3",incorrect_try_again:"Incorreto. Tente novamente.",image_alt_text:"Imagem de desafio reCAPTCHA"},RecaptchaStr_ro={visual_challenge:"Ob\u0163ine\u0163i un cod captcha vizual",audio_challenge:"Ob\u0163ine\u0163i un cod captcha audio",refresh_btn:"Ob\u0163ine\u0163i un nou cod captcha",instructions_visual:"Introduce\u0163i cele dou\u0103 cuvinte:",instructions_context:"Introduce\u0163i cuvintele \u00een casete:",instructions_audio:"Introduce\u0163i ceea ce auzi\u0163i:",help_btn:"Ajutor",play_again:"Reda\u0163i sunetul din nou",cant_hear_this:"Desc\u0103rca\u0163i fi\u015fierul audio ca MP3",incorrect_try_again:"Incorect. \u00cencerca\u0163i din nou.",image_alt_text:"Imagine de verificare reCAPTCHA"},RecaptchaStr_ru={visual_challenge:"\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430",audio_challenge:"\u0417\u0432\u0443\u043a\u043e\u0432\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430",refresh_btn:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",instructions_visual:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u043e, \u0447\u0442\u043e \u0432\u0438\u0434\u0438\u0442\u0435:",instructions_context:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u0430:",instructions_audio:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u043e, \u0447\u0442\u043e \u0441\u043b\u044b\u0448\u0438\u0442\u0435:",help_btn:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430",play_again:"\u041f\u0440\u043e\u0441\u043b\u0443\u0448\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",cant_hear_this:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c MP3-\u0444\u0430\u0439\u043b",incorrect_try_again:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443.",image_alt_text:"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u043e \u0441\u043b\u043e\u0432\u0443 reCAPTCHA"},RecaptchaStr_sk={visual_challenge:"Zobrazi\u0165 vizu\u00e1lnu podobu",audio_challenge:"Prehra\u0165 zvukov\u00fa podobu",refresh_btn:"Zobrazi\u0165 nov\u00fd v\u00fdraz",instructions_visual:"Zadajte tieto dve slov\u00e1:",instructions_context:"Zadajte slov\u00e1 v poliach:",instructions_audio:"Zadajte, \u010do po\u010dujete:",help_btn:"Pomocn\u00edk",play_again:"Znova prehra\u0165 zvuk",cant_hear_this:"Prevzia\u0165 zvuk v podobe s\u00faboru MP3",incorrect_try_again:"Nespr\u00e1vne. Sk\u00faste to znova.",image_alt_text:"Obr\u00e1zok zadania reCAPTCHA"},RecaptchaStr_sl={visual_challenge:"Vizualni preskus",audio_challenge:"Zvo\u010dni preskus",refresh_btn:"Nov preskus",instructions_visual:"Vnesite besedi:",instructions_context:"Vnesite besede v okvir\u010dkih:",instructions_audio:"Natipkajte, kaj sli\u0161ite:",help_btn:"Pomo\u010d",play_again:"Znova predvajaj zvok",cant_hear_this:"Prenesi zvok kot MP3",incorrect_try_again:"Napa\u010dno. Poskusite znova.",image_alt_text:"Slika izziva reCAPTCHA"},RecaptchaStr_sr={visual_challenge:"\u041f\u0440\u0438\u043c\u0438\u0442\u0435 \u0432\u0438\u0437\u0443\u0435\u043b\u043d\u0438 \u0443\u043f\u0438\u0442",audio_challenge:"\u041f\u0440\u0438\u043c\u0438\u0442\u0435 \u0430\u0443\u0434\u0438\u043e \u0443\u043f\u0438\u0442",refresh_btn:"\u041f\u0440\u0438\u043c\u0438\u0442\u0435 \u043d\u043e\u0432\u0438 \u0443\u043f\u0438\u0442",instructions_visual:"\u041e\u0442\u043a\u0443\u0446\u0430\u0458\u0442\u0435 \u0434\u0432\u0435 \u0440\u0435\u0447\u0438:",instructions_context:"\u0423\u043a\u0443\u0446\u0430\u0458\u0442\u0435 \u0440\u0435\u0447\u0438 \u0443 \u043f\u043e\u0459\u0430:",instructions_audio:"\u041e\u0442\u043a\u0443\u0446\u0430\u0458\u0442\u0435 \u043e\u043d\u043e \u0448\u0442\u043e \u0447\u0443\u0458\u0435\u0442\u0435:",help_btn:"\u041f\u043e\u043c\u043e\u045b",play_again:"\u041f\u043e\u043d\u043e\u0432\u043e \u043f\u0443\u0441\u0442\u0438 \u0437\u0432\u0443\u043a",cant_hear_this:"\u041f\u0440\u0435\u0443\u0437\u043c\u0438 \u0437\u0432\u0443\u043a \u043a\u0430\u043e MP3 \u0441\u043d\u0438\u043c\u0430\u043a",incorrect_try_again:"\u041d\u0435\u0442\u0430\u0447\u043d\u043e. \u041f\u043e\u043a\u0443\u0448\u0430\u0458\u0442\u0435 \u043f\u043e\u043d\u043e\u0432\u043e.",image_alt_text:"\u0421\u043b\u0438\u043a\u0430 reCAPTCHA \u043f\u0440\u043e\u0432\u0435\u0440\u0435"},RecaptchaStr_sv={visual_challenge:"H\u00e4mta captcha i bildformat",audio_challenge:"H\u00e4mta captcha i ljudformat",refresh_btn:"H\u00e4mta ny captcha",instructions_visual:"Skriv b\u00e5da orden:",instructions_context:"Skriv orden i rutorna:",instructions_audio:"Skriv det du h\u00f6r:",help_btn:"Hj\u00e4lp",play_again:"Spela upp ljudet igen",cant_hear_this:"H\u00e4mta ljud som MP3",incorrect_try_again:"Fel. F\u00f6rs\u00f6k igen.",image_alt_text:"reCAPTCHA-bild"},RecaptchaStr_sw={visual_challenge:"Pata changamoto ya kuona",audio_challenge:"Pata changamoto ya sauti",refresh_btn:"Pata changamoto mpya",instructions_visual:"Charaza maneno mawili:",instructions_context:"Charaza maneno katika masanduku:",instructions_audio:"Charaza unachosikia:",help_btn:"Msaada",play_again:"Cheza sauti tena",cant_hear_this:"Pakua sauti kama MP3",incorrect_try_again:"Sio sahihi. Jaribu tena.",image_alt_text:"picha ya changamoto ya reCAPTCHA"},RecaptchaStr_ta={visual_challenge:"\u0baa\u0bbe\u0bb0\u0bcd\u0bb5\u0bc8 \u0b9a\u0bc7\u0bb2\u0b9e\u0bcd\u0b9a\u0bc8\u0baa\u0bcd \u0baa\u0bc6\u0bb1\u0bc1\u0b95",audio_challenge:"\u0b86\u0b9f\u0bbf\u0baf\u0bcb \u0b9a\u0bc7\u0bb2\u0b9e\u0bcd\u0b9a\u0bc8\u0baa\u0bcd \u0baa\u0bc6\u0bb1\u0bc1\u0b95",refresh_btn:"\u0baa\u0bc1\u0ba4\u0bbf\u0baf \u0b9a\u0bc7\u0bb2\u0b9e\u0bcd\u0b9a\u0bc8\u0baa\u0bcd \u0baa\u0bc6\u0bb1\u0bc1\u0b95",instructions_visual:"\u0b9a\u0bca\u0bb1\u0bcd\u0b95\u0bb3\u0bc8 \u0b9f\u0bc8\u0baa\u0bcd \u0b9a\u0bc6\u0baf\u0bcd\u0b95:",instructions_context:"\u0baa\u0bc6\u0b9f\u0bcd\u0b9f\u0bbf\u0baf\u0bbf\u0bb2\u0bcd \u0b89\u0bb3\u0bcd\u0bb3 \u0b9a\u0bca\u0bb1\u0bcd\u0b95\u0bb3\u0bc8 \u0b89\u0bb3\u0bcd\u0bb3\u0bbf\u0b9f\u0bc1\u0b95:",instructions_audio:"\u0b95\u0bc7\u0b9f\u0bcd\u0baa\u0ba4\u0bc8 \u0b9f\u0bc8\u0baa\u0bcd \u0b9a\u0bc6\u0baf\u0bcd\u0b95:",help_btn:"\u0b89\u0ba4\u0bb5\u0bbf",play_again:"\u0b92\u0bb2\u0bbf\u0baf\u0bc8 \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd \u0b87\u0baf\u0b95\u0bcd\u0b95\u0bc1",cant_hear_this:"\u0b92\u0bb2\u0bbf\u0baf\u0bc8 MP3 \u0b86\u0b95 \u0baa\u0ba4\u0bbf\u0bb5\u0bbf\u0bb1\u0b95\u0bcd\u0b95\u0bc1\u0b95",incorrect_try_again:"\u0ba4\u0bb5\u0bb1\u0bbe\u0ba9\u0ba4\u0bc1. \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd \u0bae\u0bc1\u0baf\u0bb2\u0bb5\u0bc1\u0bae\u0bcd.",image_alt_text:"reCAPTCHA \u0b9a\u0bc7\u0bb2\u0b9e\u0bcd\u0b9a\u0bcd \u0baa\u0b9f\u0bae\u0bcd"},RecaptchaStr_te={visual_challenge:"\u0c12\u0c15 \u0c26\u0c43\u0c36\u0c4d\u0c2f\u0c2e\u0c3e\u0c28 \u0c38\u0c35\u0c3e\u0c32\u0c41\u0c28\u0c41 \u0c38\u0c4d\u0c35\u0c40\u0c15\u0c30\u0c3f\u0c02\u0c1a\u0c02\u0c21\u0c3f",audio_challenge:"\u0c12\u0c15 \u0c06\u0c21\u0c3f\u0c2f\u0c4b \u0c38\u0c35\u0c3e\u0c32\u0c41\u0c28\u0c41 \u0c38\u0c4d\u0c35\u0c40\u0c15\u0c30\u0c3f\u0c02\u0c1a\u0c02\u0c21\u0c3f",refresh_btn:"\u0c15\u0c4d\u0c30\u0c4a\u0c24\u0c4d\u0c24 \u0c38\u0c35\u0c3e\u0c32\u0c41\u0c28\u0c41 \u0c38\u0c4d\u0c35\u0c40\u0c15\u0c30\u0c3f\u0c02\u0c1a\u0c02\u0c21\u0c3f",instructions_visual:"\u0c30\u0c46\u0c02\u0c21\u0c41 \u0c2a\u0c26\u0c3e\u0c32\u0c28\u0c41 \u0c1f\u0c48\u0c2a\u0c4d \u0c1a\u0c47\u0c2f\u0c02\u0c21\u0c3f:",instructions_context:"\u0c2a\u0c26\u0c3e\u0c32\u0c28\u0c41 \u0c2a\u0c46\u0c1f\u0c4d\u0c1f\u0c46\u0c32\u0c4d\u0c32\u0c4b \u0c1f\u0c48\u0c2a\u0c4d \u0c1a\u0c47\u0c2f\u0c02\u0c21\u0c3f:",instructions_audio:"\u0c2e\u0c40\u0c30\u0c41 \u0c35\u0c3f\u0c28\u0c4d\u0c28\u0c26\u0c3f \u0c1f\u0c48\u0c2a\u0c4d \u0c1a\u0c47\u0c2f\u0c02\u0c21\u0c3f:",help_btn:"\u0c38\u0c39\u0c3e\u0c2f\u0c02",play_again:"\u0c27\u0c4d\u0c35\u0c28\u0c3f\u0c28\u0c3f \u0c2e\u0c33\u0c4d\u0c32\u0c40 \u0c2a\u0c4d\u0c32\u0c47 \u0c1a\u0c47\u0c2f\u0c3f",cant_hear_this:"\u0c27\u0c4d\u0c35\u0c28\u0c3f\u0c28\u0c3f MP3 \u0c35\u0c32\u0c46 \u0c21\u0c4c\u0c28\u0c4d\u200c\u0c32\u0c4b\u0c21\u0c4d \u0c1a\u0c47\u0c2f\u0c3f",incorrect_try_again:"\u0c24\u0c2a\u0c4d\u0c2a\u0c41. \u0c2e\u0c33\u0c4d\u0c32\u0c40 \u0c2a\u0c4d\u0c30\u0c2f\u0c24\u0c4d\u0c28\u0c3f\u0c02\u0c1a\u0c02\u0c21\u0c3f.",image_alt_text:"reCAPTCHA \u0c38\u0c35\u0c3e\u0c32\u0c41 \u0c1a\u0c3f\u0c24\u0c4d\u0c30\u0c02"},RecaptchaStr_th={visual_challenge:"\u0e23\u0e31\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e17\u0e49\u0e32\u0e17\u0e32\u0e22\u0e14\u0e49\u0e32\u0e19\u0e20\u0e32\u0e1e",audio_challenge:"\u0e23\u0e31\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e17\u0e49\u0e32\u0e17\u0e32\u0e22\u0e14\u0e49\u0e32\u0e19\u0e40\u0e2a\u0e35\u0e22\u0e07",refresh_btn:"\u0e23\u0e31\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e17\u0e49\u0e32\u0e17\u0e32\u0e22\u0e43\u0e2b\u0e21\u0e48",instructions_visual:"\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e04\u0e33\u0e2a\u0e2d\u0e07\u0e04\u0e33\u0e19\u0e31\u0e49\u0e19:",instructions_context:"\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e04\u0e33\u0e19\u0e31\u0e49\u0e19\u0e43\u0e19\u0e0a\u0e48\u0e2d\u0e07\u0e19\u0e35\u0e49:",instructions_audio:"\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e2a\u0e34\u0e48\u0e07\u0e17\u0e35\u0e48\u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e22\u0e34\u0e19:",help_btn:"\u0e04\u0e27\u0e32\u0e21\u0e0a\u0e48\u0e27\u0e22\u0e40\u0e2b\u0e25\u0e37\u0e2d",play_again:"\u0e40\u0e25\u0e48\u0e19\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07",cant_hear_this:"\u0e14\u0e32\u0e27\u0e42\u0e2b\u0e25\u0e14\u0e40\u0e2a\u0e35\u0e22\u0e07\u0e40\u0e1b\u0e47\u0e19 MP3",incorrect_try_again:"\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07 \u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07",image_alt_text:"\u0e23\u0e2b\u0e31\u0e2a\u0e20\u0e32\u0e1e reCAPTCHA"},RecaptchaStr_tr={visual_challenge:"G\u00f6rsel sorgu al",audio_challenge:"Sesli sorgu al",refresh_btn:"Yeniden y\u00fckle",instructions_visual:"\u0130ki kelimeyi yaz\u0131n:",instructions_context:"Kutudaki kelimeleri yaz\u0131n:",instructions_audio:"Duydu\u011funuzu yaz\u0131n:",help_btn:"Yard\u0131m",play_again:"Sesi tekrar \u00e7al",cant_hear_this:"Sesi MP3 olarak indir",incorrect_try_again:"Yanl\u0131\u015f. Tekrar deneyin.",image_alt_text:"reCAPTCHA sorusu resmi"},RecaptchaStr_uk={visual_challenge:"\u041e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0432\u0456\u0437\u0443\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u043a\u0441\u0442",audio_challenge:"\u041e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0430\u0443\u0434\u0456\u043e\u0437\u0430\u043f\u0438\u0441",refresh_btn:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0442\u0435\u043a\u0441\u0442",instructions_visual:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0434\u0432\u0430 \u0441\u043b\u043e\u0432\u0430:",instructions_context:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u043b\u043e\u0432\u0430 \u0432 \u043f\u043e\u043b\u044f:",instructions_audio:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u043e\u0447\u0443\u0442\u0435:",help_btn:"\u0414\u043e\u0432\u0456\u0434\u043a\u0430",play_again:"\u0412\u0456\u0434\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u043f\u0438\u0441 \u0449\u0435 \u0440\u0430\u0437",cant_hear_this:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0437\u0430\u043f\u0438\u0441 \u044f\u043a MP3",incorrect_try_again:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437.",image_alt_text:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f reCAPTCHA"},RecaptchaStr_ur={visual_challenge:"\u0627\u06cc\u06a9 \u0645\u0631\u0626\u06cc \u0686\u06cc\u0644\u0646\u062c \u062d\u0627\u0635\u0644 \u06a9\u0631\u06cc\u06ba",audio_challenge:"\u0627\u06cc\u06a9 \u0622\u0688\u06cc\u0648 \u0686\u06cc\u0644\u0646\u062c \u062d\u0627\u0635\u0644 \u06a9\u0631\u06cc\u06ba",refresh_btn:"\u0627\u06cc\u06a9 \u0646\u06cc\u0627 \u0686\u06cc\u0644\u0646\u062c \u062d\u0627\u0635\u0644 \u06a9\u0631\u06cc\u06ba",instructions_visual:"\u062f\u0648 \u0627\u0644\u0641\u0627\u0638 \u0679\u0627\u0626\u067e \u06a9\u0631\u06cc\u06ba:",instructions_context:"\u0627\u0644\u0641\u0627\u0638 \u06a9\u0648 \u062e\u0627\u0646\u0648\u06ba \u0645\u06cc\u06ba \u0679\u0627\u0626\u067e \u06a9\u0631\u06cc\u06ba:",instructions_audio:"\u0622\u067e \u06a9\u0648 \u062c\u0648 \u0633\u0646\u0627\u0626\u06cc \u062f\u06cc\u062a\u0627 \u06c1\u06d2 \u0627\u0633\u06d2 \u0679\u0627\u0626\u067e \u06a9\u0631\u06cc\u06ba:",help_btn:"\u0645\u062f\u062f",play_again:"\u0622\u0648\u0627\u0632 \u062f\u0648\u0628\u0627\u0631\u06c1 \u0686\u0644\u0627\u0626\u06cc\u06ba",cant_hear_this:"\u0622\u0648\u0627\u0632 \u06a9\u0648 MP3 \u06a9\u06d2 \u0628\u0637\u0648\u0631 \u0688\u0627\u0624\u0646 \u0644\u0648\u0688 \u06a9\u0631\u06cc\u06ba",incorrect_try_again:"\u063a\u0644\u0637\u06d4 \u062f\u0648\u0628\u0627\u0631\u06c1 \u06a9\u0648\u0634\u0634 \u06a9\u0631\u06cc\u06ba\u06d4",image_alt_text:"reCAPTCHA \u0686\u06cc\u0644\u0646\u062c \u0648\u0627\u0644\u06cc \u0634\u0628\u06cc\u06c1"},RecaptchaStr_vi={visual_challenge:"Nh\u1eadn th\u1eed th\u00e1ch h\u00ecnh \u1ea3nh",audio_challenge:"Nh\u1eadn th\u1eed th\u00e1ch \u00e2m thanh",refresh_btn:"Nh\u1eadn th\u1eed th\u00e1ch m\u1edbi",instructions_visual:"Nh\u1eadp hai t\u1eeb:",instructions_context:"Nh\u1eadp c\u00e1c t\u1eeb trong c\u00e1c \u00f4:",instructions_audio:"Nh\u1eadp n\u1ed9i dung b\u1ea1n nghe th\u1ea5y:",help_btn:"Tr\u1ee3 gi\u00fap",play_again:"Ph\u00e1t l\u1ea1i \u00e2m thanh",cant_hear_this:"T\u1ea3i \u00e2m thanh xu\u1ed1ng d\u01b0\u1edbi d\u1ea1ng MP3",incorrect_try_again:"Kh\u00f4ng ch\u00ednh x\u00e1c. H\u00e3y th\u1eed l\u1ea1i.",image_alt_text:"H\u00ecnh x\u00e1c th\u1ef1c reCAPTCHA"},RecaptchaStr_zh_cn={visual_challenge:"\u6536\u5230\u4e00\u4e2a\u89c6\u9891\u9080\u8bf7",audio_challenge:"\u6362\u4e00\u7ec4\u97f3\u9891\u9a8c\u8bc1\u7801",refresh_btn:"\u6362\u4e00\u7ec4\u9a8c\u8bc1\u7801",instructions_visual:"\u8bf7\u952e\u5165\u8fd9\u4e24\u4e2a\u8bcd\uff1a",instructions_context:"\u952e\u5165\u6846\u4e2d\u663e\u793a\u7684\u5b57\u8bcd\uff1a",instructions_audio:"\u8bf7\u952e\u5165\u60a8\u542c\u5230\u7684\u5185\u5bb9\uff1a",help_btn:"\u5e2e\u52a9",play_again:"\u91cd\u65b0\u64ad\u653e",cant_hear_this:"\u4ee5 MP3 \u683c\u5f0f\u4e0b\u8f7d\u58f0\u97f3",incorrect_try_again:"\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u8bd5\u3002",image_alt_text:"reCAPTCHA \u9a8c\u8bc1\u56fe\u7247"},RecaptchaStr_zh_hk={visual_challenge:"\u56de\u7b54\u5716\u50cf\u9a57\u8b49\u554f\u984c",audio_challenge:"\u53d6\u5f97\u8a9e\u97f3\u9a57\u8b49\u554f\u984c",refresh_btn:"\u63db\u4e00\u500b\u9a57\u8b49\u554f\u984c",instructions_visual:"\u8acb\u8f38\u5165\u9019\u5169\u500b\u5b57\uff1a",instructions_context:"\u5728\u6846\u5167\u8f38\u5165\u5b57\u8a5e\uff1a",instructions_audio:"\u9375\u5165\u60a8\u6240\u807d\u5230\u7684\uff1a",help_btn:"\u8aaa\u660e",play_again:"\u518d\u6b21\u64ad\u653e\u8072\u97f3",cant_hear_this:"\u5c07\u8072\u97f3\u4e0b\u8f09\u70ba MP3",incorrect_try_again:"\u4e0d\u6b63\u78ba\uff0c\u518d\u8a66\u4e00\u6b21\u3002",image_alt_text:"reCAPTCHA \u9a57\u8b49\u6587\u5b57\u5716\u7247"},RecaptchaStr_zh_tw={visual_challenge:"\u53d6\u5f97\u5716\u7247\u9a57\u8b49\u554f\u984c",audio_challenge:"\u53d6\u5f97\u8a9e\u97f3\u9a57\u8b49\u554f\u984c",refresh_btn:"\u53d6\u5f97\u65b0\u7684\u9a57\u8b49\u554f\u984c",instructions_visual:"\u8acb\u8f38\u5165\u4e0b\u5716\u4e2d\u7684\u5169\u500b\u5b57\uff1a",instructions_context:"\u8acb\u8f38\u5165\u65b9\u584a\u4e2d\u7684\u6587\u5b57\uff1a",instructions_audio:"\u8acb\u8f38\u5165\u8a9e\u97f3\u5167\u5bb9\uff1a",help_btn:"\u8aaa\u660e",play_again:"\u518d\u6b21\u64ad\u653e",cant_hear_this:"\u4ee5 MP3 \u683c\u5f0f\u4e0b\u8f09\u8072\u97f3",incorrect_try_again:"\u9a57\u8b49\u78bc\u6709\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002",image_alt_text:"reCAPTCHA \u9a57\u8b49\u6587\u5b57\u5716\u7247"},RecaptchaStr_zu={visual_challenge:"Thola inselelo ebonakalayo",audio_challenge:"Thola inselelo yokulalelwayo",refresh_btn:"Thola inselelo entsha",instructions_visual:"Bhala lawa magama amabili:",instructions_context:"Bhala amagama asemabhokisini:",instructions_audio:"Bhala okuzwayo:",help_btn:"Usizo",play_again:"Phinda udlale okulalelwayo futhi",cant_hear_this:"Layisha umsindo njenge-MP3",incorrect_try_again:"Akulungile. Zama futhi.",image_alt_text:"umfanekiso oyinselelo we-reCAPTCHA"},RecaptchaLangMap={en:RecaptchaStr_en,af:RecaptchaStr_af,am:RecaptchaStr_am,ar:RecaptchaStr_ar,"ar-EG":RecaptchaStr_ar,bg:RecaptchaStr_bg,bn:RecaptchaStr_bn,ca:RecaptchaStr_ca,cs:RecaptchaStr_cs,da:RecaptchaStr_da,de:RecaptchaStr_de,el:RecaptchaStr_el,"en-GB":RecaptchaStr_en,"en-US":RecaptchaStr_en,es:RecaptchaStr_es,"es-419":RecaptchaStr_es_419,"es-ES":RecaptchaStr_es,et:RecaptchaStr_et,eu:RecaptchaStr_eu,fa:RecaptchaStr_fa,fi:RecaptchaStr_fi,fil:RecaptchaStr_fil,fr:RecaptchaStr_fr,"fr-CA":RecaptchaStr_fr_ca,"fr-FR":RecaptchaStr_fr,gl:RecaptchaStr_gl,gu:RecaptchaStr_gu,hi:RecaptchaStr_hi,hr:RecaptchaStr_hr,hu:RecaptchaStr_hu,hy:RecaptchaStr_hy,id:RecaptchaStr_id,is:RecaptchaStr_is,it:RecaptchaStr_it,iw:RecaptchaStr_iw,ja:RecaptchaStr_ja,kn:RecaptchaStr_kn,ko:RecaptchaStr_ko,ln:RecaptchaStr_fr,lt:RecaptchaStr_lt,lv:RecaptchaStr_lv,ml:RecaptchaStr_ml,mr:RecaptchaStr_mr,ms:RecaptchaStr_ms,nl:RecaptchaStr_nl,no:RecaptchaStr_no,pl:RecaptchaStr_pl,pt:RecaptchaStr_pt,"pt-BR":RecaptchaStr_pt,"pt-PT":RecaptchaStr_pt_pt,ro:RecaptchaStr_ro,ru:RecaptchaStr_ru,sk:RecaptchaStr_sk,sl:RecaptchaStr_sl,sr:RecaptchaStr_sr,sv:RecaptchaStr_sv,sw:RecaptchaStr_sw,ta:RecaptchaStr_ta,te:RecaptchaStr_te,th:RecaptchaStr_th,tr:RecaptchaStr_tr,uk:RecaptchaStr_uk,ur:RecaptchaStr_ur,vi:RecaptchaStr_vi,"zh-CN":RecaptchaStr_zh_cn,"zh-HK":RecaptchaStr_zh_hk,"zh-TW":RecaptchaStr_zh_tw,zu:RecaptchaStr_zu,tl:RecaptchaStr_fil,he:RecaptchaStr_iw,"in":RecaptchaStr_id,mo:RecaptchaStr_ro,zh:RecaptchaStr_zh_cn};var RecaptchaStr=RecaptchaStr_en,RecaptchaOptions,RecaptchaDefaultOptions={tabindex:0,theme:"red",callback:null,lang:null,custom_theme_widget:null,custom_translations:null,includeContext:!1},Recaptcha={widget:null,timer_id:-1,style_set:!1,theme:null,type:"image",ajax_verify_cb:null,$:function(b){return"string"==typeof b?document.getElementById(b):b;},create:function(e,d,f){Recaptcha.destroy();d&&(Recaptcha.widget=Recaptcha.$(d));Recaptcha._init_options(f);Recaptcha._call_challenge(e);},destroy:function(){var b=Recaptcha.$("recaptcha_challenge_field");b&&b.parentNode.removeChild(b);-1!=Recaptcha.timer_id&&clearInterval(Recaptcha.timer_id);Recaptcha.timer_id=-1;if(b=Recaptcha.$("recaptcha_image")){b.innerHTML="";}Recaptcha.widget&&("custom"!=Recaptcha.theme?Recaptcha.widget.innerHTML="":Recaptcha.widget.style.display="none",Recaptcha.widget=null);},focus_response_field:function(){var b=Recaptcha.$("recaptcha_response_field");b.focus();},get_challenge:function(){return"undefined"==typeof RecaptchaState?null:RecaptchaState.challenge;},get_response:function(){var b=Recaptcha.$("recaptcha_response_field");return !b?null:b.value;},ajax_verify:function(d){Recaptcha.ajax_verify_cb=d;var d=Recaptcha.get_challenge()||"",c=Recaptcha.get_response()||"",d=Recaptcha._get_api_server()+"/ajaxverify?c="+encodeURIComponent(d)+"&response="+encodeURIComponent(c);Recaptcha._add_script(d);},_ajax_verify_callback:function(b){Recaptcha.ajax_verify_cb(b);},_get_api_server:function(){var d=window.location.protocol,c;if("undefined"!=typeof _RecaptchaOverrideApiServer){c=_RecaptchaOverrideApiServer;}else{if("undefined"!=typeof RecaptchaState&&"string"==typeof RecaptchaState.server&&0<RecaptchaState.server.length){return RecaptchaState.server.replace(/\/+$/,"");}c="www.google.com/recaptcha/api";}return d+"//"+c;},_call_challenge:function(b){b=Recaptcha._get_api_server()+"/challenge?k="+b+"&ajax=1&cachestop="+Math.random();Recaptcha.getLang_()&&(b+="&lang="+Recaptcha.getLang_());"undefined"!=typeof RecaptchaOptions.extra_challenge_params&&(b+="&"+RecaptchaOptions.extra_challenge_params);RecaptchaOptions.includeContext&&(b+="&includeContext=1");Recaptcha._add_script(b);},_add_script:function(d){var c=document.createElement("script");c.type="text/javascript";c.src=d;Recaptcha._get_script_area().appendChild(c);},_get_script_area:function(){var b=document.getElementsByTagName("head");return b=!b||1>b.length?document.body:b[0];},_hash_merge:function(f){for(var e={},h=0;h<f.length;h++){for(var g in f[h]){e[g]=f[h][g];}}"context"==e.theme&&(e.includeContext=!0);return e;},_init_options:function(b){b=b||{};RecaptchaOptions=Recaptcha._hash_merge([RecaptchaDefaultOptions,b]);},challenge_callback:function(){var d=Recaptcha.widget;Recaptcha._reset_timer();RecaptchaStr=Recaptcha._hash_merge([RecaptchaStr_en,RecaptchaLangMap[Recaptcha.getLang_()]||{},RecaptchaOptions.custom_translations||{}]);window.addEventListener&&window.addEventListener("unload",function(b){Recaptcha.destroy();},!1);Recaptcha._is_ie()&&window.attachEvent&&window.attachEvent("onbeforeunload",function(){});if(0<navigator.userAgent.indexOf("KHTML")){d=document.createElement("iframe");d.src="about:blank";d.style.height="0px";d.style.width="0px";d.style.visibility="hidden";d.style.border="none";var c=document.createTextNode("This frame prevents back/forward cache problems in Safari.");d.appendChild(c);document.body.appendChild(d);}Recaptcha._finish_widget();},_add_css:function(d){if(-1!=navigator.appVersion.indexOf("MSIE 5")){document.write('<style type="text/css">'+d+"</style>");}else{var c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText=d:(d=document.createTextNode(d),c.appendChild(d));Recaptcha._get_script_area().appendChild(c);}},_set_style:function(b){Recaptcha.style_set||(Recaptcha.style_set=!0,Recaptcha._add_css(b+"\n\n.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}"));},_init_builtin_theme:function(){var h=Recaptcha.$,g=Recaptcha._get_api_server(),m=g.length-1;"/"==g[m]&&(g=g.substring(0,m));var m=RecaptchaTemplates.VertCss,l=RecaptchaTemplates.VertHtml,k=g+"/img/"+Recaptcha.theme,j="gif",g=Recaptcha.theme;"clean"==g&&(m=RecaptchaTemplates.CleanCss,l=RecaptchaTemplates.CleanHtml,j="png");"context"==g&&(l=RecaptchaTemplates.ContextHtml);m=m.replace(/IMGROOT/g,k);Recaptcha._set_style(m);Recaptcha.widget.innerHTML='<div id="recaptcha_area">'+l+"</div>";m=function(a,o,n,e){var f=h(a+"_btn"),a=h(a);a.src=k+"/"+o+"."+j;o=RecaptchaStr[n];a.alt=o;f.title=o;f.href=e;};m("recaptcha_reload","refresh","refresh_btn","javascript:Recaptcha.reload();");m("recaptcha_switch_audio","audio","audio_challenge","javascript:Recaptcha.switch_type('audio');");m("recaptcha_switch_img","text","visual_challenge","javascript:Recaptcha.switch_type('image');");m("recaptcha_whatsthis","help","help_btn",Recaptcha._get_help_link());h("recaptcha_whatsthis_btn").target="_blank";h("recaptcha_whatsthis_btn").onclick=function(){Recaptcha.showhelp();return false;};"clean"==g&&(h("recaptcha_logo").src=k+"/logo."+j,h("recaptcha_tagline").src=k+"/tagline."+j);h("recaptcha_table").className="recaptchatable recaptcha_theme_"+Recaptcha.theme;g=function(a,f){var e=h(a);if(e){if(RecaptchaState.rtl&&"span"==e.tagName.toLowerCase()){e.dir="rtl";}e.appendChild(document.createTextNode(RecaptchaStr[f]));}};g("recaptcha_instructions_image","instructions_visual");g("recaptcha_instructions_context","instructions_context");g("recaptcha_instructions_audio","instructions_audio");g("recaptcha_instructions_error","incorrect_try_again");},_finish_widget:function(){var f=Recaptcha.$,e=RecaptchaOptions,h=e.theme,g={blackglass:1,clean:1,context:1,custom:1,red:1,white:1};h in g||(h="red");Recaptcha.theme||(Recaptcha.theme=h);"custom"!=Recaptcha.theme?Recaptcha._init_builtin_theme():Recaptcha._set_style("");h=document.createElement("span");h.id="recaptcha_challenge_field_holder";h.style.display="none";f("recaptcha_response_field").parentNode.insertBefore(h,f("recaptcha_response_field"));f("recaptcha_response_field").setAttribute("autocomplete","off");f("recaptcha_image").style.width="300px";f("recaptcha_image").style.height="57px";Recaptcha.should_focus=!1;Recaptcha._set_challenge(RecaptchaState.challenge,"image");Recaptcha.updateTabIndexes_();Recaptcha.widget&&(Recaptcha.widget.style.display="");e.callback&&e.callback();},updateTabIndexes_:function(){var d=Recaptcha.$,c=RecaptchaOptions;if(c.tabindex&&(c=c.tabindex,d("recaptcha_response_field").tabIndex=c++,"audio"==Recaptcha.type&&d("recaptcha_audio_play_again")&&(d("recaptcha_audio_play_again").tabIndex=c++,d("recaptcha_audio_download"),d("recaptcha_audio_download").tabIndex=c++),"custom"!=Recaptcha.theme)){d("recaptcha_reload_btn").tabIndex=c++,d("recaptcha_switch_audio_btn").tabIndex=c++,d("recaptcha_switch_img_btn").tabIndex=c++,d("recaptcha_whatsthis_btn").tabIndex=c;}},switch_type:function(b){Recaptcha.type=b;Recaptcha.reload("audio"==Recaptcha.type?"a":"v");},reload:function(e){var d=RecaptchaOptions,f=RecaptchaState;"undefined"==typeof e&&(e="r");f=Recaptcha._get_api_server()+"/reload?c="+f.challenge+"&k="+f.site+"&reason="+e+"&type="+Recaptcha.type;d.includeContext&&(f+="&includeContext=1");Recaptcha.getLang_()&&(f+="&lang="+Recaptcha.getLang_());"undefined"!=typeof d.extra_challenge_params&&(f+="&"+d.extra_challenge_params);"audio"==Recaptcha.type&&(f=d.audio_beta_12_08?f+"&audio_beta_12_08=1":f+"&new_audio_default=1");Recaptcha.should_focus="t"!=e;Recaptcha._add_script(f);},finish_reload:function(d,c){RecaptchaState.is_incorrect=!1;Recaptcha._set_challenge(d,c);Recaptcha.updateTabIndexes_();},_set_challenge:function(g,f){var k=Recaptcha.$,j=RecaptchaState;j.challenge=g;Recaptcha.type=f;k("recaptcha_challenge_field_holder").innerHTML='<input type="hidden" name="recaptcha_challenge_field" id="recaptcha_challenge_field" value="'+j.challenge+'"/>';if("audio"==f){k("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml();}else{if("image"==f){var h=Recaptcha._get_api_server()+"/image?c="+j.challenge;k("recaptcha_image").innerHTML='<img style="display:block;" alt="'+RecaptchaStr.image_alt_text+'" height="57" width="300" src="'+h+'" />';}}Recaptcha._css_toggle("recaptcha_had_incorrect_sol","recaptcha_nothad_incorrect_sol",j.is_incorrect);Recaptcha._css_toggle("recaptcha_is_showing_audio","recaptcha_isnot_showing_audio","audio"==f);Recaptcha._clear_input();Recaptcha.should_focus&&Recaptcha.focus_response_field();Recaptcha._reset_timer();},_reset_timer:function(){clearInterval(Recaptcha.timer_id);var b=Math.max(1000*(RecaptchaState.timeout-60),60000);Recaptcha.timer_id=setInterval('Recaptcha.reload("t");',b);return b;},showhelp:function(){window.open(Recaptcha._get_help_link(),"recaptcha_popup","width=460,height=580,location=no,menubar=no,status=no,toolbar=no,scrollbars=yes,resizable=yes");},_clear_input:function(){Recaptcha.$("recaptcha_response_field").value="";},_displayerror:function(d){var c=Recaptcha.$;c("recaptcha_image").innerHTML="";c("recaptcha_image").appendChild(document.createTextNode(d));},reloaderror:function(b){Recaptcha._displayerror(b);},_is_ie:function(){return 0<navigator.userAgent.indexOf("MSIE")&&!window.opera;},_css_toggle:function(g,f,k){var j=Recaptcha.widget;j||(j=document.body);var h=j.className,h=h.replace(RegExp("(^|\\s+)"+g+"(\\s+|$)")," "),h=h.replace(RegExp("(^|\\s+)"+f+"(\\s+|$)")," "),h=h+(" "+(k?g:f));j.className=h;},_get_help_link:function(){var b=Recaptcha._get_api_server().replace(/\/[a-zA-Z0-9]+\/?$/,"/help"),b=b+("?c="+RecaptchaState.challenge);Recaptcha.getLang_()&&(b+="&hl="+Recaptcha.getLang_());return b;},playAgain:function(){Recaptcha.$("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml();},getAudioCaptchaHtml:function(){var e=Recaptcha._get_api_server()+"/image?c="+RecaptchaState.challenge;0==e.indexOf("https://")&&(e="http://"+e.substring(8));var d=Recaptcha._get_api_server()+"/img/audiocaptcha.swf?v2",d=Recaptcha._is_ie()?'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="audiocaptcha" width="0" height="0" codebase="https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+d+'" /><param name="quality" value="high" /><param name="bgcolor" value="#869ca7" /><param name="allowScriptAccess" value="always" /></object><br/>':'<embed src="'+d+'" quality="high" bgcolor="#869ca7" width="0" height="0" name="audiocaptcha" align="middle" play="true" loop="false" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" /></embed>',f="";Recaptcha.checkFlashVer()&&(f="<br/>"+Recaptcha.getSpan_('<a id="recaptcha_audio_play_again" class="recaptcha_audio_cant_hear_link" href="#" onclick="Recaptcha.playAgain(); return false;">'+RecaptchaStr.play_again+"</a>"));f+="<br/>"+Recaptcha.getSpan_('<a id="recaptcha_audio_download" class="recaptcha_audio_cant_hear_link" target="_blank" href="'+e+'">'+RecaptchaStr.cant_hear_this+"</a>");return d+f;},getSpan_:function(b){return"<span"+(RecaptchaState&&RecaptchaState.rtl?' dir="rtl"':"")+">"+b+"</span>";},gethttpwavurl:function(){if("audio"!=Recaptcha.type){return"";}var b=Recaptcha._get_api_server()+"/image?c="+RecaptchaState.challenge;0==b.indexOf("https://")&&(b="http://"+b.substring(8));return b;},checkFlashVer:function(){var h=-1!=navigator.appVersion.indexOf("MSIE"),g=-1!=navigator.appVersion.toLowerCase().indexOf("win"),n=-1!=navigator.userAgent.indexOf("Opera"),m=-1;if(null!=navigator.plugins&&0<navigator.plugins.length){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){h=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",h=navigator.plugins["Shockwave Flash"+h].description,h=h.split(" "),h=h[2].split("."),m=h[0];}}else{if(h&&g&&!n){try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),k=l.GetVariable("$version"),m=k.split(" ")[1].split(",")[0];}catch(j){}}}return 9<=m;},getLang_:function(){return"undefined"!=typeof RecaptchaState&&RecaptchaState.lang?RecaptchaState.lang:RecaptchaOptions.lang?RecaptchaOptions.lang:null;}};window.Modernizr=(function(o,u,j){var e="2.6.2",m={},r=true,E=u.documentElement,F="modernizr",C=u.createElement(F),p=C.style,f,z={}.toString,c="Webkit Moz O ms",H=c.split(" "),q=c.toLowerCase().split(" "),k={},d={},v={},B=[],w=B.slice,b,t=({}).hasOwnProperty,D;if(!l(t,"undefined")&&!l(t.call,"undefined")){D=function(J,K){return t.call(J,K);};}else{D=function(J,K){return((K in J)&&l(J.constructor.prototype[K],"undefined"));};}if(!Function.prototype.bind){Function.prototype.bind=function I(L){var M=this;if(typeof M!="function"){throw new TypeError();}var J=w.call(arguments,1),K=function(){if(this instanceof K){var P=function(){};P.prototype=M.prototype;var O=new P();var N=M.apply(O,J.concat(w.call(arguments)));if(Object(N)===N){return N;}return O;}else{return M.apply(L,J.concat(w.call(arguments)));}};return K;};}function s(J){p.cssText=J;}function h(K,J){return s(prefixes.join(K+";")+(J||""));}function l(K,J){return typeof K===J;}function n(K,J){return !!~(""+K).indexOf(J);}function G(L,J){for(var K in L){var M=L[K];if(!n(M,"-")&&p[M]!==j){return J=="pfx"?M:true;}}return false;}function A(K,N,M){for(var J in K){var L=N[K[J]];if(L!==j){if(M===false){return K[J];}if(l(L,"function")){return L.bind(M||N);}return L;}}return false;}function a(N,J,M){var K=N.charAt(0).toUpperCase()+N.slice(1),L=(N+" "+H.join(K+" ")+K).split(" ");if(l(J,"string")||l(J,"undefined")){return G(L,J);}else{L=(N+" "+(q).join(K+" ")+K).split(" ");return A(L,J,M);}}k.geolocation=function(){return"geolocation" in navigator;};k.history=function(){return !!(o.history&&history.pushState);};k.csstransitions=function(){return a("transition");};k.localstorage=function(){try{localStorage.setItem(F,F);localStorage.removeItem(F);return true;}catch(J){return false;}};for(var g in k){if(D(k,g)){b=g.toLowerCase();m[b]=k[g]();B.push((m[b]?"":"no-")+b);}}m.addTest=function(K,L){if(typeof K=="object"){for(var J in K){if(D(K,J)){m.addTest(J,K[J]);}}}else{K=K.toLowerCase();if(m[K]!==j){return m;}L=typeof L=="function"?L():L;if(typeof r!=="undefined"&&r){E.className+=" "+(L?"":"no-")+K;}m[K]=L;}return m;};s("");C=f=null;m._version=e;m._domPrefixes=q;m._cssomPrefixes=H;m.testProp=function(J){return G([J]);};m.testAllProps=a;E.className=E.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(r?" js "+B.join(" "):"");return m;})(this,this.document);
/*!
Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com

Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/
(function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(b,e){var g=a,d=[],c;e=e||g.length;if(b){for(c=0;c<b;c++){d[c]=g[0|Math.random()*e];}}else{var f;d[8]=d[13]=d[18]=d[23]="-";d[14]="4";for(c=0;c<36;c++){if(!d[c]){f=0|Math.random()*16;d[c]=g[(c==19)?(f&3)|8:f];}}}return d.join("");};Math.uuidFast=function(){var f=a,d=new Array(36),c=0,e;for(var b=0;b<36;b++){if(b==8||b==13||b==18||b==23){d[b]="-";}else{if(b==14){d[b]="4";}else{if(c<=2){c=33554432+(Math.random()*16777216)|0;}e=c&15;c=c>>4;d[b]=f[(b==19)?(e&3)|8:e];}}}return d.join("");};Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=Math.random()*16|0,b=e=="x"?d:(d&3|8);return b.toString(16);});};})();Array.prototype.all=function(b){var a=[];for(var c in this){if(this.hasOwnProperty(c)){if(this[c] instanceof b){a.push(this[c]);}}}return a;};Array.prototype.execute=function(b){for(var a in this){if(this.hasOwnProperty(a)){if(this[a][b] instanceof Function){this[a][b](arguments[1]);}}}return this;};Array.prototype.predicate=function(){var a=[];if(arguments[0] instanceof Object){for(var b in this){if(this.hasOwnProperty(b)){var d=0,c=0;for(var e in arguments[0]){if(arguments[0].hasOwnProperty(e)){d++;if(this[b][e]===arguments[0][e]){c++;}}}if(d===c){a.push(this[b]);}}}}return a;};Array.prototype.get=function(c){var a=[];for(var b in this){if(this.hasOwnProperty(b)){if(this[b].hasOwnProperty(c)||arguments[1]){a.push(this[b][c]);}}}return a;};Array.prototype.massJq=function(a,b){for(var c in this){if(this.hasOwnProperty(c)){if(jq(this[c])[a] instanceof Function){jq(this[c])[a](b);}}}return this;};Array.prototype.mass=function(a,b){for(var c in this){if(this.hasOwnProperty(c)){b.call(a||this,this[c][arguments[1]]||this[c]);}}return this;};Array.prototype.set=function(a,b){for(var c in this){if(this.hasOwnProperty(c)){if(this[c].hasOwnProperty(a)||arguments[2]){this[c][a]=b;}}}return this;};function __hasprops(b){var a=0;for(var c in b){if(b.hasOwnProperty(c)&&isNaN(c)){a++;}}return(a>0);}function __getprops(b){var a=[];for(var c in b){if(b.hasOwnProperty(c)){a.push(c);if(__hasprops(b[c])){a.push(__getprops(b[c]));}}}return a;}function __findprop(b,d){var a=[];for(var c in b){if(b.hasOwnProperty(c)){if(c===d){a.push(b[c]);}if(__hasprops(b[c])){a.push(__findprop(b[c],d));}}}return a;}String.prototype.AZify=function(){return this.replace(/[å]+/gi,"ao").replace(/[ä]+/gi,"ae").replace(/[ö]+/gi,"oe");};String.prototype.xitify=function(){return this.AZify().match(/[a-z0-9-}\^~\/\._]+/gi).join("-").toLowerCase();};function Statistics(){}Statistics.prototype.sId=488645;Statistics.prototype.measure=function(c){var a=new Image();var b=new Date();if(c instanceof Array){a.src="http://logi118.xiti.com/hit.xiti?s="+this.sId+"&s2=&p="+c.join("::")+"&di=&an=&ac=&hl="+b.getHours()+"x"+b.getMinutes()+"x"+b.getSeconds();}else{a.src="http://logi118.xiti.com/hit.xiti?s="+this.sId+"&s2=&p="+c+"&di=&an=&ac=&hl="+b.getHours()+"x"+b.getMinutes()+"x"+b.getSeconds();}};Statistics.prototype.rawImpression=function(a){return true;};Statistics.prototype.impression=function(a){return true;};var HMapConfig=window.HMapConfig||{};HMapConfig.init=function(){var a=this.Path;if(typeof a==="undefined"){a={};this.Path=a;}};HMapConfig.setPath=function(b,a){if(typeof this.Path[b]==="undefined"){this.Path[b]=a;}};HMapConfig.init();HMapConfig.setPath("HDIRECTIONS_BASE_URL","http://public.api.hitta.se/route/v3/");HMapConfig.setPath("HPOIMANAGER_POI_BASE_URL","http://public.api.hitta.se/poi/v1/");HMapConfig.setPath("HCHUNKMANAGER_POI_BASE_URL","http://public.api.hitta.se/poi/v1/");HMapConfig.setPath("STATIC_IMAGE_BASE_URL","http://public.api.hitta.se/image/v1/");HMapConfig.setPath("STREETVIEW_DOT_TILE_BASE_URL","http://streetview.hitta.se/tile/v2/2/");HMapConfig.setPath("STREETVIEW_AVATAR_IMAGE_BASE_URL","public/images/web/map/streetview/avatar/");HMapConfig.setPath("STREETVIEW_SERVICE_URL","http://streetview.hitta.se/streetview/v4");HMapConfig.setPath("HSTANDARDMAPPROVIDER_TILE_BASE_URL",".hitta.se/tile/v2/");HMapConfig.setPath("HSTANDARDMAPPROVIDER_TILE_DOMAIN_PATH","static");HMapConfig.setPath("HSTANDARDMAPPROVIDER_TILE_MAP_NOT_FOUND_URL",".hitta.se/static/v1/tiles/empty/blue-map.gif");HMapConfig.setPath("HSTANDARDMAPPROVIDER_TILE_SAT_NOT_FOUND_URL",".hitta.se/static/v1/tiles/empty/blue-sat.jpg");HMapConfig.setPath("HSTANDARDMAPPROVIDER_TILE_LOADING_URL","http://www.codetouch.com/hitta/loadingtile.gif");HMapConfig.setPath("HSTANDARDMAPPROVIDER_TILE_STATUS_BASE_URL","http://static.hitta.se/tile/v2/zoomlevel/");HMapConfig.setPath("HGEOTRANSFORM_BASE_URL","http://192.168.10.115:8080/transform/resources/transform/");HMapConfig.setPath("ROUTE_AUTOCOMPLETE_URL","http://public.api.hitta.se/autocomplete/route/");HMapConfig.setPath("HPOIMANAGER_IMAGES","images/web/legacy/pois/");var HMapMessages={lang:"sv"};HMapMessages.setLang=function(a){this.lang=a||"sv";};HMapMessages.get=function(a){return HMapMessages[this.lang][a]||a;};HMapMessages.sv={"hcontrol.zoom.label.zoom-in":"Zooma in","hcontrol.zoom.label.zoom-out":"Zooma ut","hcontrol.maptype.label.map":"Karta","hcontrol.maptype.label.satellite":"Satellit","hcontrol.maptype.label.3d":"3D","hcontrol.maptype.label.streetview":"Gatubild","hcontrol.route.label.start":"Start","hcontrol.route.label.whole":"Hela&nbsp;resan","hcontrol.route.label.destination":"M&aring;l"};function Hammer(m,s,k){var g=this;var A={prevent_default:false,css_hacks:true,swipe:true,swipe_time:200,swipe_min_distance:20,drag:true,drag_vertical:true,drag_horizontal:true,drag_min_distance:20,transform:true,scale_treshold:0.1,rotation_treshold:15,tap:true,tap_double:true,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:true,hold_timeout:500};s=D(A,s);(function(){if(!s.css_hacks){return false;}var S=["webkit","moz","ms","o",""];var P={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"};var R="";for(var O=0;O<S.length;O++){for(var Q in P){R=Q;if(S[O]){R=S[O]+R.substring(0,1).toUpperCase()+R.substring(1);}m.style[R]=P[Q];}}})();var J=0;var r=0;var K=0;var w={};var L=0;var j=false;var e=null;var d=null;var q=null;var C={x:0,y:0};var b=null;var B=null;var M={};var a=false;var h;var c;var z;var H=("ontouchstart" in window);this.option=function(O,P){if(P!=k){s[O]=P;}return s[O];};this.getDirectionFromAngle=function(Q){var R={down:Q>=45&&Q<135,left:Q>=135||Q<=-135,up:Q<-45&&Q>-135,right:Q>=-45&&Q<=45};var P,O;for(O in R){if(R[O]){P=O;break;}}return P;};function t(O){return O.touches?O.touches.length:1;}function N(R){R=R||window.event;if(!H){var S=document,P=S.body;return[{x:R.pageX||R.clientX+(S&&S.scrollLeft||P&&P.scrollLeft||0)-(S&&S.clientLeft||P&&S.clientLeft||0),y:R.pageY||R.clientY+(S&&S.scrollTop||P&&P.scrollTop||0)-(S&&S.clientTop||P&&S.clientTop||0)}];}else{var U=[],T;for(var Q=0,O=R.touches.length;Q<O;Q++){T=R.touches[Q];U.push({x:T.pageX,y:T.pageY});}return U;}}function n(P,O){return Math.atan2(O.y-P.y,O.x-P.x)*180/Math.PI;}function o(P,Q){if(P.length==2&&Q.length==2){var O,T;O=P[0].x-P[1].x;T=P[0].y-P[1].y;var R=Math.sqrt((O*O)+(T*T));O=Q[0].x-Q[1].x;T=Q[0].y-Q[1].y;var S=Math.sqrt((O*O)+(T*T));return S/R;}return 0;}function l(Q,R){if(Q.length==2&&R.length==2){var P,T;P=Q[0].x-Q[1].x;T=Q[0].y-Q[1].y;var S=Math.atan2(T,P)*180/Math.PI;P=R[0].x-R[1].x;T=R[0].y-R[1].y;var O=Math.atan2(T,P)*180/Math.PI;return O-S;}return 0;}function I(O,P){P.touches=N(P.originalEvent);P.type=O;if(p(g["on"+O])){g["on"+O].call(g,P);}}function E(O){O=O||window.event;if(O.preventDefault){O.preventDefault();O.stopPropagation();}else{O.returnValue=false;O.cancelBubble=true;}}function F(){w={};j=false;L=0;J=0;r=0;e=null;}var v={hold:function(O){if(s.hold){e="hold";clearTimeout(B);B=setTimeout(function(){if(e=="hold"){I("hold",{originalEvent:O,position:w.start});}},s.hold_timeout);}},swipe:function(U){if(!w.move){return;}var S=w.move[0].x-w.start[0].x;var R=w.move[0].y-w.start[0].y;J=Math.sqrt(S*S+R*R);var Q=new Date().getTime();var T=Q-q;if(s.swipe&&(s.swipe_time>T)&&(J>s.swipe_min_distance)){r=n(w.start[0],w.move[0]);K=g.getDirectionFromAngle(r);e="swipe";var P={x:w.move[0].x-M.left,y:w.move[0].y-M.top};var O={originalEvent:U,position:P,direction:K,distance:J,distanceX:S,distanceY:R,angle:r};I("swipe",O);}},drag:function(T){var R=w.move[0].x-w.start[0].x;var Q=w.move[0].y-w.start[0].y;J=Math.sqrt(R*R+Q*Q);if(s.drag&&(J>s.drag_min_distance)||e=="drag"){r=n(w.start[0],w.move[0]);K=g.getDirectionFromAngle(r);var S=(K=="up"||K=="down");if(((S&&!s.drag_vertical)||(!S&&!s.drag_horizontal))&&(J>s.drag_min_distance)){return;}e="drag";var P={x:w.move[0].x-M.left,y:w.move[0].y-M.top};var O={originalEvent:T,position:P,direction:K,distance:J,distanceX:R,distanceY:Q,angle:r};if(j){I("dragstart",O);j=false;}I("drag",O);E(T);}},transform:function(Q){if(s.transform){if(t(Q)!=2){return false;}var P=l(w.start,w.move);var R=o(w.start,w.move);if(e!="drag"&&(e=="transform"||Math.abs(1-R)>s.scale_treshold||Math.abs(P)>s.rotation_treshold)){e="transform";w.center={x:((w.move[0].x+w.move[1].x)/2)-M.left,y:((w.move[0].y+w.move[1].y)/2)-M.top};var O={originalEvent:Q,position:w.center,scale:R,rotation:P};if(j){I("transformstart",O);j=false;}I("transform",O);E(Q);return true;}}return false;},tap:function(S){var P=new Date().getTime();var R=P-q;if(s.hold&&!(s.hold&&s.hold_timeout>R)){return;}var Q=(function(){if(C&&s.tap_double&&d=="tap"&&(q-b)<s.tap_max_interval){var V=Math.abs(C[0].x-w.start[0].x);var U=Math.abs(C[0].y-w.start[0].y);return(C&&w.start&&Math.max(V,U)<s.tap_double_distance);}return false;})();if(Q){e="double_tap";b=null;I("doubletap",{originalEvent:S,position:w.start});E(S);}else{var T=(w.move)?Math.abs(w.move[0].x-w.start[0].x):0;var O=(w.move)?Math.abs(w.move[0].y-w.start[0].y):0;J=Math.max(T,O);if(J<s.tap_max_distance){e="tap";b=P;C=w.start;if(s.tap){I("tap",{originalEvent:S,position:w.start});E(S);}}}}};function u(P){switch(P.type){case"mousedown":case"touchstart":w.start=N(P);q=new Date().getTime();L=t(P);j=true;h=P;var O=m.getBoundingClientRect();var U=m.clientTop||document.body.clientTop||0;var T=m.clientLeft||document.body.clientLeft||0;var R=window.pageYOffset||m.scrollTop||document.body.scrollTop;var S=window.pageXOffset||m.scrollLeft||document.body.scrollLeft;M={top:O.top+R-U,left:O.left+S-T};a=true;v.hold(P);if(s.prevent_default){E(P);}break;case"mousemove":case"touchmove":if(!a){return false;}c=P;w.move=N(P);if(!v.transform(P)){v.drag(P);}break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":if(!a||(e!="transform"&&P.touches&&P.touches.length>0)){return false;}a=false;z=P;var Q=e=="drag";v.swipe(P);if(Q){I("dragend",{originalEvent:P,direction:K,distance:J,angle:r});}else{if(e=="transform"){I("transformend",{originalEvent:P,position:w.center,scale:o(w.start,w.move),rotation:l(w.start,w.move)});}else{v.tap(h);}}d=e;I("release",{originalEvent:P,gesture:e});F();break;}}if(H){f(m,"touchstart touchmove touchend touchcancel",u);}else{f(m,"mouseup mousedown mousemove",u);f(m,"mouseout",function(O){if(!G(m,O.relatedTarget)){u(O);}});}function G(O,Q){if(!Q&&window.event&&window.event.toElement){Q=window.event.toElement;}if(O===Q){return true;}if(Q){var P=Q.parentNode;while(P!==null){if(P===O){return true;}P=P.parentNode;}}return false;}function D(Q,P){var O={};if(!P){return Q;}for(var R in Q){if(R in P){O[R]=P[R];}else{O[R]=Q[R];}}return O;}function p(O){return Object.prototype.toString.call(O)=="[object Function]";}function f(R,Q,S){Q=Q.split(" ");for(var P=0,O=Q.length;P<O;P++){if(R.addEventListener){R.addEventListener(Q[P],S,false);}else{if(document.attachEvent){R.attachEvent("on"+Q[P],S);}}}}}function HMapProvider(){}HMapProvider.prototype.initTiles=function(a){this.container=this.hmap.getPaneMap();};HMapProvider.prototype.remove=function(){for(var a=0;a<this.elements.length;a++){this.container.removeChild(this.elements[a]);}};HMapProvider.prototype.updateTile=function(d,c,b,a){};HMapProvider.prototype.updatePosition=function(b,a){this.elements[b].style.left=a.x+"px";this.elements[b].style.top=a.y+"px";};HMapProvider.prototype.setMapType=function(a){};HMapProvider.prototype.getMapType=function(){return 0;};HMapProvider.prototype.getMapTypes=function(){return[0];};HMapProvider.prototype.getMinZoomLevel=function(a){return 1;};HMapProvider.prototype.getMaxZoomLevel=function(a){return 1;};HMapProvider.prototype.initStatusUpdate=function(){};function HStandardMapProvider(c){this.hmap=c;this.mapType=HStandardMapProvider.MAP_TYPE_NORMAL;HStandardMapProvider.zoomLevel=[];var a=this.getMapTypes().length;for(var b=0;b<a;b++){HStandardMapProvider.zoomLevel[b]={min:1,max:13};}this.overrideMinZoomLevel=0;this.overrideMaxZoomLevel=15;this.elements=[];}HStandardMapProvider.prototype=new HMapProvider();HStandardMapProvider.TILE_BASE_URL=HMapConfig.Path.HSTANDARDMAPPROVIDER_TILE_BASE_URL;HStandardMapProvider.TILE_DOMAIN_PATH=HMapConfig.Path.HSTANDARDMAPPROVIDER_TILE_DOMAIN_PATH;HStandardMapProvider.TILE_MAP_NOT_FOUND_URL=HMapConfig.Path.HSTANDARDMAPPROVIDER_TILE_MAP_NOT_FOUND_URL;HStandardMapProvider.TILE_SAT_NOT_FOUND_URL=HMapConfig.Path.HSTANDARDMAPPROVIDER_TILE_SAT_NOT_FOUND_URL;HStandardMapProvider.TILE_DOMAINS=["static"];HStandardMapProvider.TILE_DOMAINS_COUNT=HStandardMapProvider.TILE_DOMAINS.length;HStandardMapProvider.TILE_LOADING_URL=HMapConfig.Path.HSTANDARDMAPPROVIDER_TILE_LOADING_URL;HStandardMapProvider.TILE_STATUS_UPDATE_BASE_URL=HMapConfig.Path.HSTANDARDMAPPROVIDER_TILE_STATUS_BASE_URL;HStandardMapProvider.MAP_TYPE_NORMAL=0;HStandardMapProvider.MAP_TYPE_SATELLITE=1;HStandardMapProvider.MAP_TYPE_3D=2;HStandardMapProvider.MAP_TYPE_STREETVIEW=3;HStandardMapProvider.STATUS_UPDATE_TIMEOUT=2000;HStandardMapProvider.prototype.initTiles=function(d){this.hmap=d;var e=this.hmap.getPaneMap();var a=this.hmap.getTileCount();this.elements.length=a;for(var c=0;c<a;c++){var b=document.createElement("img");HMapHelpers.applyStyle([b],{position:"absolute",top:-HTile.TILE_WIDTH+"px",left:-HTile.TILE_HEIGHT+"px",width:HTile.TILE_WIDTH+"px",height:HTile.TILE_HEIGHT+"px"});this.elements[c]=b;e.appendChild(b);}this.container=e;};HStandardMapProvider.prototype.updateTile=function(e,d,b,a){var c="";if(b<0||a<0){c="http://"+HStandardMapProvider.TILE_DOMAIN_PATH+((this.mapType==HStandardMapProvider.MAP_TYPE_SATELLITE)?HStandardMapProvider.TILE_SAT_NOT_FOUND_URL:HStandardMapProvider.TILE_MAP_NOT_FOUND_URL);}else{c="http://"+HStandardMapProvider.TILE_DOMAIN_PATH+HStandardMapProvider.TILE_BASE_URL+this.mapType+"/"+d+"/"+b+"/"+a;}this.elements[e].src=c;};HStandardMapProvider.prototype.setMapType=function(a){this.mapType=a;};HStandardMapProvider.prototype.getMapType=function(){return this.mapType;};HStandardMapProvider.prototype.getMapTypes=function(){return[HStandardMapProvider.MAP_TYPE_NORMAL,HStandardMapProvider.MAP_TYPE_SATELLITE];};HStandardMapProvider.prototype.getMinZoomLevel=function(b){var a=arguments[0]||this.mapType;return Math.max(HStandardMapProvider.zoomLevel[a].min,this.overrideMinZoomLevel);};HStandardMapProvider.prototype.getMaxZoomLevel=function(b){var a=arguments[0]||this.mapType;return Math.min(HStandardMapProvider.zoomLevel[a].max,this.overrideMaxZoomLevel);};HStandardMapProvider.prototype.setMinZoomLevel=function(a){this.overrideMinZoomLevel=a;};HStandardMapProvider.prototype.setMaxZoomLevel=function(a){this.overrideMaxZoomLevel=a;};HStandardMapProvider.prototype.updateStatusCallback=function(b){var a=13;HStandardMapProvider.zoomLevel[0].max=b.resolutions.map<a?a:b.resolutions.map;HStandardMapProvider.zoomLevel[1].max=b.resolutions.ortho<a?a:b.resolutions.ortho;HEvent.trigger(HStandardMapProvider,HMap.EVENT_INTERNAL_MAP_STATUS_UPDATE,HStandardMapProvider.zoomLevel);HEvent.trigger(HStandardMapProvider,HMap.EVENT_MAP_STATUS_UPDATE,HStandardMapProvider.zoomLevel);};HStandardMapProvider.prototype.initStatusUpdate=function(){HStandardMapProvider.UPDATE=this.updateStatusCallback;var a=this.hmap.getCenter();if(!(isNaN(parseInt(a.north,10))||isNaN(parseInt(a.east,10)))){var b=HStandardMapProvider.TILE_STATUS_UPDATE_BASE_URL+parseInt(a.north,10)+":"+parseInt(a.east,10)+"?callback=HStandardMapProvider.UPDATE";HMapHelpers.initJSONP(b,HStandardMapProvider.STATUS_UPDATE_TIMEOUT);}};function HMap(e){var c=this;c.map=e;c.globals={isInitialized:false,isDragging:false,draggingEnabled:true,doubleClickZoomEnabled:true,mouseWheelZoomEnabled:true,exclusiveInfoBoxEnabled:true,startX:0,startY:0,deltaX:0,deltaY:0,mapSize:null,mapPaddingX:0,mapPaddingY:0,mapPosition:null,tilesPerRow:0,tilesPerColumn:0,tileInitOffsetX:0,tileInitOffsetY:0,tileCount:0,mapRow:0,mapColumn:0,resolution:0,zoomLevel:0,gridContainer:null,overlayContainer:null,rightClickTimestamp:0,rightClickTimeout:null,overrideRightClickValue:false,panIntervalCount:0,panDestination:null,panCurrent:null,polyLayer:null,currentMousePos:null,paddingLeft:0,paddingTop:0,paddingBottom:0,paddingRight:0,hiddenInputElement:null,centerPoint:null};var b=c.globals;c.overlays=[];c.controls=[];HMapHelpers.applyStyle([c.map],{overflow:"hidden",position:"relative",outline:"none"});c.map.setAttribute("tabIndex",0);c.map.setAttribute("hideFocus",true);b.innerContainer=HMapHelpers.createContainerDiv(c.map);b.gridContainer=HMapHelpers.createContainerDiv(b.innerContainer);HMapHelpers.applyStyle([b.gridContainer],{zIndex:0});b.polyContainer=HMapHelpers.createContainerDiv(b.innerContainer);b.overlayContainer=HMapHelpers.createContainerDiv(b.innerContainer);HMapHelpers.applyStyle([b.overlayContainer],{zIndex:HOverlay.Z_INDEX_OFFSET});b.polyLayer=new HPolyLayer(this);c.transform=new HTransform();c.mapProviderManager=new HMapProviderManager(this);this.mapProviderManager.add(new HStandardMapProvider());HEvent.addDomListener(document,"mousemove",function(f){c.mouseMove(f);});HEvent.addDomListener(document,"mouseup",function(f){c.mouseUp(f);});HEvent.addDomListener(b.innerContainer,"mouseup",function(f){c.innerMouseUp(f);});HEvent.addDomListener(b.innerContainer,"mousemove",function(f){c.mouseMoveMap(f);});HEvent.addDomListener(b.innerContainer,"mousedown",function(f){c.mouseDown(f);});HEvent.addDomListener(b.innerContainer,"mousewheel",function(f){return c.mouseWheel(f);});HEvent.addDomListener(b.innerContainer,"click",function(f){c.mouseClick(f);});HEvent.addDomListener(b.innerContainer,"dblclick",function(f){c.mouseDblClick(f);});HEvent.addDomListener(b.innerContainer,"dragstart",HEvent.stopEvent);HEvent.addDomListener(b.innerContainer,"selectstart",HEvent.stopEvent);HEvent.addDomListener(b.innerContainer,"contextmenu",HEvent.stopEvent);if(c.map!=null){var a=new Hammer(c.map,{prevent_default:false,drag:true,drag_vertical:true,scale_treshold:0});}$(c.map).bind("touchmove",function(f){f.preventDefault();});if(a!=null){a.ondragstart=function(f){c.touchStart(f);};a.ondrag=function(f){c.touchMove(f);};a.ondragend=function(f){c.touchEnd(f);};a.ondoubletap=function(f){c.doubleTap(f);};a.ontransformstart=function(f){c.transformStart(f);};a.ontransform=function(f){c.transformChange(f);};a.ontransformend=function(f){c.transformEnd(f);};}if(HMapHelpers.isSafari()){var d=document.createElement("input");d.id="mapinput";HMapHelpers.applyStyle([d],{border:"none",outline:"none",width:"0px",height:"0px",fontSize:"0px"});c.map.appendChild(d);b.hiddenInputElement=d;HEvent.addDomListener(d,"keydown",function(f){return c.keyAction(f);});}else{HEvent.addDomListener(c.map,"keydown",function(f){return c.keyAction(f);});}}HMap.ZOOM_LEVELS=[0,2048,1024,512,256,128,64,32,16,8,4,2,1,0.5,0.25,0.125];HMap.RT90_BOTTOM_LEFT_GEO_POINT_NORTH=5651424;HMap.RT90_BOTTOM_LEFT_GEO_POINT_EAST=451424;HMap.RT90_GEO_POINT_NORTH=8200000;HMap.DEFAULT_ZOOM_LEVEL=4;HMap.TILE_PADDING=2;HMap.PAN_ANIMATION_SPEED=7;HMap.PAN_MAX_STEP_SIZE_PART=12;HMap.PAN_TO_SMOOTH_SCROLL_PADDING=1.5;HMap.PAN_DIRECTION_FACTOR=0.66;HMap.NAVIGATION_KEYCODE_LEFT=37;HMap.NAVIGATION_KEYCODE_UP=38;HMap.NAVIGATION_KEYCODE_RIGHT=39;HMap.NAVIGATION_KEYCODE_DOWN=40;HMap.NAVIGATION_KEYCODE_ZOOM_IN=34;HMap.NAVIGATION_KEYCODE_ZOOM_OUT=33;HMap.RIGHT_DOUBLE_CLICK_INTERVAL=500;HMap.EVENT_MAP_DRAG_START="mapdragstart";HMap.EVENT_MAP_DRAG_END="mapdragend";HMap.EVENT_MAP_MOVE_END="mapmoveend";HMap.EVENT_MAP_MOVE="mapmove";HMap.EVENT_INTERNAL_MAP_MOVE="internalmapmove";HMap.EVENT_INTERNAL_TILE_FLIP="internaltileflip";HMap.EVENT_MAP_MOUSE_MOVE="mapmousemove";HMap.EVENT_MAP_ZOOM="mapzoom";HMap.EVENT_INTERNAL_MAP_ZOOM="internalmapzoom";HMap.EVENT_MAP_ZOOM_ACTIVATED_BY_CONTROL="mapzoomactivatedbycontrol";HMap.EVENT_MAP_CLICK="mapclick";HMap.EVENT_MAP_CLICK_RIGHT="mapclickright";HMap.EVENT_MARKER_CLICK="mapmarkerclick";HMap.EVENT_MARKER_DBLCLICK="mapmarkerdblclick";HMap.EVENT_MAP_DBLCLICK="mapdblclick";HMap.EVENT_MAP_DBLCLICK_RIGHT="mapdblclickright";HMap.EVENT_MAP_TYPE_CHANGED="maptypechanged";HMap.EVENT_INTERNAL_MAP_TYPE_CHANGED="internalmaptypechanged";HMap.EVENT_OVERLAY_ADDED="addoverlay";HMap.EVENT_OVERLAY_REMOVED="removeoverlay";HMap.EVENT_OVERLAYS_CLEARED="clearoverlays";HMap.EVENT_INFO_BOX_OPEN="infoboxopen";HMap.EVENT_INFO_BOX_CLOSE="infoboxclose";HMap.EVENT_MAP_STATUS_UPDATE="mapstatusupdate";HMap.EVENT_INTERNAL_MAP_STATUS_UPDATE="mapstatusupdate";HMap.prototype.initGlobals=function(){var a=this.globals;if(this.map.offsetWidth===0||this.map.offsetHeight===0){a.mapSize=new HSize(598,602);}else{a.mapSize=new HSize(this.map.offsetWidth,this.map.offsetHeight);}a.mapPosition=HMapHelpers.getElementPosition(this.map);a.panDestination=new HPoint(0,0);a.panCurrent=new HPoint(0,0);a.tilesPerRow=Math.ceil(a.mapSize.width/HTile.TILE_WIDTH)+HMap.TILE_PADDING;a.tilesPerColumn=Math.ceil(a.mapSize.height/HTile.TILE_HEIGHT)+HMap.TILE_PADDING;a.mapPaddingX=Math.ceil(((a.tilesPerRow*HTile.TILE_WIDTH)-a.mapSize.width)/2);a.mapPaddingY=Math.ceil(((a.tilesPerColumn*HTile.TILE_HEIGHT)-a.mapSize.height)/2);a.tileCount=a.tilesPerRow*a.tilesPerColumn;if(!a.isInitialized){this.addControl(new HCopyrightControl());}a.isInitialized=true;};HMap.prototype.initGrid=function(){var c=this.globals;HMapHelpers.clearElement(c.gridContainer);this.getMapProviderManager().initTiles();this.grid=[];for(var a=0;a<c.tileCount;a++){var b=new HTile(this,a);this.grid.push(b);}};HMap.prototype.getTileCount=function(){return this.globals.tileCount;};HMap.prototype.enableDragging=function(){this.globals.draggingEnabled=true;};HMap.prototype.disableDragging=function(){this.globals.draggingEnabled=false;};HMap.prototype.isDraggingEnabled=function(){return this.globals.draggingEnabled;};HMap.prototype.enableDoubleClickZoom=function(){this.globals.doubleClickZoomEnabled=true;};HMap.prototype.disableDoubleClickZoom=function(){this.globals.doubleClickZoomEnabled=false;};HMap.prototype.isDoubleClickZoomEnabled=function(){return this.globals.doubleClickZoomEnabled;};HMap.prototype.enableMouseWheelZoom=function(){this.globals.mouseWheelZoomEnabled=true;};HMap.prototype.disableMouseWheelZoom=function(){this.globals.mouseWheelZoomEnabled=false;};HMap.prototype.isMouseWheelZoomEnabled=function(){return this.globals.mouseWheelZoomEnabled;};HMap.prototype.overrideRightClickInterval=function(a){this.overrideRightClickValue=a;};HMap.prototype.enableExclusiveInfoBox=function(){this.globals.exclusiveInfoBoxEnabled=true;};HMap.prototype.disableExclusiveInfoBox=function(){this.globals.exclusiveInfoBoxEnabled=false;};HMap.prototype.isExclusiveInfoBoxEnabled=function(){return this.globals.exclusiveInfoBoxEnabled;};HMap.prototype.getContainer=function(){return this.map;};HMap.prototype.getPaneMap=function(){return this.globals.gridContainer;};HMap.prototype.getPaneOverlay=function(){return this.globals.overlayContainer;};HMap.prototype.getPaneControls=function(){return this.globals.overlayContainer;};HMap.prototype.getMapProviderManager=function(){return this.mapProviderManager;};HMap.prototype.getPolyLayer=function(){var a=this.globals;if(!a.polyLayer.isInitialized()){a.polyLayer.initialize();}return a.polyLayer;};HMap.prototype.addOverlay=function(b,c,a){b.category=arguments[1]||"";b.categoryExplicit=arguments[2]||false;this.overlays.push(b);b.isAdded=true;b.init(this);HEvent.trigger(this,HMap.EVENT_OVERLAY_ADDED,b);};HMap.prototype.getOverlayCount=function(){return this.overlays.length;};HMap.prototype.removeOverlay=function(a){HEvent.trigger(this,HMap.EVENT_OVERLAY_REMOVED,a);a.isAdded=false;a.remove();this.overlays.remove(a);};HMap.prototype.clearOverlays=function(b){var a=arguments[0]||false;for(var c=this.overlays.length-1;c>-1;c--){if(a||!this.overlays[c].categoryExplicit){this.overlays[c].isAdded=false;this.overlays[c].remove();this.overlays.splice(c,1);}}if(this.overlays.length===0){delete this.overlays;this.overlays=[];}HEvent.trigger(this,HMap.EVENT_OVERLAYS_CLEARED);};HMap.prototype.clearOverlaysByCategory=function(d,c){var a=arguments[1]||false;for(var b=this.overlays.length-1;b>-1;b--){if((!a&&this.overlays[b].category===d)||(a&&this.overlays[b].category!==d&&!this.overlays[b].categoryExplicit)){this.overlays[b].isAdded=false;this.overlays[b].remove();this.overlays.splice(b,1);}}HEvent.trigger(this,HMap.EVENT_OVERLAYS_CLEARED,d,a);};HMap.prototype.updateOverlays=function(){for(var a=0;a<this.overlays.length;a++){if(this.overlays[a].isActive){this.overlays[a].update();}}};HMap.prototype.getMarkers=function(){var c=arguments[0]||false;var a=[];for(var b=0;b<this.overlays.length;b++){if(this.overlays[b].isMarker){if(!c||c.containsRT90(this.overlays[b].getRT90Point())){a.push(this.overlays[b]);}}}return a;};HMap.prototype.updatePolyLayer=function(){var a=this.globals;if(a.polyLayer.isInitialized()){a.polyLayer.update();}};HMap.prototype.addControl=function(b,a){var c=arguments[1]||false;if(!c){c=b.getDefaultPosition();}this.controls.push(b);b.init(this,c);};HMap.prototype.removeControl=function(a){a.remove();this.controls.remove(a);};HMap.prototype.updateControls=function(){for(var a=0;a<this.controls.length;a++){this.controls[a].update();}};HMap.prototype.initPosition=function(){for(var a=0;a<this.grid.length;a++){this.grid[a].initPosition();}this.updateOverlays();this.updatePolyLayer();this.updateMapTiles();HEvent.trigger(this,HMap.EVENT_MAP_MOVE_END);this.updateStatus();};HMap.prototype.updateMapTiles=function(){for(var a=0;a<this.grid.length;a++){this.grid[a].updateMapTile();}};HMap.prototype.updateStatus=function(){this.mapProviderManager.updateStatus();};HMap.prototype.setFocus=function(){var b=this.globals;if(HMapHelpers.isSafari()&&b.hiddenInputElement!==null){b.hiddenInputElement.focus();}else{if(HMapHelpers.isChrome()){var a=window.scrollX,c=window.scrollY;this.map.focus();window.scrollTo(a,c);}else{if(!HMapHelpers.isIE()){this.map.focus();}}}};HMap.prototype.startDrag=function(a){var b=this.globals;if(b.draggingEnabled){b.isDragging=true;b.dragStartEventSent=false;b.startX=a.x;b.startY=a.y;b.deltaX=0;b.deltaY=0;}};HMap.prototype.drag=function(a){var d=this.globals;var c=a.x-d.startX;var b=a.y-d.startY;d.deltaX+=c;d.deltaY+=b;this.pan(c,b);d.startX=a.x;d.startY=a.y;};HMap.prototype.stopDrag=function(a){var b=this.globals;if(b.isDragging){b.isDragging=false;b.startX=a.x;b.startY=a.y;if(b.dragStartEventSent){HEvent.trigger(this,HMap.EVENT_MAP_DRAG_END);HEvent.trigger(this,HMap.EVENT_MAP_MOVE_END);this.updateStatus();}}};HMap.prototype.mouseMoveMap=function(c){var b=this.globals;var e=HMapHelpers.getMousePosition(c);b.currentMousePos=e;if(HEvent.isListening(this,HMap.EVENT_MAP_MOUSE_MOVE)){var d=new HPoint(e.x-b.mapPosition.x,e.y-b.mapPosition.y);var a=this.fromContainerPixelToRT90(d);HEvent.trigger(this,HMap.EVENT_MAP_MOUSE_MOVE,a,d);}};HMap.prototype.mouseDown=function(a){var b=a||window.event;var c=HMapHelpers.getMousePosition(b);this.setFocus();if(HMapHelpers.isLeftMouseClicked(b)){this.startDrag(c);HEvent.stopEvent(b);}};HMap.prototype.mouseMove=function(b){var c=b||window.event;var a=this.globals;if(a.isDragging){var d=HMapHelpers.getMousePosition(c);if(!a.dragStartEventSent){HEvent.trigger(this,HMap.EVENT_MAP_DRAG_START);a.dragStartEventSent=true;}if(HMapHelpers.isIEEvent(c)&&!HMapHelpers.isLeftMouseClicked(c)){this.stopDrag(d);}else{this.drag(d);}}};HMap.prototype.mouseUp=function(c){var d=c||window.event;var b=this;var a=b.globals;var f=HMapHelpers.getMousePosition(d);if(HMapHelpers.isLeftMouseClicked(d)){b.stopDrag(f);}};HMap.prototype.touchStart=function(d){var a=d.originalEvent.target.nodeName.toUpperCase();var e=new HPoint(d.position.x,d.position.y);var c=this;var b=c.globals;this.setFocus();this.startDrag(e);if(a==="IMG"){HEvent.stopEvent(d);}};HMap.prototype.touchMove=function(c){HEvent.stopEvent(c);var b=this;var a=b.globals;var d=new HPoint(c.position.x,c.position.y);a.currentMousePos=d;if(a.isDragging){if(!a.dragStartEventSent){HEvent.trigger(this,HMap.EVENT_MAP_DRAG_START);a.dragStartEventSent=true;}this.drag(d);}};HMap.prototype.touchEnd=function(c){var b=this;var a=b.globals;var d=a.currentMousePos;this.stopDrag(d);};HMap.prototype.transformStart=function(c){var b=this;var a=b.globals;a.midpoints[0]=HMap.getMidpoint(c);};HMap.prototype.transformChange=function(e){var g=e.scale;var d=this;var c=d.globals;var f=this.getZoom();if((g>1&&!this.isZoomLevelValid(f+1))||(g<1&&!this.isZoomLevelValid(f-1))){return;}if(c.midpoints.length!=0){pos=c.midpoints[0];if(g>2){g=2;}if(g<0.5){g=0.5;}var h=this.getPaneMap();var b=this.getPaneOverlay();var a=c.polyContainer;a.style.webkitTransformOrigin=b.style.webkitTransformOrigin=h.style.webkitTransformOrigin=pos.x+"px "+pos.y+"px";a.style.webkitTransform=b.style.webkitTransform=h.style.webkitTransform="scale("+g+")";}return HEvent.stopEvent(e);};HMap.prototype.transformEnd=function(a){var d=a.scale;var g=this;var j=g.globals;var f;var h;h=new HPoint(a.position.x,a.position.y);if(d>1){f=this.getZoom()+1;}else{f=this.getZoom()-1;}var k=this.fromContainerPixelToRT90(new HPoint(h.x,h.y));var c=this.getPaneMap();var e=this.getPaneOverlay();var b=j.polyContainer;b.style.webkitTransformOrigin=e.style.webkitTransformOrigin=c.style.webkitTransformOrigin=h.x+"px "+h.y+"px";b.style.webkitTransform=e.style.webkitTransform=c.style.webkitTransform="scale(1)";this.setCenter(k,f);j.midpoints=[];return HEvent.stopEvent(a);};HMap.prototype.doubleTap=function(c){var b=this.globals;var d=new HPoint(c.position[0].x-b.mapPosition.x,c.position[0].y-b.mapPosition.y);var a=this.fromContainerPixelToRT90(d);HEvent.trigger(this,HMap.EVENT_MAP_DBLCLICK,a);if(b.doubleClickZoomEnabled){this.setZoom(this.getZoom()+1,{rt90point:a,controlActivated:true});}};HMap.getMidpoint=function(a){var b=a.touches;return new HPoint((b[0].x+b[1].x)*0.5,(b[0].y+b[1].y)*0.5);};HMap.getTouchPosition=function(c){var d=c.changedTouches!==undefined&&c.changedTouches.length>0?c.changedTouches[0]:c.touches[0];var b=d.pageX;var a=d.pageY;return new HPoint(b,a);};HMap.prototype.innerMouseUp=function(g){var h=g||window.event;var f=this;var d=f.globals;var j=HMapHelpers.getMousePosition(h);if(HMapHelpers.isRightMouseClicked(h)){var c=new Date().getTime();var b=f.fromContainerPixelToRT90(new HPoint(j.x-d.mapPosition.x,j.y-d.mapPosition.y));var a=f.overrideRightClickValue?f.overrideRightClickValue:HMap.RIGHT_DOUBLE_CLICK_INTERVAL;if(c-d.rightClickTimestamp<a){clearTimeout(d.rightClickTimeout);d.rightClickTimestamp=0;HEvent.trigger(f,HMap.EVENT_MAP_DBLCLICK_RIGHT,b);if(d.doubleClickZoomEnabled){this.zoomOut();}}else{d.rightClickTimeout=setTimeout(function(){HEvent.trigger(f,HMap.EVENT_MAP_CLICK_RIGHT,b);},a);}d.rightClickTimestamp=c;}};HMap.prototype.mouseClick=function(b){var c=b||window.event;var a=this.globals;var f=HMapHelpers.getMousePosition(c);if((f.x<0||f.y<0)||(a.deltaX!==0||a.deltaY!==0)){return;}var d=this.fromContainerPixelToRT90(new HPoint(f.x-a.mapPosition.x,f.y-a.mapPosition.y));HEvent.trigger(this,HMap.EVENT_MAP_CLICK,d);};HMap.prototype.mouseDblClick=function(c){var d=c||window.event;var b=this.globals;if(jq("#streetview-preview").css("display")=="block"){b.mapPosition=HMapHelpers.getElementPosition(this.map);}var f=HMapHelpers.getMousePosition(d);var a=this.fromContainerPixelToRT90(new HPoint(f.x-b.mapPosition.x,f.y-b.mapPosition.y));HEvent.trigger(this,HMap.EVENT_MAP_DBLCLICK,a);if(b.doubleClickZoomEnabled){this.setZoom(this.getZoom()+1,{rt90point:a,controlActivated:true});}};HMap.prototype.mouseWheel=function(a){var k=this.globals;if(k.mouseWheelZoomEnabled&&k.currentMousePos!==null){var c=a||window.event;var m=c.detail?c.detail*-1:c.wheelDelta/40;var j=k.currentMousePos;var g=new HPoint(j.x-k.mapPosition.x,j.y-k.mapPosition.y);var l=this.getCenter();var b;if(m>0){b=this.getZoom()+1;}else{b=this.getZoom()-1;}if(this.isZoomLevelValid(b)){var h=Math.round(k.mapSize.width/2)-g.x;var f=Math.round(k.mapSize.height/2)-g.y;var d=HMap.ZOOM_LEVELS[b];l.east-=(k.resolution-d)*h;l.north+=(k.resolution-d)*f;this.setZoom(b,{rt90point:l,controlActivated:true});}return HEvent.stopEvent(a);}return true;};HMap.prototype.keyAction=function(b){var d=b||window.event;var a=d.charCode||d.keyCode;var c=true;switch(a){case HMap.NAVIGATION_KEYCODE_LEFT:this.panDirection(+1,0);break;case HMap.NAVIGATION_KEYCODE_UP:this.panDirection(0,+1);break;case HMap.NAVIGATION_KEYCODE_RIGHT:this.panDirection(-1,0);break;case HMap.NAVIGATION_KEYCODE_DOWN:this.panDirection(0,-1);break;case HMap.NAVIGATION_KEYCODE_ZOOM_IN:this.zoomIn();break;case HMap.NAVIGATION_KEYCODE_ZOOM_OUT:this.zoomOut();break;default:c=false;}if(c){return HEvent.stopEvent(d);}return true;};HMap.prototype.checkResize=function(){var a=this.globals;var b=this.getCenter();this.initGlobals();this.initGrid();this.updateOverlays();this.updatePolyLayer();this.updateControls();if(a.polyLayer.isInitialized()){a.polyLayer.initialize();}this.setCenter(b);};HMap.prototype.pan=function(b,a){var d=this.globals;var c;var e=false;for(c=0;c<this.grid.length;c++){if(this.grid[c].pan(b,a)){e=true;}}for(c=0;c<this.overlays.length;c++){if(this.overlays[c].isActive){this.overlays[c].pan(b,a);}}if(d.polyLayer.isInitialized()){d.polyLayer.pan(b,a);}d.centerPoint=null;HEvent.trigger(this,HMap.EVENT_INTERNAL_MAP_MOVE);HEvent.trigger(this,HMap.EVENT_MAP_MOVE);if(e){HEvent.trigger(this,HMap.EVENT_INTERNAL_TILE_FLIP);}};HMap.prototype.panBy=function(b,a){var c=this.globals;var d=this;if(!d.panTimer){c.panDestination.x=b;c.panDestination.y=a;c.panCurrent.x=0;c.panCurrent.y=0;d.panTimer=setInterval(function(){var f=(c.panDestination.x-c.panCurrent.x)/HMap.PAN_ANIMATION_SPEED;var e=(c.panDestination.y-c.panCurrent.y)/HMap.PAN_ANIMATION_SPEED;f=(f<0)?Math.floor(f):Math.ceil(f);e=(e<0)?Math.floor(e):Math.ceil(e);f=HMapHelpers.signMin(f,Math.ceil(c.mapSize.width/HMap.PAN_MAX_STEP_SIZE_PART));e=HMapHelpers.signMin(e,Math.ceil(c.mapSize.height/HMap.PAN_MAX_STEP_SIZE_PART));d.pan(f,e);c.panCurrent.x+=f;c.panCurrent.y+=e;if(c.panCurrent.x==c.panDestination.x&&c.panCurrent.y==c.panDestination.y){clearInterval(d.panTimer);d.panTimer=null;d.updateStatus();HEvent.trigger(d,HMap.EVENT_MAP_MOVE_END,"panBy");}},10);}else{if(Math.abs(c.panDestination.x-c.panCurrent.x)<c.mapSize.width&&Math.abs(c.panDestination.y-c.panCurrent.y)<c.mapSize.height){c.panDestination.x+=b;c.panDestination.y+=a;}}};HMap.prototype.panDirection=function(b,c){var d=this.globals;var e=Math.ceil(b*(d.mapSize.width-d.paddingLeft-d.paddingRight)*HMap.PAN_DIRECTION_FACTOR);var a=Math.ceil(c*(d.mapSize.height-d.paddingTop-d.paddingBottom)*HMap.PAN_DIRECTION_FACTOR);this.panBy(e,a);};HMap.prototype.panTo=function(b){var c=this.globals;var d=this.getBounds();d.scale(HMap.PAN_TO_SMOOTH_SCROLL_PADDING);if(d.containsRT90(b)){var e=new HPoint(Math.round(c.mapSize.width/2),Math.round(c.mapSize.height/2));var a=this.fromRT90toContainerPixel(b);this.panBy(e.x-a.x,e.y-a.y);}else{this.setCenter(b);}};HMap.prototype.getSize=function(){return this.globals.mapSize;};HMap.prototype.getBounds=function(){var b=this.globals;var a=this.fromContainerPixelToRT90(new HPoint(b.paddingLeft,b.mapSize.height-b.paddingBottom));var c=this.fromContainerPixelToRT90(new HPoint(b.mapSize.width-b.paddingRight,b.paddingTop));return new HBoundsRT90(a,c);};HMap.prototype.setVisiblePadding=function(e,b,a,d){var c=this.globals;c.paddingTop=e;c.paddingRight=b;c.paddingBottom=a;c.paddingLeft=d;if(c.isInitialized){this.updateControls();}};HMap.prototype.getBoundsZoomLevel=function(e,b){var c=this.globals;var d=arguments[1]||c.mapSize;var f=e.toSpan();for(var a=HMap.ZOOM_LEVELS.length-1;a>0;a--){if((d.width-c.paddingLeft-c.paddingRight)*HMap.ZOOM_LEVELS[a]>f.east&&(d.height-c.paddingTop-c.paddingBottom)*HMap.ZOOM_LEVELS[a]>f.north){return(a>this.getMaxZoomLevel())?this.getMaxZoomLevel():a;}}return 1;};HMap.prototype.closeInfoBoxes=function(){for(var a=0;a<this.overlays.length;a++){if(this.overlays[a].infoBox&&!this.overlays[a].infoBox.marker.noClose){this.overlays[a].closeInfoBox();}}};HMap.prototype.getDistancePixel=function(c,a){var b=this.globals;return b.resolution*Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));};HMap.prototype.setZoom=function(a,b){if(!this.isZoomLevelValid(a)){return false;}var e=(b!==undefined&&b.rt90point!==undefined)?b.rt90point:this.getCenter();var d=this.globals;var c=d.zoomLevel;this.setCenter(e,a);if(c!=d.zoomLevel){HEvent.trigger(this,HMap.EVENT_INTERNAL_MAP_ZOOM,c,d.zoomLevel);HEvent.trigger(this,HMap.EVENT_MAP_ZOOM,c,d.zoomLevel);}if(b!==undefined&&b.controlActivated!==undefined&&b.controlActivated){HEvent.trigger(this,HMap.EVENT_MAP_ZOOM_ACTIVATED_BY_CONTROL);}return true;};HMap.prototype.zoomIn=function(){if(this.getZoom()<this.getMaxZoomLevel()){this.setZoom(this.getZoom()+1,{controlActivated:true});}};HMap.prototype.zoomOut=function(){if(this.getZoom()>1){this.setZoom(this.getZoom()-1,{controlActivated:true});}};HMap.prototype.zoomMax=function(){this.setZoom(this.mapProviderManager.getBaseMap().getMaxZoomLevel());};HMap.prototype.getZoom=function(){var a=this.globals;return a.zoomLevel;};HMap.prototype.getResolution=function(){var a=this.globals;return HMap.ZOOM_LEVELS[a.zoomLevel];};HMap.prototype.isZoomLevelValid=function(c,b){var a=this.mapProviderManager.getBaseMap();return(c>=a.getMinZoomLevel(b)&&c<=a.getMaxZoomLevel(b));};HMap.prototype.getMaxZoomLevel=function(b){var a=this.mapProviderManager.getBaseMap();return a.getMaxZoomLevel(b);};HMap.prototype.setZoomLevel=function(b){var a=this.globals;a.zoomLevel=b;a.resolution=HMap.ZOOM_LEVELS[a.zoomLevel];};HMap.prototype.setMapType=function(c){var a=this.mapProviderManager.getBaseMap();var b=a.getMapType();a.setMapType(c);if(!this.isZoomLevelValid(this.getZoom(),c)){this.setZoom(a.getMaxZoomLevel(c));}else{this.updateMapTiles();}if(b!=c){HEvent.trigger(this,HMap.EVENT_INTERNAL_MAP_TYPE_CHANGED,b,c);HEvent.trigger(this,HMap.EVENT_MAP_TYPE_CHANGED,b,c);}};HMap.prototype.getMapType=function(){return this.mapProviderManager.getBaseMap().getMapType();};HMap.prototype.setCenter=function(n,o,k){var m=this.globals;var g=arguments[1]||-1;var e=arguments[2]||-1;if(g!=-1&&(!m.isInitialized||(m.isInitialized&&this.isZoomLevelValid(g)))){if(m.isInitialized){HEvent.trigger(this,HMap.EVENT_INTERNAL_MAP_ZOOM,this.getZoom(),g);HEvent.trigger(this,HMap.EVENT_MAP_ZOOM,this.getZoom(),g);}this.setZoomLevel(g);}else{if(this.getZoom()===0){this.setZoomLevel(HMap.DEFAULT_ZOOM_LEVEL);}}if(e!=-1){this.mapProviderManager.getBaseMap().setMapType(e);}if(!m.isInitialized){this.initGlobals();this.initGrid();}var j=HMap.ZOOM_LEVELS[m.zoomLevel];var a=n.east-HMap.RT90_BOTTOM_LEFT_GEO_POINT_EAST;var b=n.north-HMap.RT90_BOTTOM_LEFT_GEO_POINT_NORTH;var d=Math.ceil(Math.floor(a/(HTile.TILE_WIDTH*j))+0.5);var p=Math.ceil(Math.floor(b/(HTile.TILE_HEIGHT*j))+0.5);var l=(a%(HTile.TILE_WIDTH*j))/j;var f=(b%(HTile.TILE_HEIGHT*j))/j;var h=Math.floor((m.tilesPerRow-1)/2);var c=Math.floor((m.tilesPerColumn-1)/2);if(m.tilesPerRow%2===0&&Math.round(l)<HTile.TILE_WIDTH/2){h+=1;}if(m.tilesPerColumn%2===0&&Math.round(f)<HTile.TILE_HEIGHT/2){c+=1;}m.mapColumn=d-h;m.mapRow=p-c;m.tileInitOffsetX=Math.round(m.mapSize.width/2-h*HTile.TILE_WIDTH-l);m.tileInitOffsetY=Math.round(m.mapSize.height/2-(m.tilesPerColumn-c)*HTile.TILE_HEIGHT+f);m.centerPoint=n;this.initPosition();};HMap.prototype.getCenter=function(){var b=this.globals;if(b.centerPoint!==null){return b.centerPoint;}var a=new HPoint(Math.round((b.mapSize.width-b.paddingLeft-b.paddingRight)/2)+b.paddingLeft,Math.round((b.mapSize.height-b.paddingTop-b.paddingBottom)/2)+b.paddingTop);return this.fromContainerPixelToRT90(a);};HMap.prototype.fromContainerPixelToRT90=function(k){var f=!!arguments[1];var l=this.globals;var j=this.grid[0];var b=Math.floor((k.x-j.point.x)/HTile.TILE_WIDTH);var m=-Math.floor((k.y-j.point.y)/HTile.TILE_HEIGHT);var a=(k.x-j.point.x)%HTile.TILE_WIDTH;var h=(k.y-j.point.y)%HTile.TILE_HEIGHT;if(a<0){a+=HTile.TILE_WIDTH;}if(h<0){h+=HTile.TILE_HEIGHT;}var e=j.mapColumn+b;var c=j.mapRow+m;var g=HMap.RT90_BOTTOM_LEFT_GEO_POINT_EAST+(((e-1)*HTile.TILE_WIDTH)+a)*l.resolution;var d=HMap.RT90_BOTTOM_LEFT_GEO_POINT_NORTH+((c*HTile.TILE_HEIGHT)-h)*l.resolution;if(!f&&l.resolution<1){g=Math.round(g);d=Math.round(d);}return new HPointRT90(d,g);};HMap.prototype.fromRT90toContainerPixel=function(a){var b=this.globals;var c=this.fromContainerPixelToRT90(new HPoint(0,0),true);var e=Math.round((a.east-c.east)/b.resolution);var d=-Math.round((a.north-c.north)/b.resolution);return new HPoint(e,d);};HMap.prototype.getCenterTile=function(){var d=this.globals;var e=this.grid[0];var a=new HPoint(Math.round(d.mapSize.width/2),Math.round(d.mapSize.height/2));var c=Math.floor((a.x-e.point.x)/HTile.TILE_WIDTH);var b=-Math.floor((a.y-e.point.y)/HTile.TILE_HEIGHT);var f=e.mapColumn+c;var g=e.mapRow+b;return{column:f,row:g};};HMap.prototype.getBottomLeftTile=function(){var b=0;var a=this.grid[b].point;for(var c=0;c<this.grid.length;c++){if(this.grid[c].point.x<=a.x&&this.grid[c].point.y>=a.y){a=this.grid[c].point;b=c;}}return{column:this.grid[b].mapColumn,row:this.grid[b].mapRow};};HMap.prototype.fromRT90ToLatLng=function(a){return this.transform.fromRT90ToLatLng(a);};HMap.prototype.fromLatLngToRT90=function(a){return this.transform.fromLatLngToRT90(a);};function HMapProviderManager(a){this.hmap=a;this.providers=[];}HMapProviderManager.prototype.add=function(a){this.insert(this.count(),a);};HMapProviderManager.prototype.insert=function(a,c){this.providers.insert(a,c);if(this.hmap.globals.isInitialized){this.providers[a].initTiles(this.hmap);for(var b=0;b<this.hmap.grid.length;b++){this.providers[a].updateTile(b,this.hmap.getResolution(),this.hmap.grid[b].mapRow,this.hmap.grid[b].mapColumn);this.providers[a].updatePosition(b,this.hmap.grid[b].point);}}};HMapProviderManager.prototype.remove=function(a){a.remove();this.providers.remove(a);};HMapProviderManager.prototype.count=function(){return this.providers.length;};HMapProviderManager.prototype.indexOf=function(a){return this.providers.indexOf(a);};HMapProviderManager.prototype.get=function(a){return this.providers[a];};HMapProviderManager.prototype.getBaseMap=function(){return this.providers[0];};HMapProviderManager.prototype.initTiles=function(){for(var a=0;a<this.providers.length;a++){this.providers[a].initTiles(this.hmap);}};HMapProviderManager.prototype.updatePosition=function(c,a){for(var b=0;b<this.providers.length;b++){this.providers[b].updatePosition(c,a);}};HMapProviderManager.prototype.updateTile=function(e,c,b,a){for(var d=0;d<this.providers.length;d++){this.providers[d].updateTile(e,c,b,a);}};HMapProviderManager.prototype.updateStatus=function(){for(var a=0;a<this.providers.length;a++){this.providers[a].initStatusUpdate();}};function HTile(b,a){var c=b.globals;var d=this;d.point=new HPoint(-HTile.TILE_WIDTH,-HTile.TILE_HEIGHT);d.hmap=b;d.mapProviderManager=b.getMapProviderManager();d.tileIndex=a;d.tileColumn=a%c.tilesPerRow;d.tileRow=(c.tilesPerColumn-1)-parseInt(a/c.tilesPerRow,10);d.initPosition();}HTile.TILE_WIDTH=256;HTile.TILE_HEIGHT=256;HTile.prototype.initPosition=function(){var a=this.hmap.globals;this.mapRow=a.mapRow+this.tileRow;this.mapColumn=a.mapColumn+this.tileColumn;this.point.x=a.tileInitOffsetX+this.tileColumn*HTile.TILE_WIDTH;this.point.y=a.tileInitOffsetY+((a.tilesPerColumn-1)-this.tileRow)*HTile.TILE_HEIGHT;this.mapProviderManager.updatePosition(this.tileIndex,this.point);};HTile.prototype.updateMapTile=function(){var a=this.hmap.globals;this.mapProviderManager.updateTile(this.tileIndex,a.resolution,this.mapRow,this.mapColumn);};HTile.prototype.pan=function(b,a){var d=this;var c=d.hmap.globals;d.point.x+=b;d.point.y+=a;var e=false;if(d.point.x>c.mapSize.width+c.mapPaddingX-(HTile.TILE_WIDTH/2)){d.point.x-=c.tilesPerRow*HTile.TILE_WIDTH;d.mapColumn-=c.tilesPerRow;e=true;}else{if(d.point.x<=-HTile.TILE_WIDTH-c.mapPaddingX+(HTile.TILE_WIDTH/2)){d.point.x+=c.tilesPerRow*HTile.TILE_WIDTH;d.mapColumn+=c.tilesPerRow;e=true;}}if(d.point.y>c.mapSize.height+c.mapPaddingY-(HTile.TILE_HEIGHT/2)){d.point.y-=c.tilesPerColumn*HTile.TILE_HEIGHT;d.mapRow+=c.tilesPerColumn;e=true;}else{if(d.point.y<=-HTile.TILE_HEIGHT-c.mapPaddingY+(HTile.TILE_HEIGHT/2)){d.point.y+=c.tilesPerColumn*HTile.TILE_HEIGHT;d.mapRow-=c.tilesPerColumn;e=true;}}this.mapProviderManager.updatePosition(this.tileIndex,d.point);if(e){d.updateMapTile();}return e;};function HControl(){}HControl.Z_INDEX=10000000;HControl.prototype.init=function(b,a){this.hmap=b;this.position=a;if(!this.container){this.container=this.hmap.getPaneControls();}this.container.appendChild(this.element);this.update();};HControl.prototype.remove=function(){this.container.removeChild(this.element);};HControl.prototype.getElement=function(){return this.element;};HControl.prototype.update=function(){var a=this.getContainerPosition();this.element.style.left=a.x+"px";this.element.style.top=a.y+"px";};HControl.prototype.getContainerPosition=function(){var a=this.hmap.getSize();var b=this.hmap.globals;var c=new HPoint(0,0);switch(this.position.anchor){case HControlPosition.ANCHOR_TOP_RIGHT:c.x=a.width-b.paddingRight;c.y=0+b.paddingTop;break;case HControlPosition.ANCHOR_TOP_CENTER:c.x=b.paddingLeft+Math.round((a.width-b.paddingRight-b.paddingLeft)/2)-(this.getElement().offsetWidth/2);c.y=0+b.paddingTop;break;case HControlPosition.ANCHOR_TOP_LEFT:c.x=0+b.paddingLeft;c.y=0+b.paddingTop;break;case HControlPosition.ANCHOR_LEFT_CENTER:c.x=0+b.paddingLeft;c.y=b.paddingTop+Math.round((a.height-b.paddingTop-b.paddingBottom)/2);break;case HControlPosition.ANCHOR_RIGHT_CENTER:c.x=a.width-b.paddingRight;c.y=b.paddingTop+Math.round((a.height-b.paddingTop-b.paddingBottom)/2);break;case HControlPosition.ANCHOR_BOTTOM_RIGHT:c.x=a.width-b.paddingRight;c.y=a.height-b.paddingBottom;break;case HControlPosition.ANCHOR_BOTTOM_CENTER:c.x=b.paddingLeft+Math.round((a.width-b.paddingRight-b.paddingLeft)/2);c.y=a.height-b.paddingBottom;break;case HControlPosition.ANCHOR_BOTTOM_LEFT:c.x=0+b.paddingLeft;c.y=a.height-b.paddingBottom;break;case HControlPosition.ANCHOR_CENTER:c.x=Math.round(((a.width-b.paddingLeft-b.paddingRight)-this.element.offsetWidth)/2+b.paddingLeft);c.y=Math.round(((a.height-b.paddingTop-b.paddingBottom)-this.element.offsetHeight)/2+b.paddingTop);break;}c.x+=this.position.offset.x;c.y+=this.position.offset.y;return c;};HControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_TOP_LEFT);};function HZoomControl(h){if(h&&typeof h.container!=="undefined"){this.container=h.container;}var f=document.createElement("div");f.id="HZoomControl";f.className="zoom-control-container";HMapHelpers.applyStyle([f],{zIndex:HControl.Z_INDEX,position:"absolute"});var t=document.createElement("div");t.id="HzoomOutButton";t.className="outer";t.innerHTML=['<div class="button-container"><div class="main-sprite-map map-button-left-sprite"></div><div class="x-repeat-sprite-map map-button-center-sprite">',HMapMessages.get("hcontrol.zoom.label.zoom-out"),'</div><div class="main-sprite-map map-button-right-sprite"></div></div>'].join("");var s=document.createElement("div");s.id="HzoomInButton";s.className="outer";s.innerHTML=['<div class="button-container"><div class="main-sprite-map map-button-left-sprite"></div><div class="x-repeat-sprite-map map-button-center-sprite">',HMapMessages.get("hcontrol.zoom.label.zoom-in"),'</div><div class="main-sprite-map map-button-right-sprite"></div></div>'].join("");var o=document.createElement("div");o.id="HzoomBackground";o.className="inner";var n=document.createElement("div");n.className="zoom-bar";var b=document.createElement("div");b.className="zoom-bar-edge-left";var e=document.createElement("div");e.className="zoom-bar-edge-right";var c=document.createElement("div");c.className="zoom-bar-center";var q=document.createElement("div");q.className="zoom-bar-edge-top";var g=document.createElement("div");g.className="zoom-bar-edge-bottom";var d=document.createElement("div");d.className="zoom-bar-content";q.appendChild(g);g.appendChild(d);c.appendChild(q);n.appendChild(b);n.appendChild(c);n.appendChild(e);this.zoomIcons=[];for(var r=1;r<=HZoomControl.ZOOM_LEVELS;r++){var l=document.createElement("div");l.id="HzoomIcon"+r;if(r==HZoomControl.ZOOM_LEVELS){l.className="last";}l.innerHTML=r;HMapHelpers.applyStyle([this.zoomIcons[r]],{zIndex:HControl.Z_INDEX,background:"none"});this.zoomIcons[r]=l;d.appendChild(this.zoomIcons[r]);}o.appendChild(n);var k=document.createElement("div");k.className="zoom-handle";var a=document.createElement("div");a.className="zoom-handle-edge-left";var j=document.createElement("div");j.className="zoom-handle-center";var m=document.createElement("div");m.className="zoom-handle-edge-right";HMapHelpers.applyStyle([k],{zIndex:(HControl.Z_INDEX+1),top:"-1px"});var p=document.createElement("span");p.className="number";HMapHelpers.applyStyle([p],{zIndex:(HControl.Z_INDEX+1)});j.appendChild(p);k.appendChild(a);k.appendChild(j);k.appendChild(m);o.appendChild(k);this.zoomHandle=k;this.zoomHandleNumber=p;f.appendChild(t);f.appendChild(o);f.appendChild(s);this.element=f;}HZoomControl.prototype=new HControl();HZoomControl.GFX_URL="http://www.hitta.se/Images/hmap/";HZoomControl.ZOOM_LEVELS=15;HZoomControl.WIDTH=515;HZoomControl.ZOOM_LEVEL_OFFSET=87;HZoomControl.ZOOM_LEVEL_WIDTH=19;HZoomControl.ZOOM_HANDLE_WIDTH=16;HZoomControl.ZOOM_LEVEL_CONTAINER_WIDTH=HZoomControl.ZOOM_LEVELS*HZoomControl.ZOOM_LEVEL_WIDTH+HZoomControl.ZOOM_LEVEL_OFFSET;HZoomControl.ANIM_INTERVAL=10;HZoomControl.ANIM_SPEED=5;HZoomControl.prototype.init=function(j,d){var f=this;HControl.prototype.init.apply(f,[j,d]);var e=document.getElementById("HzoomOutButton");var h=document.getElementById("HzoomInButton");HEvent.addDomListener(e,"click",function(k){f.hmap.zoomOut();HEvent.stopEvent(k);});HEvent.addDomListener(h,"click",function(k){f.hmap.zoomIn();HEvent.stopEvent(k);});HEvent.addDomListener(e,"mousedown",HEvent.stopEvent);HEvent.addDomListener(h,"mousedown",HEvent.stopEvent);var g=document.getElementById("HzoomBackground");HEvent.addDomListener(g,"click",HEvent.stopEvent);HEvent.addDomListener(g,"dblclick",HEvent.stopEvent);HEvent.addDomListener(e,"dblclick",HEvent.stopEvent);HEvent.addDomListener(h,"dblclick",HEvent.stopEvent);function a(k){HEvent.addDomListener(f.zoomIcons[k],"click",function(l){f.hmap.setZoom(k,{controlActivated:true});f.isDragging=false;HEvent.stopEvent(l);});}function b(k){HEvent.addDomListener(f.zoomIcons[k],"mousedown",HEvent.stopEvent);}for(var c=1;c<=HZoomControl.ZOOM_LEVELS;c++){a(c);b(c);}HEvent.addDomListener(this.zoomHandle,"mousedown",function(k){f.startZoomHandleDrag(k);});HEvent.addDomListener(document,"mouseup",function(k){f.stopZoomHandleDrag(k);});HEvent.addDomListener(document,"mousemove",function(k){f.zoomHandleDrag(k);});this.isDragging=false;this.updateZoomLevel(j.getZoom(),true);HEvent.addListener(f.hmap,HMap.EVENT_INTERNAL_MAP_ZOOM,function(l,k){f.updateZoomLevel(k);});HEvent.addListener(f.hmap,HMap.EVENT_INTERNAL_MAP_TYPE_CHANGED,function(){f.updateStatus(null);});HEvent.addListener(HStandardMapProvider,HMap.EVENT_INTERNAL_MAP_STATUS_UPDATE,function(k){f.updateStatus(k);});};HZoomControl.prototype.updateZoomLevel=function(a,e){var d=this;var g=d.zoomHandle.offsetLeft;var b=HZoomControl.ZOOM_LEVEL_OFFSET+(HZoomControl.ZOOM_LEVEL_WIDTH*(a-1));if(a>10){var f=a-10;var c=8;b=b+c*f;}if(arguments[1]||false){d.zoomHandle.style.left=b+"px";d.zoomHandleNumber.innerHTML=a;}else{var h=setInterval(function(){var j=(b-g)/HZoomControl.ANIM_SPEED;j=(j<0)?Math.floor(j):Math.ceil(j);g+=j;d.zoomHandle.style.left=g+"px";if(g==b){clearInterval(h);d.zoomHandleNumber.innerHTML=a;}},HZoomControl.ANIM_INTERVAL);}this.zoomHandleNumber.style.visibility="visible";};HZoomControl.prototype.updateStatus=function(b){if(b!==null){this.currentStatus=b;}if(this.currentStatus){var c=this.hmap.getMapType();for(var a=1;a<=HZoomControl.ZOOM_LEVELS;a++){if(a>=this.currentStatus[c].min&&a<=this.currentStatus[c].max){if(a===HZoomControl.ZOOM_LEVELS){this.zoomIcons[a].className="last";}else{this.zoomIcons[a].className="";}}else{if(a===HZoomControl.ZOOM_LEVELS){this.zoomIcons[a].className="inactive-last";}else{this.zoomIcons[a].className="inactive";}}}}};HZoomControl.prototype.startZoomHandleDrag=function(a){var b=HMapHelpers.getMousePosition(a);HEvent.stopEvent(a);this.dragStartX=b.x;this.dragHandleStartX=this.zoomHandle.offsetLeft;this.zoomHandleNumber.style.visibility="hidden";this.isDragging=true;};HZoomControl.prototype.stopZoomHandleDrag=function(b){if(this.isDragging){var d=HMapHelpers.getMousePosition(b);var a=this.restrictZoomHandleBounds(this.dragHandleStartX+(d.x-this.dragStartX));var c=1+Math.round((a-HZoomControl.ZOOM_LEVEL_OFFSET)/HZoomControl.ZOOM_LEVEL_WIDTH);if(this.hmap.getZoom()!=c){if(!this.hmap.setZoom(c,{controlActivated:true})){this.hmap.zoomMax();}}else{this.zoomHandleNumber.style.visibility="visible";}this.isDragging=false;}};HZoomControl.prototype.zoomHandleDrag=function(b){if(this.isDragging){var c=HMapHelpers.getMousePosition(b);var a=this.restrictZoomHandleBounds(this.dragHandleStartX+(c.x-this.dragStartX));this.zoomHandle.style.left=a+"px";HEvent.stopEvent(b);}};HZoomControl.prototype.restrictZoomHandleBounds=function(a){if(a<HZoomControl.ZOOM_LEVEL_OFFSET){a=HZoomControl.ZOOM_LEVEL_OFFSET;}if(a>=HZoomControl.ZOOM_LEVEL_CONTAINER_WIDTH-HZoomControl.ZOOM_HANDLE_WIDTH){a=HZoomControl.ZOOM_LEVEL_CONTAINER_WIDTH-HZoomControl.ZOOM_HANDLE_WIDTH;}return a;};HZoomControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_BOTTOM_CENTER,new HPoint(-Math.round(HZoomControl.WIDTH/2),-30));};function HSmallZoomControl(){var d=document.createElement("div");d.id="HSmallZoomControl";HMapHelpers.applyStyle([d],{position:"absolute",zIndex:HControl.Z_INDEX});var a=document.createElement("img");a.src=HSmallZoomControl.GFX_URL+"zoom_out_small.png";HMapHelpers.applyStyle([a],{cursor:"pointer",zIndex:HControl.Z_INDEX});var c=document.createElement("img");c.src=HSmallZoomControl.GFX_URL+"zoom_in_small.png";HMapHelpers.applyStyle([c],{cursor:"pointer",zIndex:HControl.Z_INDEX});var b=this;HEvent.addDomListener(a,"click",function(f){b.zoomOut();HEvent.stopEvent(f);});HEvent.addDomListener(c,"click",function(f){b.zoomIn();HEvent.stopEvent(f);});HEvent.addDomListener(a,"dblclick",HEvent.stopEvent);HEvent.addDomListener(c,"dblclick",HEvent.stopEvent);d.appendChild(a);d.appendChild(c);this.element=d;}HSmallZoomControl.prototype=new HControl();HSmallZoomControl.WIDTH=30;HSmallZoomControl.GFX_URL="http://www.hitta.se/Images/hmap/";HSmallZoomControl.prototype.zoomIn=function(){this.hmap.zoomIn();};HSmallZoomControl.prototype.zoomOut=function(){this.hmap.zoomOut();};HSmallZoomControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_BOTTOM_CENTER,new HPoint(-Math.round(HSmallZoomControl.WIDTH/2),-20));};function HScaleControl(){var a=document.createElement("div");a.id="HScaleControl";HMapHelpers.applyStyle([a],{position:"absolute",borderStyle:"none solid solid",borderWidth:"medium 2px 2px",margin:"2px 0 5px 0",fontFamily:"Arial",fontSize:"12px",textAlign:"center",zIndex:HControl.Z_INDEX,width:"100px"});this.element=a;}HScaleControl.prototype=new HControl();HScaleControl.DEFAULT_WIDTH=100;HScaleControl.SCALE_CONFIG={1:{dist:"20mil",width:97},2:{dist:"10mil",width:97},3:{dist:"50km",width:97},4:{dist:"20km",width:78},5:{dist:"10km",width:78},6:{dist:"5km",width:78},7:{dist:"3km",width:94},8:{dist:"1,5km",width:94},9:{dist:"800m",width:HScaleControl.DEFAULT_WIDTH},10:{dist:"400m",width:HScaleControl.DEFAULT_WIDTH},11:{dist:"200m",width:HScaleControl.DEFAULT_WIDTH},12:{dist:"100m",width:HScaleControl.DEFAULT_WIDTH},13:{dist:"50m",width:HScaleControl.DEFAULT_WIDTH},14:{dist:"25m",width:HScaleControl.DEFAULT_WIDTH},15:{dist:"12,5m",width:HScaleControl.DEFAULT_WIDTH}};HScaleControl.prototype.init=function(b,a){var c=this;HControl.prototype.init.apply(c,[b,a]);this.updateZoomLevel(0,b.getZoom());HEvent.addListener(c.hmap,HMap.EVENT_INTERNAL_MAP_ZOOM,function(e,d){c.updateZoomLevel(e,d);});};HScaleControl.prototype.updateZoomLevel=function(b,a){this.element.style.width=HScaleControl.SCALE_CONFIG[a].width+"px";this.element.innerHTML=HScaleControl.SCALE_CONFIG[a].dist;this.element.style.marginLeft=(HScaleControl.DEFAULT_WIDTH-HScaleControl.SCALE_CONFIG[a].width)+"px";this.update();};HScaleControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_BOTTOM_RIGHT,new HPoint(-106,-24));};function HPanControl(){var b=document.createElement("img");b.id="HPanControl";b.src="http://www.hitta.se/Images/hmap/nav-blue.png";HMapHelpers.applyStyle([b],{position:"absolute",width:"50px",height:"50px",cursor:"pointer",zIndex:HControl.Z_INDEX});var a={up:{x1:13,y1:0,x2:36,y2:13},right:{x1:35,y1:12,x2:49,y2:35},down:{x1:13,y1:34,x2:36,y2:48},left:{x1:0,y1:12,x2:14,y2:35}};var c=this;HEvent.addDomListener(b,"click",function(g){var f=function(j,e){return(j.x>e.x1&&j.x<e.x2&&j.y>e.y1&&j.y<e.y2);};var h=HMapHelpers.getMousePosition(g);var d=HMapHelpers.getElementPosition(b);h.x-=d.x;h.y-=d.y;if(f(h,a.up)){c.hmap.panDirection(0,+1);}else{if(f(h,a.right)){c.hmap.panDirection(-1,0);}else{if(f(h,a.down)){c.hmap.panDirection(0,-1);}else{if(f(h,a.left)){c.hmap.panDirection(+1,0);}}}}return HEvent.stopEvent(g);});this.element=b;}HPanControl.prototype=new HControl();HPanControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_BOTTOM_LEFT,new HPoint(5,-75));};function HMapTypeControl(e){if(e){for(var c in e){if(e.hasOwnProperty(c)){this[c]=e[c];}}}var g=document.createElement("ul");g.id="HMapTypeControl";g.className="navigation";HMapHelpers.applyStyle([g],{zIndex:HControl.Z_INDEX,position:"absolute"});var h=document.createElement("li");h.className="edge-first";h.innerHTML='<span class="map-type-buttons-sprite"></span>';var d=document.createElement("li");d.id="maptype-normal";d.className="first";d.innerHTML=['<span class="map-type-buttons-sprite"><a href="">',HMapMessages.get("hcontrol.maptype.label.map"),"</a></span>"].join("");var a=document.createElement("li");a.id="maptype-satellite";a.className="last";a.innerHTML=['<span class="map-type-buttons-sprite"><a href="">',HMapMessages.get("hcontrol.maptype.label.satellite"),"</a></span>"].join("");var j=document.createElement("li");j.className="last";j.innerHTML=['<span class="map-type-buttons-sprite"><a href="">',HMapMessages.get("hcontrol.maptype.label.streetview"),"</a></span>"].join("");this.mapStreetview=j;var b=document.createElement("li");b.className="edge-last";b.innerHTML='<span class="map-type-buttons-sprite"></span>';this.options=[];this.options[HStandardMapProvider.MAP_TYPE_NORMAL]=d;this.options[HStandardMapProvider.MAP_TYPE_SATELLITE]=a;var f=this;this.active=true;this.waitingMode=null;HEvent.addListener(this,HMapTypeControl.EVENT_DEACTIVATE,function(k){f.active=false;});HEvent.addListener(this,HMapTypeControl.EVENT_ACTIVATE,function(k){f.active=true;});if(!this.externalHandler){HEvent.addDomListener(d,"click",function(k){f.changeTypeTo(HStandardMapProvider.MAP_TYPE_NORMAL);return HEvent.stopEvent(k);});if(!this.noSat){HEvent.addDomListener(a,"click",function(k){f.changeTypeTo(HStandardMapProvider.MAP_TYPE_SATELLITE);return HEvent.stopEvent(k);});}if(this.showStreetview){HEvent.addDomListener(j,"click",function(k){HEvent.trigger(this,"showstreetview");return HEvent.stopEvent(k);});}}g.appendChild(h);g.appendChild(d);if(!this.noSat){g.appendChild(a);}if(this.showStreetview){g.appendChild(j);}g.appendChild(b);this.element=g;}HMapTypeControl.prototype=new HControl();HMapTypeControl.prototype.init=function(b,a){var c=this;HControl.prototype.init.apply(c,[b,a]);this.changeTypeTo(b.getMapType());};HMapTypeControl.prototype.changeTypeTo=function(b){if(!this.active){this.waitingMode=b;}else{if(this.active){var a=jq(this.options[b]);this.makeSelected(a);this.hmap.setMapType(b);}}};HMapTypeControl.prototype.makeSelected=function(a){var b=a.siblings();b.find("span").removeClass("active");b.find("span").removeClass("active-neighbor");a.find("span").addClass("active");if(a.hasClass("last")){a.next().children("span").addClass("active-neighbor");}a.prev().children("span").addClass("active-neighbor");};HMapTypeControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_TOP_CENTER,new HPoint(0,0));};HMapTypeControl.EVENT_ACTIVATE="hmapTypeControlEventActivate";HMapTypeControl.EVENT_DEACTIVATE="hmapTypeControlEventDeactivate";HMapTypeControl.EVENT_BUFFERACTIVATION="hmapTypeControlBufferActivation";function HLogoControl(d,c,a){this.width=c;this.height=a;this.onClick=null;var b=document.createElement("img");b.id="HLogoControl";b.src=d;b.className="link";HMapHelpers.applyStyle([b],{position:"absolute",width:c+"px",height:a+"px",zIndex:HControl.Z_INDEX});this.onClick=HEvent.addDomListener(b,"click",function(f){location.href="http://www.hitta.se";HEvent.stopEvent(f);});this.element=b;}HLogoControl.prototype=new HControl();HLogoControl.DEFAULT_VERT_PADDING=-25;HLogoControl.DEFAULT_HORZ_PADDING=4;HLogoControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_BOTTOM_LEFT,new HPoint(HLogoControl.DEFAULT_HORZ_PADDING,HLogoControl.DEFAULT_VERT_PADDING-this.height));};function HLabel(b,a){this.position=arguments[1]||new HControlPosition(HControlPosition.ANCHOR_CENTER);var c=document.createElement("div");c.innerHTML=b;HMapHelpers.applyStyle([c],{position:"absolute"});this.element=c;}HLabel.prototype=new HControl();HLabel.prototype.getDefaultPosition=function(){return this.position;};function HCopyrightControl(){var a=document.createElement("div");HMapHelpers.applyStyle([a],{position:"absolute",fontFamily:"Arial",fontSize:"10px",zIndex:HControl.Z_INDEX});a.innerHTML="&copy Lantm&auml;teriet/Metria";this.element=a;}HCopyrightControl.prototype=new HControl();HCopyrightControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_BOTTOM_LEFT,new HPoint(2,-20));};function HControlPosition(b,a){this.anchor=b;this.offset=arguments[1]||new HPoint(0,0);}HControlPosition.ANCHOR_TOP_RIGHT=1;HControlPosition.ANCHOR_TOP_CENTER=2;HControlPosition.ANCHOR_TOP_LEFT=3;HControlPosition.ANCHOR_LEFT_CENTER=4;HControlPosition.ANCHOR_RIGHT_CENTER=5;HControlPosition.ANCHOR_BOTTOM_RIGHT=6;HControlPosition.ANCHOR_BOTTOM_CENTER=7;HControlPosition.ANCHOR_BOTTOM_LEFT=8;HControlPosition.ANCHOR_CENTER=9;function HRouteControl(){var g=document.createElement("ul");g.id="route-control";g.className="navigation";HMapHelpers.applyStyle([g],{zIndex:HControl.Z_INDEX,position:"absolute"});var c=document.createElement("li");c.className="edge-first";c.innerHTML='<span class="map-type-buttons-sprite"></span>';var b=document.createElement("li");b.id="origin";b.className="first";b.innerHTML=['<span class="map-type-buttons-sprite">',HMapMessages.get("hcontrol.route.label.start"),"</span>"].join("");var f=document.createElement("li");f.id="whole";f.className="active-neighbour";f.innerHTML=['<span class="map-type-buttons-sprite">',HMapMessages.get("hcontrol.route.label.whole"),"</span>"].join("");var a=document.createElement("li");a.id="destination";a.className="last";a.innerHTML=['<span class="map-type-buttons-sprite">',HMapMessages.get("hcontrol.route.label.destination"),"</span>"].join("");var d=document.createElement("li");d.className="edge-last";d.innerHTML='<span class="map-type-buttons-sprite"></span>';this.options=[];this.options[HRouteControl.ORIGIN]=b;this.options[HRouteControl.WHOLE]=f;this.options[HRouteControl.DESTINATION]=a;var e=this;HEvent.addDomListener(b,"click",function(h){e.changeTo(HRouteControl.ORIGIN);HEvent.trigger(e,HRouteControl.EVENT_SHOW_ORIGIN_CLICK);return HEvent.stopEvent(h);});HEvent.addDomListener(f,"click",function(h){e.changeTo(HRouteControl.WHOLE);HEvent.trigger(e,HRouteControl.EVENT_SHOW_WHOLE_CLICK);return HEvent.stopEvent(h);});HEvent.addDomListener(a,"click",function(h){e.changeTo(HRouteControl.DESTINATION);HEvent.trigger(e,HRouteControl.EVENT_SHOW_DESTINATION_CLICK);return HEvent.stopEvent(h);});g.appendChild(c);g.appendChild(b);g.appendChild(f);g.appendChild(a);g.appendChild(d);this.enabled=false;this.element=g;}HRouteControl.ORIGIN=0;HRouteControl.WHOLE=1;HRouteControl.DESTINATION=2;HRouteControl.EVENT_SHOW_ORIGIN_CLICK="showoriginclick";HRouteControl.EVENT_SHOW_WHOLE_CLICK="showwholeclick";HRouteControl.EVENT_SHOW_DESTINATION_CLICK="showdestinationclick";HRouteControl.prototype=new HControl();HRouteControl.prototype.init=function(b,a){var c=this;HControl.prototype.init.apply(c,[b,a]);};HRouteControl.prototype.getDefaultPosition=function(){return new HControlPosition(HControlPosition.ANCHOR_TOP_CENTER,new HPoint(0,0));};HRouteControl.prototype.enable=function(){this.enabled=true;};HRouteControl.prototype.disable=function(){this.enabled=false;};HRouteControl.prototype.changeTo=function(b){var a;switch(b){case HRouteControl.ORIGIN:a=jq("#origin");break;case HRouteControl.WHOLE:a=jq("#whole");break;case HRouteControl.DESTINATION:a=jq("#destination");break;}this.makeSelected(a);};HRouteControl.prototype.makeSelected=function(a){if(!this.enabled){return;}var b=a.siblings();b.find("span").removeClass("active");b.find("span").removeClass("active-neighbor");a.find("span").addClass("active");if(a.hasClass("last")){a.next().children("span").addClass("active-neighbor");}a.prev().children("span").addClass("active-neighbor");};var HMapHelpers={};HMapHelpers.createContainerDiv=function(b){var a=document.createElement("div");HMapHelpers.applyStyle([a],{position:"absolute",overflow:"hidden",textAlign:"left",width:"100%",height:"100%",left:"0px",top:"0px",UserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",cursor:"move"});b.appendChild(a);return a;};HMapHelpers.createIconElement=function(c){var a=document.createElement("div");HMapHelpers.applyStyle([a],{height:c.size.height+"px",width:c.size.width+"px",overflow:"hidden"});var b=c.size.width*c.iconIndex;HMapHelpers.applyBackgroundImage(a,c.image);HMapHelpers.setBackgroundPosition(a,-b+"px","0px");return a;};HMapHelpers.clearElement=function(a){while(a.hasChildNodes()){a.removeChild(a.lastChild);}};HMapHelpers.getMousePosition=function(c){var d=c||window.event;var b=d.pageX||(d.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var a=d.pageY||(d.clientY+(document.documentElement.scrollTop||document.body.scrollTop));return new HPoint(b,a);};HMapHelpers.getElementPosition=function(a){var d=a.offsetLeft;var c=a.offsetTop;var b=a.offsetParent;while(b!==null){d+=b.offsetLeft;c+=b.offsetTop;b=b.offsetParent;}return new HPoint(d,c);};HMapHelpers.getClientSize=function(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight;}}}return{width:b,height:a};};HMapHelpers.applyStyle=function(e,d){for(var c=0;c<e.length;c++){for(var a in d){if(a=="float"){e[c].style.cssFloat=d[a];e[c].style.styleFloat=d[a];}else{try{e[c].style[a]=d[a];}catch(b){}}}}};HMapHelpers.isIEEvent=function(a){var b=a||window.event;return !b.preventDefault;};HMapHelpers.isIE=function(){return !!document.all;};HMapHelpers.isIEVersionBelow=function(a){var c=navigator.appName;var e=navigator.appVersion;var b=parseInt(e.indexOf("MSIE"),10)+1;var d=parseFloat(e.substring(b+4,b+7));return(c=="Microsoft Internet Explorer"&&d<a);};HMapHelpers.isOpera=function(){var a=navigator.userAgent;return(a.indexOf("Opera/")!=-1);};HMapHelpers.isSafari=function(){var a=navigator.userAgent;return(a.indexOf("Safari/")!=-1&&a.indexOf("Chrome/")==-1);};HMapHelpers.isChrome=function(){var a=navigator.userAgent;return(a.indexOf("Chrome/")!=-1);};HMapHelpers.isLeftMouseClicked=function(a){var b=a||window.event;if(b.which){return(b.which===1);}else{if(b.button){return(b.button===0||b.button===1);}}return false;};HMapHelpers.isRightMouseClicked=function(a){var b=a||window.event;if(b.which){return(b.which==3||b.which==2);}else{if(b.button){return(b.button==2||b.button==3);}}return false;};HMapHelpers.initJSONP=function(d,g,c){var b=arguments[1]||5000;var f=arguments[2]||false;if(!document.body){return;}var a=document.createElement("script");a.setAttribute("type","text/javascript");if(!f){d+=(d.indexOf("?")==-1?"?":"&")+(new Date().getTime());}a.setAttribute("src",d);var e=document.getElementsByTagName("head")[0];setTimeout(function(){e.removeChild(a);},b);e.appendChild(a);};HMapHelpers.getJSONP=function(a,d,b){if(!HMapHelpers.jsonCounter){HMapHelpers.jsonCounter=new Date().getTime();}else{HMapHelpers.jsonCounter++;}var c="jsonpCallback"+HMapHelpers.jsonCounter;HMapHelpers[c]=function(e){d.call(b,e);HMapHelpers[c]=null;};HMapHelpers.initJSONP(a+(a.indexOf("?")==-1?"?":"&")+"callback=HMapHelpers."+c,null,true);};HMapHelpers.setOpacity=function(b,a){a=(a==100)?99.999:a;b.style.filter="alpha(opacity:"+a+")";b.style.KHTMLOpacity=a/100;b.style.MozOpacity=a/100;b.style.opacity=a/100;};HMapHelpers.fade=function(f,h,j,e){var d=10;var g=Math.abs(h-j);var c=(j-h)/g;var b=Math.ceil(c*(g/(e/d)));var a=setInterval(function(){HMapHelpers.setOpacity(f,h);h+=b;if((c>0&&j<=h)||(c<0&&j>=h)){clearInterval(a);}},d);};HMapHelpers.signMin=function(d,c){if(d===0||c===0){return 0;}var e=Math.abs(d);return(d/e)*Math.min(Math.abs(c),e);};HMapHelpers.applyBackgroundImage=function(a,b){a.style.backgroundImage="url("+b+")";};HMapHelpers.setBackgroundPosition=function(a,c,b){a.style.backgroundPosition=c+" "+b;};HMapHelpers.loadScript=function(c){var b=document.getElementsByTagName("head")[0];var a=document.createElement("SCRIPT");a.setAttribute("language","javascript");a.setAttribute("type","text/javascript");a.setAttribute("src",c);b.appendChild(a);};HMapHelpers.parseUrl=function(e){if(e.indexOf("?")!=-1){e=e.substring(e.indexOf("?")+1);if(e.indexOf("#")>-1){e=e.substring(0,e.indexOf("#"));}}else{if(e.indexOf("#")!=-1){e=e.substring(e.indexOf("#")+1);}}var c=e.split("&");var a={};for(var b=0;b<c.length;b++){var d=c[b].split("=");a[d[0]]=d[1];}return a;};HMapHelpers.isCanvas=function(){return(!HMapHelpers.isIE()||!(typeof window.CanvasRenderingContext2D=="undefined"&&typeof G_vmlCanvasManager=="undefined"));};HMapHelpers.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]";};HMapHelpers.makeArray=function(a){if(a===null){return[];}if(HMapHelpers.isArray(a)){return a;}return[a];};function HOverlay(){this.isAdded=false;this.isActive=true;this.container=null;}HOverlay.Z_INDEX_OFFSET=10000;HOverlay.Z_INDEX_OFFSET_INFO_BOX=HOverlay.Z_INDEX_OFFSET+3000000;HOverlay.getZIndex=function(a){return HOverlay.Z_INDEX_OFFSET+(HMap.RT90_GEO_POINT_NORTH-a.north);};HOverlay.prototype.init=function(a){this.hmap=a;this.container=this.hmap.getPaneOverlay();this.container.appendChild(this.getElement());this.update();};HOverlay.prototype.remove=function(){this.container.removeChild(this.element);};HOverlay.prototype.update=function(){};HOverlay.prototype.getElement=function(){return this.element;};function HIcon(a){this.image=a;this.anchor=new HPoint(0,0);this.infoBoxAnchorTop=new HPoint(0,0);this.infoBoxAnchorBottom=new HPoint(0,0);this.size=null;this.iconIndex=null;}HIcon.H_DEFAULT_ICON={image:"http://www.hitta.se/images/point.png",anchor:new HPoint(10,11),infoBoxAnchorTop:new HPoint(10,-2),infoBoxAnchorBottom:new HPoint(10,25),size:new HSize(25,25),iconIndex:null};function HMarker(a,b){var c=this;c.icon=arguments[1]||HIcon.H_DEFAULT_ICON;c.mode=HMarker.MODE_INFOBOX_CLICK;c.rt90point=a;c.draggingEnabled=false;c.eventListeningEnabled=true;c.overrideZIndex=null;c.isMarker=true;if(c.icon.iconIndex!=null){c.element=document.createElement("div");HMapHelpers.applyStyle([c.element],{position:"absolute",display:"block",overflow:"hidden"});}else{c.element=document.createElement("img");HMapHelpers.applyStyle([c.element],{position:"absolute"});}c.element.className="h-marker";this.setIcon(c.icon);}HMarker.prototype=new HOverlay();HMarker.MODE_INFOBOX_CLICK=0;HMarker.MODE_INFOBOX_HOVER=1;HMarker.INFOBOX_CLOSE_DELAY=1100;HMarker.AUTO_SCROLL_ZONE=20;HMarker.AUTO_SCROLL_SPEED=2;HMarker.EVENT_DRAG_START="markerdragstart";HMarker.EVENT_DRAG_END="markerdragend";HMarker.EVENT_DRAG_MOVE="markerdragmove";HMarker.EVENT_MOUSE_UP="markermouseup";HMarker.EVENT_MOUSE_DOWN="markermousedown";HMarker.EVENT_MOUSE_CLICK="markermouseclick";HMarker.EVENT_MOUSE_DBLCLICK="markermousedblclick";HMarker.EVENT_MOUSE_OVER="markermouseover";HMarker.EVENT_MOUSE_OUT="markermouseout";HMarker.EVENT_INFOBOX_OPEN="markerinfoboxopen";HMarker.EVENT_INFOBOX_CLOSE="markerinfoboxclose";HMarker.prototype.init=function(a){var b=this;b.hmap=a;this.container=b.hmap.getPaneOverlay();this.container.appendChild(this.getElement());b.update();if(this.isEventListening()){this.registerEventListeners();}};HMarker.prototype.remove=function(){this.unregisterEventListeners();HOverlay.prototype.remove.call(this);this.closeInfoBox();if(this.toolTip){this.hmap.removeOverlay(this.toolTip);}};HMarker.prototype.enableDragging=function(){this.draggingEnabled=true;};HMarker.prototype.disableDragging=function(){this.draggingEnabled=false;};HMarker.prototype.isDraggingEnabled=function(){return this.draggingEnabled;};HMarker.prototype.enableEventListening=function(){this.registerEventListeners();};HMarker.prototype.disableEventListening=function(){this.unregisterEventListeners();};HMarker.prototype.isEventListening=function(){return this.eventListeningEnabled;};HMarker.prototype.registerEventListeners=function(){if(!this.listeners){this.listeners=[];var a=this;this.listeners.push(HEvent.addDomListener(a.element,"click",function(b){return a.click(b);}));this.listeners.push(HEvent.addDomListener(a.element,"dblclick",function(b){return a.dblClick(b);}));this.listeners.push(HEvent.addDomListener(a.element,"mousedown",function(b){return a.mouseDown(b);}));this.listeners.push(HEvent.addDomListener(document,"mouseup",function(b){return a.stopDrag(b);}));this.listeners.push(HEvent.addDomListener(document,"mousemove",function(b){return a.dragging(b);}));this.listeners.push(HEvent.addDomListener(a.element,"mouseup",function(b){return a.mouseUp(b);}));this.listeners.push(HEvent.addDomListener(a.element,"mouseover",function(b){return a.mouseOver(b);}));this.listeners.push(HEvent.addDomListener(a.element,"mouseout",function(b){return a.mouseOut(b);}));this.eventListeningEnabled=true;HMapHelpers.applyStyle([this.element],{cursor:"pointer"});}};HMarker.prototype.unregisterEventListeners=function(){this.eventListeningEnabled=false;HMapHelpers.applyStyle([this.element],{cursor:""});if(this.listeners){HEvent.removeListeners(this.listeners);this.listeners=null;}};HMarker.prototype.getRT90Point=function(){return this.rt90point;};HMarker.prototype.setRT90Point=function(a){var b=!!arguments[1];this.rt90point=new HPointRT90(a.north,a.east);if(!b){this.update();}};HMarker.prototype.getContainerPixelPoint=function(){return new HPoint(this.point.x+this.icon.anchor.x,this.point.y+this.icon.anchor.y);};HMarker.prototype.getIcon=function(){return this.icon;};HMarker.prototype.setIcon=function(b){this.icon=b;var a=this.icon.size?this.icon.size:null;this.setImage(this.icon.image,a,this.icon.iconIndex);if(this.hmap){this.update();}};HMarker.prototype.getElement=function(){return this.element;};HMarker.prototype.setImage=function(b,c,f){var a=arguments[2]==undefined?null:arguments[2];var d=arguments[1]||null;if(a!=null){HMapHelpers.applyBackgroundImage(this.element,b);if(d&&d.width&&d.height){HMapHelpers.applyStyle([this.element],{height:d.height+"px",width:d.width+"px"});var e=d.width*-a;HMapHelpers.setBackgroundPosition(this.element,e+"px","0px");}}else{this.element.src=b;if(d&&d.width&&d.height){HMapHelpers.applyStyle([this.element],{height:d.height+"px",width:d.width+"px"});}}};HMarker.prototype.setZIndex=function(a){this.overrideZIndex=a;this.update();};HMarker.prototype.setMode=function(a){this.mode=a;};HMarker.prototype.hide=function(){this.element.style.display="none";};HMarker.prototype.show=function(){this.element.style.display="block";};HMarker.prototype.isHidden=function(){return(this.element.style.display=="none");};HMarker.prototype.update=function(){this.point=this.hmap.fromRT90toContainerPixel(this.rt90point);this.point.x-=this.icon.anchor.x;this.point.y-=this.icon.anchor.y;var a=this.overrideZIndex;if(a===null){a=HOverlay.getZIndex(this.rt90point);}HMapHelpers.applyStyle([this.element],{top:this.point.y+"px",left:this.point.x+"px",zIndex:a});if(this.isInfoBoxOpen()){this.infoBox.update();this.infoBox.mapMove();}};HMarker.prototype.pan=function(b,a){this.point.x+=b;this.point.y+=a;this.element.style.left=this.point.x+"px";this.element.style.top=this.point.y+"px";};HMarker.prototype.openInfoBoxHtml=function(c,a,b,d){if(c||d){this.closeInfoBox();if(this.mode==HMarker.MODE_INFOBOX_CLICK){this.infoBox=new HShadeBox({marker:this,size:a,content:c,icon:b||undefined,title:d||undefined});}else{this.infoBox=new HShadeBox({marker:this,size:a,content:c,icon:b||undefined,title:d||undefined});}this._openInfoBox();}else{this.infoBox=null;}};HMarker.prototype.openInfoBoxBound=function(){this._openInfoBox();};HMarker.prototype._openInfoBox=function(){if(this.infoBox&&!this.infoBox.isAdded&&!this.isInfoBoxOpen()){if(this.hmap.isExclusiveInfoBoxEnabled()){this.hmap.closeInfoBoxes();}HEvent.trigger(this,HMarker.EVENT_INFOBOX_OPEN);this.hmap.addOverlay(this.infoBox,this.category);}};HMarker.prototype.bindInfoBoxHtml=function(b,a){if(b!==null){this.infoBox=new HShadeBox({marker:this,size:a,content:b});}else{this.infoBox=null;}};HMarker.prototype.bindInfoBoxHtmlAndClickOptions=function(a){if(a&&a.content!==null){this.infoBox=new HShadeBox({marker:this,size:a.size,content:a.content,clickElementOptions:a.clickElementOptions});}else{this.infoBox=null;}};HMarker.prototype.closeInfoBox=function(){if(this.isInfoBoxOpen()){HEvent.trigger(this,HMarker.EVENT_INFOBOX_CLOSE);this.hmap.removeOverlay(this.infoBox);}};HMarker.prototype.isInfoBoxOpen=function(){return(this.infoBox&&this.infoBox.isAdded);};HMarker.prototype.getInfoBox=function(){return this.infoBox;};HMarker.prototype.click=function(a){if(!this.isDragging){HEvent.trigger(this,HMarker.EVENT_MOUSE_CLICK,this.getRT90Point());HEvent.trigger(this.hmap,HMap.EVENT_MARKER_CLICK,this);if(this.mode==HMarker.MODE_INFOBOX_CLICK){if(this.isInfoBoxOpen()){this.closeInfoBox();}else{this._openInfoBox();}}else{if(this.mode==HMarker.MODE_INFOBOX_HOVER){if(this.isInfoBoxOpen()){this.closeInfoBox();}}}return HEvent.stopEvent(a);}return true;};HMarker.prototype.dblClick=function(a){HEvent.trigger(this,HMarker.EVENT_MOUSE_DBLCLICK,this.getRT90Point());HEvent.trigger(this.hmap,HMap.EVENT_MARKER_DBLCLICK,this);return this.mode==HMarker.MODE_INFOBOX_CLICK?HEvent.stopEvent(a):true;};HMarker.prototype.mouseDown=function(a){HEvent.trigger(this,HMarker.EVENT_MOUSE_DOWN,this.getRT90Point());if(this.draggingEnabled){return this.startDrag(a);}return true;};HMarker.prototype.mouseUp=function(a){HEvent.trigger(this,HMarker.EVENT_MOUSE_UP,this.getRT90Point());};HMarker.prototype.mouseOut=function(b){if(this.mode==HMarker.MODE_INFOBOX_HOVER&&this.isInfoBoxOpen()){var a=this;a._infoboxElement=a.getInfoBox().getElement();setTimeout(function(){if(!a.getInfoBox().mouseIsOver&&!a.mouseIsOver){a.closeInfoBox();if(a.infoboxOutListener){HEvent.removeListener(a.infoboxOutListener);}a.infoboxOutListener=null;}else{if(!a.infoboxOutListener){a.infoboxOutListener=HEvent.addDomListener(a._infoboxElement,"mouseout",function(d){var f=d||window.event;var c=(f.relatedTarget)?f.relatedTarget:f.toElement;while(c!=a._infoboxElement&&c&&c.nodeName!="BODY"){c=c.parentNode;}if(c==a._infoboxElement){return;}setTimeout(function(){if(!a.getInfoBox().mouseIsOver&&!a.mouseIsOver){a.closeInfoBox();if(a.infoboxOutListener){HEvent.removeListener(a.infoboxOutListener);}a.infoboxOutListener=null;}},HMarker.INFOBOX_CLOSE_DELAY);});}}},HMarker.INFOBOX_CLOSE_DELAY);}this.mouseIsOver=false;HEvent.trigger(this,HMarker.EVENT_MOUSE_OUT,this.getRT90Point());};HMarker.prototype.mouseOver=function(a){HEvent.trigger(this,HMarker.EVENT_MOUSE_OVER,this.getRT90Point());if(this.mode==HMarker.MODE_INFOBOX_HOVER){this._openInfoBox();}this.mouseIsOver=true;if(this.infoBox){this.infoBox.update();}};HMarker.prototype.startDrag=function(a){if(this.draggingEnabled){var b=HMapHelpers.getMousePosition(a);this.dragStart=b;this.dragMarkerStart=new HPoint(this.element.offsetLeft,this.element.offsetTop);return HEvent.stopEvent(a);}return true;};HMarker.prototype.stopDrag=function(c){var b=false;if(this.isDragging){var a=this;setTimeout(function(){a.isDragging=false;},100);this.update();HEvent.trigger(this,HMarker.EVENT_DRAG_END,this.getRT90Point());HEvent.stopEvent(c);b=true;}this.dragStart=null;return !b;};HMarker.prototype.dragging=function(g){if(this.draggingEnabled){var h=HMapHelpers.getMousePosition(g);if(this.dragStart!=null&&!this.dragStart.equals(h)){var f=this.dragMarkerStart.x+(h.x-this.dragStart.x);var b=this.dragMarkerStart.y+(h.y-this.dragStart.y);var d=this.hmap.globals;var a=new HPoint(h.x-d.mapPosition.x,h.y-d.mapPosition.y);if(a.y<d.paddingTop+HMarker.AUTO_SCROLL_ZONE){this.hmap.pan(0,HMarker.AUTO_SCROLL_SPEED);}else{if(a.y>d.mapSize.height-d.paddingBottom-HMarker.AUTO_SCROLL_ZONE){this.hmap.pan(0,-HMarker.AUTO_SCROLL_SPEED);}}if(a.x<d.paddingLeft+HMarker.AUTO_SCROLL_ZONE){this.hmap.pan(HMarker.AUTO_SCROLL_SPEED,0);}else{if(a.x>d.mapSize.width-d.paddingRight-HMarker.AUTO_SCROLL_ZONE){this.hmap.pan(-HMarker.AUTO_SCROLL_SPEED,0);}}var c=this.hmap.fromContainerPixelToRT90(new HPoint(f+this.icon.anchor.x,b+this.icon.anchor.y));this.setRT90Point(c,true);if(!this.isDragging){this.isDragging=true;HEvent.trigger(this,HMarker.EVENT_DRAG_START,c);}HEvent.trigger(this,HMarker.EVENT_DRAG_MOVE,c);this.element.style.left=f+"px";this.element.style.top=b+"px";if(this.isInfoBoxOpen()){this.infoBox.update();}return HEvent.stopEvent(g);}}return true;};function HInfoBox(f,n,d,h,k,l,b){var e=arguments[4]||null;var g=arguments[5]||null;var c=arguments[6]||false;if(f.x&&f.y){this.setPoint(f);}else{this.attachToMarker(f);}this.anchorType=d;this.size=n;this.zIndex=HOverlay.Z_INDEX_OFFSET_INFO_BOX;this.showCloseLink=c;this.sizeApplied=false;var a=document.createElement("div");a.innerHTML=h;if(e&&g){this.headerDiv=document.createElement("Div");HMapHelpers.applyStyle([this.headerDiv],{display:"block",position:"relative",width:100+"%",minHeight:k.size.height+"px",marginBottom:"10px"});this.iconDiv=HMapHelpers.createIconElement(e);HMapHelpers.applyStyle([this.iconDiv],{position:"absolute",top:0+"px",left:0+"px"});this.labelDiv=document.createElement("Div");HMapHelpers.applyStyle([this.labelDiv],{position:"relative",width:n.width-k.size.width-15+"px",left:k.size.width+10+"px"});var m=document.createElement("span");HMapHelpers.applyStyle([m],{fontWeight:"bold"});m.innerHTML=l;this.labelDiv.appendChild(m);this.headerDiv.appendChild(this.iconDiv);this.headerDiv.appendChild(this.labelDiv);var j=document.createElement("Div");HMapHelpers.applyStyle([j],{position:"absolute"});j.appendChild(this.headerDiv);j.appendChild(a);this.contentElement=j;}else{this.contentElement=a;}}HInfoBox.prototype=new HOverlay();HInfoBox.CFG_POSITION_OFFSET_TOP=0;HInfoBox.CFG_POSITION_OFFSET_BOTTOM=0;HInfoBox.CFG_POSITION_OFFSET_LEFT=0;HInfoBox.ANCHOR_NONE=0;HInfoBox.ANCHOR_TOPLEFT=1;HInfoBox.ANCHOR_TOPRIGHT=2;HInfoBox.ANCHOR_BOTTOMLEFT=3;HInfoBox.ANCHOR_BOTTOMRIGHT=4;HInfoBox.POINTER_WIDTH=27;HInfoBox.POINTER_HEIGHT=14;HInfoBox.POINTER_INDENT=15;HInfoBox.FLIP_OFFSET_HORZ=HInfoBox.POINTER_INDENT+parseInt(HInfoBox.POINTER_WIDTH/2,10);HInfoBox.FLIP_OFFSET_VERT=HInfoBox.POINTER_HEIGHT+50;HInfoBox.POINTER_IMG_TOP="http://www.hitta.se/images/hmap/infobox_pointer_top.gif";HInfoBox.POINTER_IMG_BOTTOM="http://www.hitta.se/images/hmap/infobox_pointer_bottom.gif";HInfoBox.prototype.setStyle=function(){HMapHelpers.applyStyle([this.contentElement],{border:"1px solid #000",backgroundColor:"#fff",margin:"0px",position:"absolute",fontFamily:"verdana",fontSize:"11px",padding:"5px",zIndex:(this.zIndex+2),MozBorderRadius:"7px",WebkitBorderRadius:"7px",MozBoxShadow:"3px 3px 5px #333",WebkitBoxShadow:"3px 3px 5px #333"});};HInfoBox.prototype.constructInfoBox=function(){var a=this.contentElement;this.setStyle();var d=document.createElement("div");var c=document.createElement("div");var f=document.createElement("div");var b=document.createElement("div");HMapHelpers.applyStyle([d,c,f,b],{margin:"0px",padding:"0px",overflow:"hidden",zIndex:this.zIndex,position:"absolute",backgroundRepeat:"no-repeat"});HMapHelpers.applyStyle([d],{bottom:-HInfoBox.POINTER_HEIGHT+"px",right:HInfoBox.POINTER_INDENT+"px",width:HInfoBox.POINTER_WIDTH+"px",height:HInfoBox.POINTER_HEIGHT+"px",backgroundImage:"url('"+HInfoBox.POINTER_IMG_BOTTOM+"')"});HMapHelpers.applyStyle([b],{bottom:-HInfoBox.POINTER_HEIGHT+"px",left:HInfoBox.POINTER_INDENT+"px",width:HInfoBox.POINTER_WIDTH+"px",height:HInfoBox.POINTER_HEIGHT+"px",backgroundImage:"url('"+HInfoBox.POINTER_IMG_BOTTOM+"')"});HMapHelpers.applyStyle([c],{top:-HInfoBox.POINTER_HEIGHT+"px",left:HInfoBox.POINTER_INDENT+"px",width:HInfoBox.POINTER_WIDTH+"px",height:HInfoBox.POINTER_HEIGHT+"px",backgroundImage:"url('"+HInfoBox.POINTER_IMG_TOP+"')"});HMapHelpers.applyStyle([f],{top:-HInfoBox.POINTER_HEIGHT+"px",right:HInfoBox.POINTER_INDENT+"px",width:HInfoBox.POINTER_WIDTH+"px",height:HInfoBox.POINTER_HEIGHT+"px",backgroundImage:"url('"+HInfoBox.POINTER_IMG_TOP+"')"});this.pointerBottomRight=d;this.pointerTopLeft=c;this.pointerTopRight=f;this.pointerBottomLeft=b;this.element=a;if(this.showCloseLink){var e=this.createCloseLink();this.element.appendChild(e);}this.pointer=null;this.setAnchorType(this.anchorType);};HInfoBox.prototype.createCloseLink=function(){var b=this;var a=document.createElement("a");a.innerHTML="St&auml;ng";HMapHelpers.applyStyle([a],{display:"block",color:"#999",fontSize:"10px",cursor:"pointer",textDecoration:"underline",cssFloat:"right",styleFloat:"right"});if(this.listeners===null){this.listeners=[];}this.listeners.push(HEvent.addDomListener(a,"mouseover",function(c){HMapHelpers.applyStyle([a],{color:"#c2850f"});}));this.listeners.push(HEvent.addDomListener(a,"mouseout",function(c){HMapHelpers.applyStyle([a],{color:"#999"});}));this.listeners.push(HEvent.addDomListener(a,"click",function(c){HEvent.stopEvent(c);if(b.marker){b.marker.closeInfoBox();}else{b.remove();}}));return a;};HInfoBox.prototype.init=function(a){var c=this;c.hmap=a;var b=this.getElement();if(b===null){this.constructInfoBox();b=this.getElement();}HMapHelpers.applyStyle([b],{top:"-1000px",left:"-1000px"});this.container=this.hmap.getPaneOverlay();this.container.appendChild(b);if(!this.sizeApplied){if(this.size===null){this.size=new HSize(b.offsetWidth,b.offsetHeight);}else{this.setSize(this.size);}}this.sizeApplied=true;if(c.iconDiv&&c.labelDiv){var d=(c.iconDiv.offsetHeight-c.labelDiv.offsetHeight)/2;if(d>0){HMapHelpers.applyStyle([c.labelDiv],{top:d+"px"});}}this.update();this.mapMove();if(this.listeners===null){this.listeners=[];}this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_INTERNAL_MAP_MOVE,function(){c.mapMove();}));this.listeners.push(HEvent.addDomListener(this.element,"mousemove",HEvent.stopEvent));this.listeners.push(HEvent.addDomListener(this.element,"mouseover",function(f){c.mouseOver();}));this.listeners.push(HEvent.addDomListener(this.element,"mouseout",function(f){c.mouseOut();}));this.listeners.push(HEvent.addDomListener(this.contentElement,"click",function(f){c.mouseClick(f);}));HEvent.trigger(c,HMap.EVENT_INFO_BOX_OPEN,this);};HInfoBox.prototype.setSize=function(b){var a={};if(b.width!==null){a.width=b.width+"px";}if(b.height!==null){a.height=b.height+"px";}HMapHelpers.applyStyle([this.getElement()],a);this.size=new HSize(this.getElement().offsetWidth,this.getElement().offsetHeight);};HInfoBox.prototype.setAnchorType=function(a){this.anchorType=a;if(this.pointer!==null){this.element.removeChild(this.pointer);}switch(a){case HInfoBox.ANCHOR_TOPLEFT:this.pointer=this.pointerTopLeft;break;case HInfoBox.ANCHOR_TOPRIGHT:this.pointer=this.pointerTopRight;break;case HInfoBox.ANCHOR_BOTTOMLEFT:this.pointer=this.pointerBottomLeft;break;case HInfoBox.ANCHOR_BOTTOMRIGHT:this.pointer=this.pointerBottomRight;break;}if(this.pointer!==null){this.element.appendChild(this.pointer);}};HInfoBox.prototype.remove=function(){HOverlay.prototype.remove.call(this);HEvent.removeListeners(this.listeners);HEvent.trigger(this,HMap.EVENT_INFO_BOX_CLOSE,this);};HInfoBox.prototype.setPoint=function(a){this.point=new HPoint(a.x,a.y);};HInfoBox.prototype.attachToMarker=function(a){this.marker=a;};HInfoBox.prototype.getContentContainer=function(){return this.contentElement;};HInfoBox.prototype.hide=function(){this.element.style.display="none";};HInfoBox.prototype.show=function(){this.element.style.display="block";};HInfoBox.prototype.isHidden=function(){return(this.element.style.display=="none");};HInfoBox.prototype.update=function(){var a,d;if(typeof(this.marker)!="undefined"){this.point=this.marker.point.clone();var c=this.marker.getIcon();if(c.infoBoxAnchorTop){a=c.infoBoxAnchorTop.clone();}if(c.infoBoxAnchorBottom){d=c.infoBoxAnchorBottom.clone();}}else{a=new HPoint(0,0);d=new HPoint(0,0);}var b=true;switch(this.anchorType){case HInfoBox.ANCHOR_TOPLEFT:this.point.x+=d.x-(HInfoBox.POINTER_WIDTH/2+HInfoBox.POINTER_INDENT);this.point.y+=HInfoBox.POINTER_HEIGHT+d.y;break;case HInfoBox.ANCHOR_TOPRIGHT:if(!b){this.point.x-=10;}this.point.x+=-(this.size.width-HInfoBox.POINTER_WIDTH/2-HInfoBox.POINTER_INDENT)+d.x;this.point.y+=HInfoBox.POINTER_HEIGHT+d.y;break;case HInfoBox.ANCHOR_BOTTOMLEFT:if(!b){this.point.y-=8;}this.point.x+=a.x-(HInfoBox.POINTER_WIDTH/2+HInfoBox.POINTER_INDENT);this.point.y+=-(this.size.height+HInfoBox.POINTER_HEIGHT)+a.y;break;case HInfoBox.ANCHOR_BOTTOMRIGHT:if(!b){this.point.y-=8;this.point.x-=10;}this.point.x+=-(this.size.width-HInfoBox.POINTER_WIDTH/2-HInfoBox.POINTER_INDENT)+a.x;this.point.y+=-(this.size.height+HInfoBox.POINTER_HEIGHT)+a.y;break;}this.element.style.left=this.point.x+"px";this.element.style.top=this.point.y+"px";};HInfoBox.prototype.pan=function(b,a){this.point.x+=b;this.point.y+=a;this.element.style.left=this.point.x+"px";this.element.style.top=this.point.y+"px";};HInfoBox.prototype.mouseOver=function(){this.mouseIsOver=true;};HInfoBox.prototype.mouseOut=function(){this.mouseIsOver=false;};HInfoBox.prototype.mouseClick=function(a){};HInfoBox.prototype.mapMove=function(){var a=this.checkAnchorType();if(a!=this.anchorType){this.setAnchorType(a);this.update();}};HInfoBox.prototype.checkAnchorType=function(){var e=0;if(this.marker){var d=this.marker.getIcon();if(d.infoBoxAnchorBottom&&d.infoBoxAnchorTop){e=Math.abs(d.infoBoxAnchorBottom.y-d.infoBoxAnchorTop.y);}}var c=this.hmap.globals;var a=this.anchorType;if(this.point.y<=c.paddingTop&&(this.anchorType==HInfoBox.ANCHOR_BOTTOMLEFT||this.anchorType==HInfoBox.ANCHOR_BOTTOMRIGHT)){a=a-2;}else{if(this.point.y>(this.size.height+c.paddingTop+e+HInfoBox.FLIP_OFFSET_VERT)&&(this.anchorType==HInfoBox.ANCHOR_TOPLEFT||this.anchorType==HInfoBox.ANCHOR_TOPRIGHT)){a=a+2;}}var b=this.hmap.getSize().width;if(this.point.x<=(b-c.paddingRight-2*this.size.width)&&(this.anchorType==HInfoBox.ANCHOR_TOPRIGHT||this.anchorType==HInfoBox.ANCHOR_BOTTOMRIGHT)){a=a-1;}else{if(this.point.x>(b-c.paddingRight-this.size.width-HInfoBox.FLIP_OFFSET_HORZ)&&(this.anchorType==HInfoBox.ANCHOR_TOPLEFT||this.anchorType==HInfoBox.ANCHOR_BOTTOMLEFT)){a=a+1;}}return a;};function HPopup(a,d,c){var b=this;b.rt90point=a;b.content=d;b.element=document.createElement("div");b.element.appendChild(d);b.styles=c;}HPopup.prototype=new HOverlay();HPopup.Z_INDEX_OFFSET_POPUP=3000000;HPopup.prototype.init=function(a){var b=this;b.hmap=a;this.container=b.hmap.getPaneOverlay();this.container.appendChild(this.getElement());b.setPosition();b.registerEventListeners();};HPopup.prototype.setPosition=function(){this.point=this.hmap.fromRT90toContainerPixel(this.rt90point);this.zIndex=HOverlay.getZIndex(this.rt90point)+HPopup.Z_INDEX_OFFSET_POPUP;var a=this.hmap.getSize().width;var b=this.hmap.getSize().height;var d=0;var c=0;HMapHelpers.applyStyle([this.element],{top:this.point.y+"px",left:this.point.x+"px",position:"absolute",background:"#fff",cursor:"pointer",zIndex:this.zIndex});if(this.point.x>a-this.element.offsetWidth){c=this.point.x-this.element.offsetWidth;}else{c=this.point.x;}if(this.point.y>b-this.element.offsetHeight){d=this.point.y-this.element.offsetHeight;}else{d=this.point.y;}HMapHelpers.applyStyle([this.element],{top:d+"px",left:c+"px"});HMapHelpers.applyStyle([this.element],this.styles);};HPopup.prototype.registerEventListeners=function(){if(!this.listeners){this.listeners=[];var a=this;this.listeners.push(HEvent.addDomListener(a.element,"click",function(b){a.remove();}));this.listeners.push(HEvent.addListener(a.hmap,HMap.EVENT_MAP_CLICK,function(b){a.remove();}));this.listeners.push(HEvent.addListener(a.hmap,HMap.EVENT_MAP_DRAG_START,function(b){a.remove();}));this.listeners.push(HEvent.addListener(a.hmap,HMap.EVENT_MAP_CLICK_RIGHT,function(b){a.remove();}));this.listeners.push(HEvent.addListener(a.hmap,HMap.EVENT_MAP_DBLCLICK_RIGHT,function(b){a.remove();}));}};HPopup.prototype.remove=function(){HOverlay.prototype.remove.call(this);HEvent.removeListeners(this.listeners);};HPopup.prototype.pan=function(){return false;};function HPolyLayer(a){this.hmap=a;this.globals={isInitialized:false,mainCanvas:null,mainCtx:null,volatileCanvas:null,volatileCtx:null,width:0,height:0,polyContainer:null};this.polys=[];var b=this.globals;b.polyContainer=a.globals.polyContainer;}HPolyLayer.Z_INDEX=HOverlay.Z_INDEX_OFFSET-1;HPolyLayer.CLIPPING=false;HPolyLayer.prototype.initialize=function(){var a=this.globals;HMapHelpers.clearElement(a.polyContainer);if(!HMapHelpers.isCanvas()){var b=this;this.failCount=this.failCount||0;this.failCount++;if(this.failCount<15){setTimeout(function(){b.initialize();},200);}else{delete this.failCount;alert("ExCanvas not loaded!");}}else{this.initCanvas(a.polyContainer,this.hmap.getSize());a.isInitialized=true;}};HPolyLayer.prototype.isInitialized=function(){return this.globals.isInitialized;};HPolyLayer.prototype.initCanvas=function(a,b){var c=this.globals;c.size=b;HMapHelpers.applyStyle([a],{zIndex:HPolyLayer.Z_INDEX});c.mainCanvas=this.createCanvas(a,c.size.width,c.size.height);c.mainCanvas.id="mainCanvas";c.mainCtx=c.mainCanvas.getContext("2d");c.volatileCanvas=this.createCanvas(a,c.size.width,c.size.height);c.volatileCanvas.id="volatileCanvas";c.volatileCtx=c.volatileCanvas.getContext("2d");this.setStyle(c.mainCtx,{strokeColor:"255, 5, 138",strokeOpacity:0.8,fillColor:"255, 25, 13",fillOpacity:0.6,weight:4});this.setStyle(c.volatileCtx,{strokeColor:"165, 255, 0",strokeOpacity:0.8,fillColor:"25, 255, 13",fillOpacity:0.6,weight:4});};HPolyLayer.prototype.createCanvas=function(b,d,a){var c=document.createElement("canvas");b.appendChild(c);if(typeof G_vmlCanvasManager!="undefined"){c=G_vmlCanvasManager.initElement(c);}c.width=d;c.height=a;c.setAttribute("width",d);c.setAttribute("height",a);HMapHelpers.applyStyle([c],{position:"absolute",overflow:"hidden",left:"0px",top:"0px",UserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",zIndex:HPolyLayer.Z_INDEX});return c;};HPolyLayer.prototype.addPoly=function(a,c){var b=arguments[1]||false;a.init(this.hmap);this.polys.push(a);if(!b){this.update(true);}};HPolyLayer.prototype.removePoly=function(a){this.polys.remove(a);};HPolyLayer.prototype.removeAllPoly=function(){this.polys=[];};HPolyLayer.prototype.update=function(e){if(this.isInitialized()){var d=arguments[1]||false;var c=this.getBounds();if(!d){this.clearAll();}var a=this.polys.length;for(var b=0;b<a;b++){this.polys[b].update(c);}}};HPolyLayer.prototype.pan=function(b,a){if(this.polys.length){this.update();}};HPolyLayer.prototype.getBounds=function(){return this.hmap.getBounds();};HPolyLayer.prototype.getPane=function(){return this.hmap.globals.polyContainer;};HPolyLayer.prototype.getCtxVolatile=function(){return this.globals.volatileCtx;};HPolyLayer.prototype.getCtxMain=function(){return this.globals.mainCtx;};HPolyLayer.prototype.clear=function(a){var b=this.globals;a.beginPath();a.clearRect(0,0,b.size.width,b.size.height);a.closePath();};HPolyLayer.prototype.clearAll=function(){this.clear(this.getCtxVolatile());this.clear(this.getCtxMain());};HPolyLayer.prototype.setStyle=function(a,b){if(b===null){return;}if(b.strokeColor&&b.strokeOpacity){a.strokeStyle="rgba("+b.strokeColor+", "+b.strokeOpacity+")";}else{if(b.strokeColor){a.strokeStyle="rgb("+b.strokeColor+")";}}if(b.fillColor&&b.fillOpacity){a.fillStyle="rgba("+b.fillColor+", "+b.fillOpacity+")";}else{if(b.fillColor){a.fillStyle="rgb("+b.fillColor+")";}}if(b.weight){a.lineWidth=b.weight;}a.lineCap="round";a.lineJoin="round";};HPolyLayer.prototype.drawPixelPoly=function(j,b,g){var c=0,d=0;if(b.length===0){return;}if(HPolyLayer.CLIPPING){var k=this.hmap.getSize();var f=new HPoint(k.width,0);var h=new HPoint(0,k.height);var a=0;j.beginPath();j.moveTo(b[0].x,b[0].y);var e=true;for(c=1,d=b.length;c<d;c++){if(this.intersectLineBounds(b[c-1],b[c],f,h)){if(!e){j.moveTo(b[c-1].x,b[c-1].y);}j.lineTo(b[c].x,b[c].y);e=true;}else{a++;e=false;}}}else{j.beginPath();j.moveTo(b[0].x,b[0].y);for(c=1,d=b.length;c<d;c++){j.lineTo(b[c].x,b[c].y);}}if(g){j.fill();}else{j.stroke();}};HPolyLayer.prototype.drawPolyline=function(d,c,g){if(c.getVertexCount()===0){return;}var b=arguments[2]||null;var f=[];var a=c.getVertexCount();for(var e=0;e<a;e++){f.push(this.hmap.fromRT90toContainerPixel(c.getVertex(e)));}if(b===null){b=c.isClosed();}d.save();this.setStyle(d,c.getStyle());this.drawPixelPoly(d,f,b);d.restore();};HPolyLayer.prototype.drawPolyBezier=function(l,h){var f=true,g=0;var c=this.vertexToPoint(0,h.vertexList);var k=c.length;if(k<3&&!arguments[2]){return;}l.save();l.beginPath();var j=h.hue||199;var b=h.lum||40;var e=h.sat||40;var a=h.maxStep||100;l.strokeStyle="hsl("+j+", "+(e)+"%, "+(b-10)+"%)";l.strokeStyle=this.hmap.HSLtoRGB(l.strokeStyle);l.shadowBlur=15;l.shadowColor="rgba(0,0,0,.2)";l.moveTo(c[0].x,c[0].y);l.lineWidth=h.width||7;var d=Math.ceil(k/a)+2;if(!f){for(g=1;g<k-d;g=g+d){l.bezierCurveTo(c[g].x,c[g].y,c[g+1].x,c[g+1].y,c[g+2].x,c[g+2].y);}}else{for(g=1;g<k;g++){l.lineTo(c[g].x,c[g].y);}}l.stroke();l.strokeStyle="hsl("+j+", "+(e+10)+"%, "+(b+30)+"%)";l.strokeStyle=this.hmap.HSLtoRGB(l.strokeStyle);l.lineWidth=Math.ceil(l.lineWidth*0.5);l.beginPath();l.moveTo(c[0].x,c[0].y);if(!f){for(g=1;g<k-d;g=g+d){l.bezierCurveTo(c[g].x,c[g].y,c[g+1].x,c[g+1].y,c[g+2].x,c[g+2].y);}}else{for(g=1;g<k;g++){l.lineTo(c[g].x,c[g].y);}}l.stroke();l.restore();};HPolyLayer.prototype.drawLine=function(c,b,a){var e=this.hmap.fromRT90toContainerPixel(b);var d=this.hmap.fromRT90toContainerPixel(a);c.beginPath();c.moveTo(e.x,e.y);c.lineTo(d.x,d.y);c.stroke();};HPolyLayer.prototype.drawCircle=function(c,d,b,e){var a=this.hmap.fromRT90toContainerPixel(d);c.beginPath();c.arc(a.x,a.y,b,0,Math.PI*2,true);if(e){c.fill();}else{c.stroke();}};HPolyLayer.prototype.drawBounds=function(a,c,d){var b=this.hmap.fromRT90toContainerPixel(c.sw);var e=this.hmap.fromRT90toContainerPixel(c.ne);a.beginPath();a.moveTo(b.x,b.y);a.lineTo(b.x,e.y);a.lineTo(e.x,e.y);a.lineTo(e.x,b.y);a.lineTo(b.x,b.y);if(d){a.fill();}else{a.stroke();}};HPolyLayer.prototype.intersectLineLine=function(j,a,b,h){var c=(h.y-b.y)*(a.x-j.x)-(h.x-b.x)*(a.y-j.y);var e=(h.x-b.x)*(j.y-b.y)-(h.y-b.y)*(j.x-b.x);var d=(a.x-j.x)*(j.y-b.y)-(a.y-j.y)*(j.x-b.x);if(c===0){if(e===0&&d===0){if(!(Math.min(b.x,h.x)>Math.max(j.x,a.x)||Math.max(b.x,h.x)<Math.min(j.x,a.x)||Math.min(b.y,h.y)>Math.max(j.y,a.y)||Math.max(b.y,h.y)<Math.min(j.y,a.y))){return true;}}return false;}var g=e/c;var f=d/c;return(!((g<0||g>1)||(f<0||f>1)));};HPolyLayer.prototype.intersectLineLineRT90=function(c,b,d,a){return this.intersectLineLine(this.hmap.fromRT90toContainerPixel(c),this.hmap.fromRT90toContainerPixel(b),this.hmap.fromRT90toContainerPixel(d),this.hmap.fromRT90toContainerPixel(a));};HPolyLayer.prototype.intersectLineBounds=function(d,a,c,b){if(Math.min(d.x,a.x)>=Math.min(b.x,c.x)&&Math.max(d.x,a.x)<=Math.max(b.x,c.x)&&Math.min(d.y,a.y)>=Math.min(c.y,b.y)&&Math.max(d.y,a.y)<=Math.max(c.y,b.y)){return true;}return(this.intersectLineLine(d,a,new HPoint(b.x,c.y),new HPoint(b.x,b.y))||this.intersectLineLine(d,a,new HPoint(b.x,b.y),new HPoint(c.x,b.y))||this.intersectLineLine(d,a,new HPoint(c.x,b.y),new HPoint(c.x,c.y))||this.intersectLineLine(d,a,new HPoint(c.x,c.y),new HPoint(b.x,c.y)));};HPolyLayer.prototype.intersectLineBoundsRT90=function(a,c,b){return this.intersectLineBounds(this.hmap.fromRT90toContainerPixel(a),this.hmap.fromRT90toContainerPixel(c),this.hmap.fromRT90toContainerPixel(b.ne),this.hmap.fromRT90toContainerPixel(b.sw));};function HPolyStyle(){this.fillColor="192, 192, 16";this.fillOpacity=0.8;this.strokeColor="192, 16, 192";this.strokeOpacity=0.8;this.weight=2;}function HPoly(){this.style=null;}HPoly.prototype.init=function(a){this.hmap=a;this.polyLayer=a.globals.polyLayer;};HPoly.prototype.remove=function(){var a=this.polyLayer.globals;this.polyLayer.clear(a.mainCtx);};HPoly.prototype.update=function(a){};HPoly.prototype.setStyle=function(a){this.style=a;};HPoly.prototype.getStyle=function(){return this.style;};function HPolyline(){this.pathClosed=false;this.vertexList=[];}HPolyline.prototype=new HPoly();HPolyline.prototype.update=function(){var a=this.polyLayer.globals;this.polyLayer.drawPolyline(a.mainCtx,this);};HPolyline.prototype.insertVertex=function(b,a){this.vertexList.splice(b,0,a);};HPolyline.prototype.addVertex=function(a){this.vertexList.push(a);};HPolyline.prototype.deleteVertex=function(a){this.vertexList.splice(a,1);};HPolyline.prototype.getVertex=function(a){return this.vertexList[a];};HPolyline.prototype.getVertexCount=function(){return this.vertexList.length;};HPolyline.prototype.reset=function(){this.vertexList=[];};HPolyline.prototype.getBounds=function(){if(this.vertexList.length===0){return null;}var c=new HBoundsRT90(this.vertexList[0],this.vertexList[0]);var a=this.vertexList.length;for(var b=1;b<a;b++){c.extend(this.vertexList[b]);}return c;};HPolyline.prototype.getLength=function(){var c=0;var a=this.vertexList.length;for(var b=1;b<a;b++){c+=this.vertexList[b-1].distanceTo(this.vertexList[b]);}return c;};HPolyline.prototype.getArea=function(){if(this.getVertexCount()<3){return 0;}var a=this.vertexList.length;var d=0;var c=this.vertexList[a-1];var e=null;for(var b=0;b<a;b++){e=this.vertexList[b];d+=(c.east*e.north)-(c.north*e.east);c=e;}return Math.abs(d/2);};HPolyline.prototype.setClosed=function(a){this.pathClosed=a;};HPolyline.prototype.isClosed=function(){return this.pathClosed;};function HPolyBezier(a){this.hue=a.hue||199;this.lum=a.lum||40;this.sat=a.sat||40;this.maxStep=a.maxStep||100;this.width=a.width||7;this.pathClosed=false;this.vertexList=[];}HPolyBezier.prototype=new HPolyline();HPolyBezier.prototype.update=function(){var a=this.polyLayer.globals;this.polyLayer.drawPolyBezier(a.mainCtx,this,this.hue,this.lum);};function HPolylineExtended(a){this.pixelThreshold=arguments[0]||HPolylineExtended.THRESHOLD_PIXELS;this.reset();}HPolylineExtended.prototype=new HPolyline();HPolylineExtended.THRESHOLD_PIXELS=7;HPolylineExtended.prototype.update=function(){var b=this.polyLayer.globals;var a=this.getPolyline(this.hmap.getResolution());a.setStyle(this.getStyle());this.polyLayer.drawPolyline(b.mainCtx,a);};HPolylineExtended.prototype.getPolyline=function(a){if(!this.polylineCache[a]){this.polylineCache[a]=this.createOptimized(a);}return this.polylineCache[a];};HPolylineExtended.prototype.reset=function(){this.vertexList=[];this.polylineCache={};};HPolylineExtended.prototype.createOptimized=function(c){var a=Math.pow(this.pixelThreshold*c,2);var b=new HPolyline();var f=this.getVertexCount();if(f===0){return b;}b.addVertex(this.getVertex(0));var e=b.getVertex(0);var g=null;for(var d=1;d<f-1;d++){g=this.getVertex(d);if(Math.pow(e.east-g.east,2)+Math.pow(e.north-g.north,2)>a){b.addVertex(g);e=g;}}if(f>1){b.addVertex(this.getVertex(f-1));}return b;};function HPolyDot(b,a,c){this.rt90point=b;this.radius=a;this.filled=c;}HPolyDot.prototype=new HPoly();HPolyDot.prototype.update=function(a){if(a.containsRT90(this.rt90point)){this.polyLayer.drawCircle(this.polyLayer.getCtxMain(),this.rt90point,this.radius,this.filled);}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,b){var a=this.length;var d=Number(arguments[1])||0;d=(d<0)?Math.ceil(d):Math.floor(d);if(d<0){d+=a;}for(;d<a;d++){if(d in this&&this[d]===c){return d;}}return -1;};}if(!Array.prototype.remove){Array.prototype.remove=function(b){var a=this.indexOf(b);if(a!==-1){this.splice(a,1);}};}if(!Array.prototype.insert){Array.prototype.insert=function(a,b){this.splice(a,0,b);};}if(!Math.sinh){Math.sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2;};}if(!Math.cosh){Math.cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2;};}if(!Math.atanh){Math.atanh=function(a){return(1/2)*(Math.log(a+1)-Math.log(1-a));};}if(!Math.toDegrees){Math.toDegrees=function(a){return a*360/(2*Math.PI);};}if(!Math.toRadians){Math.toRadians=function(a){return(a*2*Math.PI)/360;};}if(!Math.decimalToHex){Math.decimalToHex=function(a){return a.toString(16);};}if(!Math.hexToDecimal){Math.hexToDecimal=function(a){return parseInt(a,16);};}var HPointLatLng=function(b,a){this.lat=parseFloat(b);this.lng=parseFloat(a);};HPointLatLng.prototype.equals=function(a){return(this.lat==a.lat&&this.lng==a.lng);};HPointLatLng.prototype.getLat=function(){return this.lat;};HPointLatLng.prototype.getLng=function(){return this.lng;};HPointLatLng.prototype.toString=function(){var b=HPointLatLng.fromDecimalToDegree(this.lat);var a=HPointLatLng.fromDecimalToDegree(this.lng);return"Lat N "+HPointLatLng.fromDegreeToString(b.deg,b.min,b.sec)+"\nLon E "+HPointLatLng.fromDegreeToString(a.deg,a.min,a.sec);};HPointLatLng.fromDegreeToString=function(c,a,b){return c+"&#176; "+a+"&#8242; "+b+"&#8243;";};HPointLatLng.fromDecimalToDegree=function(d){var c=parseInt(d,10);var a=parseInt((d-c)*60,10);var b=parseInt(((d-c)*60-a)*60,10);return{deg:c,min:a,sec:b};};HPointLatLng.fromDegreeToDecimal=function(c,a,b){return parseFloat(c+(a/60)+(b/3600));};var HTransformEllipsoid=function(t,k){t=this.a=parseFloat(t);k=this.f=parseFloat(k);var r=this.e2=k*(2-k);var m=Math.pow(r,2);var j=Math.pow(r,3);var e=Math.pow(r,4);var c=this.n=k/(2-k);var l=Math.pow(c,2);var h=Math.pow(c,3);var g=Math.pow(c,4);this.ah=(t/(1+c))*(1+(1/4)*l+(1/64)*g);var o=this.d=[];o[0]=(1/2)*c-(2/3)*l+(37/96)*h-(1/360)*g;o[1]=(1/48)*l+(1/15)*h-(437/1440)*g;o[2]=(17/480)*h-(37/840)*g;o[3]=(4397/161280)*g;var q=this.abc=[];q[0]=r+m+j+e;q[1]=-(1/6)*(7*m+17*j+30*e);q[2]=(1/120)*(224*j+889*e);q[3]=-(1/1260)*(4279*e);var s=this.b=[];s[0]=(1/2)*c-(2/3)*l+(5/16)*h+(41/180)*g;s[1]=(13/48)*l-(3/5)*h+(557/1440)*g;s[2]=(61/240)*h-(103/140)*g;s[3]=(49561/161280)*g;var p=this.xyz=[];p[0]=r;p[1]=(1/6)*(5*m-j);p[2]=(1/120)*(104*j-45*e);p[3]=(1/1260)*(1237*e);};var HTransform=function(){this.e=new HTransformEllipsoid(this.SEMI_MAJOR_AXIS,this.FLATTENING);};HTransform.prototype={SEMI_MAJOR_AXIS:6378137,FLATTENING:1/298.257222101,FALSE_NORTHING:-667.711,FALSE_EASTING:1500064.274,SCALE_REDUCTION:1.00000561024,CENTRAL_MERIDIAN:Math.toRadians(HPointLatLng.fromDegreeToDecimal(15,48,22.624306))};HTransform.prototype.fromRT90ToLatLng=function(p){var l=(p.north-this.FALSE_NORTHING)/(this.SCALE_REDUCTION*this.e.ah);var e=(p.east-this.FALSE_EASTING)/(this.SCALE_REDUCTION*this.e.ah);var m=l;var c=e;var g=this.e.d;for(var f=0;f<g.length;f++){m-=g[f]*Math.sin((2*f+2)*l)*Math.cosh((2*f+2)*e);c-=g[f]*Math.cos((2*f+2)*l)*Math.sinh((2*f+2)*e);}var o=Math.asin(Math.sin(m)/Math.cosh(c));var k=Math.atan(Math.sinh(c)/Math.cos(m));var b=Math.sin(o);var a=Math.cos(o);var j=this.e.abc;var h=Math.toDegrees(o+b*a*(j[0]+j[1]*Math.pow(b,2)+j[2]*Math.pow(b,4)+j[3]*Math.pow(b,6)));var n=Math.toDegrees(this.CENTRAL_MERIDIAN+k);return new HPointLatLng(h,n);};HTransform.prototype.fromLatLngToRT90=function(d){var g=Math.toRadians(d.getLat());var m=Math.toRadians(d.getLng());var a=Math.sin(g);var e=Math.cos(g);var j=this.e.xyz;var o=g-a*e*(j[0]+j[1]*Math.pow(a,2)+j[2]*Math.pow(a,4)+j[3]*Math.pow(a,6));var h=m-this.CENTRAL_MERIDIAN;var f=Math.atan(Math.tan(o)/Math.cos(h));var c=Math.atanh(Math.cos(o)*Math.sin(h));var l=this.e.b;var n=this.SCALE_REDUCTION*this.e.ah*(f+l[0]*Math.sin(2*f)*Math.cosh(2*c)+l[1]*Math.sin(4*f)*Math.cosh(4*c)+l[2]*Math.sin(6*f)*Math.cosh(6*c)+l[3]*Math.sin(8*f)*Math.cosh(8*c))+this.FALSE_NORTHING;var k=this.SCALE_REDUCTION*this.e.ah*(c+l[0]*Math.cos(2*f)*Math.sinh(2*c)+l[1]*Math.cos(4*f)*Math.sinh(4*c)+l[2]*Math.cos(6*f)*Math.sinh(6*c)+l[3]*Math.cos(8*f)*Math.sinh(8*c))+this.FALSE_EASTING;return new HPointRT90(Math.round(n),Math.round(k));};function HGeoPoint(b,a){this.north=b;this.east=a;}var HGeoTransform={};HGeoTransform.callbackCounter=new Date().getTime();HGeoTransform.transformSRID=function(e,d,a,f){HGeoTransform.callbackCounter++;var c="sridJSONP"+HGeoTransform.callbackCounter;HGeoTransform[c]=function(g){var h=new HGeoPoint(g.x,g.y);f(h,e,d,a);HGeoTransform[c]=null;};var b=HMapConfig.Path.HGEOTRANSFORM_BASE_URL+"convert/point/"+e.north+":"+e.east+"?from="+d+"&to="+a+"&callback=HGeoTransform."+c;HMapHelpers.initJSONP(b);};function HPoint(a,b){this.x=a;this.y=b;}HPoint.prototype.equals=function(a){return(this.x==a.x&&this.y==a.y);};HPoint.prototype.clone=function(){return new HPoint(this.x,this.y);};function HSize(b,a){this.width=b;this.height=a;}HSize.prototype.equals=function(a){return(this.width==a.width&&this.height==this.height);};function HPointRT90(c,b){c=parseFloat(c);b=parseFloat(b);if(b>4000000&&c<=4000000){var a=c;c=b;b=a;}this.north=c;this.east=b;}HPointRT90.prototype.equals=function(a){return(this.north==a.north&&this.east==a.east);};HPointRT90.prototype.distanceTo=function(a){return Math.sqrt(Math.pow(this.east-a.east,2)+Math.pow(this.north-a.north,2));};HPointRT90.prototype.clone=function(){return new HPointRT90(this.north,this.east);};HPointRT90.prototype.toString=function(){return this.north+", "+this.east;};function HBoundsRT90(f,d){if(arguments.length===0){this.sw=null;this.ne=null;}else{if(arguments.length===1){this.sw=f.clone();this.ne=f.clone();}else{var a,c,g,b;if(f.east<d.east){a=f.east;c=d.east;}else{a=d.east;c=f.east;}if(f.north<d.north){b=f.north;g=d.north;}else{b=d.north;g=f.north;}this.sw=new HPointRT90(b,a);this.ne=new HPointRT90(g,c);}}}HBoundsRT90.prototype.equals=function(a){return(this.sw.equals(a.sw)&&this.ne.equals(a.ne));};HBoundsRT90.prototype.containsRT90=function(a){return(a.north>=this.sw.north&&a.north<=this.ne.north)&&(a.east>=this.sw.east&&a.east<=this.ne.east);};HBoundsRT90.prototype.extend=function(a){if(this.ne===null||this.sw===null){this.sw=a.clone();this.ne=a.clone();return;}if(a.north>this.ne.north){this.ne.north=a.north;}else{if(a.north<this.sw.north){this.sw.north=a.north;}}if(a.east>this.ne.east){this.ne.east=a.east;}else{if(a.east<this.sw.east){this.sw.east=a.east;}}};HBoundsRT90.prototype.toSpan=function(){return new HPointRT90(this.ne.north-this.sw.north,this.ne.east-this.sw.east);};HBoundsRT90.prototype.scale=function(b){var c=this.toSpan();var a=Math.round(((c.east*b)-c.east)/2);var d=Math.round(((c.north*b)-c.north)/2);this.sw.north-=d;this.sw.east-=a;this.ne.north+=d;this.ne.east+=a;};HBoundsRT90.prototype.getCenter=function(){return new HPointRT90(Math.round((this.ne.north+this.sw.north)/2),Math.round((this.ne.east+this.sw.east)/2));};HBoundsRT90.getMinBounds=function(c){if(c.length>0){var h=c[0].north;var g=c[0].north;var a=c[0].east;var f=c[0].east;for(var b=0;b<c.length;b++){if(c[b].north>h){h=c[b].north;}else{if(c[b].north<g){g=c[b].north;}}if(c[b].east>a){a=c[b].east;}else{if(c[b].east<f){f=c[b].east;}}}var e=new HPointRT90(h,a);var d=new HPointRT90(g,f);return new HBoundsRT90(e,d);}};var HEventListener={source:null,eventType:null,handler:null,isDomEvent:false};var HEvent={events:{},addListener:function(d,b,c){if(d===undefined){throw new Error("HEvent.addListener: source is undefined!");}if(b===undefined){throw new Error("HEvent.addListener: eventType is undefined!");}if(c===undefined){throw new Error("HEvent.addListener: handler is undefined!");}if(!d._listeners){d._listeners={};}if(!d._listeners[b]){d._listeners[b]=[];}if(!d._listeners[b][c]){d._listeners[b].push(c);}var a={source:d,eventType:b,handler:c,isDomEvent:false};return a;},addDomListener:function(d,b,c){if(d.addEventListener){if(b=="mousewheel"){d.addEventListener("DOMMouseScroll",c,false);}d.addEventListener(b,c,false);}else{if(d.attachEvent){d.attachEvent("on"+b,c);}}var a={source:d,eventType:b,handler:c,isDomEvent:true};return a;},removeListener:function(a){if(a===null){return;}if(!a.isDomEvent){if(a.source._listeners&&a.source._listeners[a.eventType]){a.source._listeners[a.eventType].remove(a.handler);}}else{if(a.source.removeEventListener){if(a.eventType=="mousewheel"){a.source.removeEventListener("DOMMouseScroll",a.handler,false);}a.source.removeEventListener(a.eventType,a.handler,false);}else{if(a.source.detachEvent){a.source.detachEvent("on"+a.eventType,a.handler);}}}},stopEvent:function(a){var b=a||window.event;if(b.stopPropagation){b.stopPropagation();}if(b.preventDefault){b.preventDefault();}b.cancelBubble=true;b.returnValue=false;return false;},removeListeners:function(a){for(var b=0;b<a.length;b++){HEvent.removeListener(a[b]);}},clearListeners:function(b,a){if(b._listeners&&b._listeners[a]){b._listeners[a]=[];}},clearSource:function(a){if(a._listeners){a._listeners=null;}},isListening:function(b,a){return(b._listeners&&b._listeners[a]&&b._listeners[a].length>0);},trigger:function(f,e,c){if(f===undefined){throw new Error("HEvent.trigger: source is undefined!");}if(e===undefined){throw new Error("HEvent.trigger: eventType is undefined!");}if(HEvent.debug&&f instanceof HEvent.debug.src){var b=Array.prototype.slice.call(arguments);if(console.log.apply){console.log.apply(console,b);}else{console.log(b.join(" , "));}}if(f._listeners&&f._listeners[e]){var a=f._listeners[e];for(var d=a.length-1;d>=0;d--){if(a[d]!==undefined){if(false===(a[d]).apply(f,Array.prototype.slice.call(arguments,2))){break;}}}}}};var HMapDev={};HMapDev.log=function(b){var g=document.getElementById("mapDebug");if(g){var f=new Date();var e=f.getHours().toString();var a=f.getMinutes().toString();var c=f.getSeconds().toString();e=(e.length==1?"0":"")+e;a=(a.length==1?"0":"")+a;c=(c.length==1?"0":"")+c;g.value+="["+e+":"+a+":"+c+"] "+b+"\n";g.scrollTop=g.scrollHeight;}};HMapDev.assert=function(b,a){if(!b){alert("Assert: "+a);}};HMapDev.getObjectProperties=function(a){var b="";for(var c in a){if(typeof a[c]!=="undefined"){b+=c+": "+a[c]+"\n";}}return b;};function HBoundsPoint(f,d){if(arguments.length===0){this.sw=null;this.ne=null;}else{if(arguments.length===1){this.sw=f.clone();this.ne=f.clone();}else{var b,a,g,c;b=Math.min(f.y,d.y);a=Math.min(f.x,d.x);g=Math.max(f.y,d.y);c=Math.max(f.x,d.x);this.sw=new HPoint(a,b);this.ne=new HPoint(c,g);}}}HBoundsPoint.prototype.toHBoundsRT90=function(c){var a=new HBoundsRT90();a.extend(c.fromContainerPixelToRT90(this.sw));a.extend(c.fromContainerPixelToRT90(this.ne));return a;};HBoundsPoint.prototype.equals=function(a){return(this.sw.equals(a.sw)&&this.ne.equals(a.ne));};HBoundsPoint.prototype.containsPoint=function(a){return((a.x>Math.min(this.sw.x,this.ne.x)&&a.x<Math.max(this.sw.x,this.ne.x))&&(a.y>Math.min(this.sw.y,this.ne.y)&&a.y<Math.max(this.sw.y,this.ne.y)));};HBoundsPoint.prototype.toString=function(){return"swx.y:"+this.sw.x+"."+this.sw.y+" nex.y:"+this.ne.x+"."+this.ne.y;};HBoundsPoint.prototype.intersectsWith=function(a){return !(a.sw.x>this.ne.x||a.ne.x<this.sw.x||a.sw.y>this.ne.y||a.ne.y<this.sw.y);};HBoundsPoint.prototype.extend=function(a){if(this.ne===null||this.sw===null){this.sw=a.clone();this.ne=a.clone();return;}if(a.y<this.ne.y){this.ne.y=a.y;}else{if(a.y>this.sw.y){this.sw.y=a.y;}}if(a.x<this.ne.x){this.ne.x=a.x;}else{if(a.x>this.sw.x){this.sw.x=a.x;}}};HBoundsRT90.prototype.toHash=function(){return this.sw.north+":"+this.sw.east+","+this.ne.north+":"+this.ne.east;};HMap.prototype.rt90Dot=function(b){var a=new HPolyStyle();a.strokeColor="255, 0, 0";a.strokeWidth="1";var c=new HPolyDot(b,2,true);this.getPolyLayer().addPoly(c);};HMap.prototype.boundRect=function(){if(arguments[0] instanceof Array){this.boundRect.apply(this,arguments[0]);}var e=new HPolyline(),d=this.getPolyLayer();var c=new HPolyStyle();var a=[0,0,0];a[d.polys.length%3]=Math.round(255-(d.polys.length%255));c.strokeColor=a.join(", ");c.fillColor=a.join(", ");e.setStyle(c);for(var b=0;b<arguments.length;b++){var f=arguments[b];if(f instanceof HBoundsPoint){f=f.toHBoundsRT90(this);}if(f instanceof HBoundsRT90){e.addVertex(new HPointRT90(f.ne.north,f.ne.east));e.addVertex(new HPointRT90(f.sw.north,f.ne.east));e.addVertex(new HPointRT90(f.sw.north,f.sw.east));e.addVertex(new HPointRT90(f.ne.north,f.sw.east));e.addVertex(new HPointRT90(f.ne.north,f.ne.east));}if(arguments[b] instanceof HPointRT90){e.addVertex(arguments[b]);}}d.addPoly(e);};HMap.prototype.boundDots=function(a){if(a instanceof Array){for(var b=0;b<a.length;b++){this.boundDots(a[b]);}}else{if(a instanceof HBoundsRT90){this.rt90Dot(new HPointRT90(a.sw.north,a.ne.east));this.rt90Dot(new HPointRT90(a.sw.north,a.sw.east));this.rt90Dot(new HPointRT90(a.ne.north,a.ne.east));this.rt90Dot(new HPointRT90(a.ne.north,a.sw.east));}else{if(a instanceof HBoundsPoint){this.boundDots(a.toHBoundsRT90(this));}}}};HPolyLayer.prototype.vertexToPoint=function(a){var b=[],d=arguments[1]||this.polys[a].vertexList;for(var c=0;c<d.length;c++){b.push(this.hmap.fromRT90toContainerPixel(d[c]));}return b;};HPolyLayer.prototype.bezierFromPoints=function(a,c){a.save();a.beginPath();a.strokeStyle="hsl(199, 60%, 40%)";a.shadowBlur=15;a.shadowColor="rgba(255,255,255,.9)";a.fillStyle="rgba(212,252,252,.4)";a.moveTo(c[0].x,c[0].y);var e=c;a.lineWidth=5;var d=Math.ceil(e.length/100)+2;for(var b=1;b<c.length-d;b=b+d){a.bezierCurveTo(e[b].x,e[b].y,e[b+1].x,e[b+1].y,e[b+2].x,e[b+2].y);}a.stroke();a.strokeStyle="hsl(199, 70%, 50%)";a.lineWidth=2;a.moveTo(c[0].x,c[0].y);for(b=1;b<c.length-d;b=b+d){a.bezierCurveTo(e[b].x,e[b].y,e[b+1].x,e[b+1].y,e[b+2].x,e[b+2].y);}a.stroke();a.restore();};HPointRT90.fromHash=function(b){var a=b.split(":");return new HPointRT90(a[0],a[1]);};HPointRT90.prototype.toHash=function(a){return this.north+":"+this.east;};HMarker.prototype.getCurrentBound=function(){var a=this.point.clone();return new HBoundsPoint(a,new HPoint(a.clone().x+this.icon.size.width,a.clone().y+this.icon.size.height));};HMap.prototype.HSLtoRGB=function(n){var n=n.replace(/[^\d,]/g,"").split(",");var j=n[0]/360,o=n[1]/100,f=n[2]/100;var a,k,m;if(o==0){a=k=m=f;}else{function e(h,g,b){if(b<0){b+=1;}if(b>1){b-=1;}if(b<1/6){return h+(g-h)*6*b;}if(b<1/2){return g;}if(b<2/3){return h+(g-h)*(2/3-b)*6;}return h;}var c=f<0.5?f*(1+o):f+o-f*o;var d=2*f-c;a=e(d,c,j+1/3);k=e(d,c,j);m=e(d,c,j-1/3);}return"rgb("+[Math.ceil(a*255),Math.ceil(k*255),Math.ceil(m*255)].join(",")+")";};var HPOIManager={};HPOIManager.init=function(a){HPOIManager.hmap=a;HPOIManager.stopUpdates=false;HPOIManager.poiFamiliesLoaded=false;HPOIManager.mapRow=0;HPOIManager.mapColumn=0;HPOIManager.chunkRow=0;HPOIManager.chunkColumn=0;HPOIManager.zoomLevel=HPOIManager.hmap.getZoom();HPOIManager.mapType=HPOIManager.hmap.getMapType();HPOIManager.chunkQueue=0;HPOIManager.poitypes=[];HPOIManager.poifamilies=[];HPOIManager.listeners=[];HPOIManager.listeners.push(HEvent.addListener(a,HMap.EVENT_INTERNAL_TILE_FLIP,HPOIManager.update));HPOIManager.listeners.push(HEvent.addListener(a,HMap.EVENT_MAP_MOVE_END,HPOIManager.update));HPOIManager.listeners.push(HEvent.addListener(a,HMap.EVENT_INTERNAL_MAP_ZOOM,HPOIManager.update));HPOIManager.listeners.push(HEvent.addListener(a,HMap.EVENT_INTERNAL_MAP_TYPE_CHANGED,HPOIManager.update));};HPOIManager.POI_BASE_URL=HMapConfig.Path.HPOIMANAGER_POI_BASE_URL;HPOIManager.CHUNK_SIZE=6;HPOIManager.CHUNKS=[];HPOIManager.EVENT_POIS_RETRIEVED="poimanagerpoisretrieved";HPOIManager.EVENT_FAMILIES_RETRIEVED="poimanagerfamiliesretrieved";HPOIManager.refreshAllFamilies=function(){var a=HPOIManager.POI_BASE_URL+"families";HMapHelpers.getJSONP(a,this.refreshAllFamiliesCallback,this);};HPOIManager.refreshAllFamiliesCallback=function(f){if(f.length){HPOIManager.poifamilies=[];for(var c=0;c<f.length;c++){var a=f[c].tags?f[c].tags:null;var e=f[c].cloaked_zoom_levels?f[c].cloaked_zoom_levels:null;var b=f[c].marker_mode?f[c].marker_mode:null;var d=new HPOIFamily(f[c].id,f[c].display_name,f[c].icon_small,f[c].icon_medium,f[c].icon_large,f[c].inflate_info_box?true:false,a,e,b);HPOIManager.poifamilies.push(d);}HEvent.trigger(HPOIManager,HPOIManager.EVENT_FAMILIES_RETRIEVED);}};HPOIManager.addPOIType=function(a){if(a.length){for(var b=0;b<a.length;b++){HPOIManager.poitypes.push(a[b]);}}else{HPOIManager.poitypes.push(a);}HPOIManager.clear();HPOIManager.update(true);};HPOIManager.removePOIType=function(a){if(a.length){for(var b=0;b<a.length;b++){HPOIManager.poitypes.remove(a[b]);HPOIManager.removeOverlaysByPOIType(a[b]);}}else{HPOIManager.poitypes.remove(a);HPOIManager.removeOverlaysByPOIType(a);}};HPOIManager.getPoiFamilyIds=function(){var a=[];for(var b=0;b<HPOIManager.poitypes.length;b++){a=a.concat(HPOIManager.poitypes[b].getFamilyId());}return a;};HPOIManager.getPOITypeByFamilyId=function(b){for(var a=0;a<HPOIManager.poitypes.length;a++){if(HPOIManager.poitypes[a].getFamilyId()==b){return HPOIManager.poitypes[a];}}return false;};HPOIManager.getCachedPOIFamilyById=function(b){for(var a=0;a<HPOIManager.poifamilies.length;a++){if(HPOIManager.poifamilies[a].familyId==b){return HPOIManager.poifamilies[a];}}return false;};HPOIManager.remove=function(){HEvent.removeListeners(HPOIManager.listeners);};HPOIManager.update=function(c){c=!!arguments[0];if(HPOIManager.stopUpdates||HPOIManager.poitypes.length===0){return;}if(HPOIManager.hmap.getZoom()!==HPOIManager.zoomLevel||HPOIManager.hmap.getMapType()!==HPOIManager.mapType){HPOIManager.zoomLevel=HPOIManager.hmap.getZoom();HPOIManager.mapType=HPOIManager.hmap.getMapType();HPOIManager.clear();c=true;}var g=HPOIManager.hmap.getBottomLeftTile();HPOIManager.mapRow=g.row;HPOIManager.mapColumn=g.column;var h=g.row-(g.row%HPOIManager.CHUNK_SIZE);var f=g.column-(g.column%HPOIManager.CHUNK_SIZE);if(c||h!=HPOIManager.chunkRow||f!=HPOIManager.chunkColumn){HPOIManager.chunkRow=h;HPOIManager.chunkColumn=f;var a=[];for(var e=0;e<HPOIManager.poitypes.length;e++){var b=HPOIManager.poitypes[e];var d=true;if(b.cloakedZoomLevels){if(b.cloakedZoomLevels.indexOf(HPOIManager.zoomLevel)>-1){d=false;}}if(b.tags){if(HPOIManager.mapType===0&&b.tags.indexOf("no_map")>-1){d=false;}if(HPOIManager.mapType===1&&b.tags.indexOf("no_sat")>-1){d=false;}}if(d){a.push(b.getFamilyId());}}if(a.length>0){HPOIManager.updateChunks(a,HPOIManager.chunkRow,HPOIManager.chunkColumn);}}};HPOIManager.updateChunks=function(d,l,c){var j=HPOIManager.hmap.globals;for(var f=0;f<HPOIManager.CHUNKS.length;f++){HPOIManager.CHUNKS[f].keep=false;}var h=Math.max(2,Math.ceil((j.tilesPerRow+(HPOIManager.mapColumn-c))/HPOIManager.CHUNK_SIZE));var b=Math.max(2,Math.ceil((j.tilesPerColumn+(HPOIManager.mapRow-l))/HPOIManager.CHUNK_SIZE));for(var a=0;a<h;a++){for(var g=0;g<b;g++){var k=(l)+(g*HPOIManager.CHUNK_SIZE);var e=c+(a*HPOIManager.CHUNK_SIZE);HPOIManager.keepChunk(d,k,e);}}HPOIManager.pruneChunks();};HPOIManager.keepChunk=function(a,f,c){var d=HPOIManager.hmap.getZoom();var e=false;for(var b=0;b<HPOIManager.CHUNKS.length;b++){if(HPOIManager.CHUNKS[b].equals(f,c,d)){HPOIManager.CHUNKS[b].keep=true;e=true;break;}}if(!e){HPOIManager.CHUNKS.push(new HPOIChunk(a,f,c,d,HPOIManager.hmap));}};HPOIManager.pruneChunks=function(){var a=HPOIManager.CHUNKS.length-1;while(a>-1){if(!HPOIManager.CHUNKS[a].keep){HPOIManager.CHUNKS[a].remove();HPOIManager.CHUNKS.splice(a,1);}a--;}};HPOIManager.clear=function(){for(var a=0;a<HPOIManager.CHUNKS.length;a++){HPOIManager.CHUNKS[a].remove();}HPOIManager.CHUNKS=[];};HPOIManager.removeOverlaysByPOIType=function(a){for(var b=0;b<HPOIManager.CHUNKS.length;b++){HPOIManager.CHUNKS[b].removeByPOIType(a);}};HPOIManager.getOverlaysInView=function(){var a=arguments[0]||null;var e=HPOIManager.getOverlaysByFamilyIds(a);if(e.length===0){return[];}var d=HPOIManager.hmap.getBounds();var c=[];for(var b=0;b<e.length;b++){if(d.containsRT90(e[b].getRT90Point())){c.push(e[b]);}}return c;};HPOIManager.getOverlaysByFamilyIds=function(a){var e=[];for(var d=0;d<HPOIManager.CHUNKS.length;d++){for(var c=0;c<HPOIManager.CHUNKS[d].overlays.length;c++){var b=HPOIManager.CHUNKS[d].overlays[c];if(a===null||a.indexOf(b.poiData.familyId)!=-1){e.push(b);}}}return e;};HPOIManager.increaseChunkQueue=function(){HPOIManager.chunkQueue++;};HPOIManager.decreaseChunkQueue=function(){HPOIManager.chunkQueue--;if(HPOIManager.chunkQueue===0){HEvent.trigger(HPOIManager,HPOIManager.EVENT_POIS_RETRIEVED);}if(HPOIManager.chunkQueue<0){HPOIManager.chunkQueue=0;}};function HPOIChunk(b,h,d,f,c){this.hmap=c;this.row=h;this.zoom=f;this.column=d;this.keep=true;this.overlays=[];var g=Math.ceil(HPOIManager.CHUNK_SIZE*HTile.TILE_HEIGHT*c.getResolution());this.size=new HSize(g,g);var a=this.getPointFromTile(h,d);var e=new HBoundsRT90(a,new HPointRT90(a.north+g,a.east+g));this.center=e.getCenter();this.getPoints(b);}HPOIChunk.prototype.getPoints=function(a){HPOIManager.increaseChunkQueue();var b=new HPointRT90(this.center.north-(this.size.height/2),this.center.east-(this.size.width/2));var d=new HPointRT90(this.center.north+(this.size.height/2),this.center.east+(this.size.width/2));var c=HPOIManager.POI_BASE_URL+"chunks/"+this.hmap.getResolution()+"/"+a.join(",")+"/"+b.north+":"+b.east+","+d.north+":"+d.east;HMapHelpers.getJSONP(c,this.chunkCallback,this);};HPOIChunk.prototype.chunkCallback=function(d){try{if(d.chunks.length===0){return;}if(HPOIManager.CHUNKS.indexOf(this)==-1){return;}for(var c=0;c<d.chunks.length;c++){var a=HPOIManager.getPOITypeByFamilyId(d.chunks[c].family_id);if(a!==null&&a!==false){for(var b=0;b<d.chunks[c].poi_aspects.length;b++){this.overlays.push(a.getMarker(d.chunks[c].family_id,d.chunks[c].poi_aspects[b]));}}}this.add();}finally{HPOIManager.decreaseChunkQueue();}};HPOIChunk.prototype.equals=function(c,a,b){return(this.row==c&&this.column==a&&this.zoom==b);};HPOIChunk.prototype.getPointFromTile=function(e,c){var b=this.hmap.globals;var a=HMap.RT90_BOTTOM_LEFT_GEO_POINT_EAST+((c-1)*HTile.TILE_WIDTH)*b.resolution;var d=HMap.RT90_BOTTOM_LEFT_GEO_POINT_NORTH+((e-1)*HTile.TILE_HEIGHT)*b.resolution;return new HPointRT90(a,d);};HPOIChunk.prototype.add=function(){for(var a=0;a<this.overlays.length;a++){this.hmap.addOverlay(this.overlays[a],"chunkoverlay",true);}};HPOIChunk.prototype.remove=function(){for(var a=0;a<this.overlays.length;a++){this.hmap.removeOverlay(this.overlays[a]);}this.overlays=[];};HPOIChunk.prototype.removeByPOIType=function(a){var b=this.overlays.length-1;while(b>-1){if(a.getFamilyId()==this.overlays[b].poiData.familyId){this.hmap.removeOverlay(this.overlays[b]);this.overlays.splice(b,1);}b--;}};function HPOIFamily(a,k,j,b,c,f,e,l,d){var h=this;h.familyId=a;h.displayName=k;h.smallIcon=j;h.mediumIcon=b;h.largeIcon=c;h.inflateInfoBox=f;h.tags=e;h.markerMode=d;var g=new HPOIType(this.familyId,this.displayName);if(l!==null){g.cloakedZoomLevels=l;}if(e!==null){g.tags=e;}g.getMarkerIcon=function(o){var n=new HIcon(Hitta.Router.fromPublic(HMapConfig.Path.HPOIMANAGER_IMAGES+h.smallIcon.icon));var m=((h.smallIcon.size.width/2)|0)+1;var p=((h.smallIcon.size.height/2)|0)+1;n.anchor=new HPoint(m,p);n.size=new HSize(h.smallIcon.size.width,h.smallIcon.size.height);n.infoBoxAnchorTop=new HPoint(m,-1);n.infoBoxAnchorBottom=new HPoint(m,h.smallIcon.size.height);n.iconIndex=o.iconIndex;return n;};g.getMarker=function(q,p){var o={group:"count" in p,familyId:q,count:"count" in p?parseInt(p.count,10):1,id:p.id,iconIndex:"icon" in p?parseInt(p.icon,10):0};var n=this.getMarkerIcon(o);var m=new HMarker(new HPointRT90(parseInt(p.n,10),parseInt(p.e,10)),n);m.poiData=o;if(h.markerMode!==null&&h.markerMode==="click"){m.setMode(HMarker.MODE_INFOBOX_CLICK);}else{m.setMode(HMarker.MODE_INFOBOX_HOVER);}this.adaptMarker(m);return m;};g.getInfoBoxGroupMessage=function(m){return"<p class='poidescription'>H&auml;r finns "+m.count+" "+this.displayName+", zooma in f&ouml;r att se fler.</p>";};g.showInfoBox=function(o){var m=this;var n=new HSize(null,null);m.infoBox=new HShadeBox({marker:m,content:(!o.html)?o.title:o.html,size:n,lineHeight:"12px",icon:m.icon,title:o.title});m.openInfoBoxBound();};this.poiType=g;this.getPoiType=function(){return this.poiType;};}function HPOIType(b,a){this.familyId=b;this.displayName=a;}HPOIType.prototype.getFamilyId=function(){return this.familyId;};HPOIType.prototype.getDisplayName=function(){return this.displayName;};HPOIType.prototype.getMarker=function(e,d){var c={group:"count" in d,familyId:e,count:"count" in d?parseInt(d.count,10):1,id:d.id,iconIndex:"icon" in d?parseInt(d.icon,10):0};var b=this.getMarkerIcon(c);var a=new HMarker(new HPointRT90(parseInt(d.n,10),parseInt(d.e,10)),b);a.setMode(HMarker.MODE_INFOBOX_HOVER);a.poiData=c;this.adaptMarker(a);return a;};HPOIType.prototype.getMarkerIcon=function(a){return null;};HPOIType.prototype.adaptMarker=function(a){var b=this;if(a.mode==HMarker.MODE_INFOBOX_CLICK){HEvent.addListener(a,HMarker.EVENT_MOUSE_CLICK,function(){b.initShow(this);});}else{HEvent.addListener(a,HMarker.EVENT_MOUSE_OVER,function(){b.initShow(this);});}};HPOIType.prototype.initShow=function(a){if(a.isInfoBoxOpen()){return;}if(a.poiData.group){a.openInfoBoxHtml(this.getInfoBoxGroupMessage(a.poiData),new HSize(180,null));}else{a.infoBox=undefined;var b=HPOIManager.POI_BASE_URL+"families/"+a.poiData.familyId+"/"+a.poiData.id;HMapHelpers.getJSONP(b,this.showInfoBox,a);}};HPOIType.prototype.showInfoBox=function(b){var a=this;a.openInfoBoxHtml(b.html,new HSize(220,null));};HPOIType.prototype.getInfoBoxGroupMessage=function(a){return"H&auml;r finns "+a.count+" punkter.";};"use strict";var jq=jQuery;var hitta=window.hitta||{};hitta.smallMap=hitta.smallMap||{};hitta.common=hitta.common||{};hitta.mapPage=hitta.mapPage||{};hitta.common.Events=hitta.common.Events||{};hitta.mapPage.mapMode=hitta.mapPage.mapMode||{};hitta.mapPage.managers=hitta.mapPage.managers||{};hitta.mapPage.controllers=hitta.mapPage.controllers||{};hitta.mapPage.result=hitta.mapPage.result||{};hitta.mapPage.template=hitta.mapPage.template||{};hitta.mapPage.marker=hitta.mapPage.marker||{};var Hitta=window.Hitta||{};Hitta.Common=Hitta.Common||{};Hitta.Map=Hitta.Map||{};Hitta.Map.Controllers=Hitta.Map.Controllers||{};Hitta.Map.Views=Hitta.Map.Views||{};Hitta.Map.MapMode=Hitta.Map.MapMode||{};Hitta.SmallMap=Hitta.SmallMap||{};Hitta.Route=Hitta.Route||{};Hitta.Partner=Hitta.Partner||{};Hitta.Streetview=Hitta.Streetview||{};Hitta.Products={};Hitta.Products.KARTPRIO={id:"6002",text:"kartprio"};Hitta.Products.KARTPRIO_DELUXE={id:"6001",text:"kartprio_premium"};Hitta.Products.INFOTEXT={id:"1001",text:"infotext"};(function(){window.console=window.console||{};var a="log,time,timeEnd,group,groupEnd,groupCollapsed,warn,count,profile,profileEnd".split(",");var c=function(){};for(var b=0;b<a.length;b++){window.console[a[b]]=window.console[a[b]]||c;}})();function Router(){this.paramPrefix="@";this.paramSuffix="@";}Router.prototype={reverse:function(a,b){if(a){return this.replaceParams(a,b);}return"cannot-find-route";},replaceParams:function(c,d){var a=c;for(var b in d){if(d.hasOwnProperty(b)){a=this.replaceParam(a,b,d[b]);}}return a;},replaceParam:function(a,b,d){var c=this.paramPrefix+b+this.paramSuffix;return a.replace(c,d);},fromPublic:function(a){return Hitta.Routes.staticPublic+a.replace(/^\//,"");}};Hitta.Router=new Router();function MHash(){this.build();this.isListening=false;this.toggleListener();}MHash.prototype={hashListener:null,isListening:false,coc:null,_clear:function(){for(var a in this){if(this.hasOwnProperty(a)&&!MHash.prototype.hasOwnProperty(a)){delete this[a];}}},build:function(){this._clear();var c=document.location.href.split("#")[1];var g="";try{g=decodeURIComponent(c);}catch(e){g=unescape(c);}if(typeof g==="undefined"){return false;}var b=g.split("&");for(var d=0,a=b.length;d<a;d++){var f=b[d].split("=");if(f[0]!==""&&f[1]){this[f[0]]=f[1];}else{if(this.hasOwnProperty(f[0])){delete this[f[0]];}}}},refresh:function(a){for(var b in a){if(typeof a[b]!=="function"){this[b]=a[b];}}},place:function(a){this.updateLocationHash(this.toHashString());},updateLocationHash:function(d){var c=window.location.href.split("#")[0];try{decodeURI(d);}catch(b){d=unescape(d.replace(/\+/g,"%20"));}var a=c+"#"+d;window.location.replace(a);},importObject:function(a){for(var b in a){if(!this.hasOwnProperty(b)||true){if(!MHash.prototype.hasOwnProperty(b)&&b&&a[b]){this[b]=a[b];}else{if(!MHash.prototype.hasOwnProperty(b)){this[b]="";}}}}},toHashString:function(){var a=[],c="";for(var b in this){if(this.hasOwnProperty(b)&&!MHash.prototype.hasOwnProperty(b)&&b&&this[b]){if(b!=="coc"){a.push(b+"="+this[b]);}}}c=a.join("&");if(this.coc!==undefined&&this.coc!==null){c+=this.coc;}return c;},toggleListener:function(){var a=this;if(this.isListening){HEvent.removeListener(this.hashListener);}else{this.hashListener=HEvent.addDomListener(window,"hashchange",function(){a.build();});}this.isListening=!this.isListening;},getPrintOptions:function(){return{center:this.center,zl:this.zl!==undefined?this.zl:1,vad:this.vad!==undefined?this.vad:null,"var":this["var"]!==undefined?this["var"]:null,vkiid:this.vkid!==undefined?this.vkid:null,type:this.type!==undefined?this.type:null,tool:this.tool!==undefined?this.tool:null,bounds:this.getBounds(),sm:this.sm!==undefined?this.sm:null,rlm:this.rlm!==undefined?this.rlm:null,level:this.level!==undefined?this.level:null,from:this.from!==undefined?this.from:null,pageCount:this.pageCount!==undefined?this.pageCount:null,address:this.address!==undefined?this.address:null,gid:this.gid!==undefined?this.gid:null};},setBounds:function(){this.bounds=this.getBounds();},getBounds:function(){var a=hitta.hmap.getBounds();return a.sw.north+":"+a.sw.east+","+a.ne.north+":"+a.ne.east;},addTool:function(a){this.tool=a;this.place();},removeTool:function(a){this.tool=undefined;this.place();}};hitta.hash=new MHash();hitta.common.Config={lang:"sv","error.message":{"input.parameter.missing":"config.input.parameter.missing"},creditReport:{badRequest:"SMS koden är felaktig eller har redan använts.",notFound:"Uppgifter saknas för att kunna presentera en fullständig kreditupplysning på personen i fråga.",technicalError:"Just nu får vi inte kontakt med kreditupplysningstjänsten. Vänligen, gör ett nytt försök lite senare.",printPopUp:"Kreditupplysningen kommer nu öppnas i ett nytt fönster för att skrivas ut. Om sidan inte öppnas, vänligen kontrollera dina inställningar för popuper."},sv:{"url.images.icon.counter.default":"images/web/map/marker/company/@{holder}.png?"+HMapConfig.Path.VERSION,"url.images.icon.counter.company":"images/web/map/marker/company/@{holder}.png?"+HMapConfig.Path.VERSION,"url.images.icon.counter.person":"images/web/map/marker/person/@{holder}.png?"+HMapConfig.Path.VERSION,"url.images.icon.counter.location":"images/web/map/marker/location/@{holder}.png?"+HMapConfig.Path.VERSION,"web.common.search-box.what-description":"Namn, företag, sökord, bransch, nummer","web.common.search-box.where-description":"Gata, ort, område","url.upload":"http://static.hitta.se/static/v1/products/images/","path.images.partner":"images/web/map/partner/","route.defaultCenter":new HPointRT90(1553924,6949924),"route.defaultZoom":1,"route.map.rightClickInterval":200,"route.autocomplete.count":10,"map.result.paging.default-startIndex":1,"map.result.paging.default-count":20,"map.marker.size":new HSize(27,27),"map.marker.anchor":new HPoint(12,12),"map.marker.infoBoxAnchorBottom":new HPoint(-9,40),"map.marker.infoBoxAnchorTop":new HPoint(0,21),"map-pin.marker.default.image-path":"images/web/map/map-pin/point.png?"+HMapConfig.Path.VERSION,"map-pin.marker.size":new HSize(25,25)},defaultMapOptions:{east:1686924,north:6991924,zoomLevel:1,coordinateSystem:"rt90",mapType:HStandardMapProvider.MAP_TYPE_NORMAL},managers:{SEARCH:"search",MAP_MODE:"mapMode",MARKER:"marker",RESULT:"result",STATE:"state",POI:"poi",DISTANCE:"distance",COORDINATE:"coordinate",TRADE:"trade",MAP_PIN:"mapPin"},views:{SEARCH_BOX:"searchBox",SHARE_LINK:"ShareLink",TOGGLE_RESULT:"toggleResult",LOGO:"logo",BACK_LINK:"backLink",ZOOM_BUTTON:"zoomButton",LARGER_MAP:"largerMap"},SEARCH_MODE:{MIXED:1,MIXED_ALL:2,BOUNDARY:3,COMPANIES:4,PERSONS:5,LOCATIONS:6,COMPANIES_ALL:7,PERSONS_ALL:8,BOUNDARY_COMPANIES:9,BOUNDARY_PERSONS:10,GROUP:11,BOUNDARY_AUTO:12,BOUNDARY_MANUAL:13,TRADE_BY_ID:14},RESULT_LIST_MODE:{DEFAULT:0,ZOOMED:1},streetview:{url:{service:HMapConfig.Path.STREETVIEW_SERVICE_URL},horizontal:{init:{mapcss:{top:"auto",bottom:"0",height:"35%"},streetviewcss:{height:"65%",width:"100%"}},destroy:{mapcss:{marginTop:"0px",height:"100%",display:"block"},streetviewcss:{}}},vertical:{init:{mapcss:{right:"0",width:"35%"},streetviewcss:{width:"65%",height:"100%"}},destroy:{mapcss:{left:"0",width:"100%",display:"block"},streetviewcss:{}}}},route:{url:{autocomplete:HMapConfig.Path.ROUTE_AUTOCOMPLETE_URL}},mapPinTypes:[{iconUrl:"images/web/map/map-pin/point.png?"+HMapConfig.Path.VERSION,typeName:"default"},{iconUrl:"images/web/map/map-pin/fire.png?"+HMapConfig.Path.VERSION,typeName:"fire"},{iconUrl:"images/web/map/map-pin/explosion.png?"+HMapConfig.Path.VERSION,typeName:"explosion"},{iconUrl:"images/web/map/map-pin/skid-hazard.png?"+HMapConfig.Path.VERSION,typeName:"slipperiness"},{iconUrl:"images/web/map/map-pin/1.png?"+HMapConfig.Path.VERSION,typeName:"step1"},{iconUrl:"images/web/map/map-pin/2.png?"+HMapConfig.Path.VERSION,typeName:"step2"},{iconUrl:"images/web/map/map-pin/3.png?"+HMapConfig.Path.VERSION,typeName:"step3"},{iconUrl:"images/web/map/map-pin/4.png?"+HMapConfig.Path.VERSION,typeName:"step4"},{iconUrl:"images/web/map/map-pin/5.png?"+HMapConfig.Path.VERSION,typeName:"step5"},{iconUrl:"images/web/map/map-pin/accident.png?"+HMapConfig.Path.VERSION,typeName:"accident"},{iconUrl:"images/web/map/map-pin/incident.png?"+HMapConfig.Path.VERSION,typeName:"warning"}],recaptcha:{clientKey:"6Ldk5NsSAAAAAF_wry4A2y8aZav92-BS-BY9JygD"},get:function(){var c=(arguments.length>0)?arguments[0]:this["error.message"]["input.parameter.missing"];var a=(arguments.length>1)?arguments[1]:null;var b=c;if(this[this.lang][c]){b=this[this.lang][c];}if(a!==null){b=b.replace("@{holder}",a);}return b;},setLanguage:function(a){this.lang=a;}};hitta.common.language={lang:"sv","error.message":{"input.parameter.missing":"language.input.parameter.missing"},sv:{"mapresult.label.close-button":"Rensa","mapresult.company.label.header":"Företag:","mapresult.company.label.nohits":"inga på kartan","mapresult.company.label.nextpage":"Nästa @{holder} företag","mapresult.company.label.prevpage":"Föregående @{holder} företag","mapresult.company.label.default-prevpage":"Föregående företag","mapresult.person.label.header":"Personer:","mapresult.person.label.nohits":"inga på kartan","mapresult.person.label.nextpage":"Nästa @{holder} personer","mapresult.person.label.prevpage":"Föregående @{holder} personer","mapresult.person.label.default-prevpage":"Föregående personer","mapresult.location.label.header":"Platser","mapresult.location.label.nextpage":"Nästa @{holder} platser","mapresult.location.label.prevpage":"Föregående @{holder} platser","mapresult.location.label.default-prevpage":"Föregående platser","mapresult.global.hits.link.text":"({count} utanför kartan)","mapresult.global.hits.link.title":"Visa alla träffar på karta","mapresult.more.locations.link.text":"Visa fler träffar på {location}","mapresult.more.locations.link.title":"Visa alla träffar på {location}","mapresult.more.locations.spelling.link.text":"Visa träffar med liknande stavning","mapresult.more.locations.spelling.link.title":"Visa träffar med liknande stavning","mapresult.result-missing":"Resultat saknas","mapresult.rescue.type.dym":"Menade du?","mapresult.rescue.type.nearby":"Finns i närheten","mapresult.rescue.hits":"Hittade @{holder} träffar.","mapresult.error.result-missing":"Din sökning gav tyvärr inga träffar.","map-mode.map.label":"V&auml;gbeskrivning, mer","map-mode.route.label":"Trafik, mer","map.marker.popup.phone":"Telefon","map.marker.popup.mobile":"Mobil","map.marker.popup.telefax":"Telefax","map.marker.popup.moreinfo":"Mer info","map.marker.popup.route":"Vägbeskrivning","smallmap.addressmissing":"Adress saknas","floating.toolbar.close":"X","distance.toolbar.label":"M&auml;t avst&aring;nd","distance.toolbar.clear":"Rensa","distance.toolbar.undo":"&Aring;ngra","distance.toolbar.help":"Hj&auml;lp","distance.toolbar.walk":"Promenera:","distance.toolbar.bicycle":"Cykla:","distance.toolbar.help-text":"Klicka och dra i kartan f&ouml;r att skapa en rutt.","route.tool.label":"V&auml;gbeskrivning","route.error":"Ingen vägbeskrivning kunde beräknas.","route.popup.from":"Sätt&nbsp;startpunkt","route.popup.to":"Sätt&nbsp;slutpunkt","route.popup.via":"Sätt&nbsp;viapunkt","coordinate.toolbar.label":"Koordinater","coordinate.toolbar.rt90":"RT90:","coordinate.toolbar.wgs84":"WGS84:","coordinate.toolbar.decimal":"Decimal:","map-pin.toolbar.label":"Skapa karta","map-pin.toolbar.instruction1.1":"Klicka p&aring; kartan","map-pin.toolbar.instruction1.2":"f&ouml;r att placera eller flytta kartpunkten","map-pin.toolbar.instruction2.1":"Skriv text","map-pin.toolbar.instruction2.2":"till pratbubblan","map-pin.toolbar.instruction3.1":"V&auml;lj en symbol","map-pin.toolbar.instruction3.2":"till kartpunkten","map-pin.toolbar.instruction4.1":"H&auml;r &auml;r l&auml;nken till din karta. ","map-pin.toolbar.instruction4.2":"eller","map-pin.toolbar.options.default":"Standard","map-pin.toolbar.options.fire":"Brand","map-pin.toolbar.options.explosion":"Explosion","map-pin.toolbar.options.slipperiness":"Halka","map-pin.toolbar.options.heart":"Hj&auml;rta","map-pin.toolbar.options.step1":"Steg 1","map-pin.toolbar.options.step2":"Steg 2","map-pin.toolbar.options.step3":"Steg 3","map-pin.toolbar.options.step4":"Steg 4","map-pin.toolbar.options.step5":"Steg 5","map-pin.toolbar.options.accident":"Trafikolycka","map-pin.toolbar.options.warning":"Varning","map-pin.toolbar.new":"L&auml;gg till ny kartpunkt","map-pin.toolbar.show":"Visa","map-pin.toolbar.mail":"maila","streetview.toolbar.label":"Gatubild saknas för denna plats.","streetview.toolbar.citytext":"Gatubild finns i följande","streetview.toolbar.city":"st&auml;der","streetview.toolbar.help":"hj&auml;lp","streetview.toolbar.help-text":"Se dig omkring genom att klicka och dra i bilden. Klicka p&aring; de bl&aring; cirklarna f&ouml;r att g&aring; i bilden. Byt plats genom att dra och flytta figuren i kartan, eller klicka i kartan dit du vill.","streetview.smallmap.no-streetview":"Denna plats saknar gatubild","searchbox.label.whatlabel":"Vad?","searchbox.label.whatlabel.compact":"Vad?","searchbox.submitbutton.value":"Visa på kartan","searchbox.submitbutton.value.compact":"Visa","share.mail.error.out-of-service":"Tillfälligt ur tjänst.","share.mail.error.recipient-missing":"Du måste ange mottagare.","share.mail.error.recipient-incorrect":"Du måste ange en korrekt e-postadress.","share.mail.box.header":"Skicka länk","share.mail.form.header":"Fyll i fälten:","share.mail.form.legend":"Maila kontaktinformation","share.mail.form.label.name":"Ditt namn","share.mail.form.label.email":"E-post till mottagare","share.mail.form.label.message":"Meddelande","share.mail.form.button.ok":"OK","spar.removal.box.header":"Begär borttagande av uppgift","spar.removal.form.legend":"Fyll i följande fält och klicka på OK","spar.removal.form.label.name":"Ditt namn","spar.removal.form.label.email":"Din e-postadress","spar.removal.form.label.phone":"Ditt telefonnummer","spar.removal.form.label.message":"Meddelande (motivera borttaget)","spar.removal.form.button.ok":"OK","spar.removal.error.out-of-service":"Tillfälligt ur tjänst.","spar.removal.error.name-missing":"Du måste ange namn.","spar.removal.error.email-missing":"Du måste ange e-postadress.","spar.removal.error.email-incorrect":"Du måste ange en korrekt e-postadress.","spar.removal.error.phone-missing":"Du måste ange telefonnummer.","spar.removal.error.phone-incorrect":"Du måste ange ett korrekt telefonnummer.","spar.removal.error.message-missing":"Du måste skriva ett meddelande.","spar.removal.error.incorrect-captcha":"Fel kontrollord skrevs in. Försök igen.","mailer.error.out-of-service":"Tillfälligt ur tjänst.","mailer.error.sender-missing":"Du måste ange din e-postadress.","mailer.error.recipient-incorrect":"Du måste ange en korrekt e-postadress.","mailer.box.header":"Skicka e-post","mailer.form.header":"Fyll i fälten:","mailer.form.legend":"Maila kontakt","mailer.form.label.name":"Ditt namn","mailer.form.label.email":"Din e-post","mailer.form.label.subject":"Ämne","mailer.form.label.message":"Meddelande","mailer.form.button.ok":"OK","share.sms.error.out-of-service":"Tillfälligt ur tjänst.","share.sms.error.recipient-missing":"Du måste ange mottagare.","share.sms.error.incorrect-captcha":"Fel kontrollord skrevs in. Försök igen.","share.sms.error.recipient-incorrect":"Du måste ett giltigt telefon nummer.","share.sms.response.success.message":"Ditt sms har skickats.","share.sms.response.error.message":"Ditt sms kunde inte skickas, försök igen lite senare.","share.sms.box.header":"Skicka SMS","share.sms.form.desc":'Här kan du få telefon- och adressuppgiften som ett SMS till din telefon. Ange det telefonnummer dit uppgiften skall skickas, och klicka på "OK".',"share.sms.form.legend":"sms:a kontaktinformation","share.sms.form.label.vcard":"Skicka som vCard","share.sms.form.label.phone":"Telefonnummer","share.sms.form.button.ok":"OK","reminder.error.out-of-service":"Tillfälligt ur tjänst.","reminder.error.recipient-missing":"Du måste ange mottagare.","reminder.error.recipient-incorrect":"Du måste ett giltigt telefon nummer.","reminder.error.no-reminder-selected":"Du måste välja minst en av födelsedag och namnsdag.","reminder.response.success.message":"Din påminnelse är registrerad.","reminder.response.error.message":"Din påminnelse kunde inte registreras, försök igen lite senare.","reminder.box.header":"SMS-påminnelse","reminder.form.desc":"Få en gratis SMS-påminnelse en dag innan @{holder} har födelsedag och/eller namnsdag!","reminder.form.desc.nonameday":"Få en gratis SMS-påminnelse en dag innan @{holder} har födelsedag!","reminder.form.legend":"registrera påminnelse","reminder.form.label.birthday":"Födelsedag","reminder.form.label.nameday":"Namnsdag","reminder.form.label.phone":"Telefonnummer","reminder.form.button.ok":"Bekräfta"},get:function(){var c=(arguments.length>0)?arguments[0]:this["error.message"]["input.parameter.missing"];var a=(arguments.length>1)?arguments[1]:null;var b=c;if(this[this.lang][c]){b=this[this.lang][c];}if(a!==null){b=b.replace("@{holder}",a);}return b;},setLanguage:function(a){this.lang=a;}};hitta.common.Event={listeners:{},register:function(c,e,d,b){if(typeof c==="undefined"){throw"Eventtype in class "+e.CLASS_NAME+" is undefined, has callback: "+d.toString();}if(d!==null){if(e===null){e=this.object;}if(typeof this.listeners[c]==="undefined"){this.listeners[c]=[];}var a=this.listeners[c];a.push({obj:e,func:d,once:b?b:false});}},once:function(a,c,b){this.register(a,c,b,true);},unregister:function(d,f,e){if(f===null){f=this.object;}var c=this.listeners[d];if(typeof(c)!="undefined"&&c!==null){for(var b=0,a=c.length;b<a;b++){if(c[b].obj===f&&c[b].func===e){c.splice(b,1);break;}}}},remove:function(a){if(this.listeners[a]!==null){this.listeners[a]=[];}},trigger:function(e,g){if(this.debug){var d=Array.prototype.slice.call(arguments);if(!console.log.apply){console.log(d.join(" , "));}else{console.log.apply(console,d);}}if(typeof e==="undefined"){throw"Eventtype is undefined and can not be triggered";}var a=[];if(arguments.length>1){a=[g];}var f=this.listeners[e],j;if(!f||f.length===0){return;}f=f.slice();for(var b=0,c=f.length;b<c;b++){var h=f[b];j=h.func.apply(h.obj,a);if(h.once){this.listeners[e].splice(b);j=true;}if((j!==undefined)&&(!j)){break;}}return j;}};hitta.common.Events.SEARCH_SUCCESS="searchSuccess";hitta.common.Events.SEARCH_SUCCESS_BOUNDARY="searchSuccessBoundary";hitta.common.Events.SEARCH_SUCCESS_GLOBAL="searchSuccessGlobal";hitta.common.Events.SEARCH_SUCCESS_GROUP="searchSuccessGroup";hitta.common.Events.SEARCH_SUCCESS_LOCATION="searchSuccessLocation";hitta.common.Events.SEARCH_SUCCESS_LOCATION_CHOICE="searchSuccessLocationChoice";hitta.common.Events.SEARCH_ERROR="searchError";hitta.common.Events.SEARCH_MODE="searchMode";hitta.common.Events.SEARCH_MIXED="searchMixed";hitta.common.Events.SEARCH_MIXED_ALL_PRODUCTS="searchMixedAllProducts";hitta.common.Events.SEARCH_COMPANY="searchCompany";hitta.common.Events.SEARCH_COMPANY_ALL_PRODUCTS="searchCompanyAllProducts";hitta.common.Events.SEARCH_PERSON="searchPerson";hitta.common.Events.SEARCH_GROUP="searchGroup";hitta.common.Events.SEARCH_VKID="searchVkid";hitta.common.Events.SEARCH_BOUNDARY="searchBoundary";hitta.common.Events.SEARCH_BOUNDARY_PERSON="searchBoundaryPerson";hitta.common.Events.SEARCH_BOUNDARY_PERSON_GLOBAL="searchBoundaryPersonGlobal";hitta.common.Events.SEARCH_BOUNDARY_COMPANY="searchBoundaryCompany";hitta.common.Events.SEARCH_BOUNDARY_COMPANY_GLOBAL="searchBoundaryCompanyGlobal";hitta.common.Events.SEARCH_BOUNDARY_GLOBAL="searchBoundaryGlobal";hitta.common.Events.SEARCH_LOCATION="searchLocation";hitta.common.Events.SEARCH_LOCATION_CHOICE="searchLocationChoice";hitta.common.Events.SEARCH_FROM_LOCATION_HASH="searchFromLocationHash";hitta.common.Events.SEARCH_TRADE_BY_ID="searchTradeById";hitta.common.Events.SEARCH_SUCCESS_TRADE_BY_ID="searchSuccessTradeById";hitta.common.Events.SUBMIT_SEARCH_FROM_LOCATION_CHOICE="searchFromLocationChoice";hitta.common.Events.PRINT_MAP_PAGE="printMapPage";hitta.common.Events.RESULT_RESET="resultReset";hitta.common.Events.RESULT_RESET_PAGING="resultResetPaging";hitta.common.Events.RESULT_RENDER="resultRender";hitta.common.Events.RESULT_RENDER_LOCATION="resultRenderLocation";hitta.common.Events.RESULT_ADD_TEMPLATE="resultAddTemplate";hitta.common.Events.RESULT_LIST_HIDE="resultListHide";hitta.common.Events.RESULT_BALANCE_HITS="resultBalanceHits";hitta.common.Events.RESULT_SHOW_DETAIL_PAGE="resultShowDetailPage";hitta.common.Events.RESULT_ADD_MARKER_HIT="resultAddMarkerHit";hitta.common.Events.RESULT_LOCATION_HIT_CLICKED="resultLocationHitClicked";hitta.common.Events.RESULT_RENDER_RESCUE="resultRenderRescue";hitta.common.Events.RESULT_HITS_RENDERED="resultHitsRendered";hitta.common.Events.MAP_PAGE_APPEND_RESULT_CONTAINER="mapPageAppendResultContainer";hitta.common.Events.MAP_SET_BOUNDS="mapSetBounds";hitta.common.Events.MAP_SET_BOUNDS_BOUNDARY_SEARCH="mapSetBoundsBoundarySearch";hitta.common.Events.MAP_SET_OPTIONS="mapSetOptions";hitta.common.Events.MAP_ADD_OVERLAY="mapAddOverlay";hitta.common.Events.MAP_SHOW="mapShow";hitta.common.Events.MAP_SHOW_LOCATION_HASH="mapShowLocationHash";hitta.common.Events.MAP_SHOWED="mapShowed";hitta.common.Events.MAP_ALL_DONE="mapAllDone";hitta.common.Events.MAP_RESIZED="mapResized";hitta.common.Events.MAP_INFO_BOX_ZOOM="mapInfoBoxZoom";hitta.common.Events.MAP_FOCUS="mapFocus";hitta.common.Events.MAP_DRAG_END="mapDragEnd";hitta.common.Events.MAP_ZOOM="mapZoom";hitta.common.Events.MAP_TYPE_CHANGED="mapTypeChanged";hitta.common.Events.MAP_MOVE_END="mapMoveEnd";hitta.common.Events.MAP_HIDE_AJAX_LOADER="mapHideAjaxLoader";hitta.common.Events.MAP_SHOW_AJAX_LOADER="mapShowAjaxLoader";hitta.common.Events.MAP_POIS_RETRIEVED="mapPoisRetrieved";hitta.common.Events.MARKERS_RENDER="markersRender";hitta.common.Events.MARKER_ADD_LOCATION="markerAddLocation";hitta.common.Events.MARKERS_CLEAR="markersClear";hitta.common.Events.MARKER_POPUP_HIDE="markerPopupHide";hitta.common.Events.MARKER_POPUP_SHOW="markerPopupShow";hitta.common.Events.MARKER_RENDER_FINISHED="markersRenderFinished";hitta.common.Events.MARKERS_PRE_RENDER="markersPreRender";hitta.common.Events.MARKER_REMOVE="markerRemove";hitta.common.Events.MARKER_OPEN_SHOW="markerOpenShow";hitta.common.Events.TOOLBAR_MAP_MODE_SHOW="toolbarMapModeShow";hitta.common.Events.TOOLBAR_MAP_MODE_HIDE="toolbarMapModeHide";hitta.common.Events.TOOLBAR_HIDE_ALL="toolbarHideAll";hitta.common.Events.TOOL_MAP_MODE_TOGGLE="toolMapModeToggle";hitta.common.Events.FLOATING_TOOL_OPEN="toolFloatingOpen";hitta.common.Events.POI_MANAGER_REMOVE_POITYPE="poiManagerRemovePoiType";hitta.common.Events.POI_MANAGER_ADD_POITYPE="poiManagerAddPoiType";hitta.common.Events.POI_TOOL_OPEN="poiToolOpen";hitta.common.Events.DISTANCE_TOOL_SHOW="distanceToolShow";hitta.common.Events.DISTANCE_TOOL_HIDE="distanceToolHide";hitta.common.Events.DISTANCE_TOOL_CLEAR="distanceToolClear";hitta.common.Events.DISTANCE_TOOL_UNDO="distanceToolUndo";hitta.common.Events.DISTANCE_MANAGER_UPDATE="distanceManagerUpdate";hitta.common.Events.DISTANCE_MANAGER_DONE="distanceManagerDone";hitta.common.Events.DISTANCE_MANAGER_POINT="distanceManagerPoint";hitta.common.Events.COORDINATE_TOOL_SHOW="coordinateToolShow";hitta.common.Events.COORDINATE_TOOL_HIDE="coordinateToolHide";hitta.common.Events.COORDINATE_MANAGER_UPDATE="coordinateManagerUpdate";hitta.common.Events.MAPPIN_TOOLBAR_SHOW="mapPinToolbarShow";hitta.common.Events.MAPPIN_TOOLBAR_HIDE="mapPinToolbarHide";hitta.common.Events.MAPPIN_TOOLBAR_TEXT_UPDATED="mapPinToolbarTextUpdated";hitta.common.Events.MAPPIN_TOOLBAR_ICON_UPDATED="mapPinToolbarIconUpdated";hitta.common.Events.MAPPIN_TOOLBAR_NEW="mapPinToolbarNew";hitta.common.Events.MAPPIN_MANAGER_UPDATE="mapPinManagerUpdate";hitta.common.Events.SHARE_MAILBOX_SHOW="shareMailBoxShow";hitta.common.Events.SHARE_MAILBOX_HIDE="shareMailBoxHide";hitta.common.Events.H_CONTAINER_CLOSE="hContainerClose";hitta.common.Events.H_CONTAINER_TEMPLATE_APPENDED="hContainerTemplateAppended";hitta.common.Events.H_BUTTON_CLICK="hButtonClick";hitta.common.Events.STATE_GET_CURRENT="stateGetCurrent";hitta.common.Events.STATE_UPDATE_ON_FORM_SUBMIT="stateUpdateOnFormSubmit";hitta.common.Events.STATE_UPDATE="stateUpdate";hitta.common.Events.STATE_UPDATE_HASH="stateUpdateHash";hitta.common.Events.STREETVIEW_TOOL_SHOW="streetviewToolShow";hitta.common.Events.STREETVIEW_TOOL_HIDE="streetviewToolHide";hitta.common.Events.STREETVIEW_INIT="streetviewInit";hitta.common.Events.STREETVIEW_DESTROY="streetviewDestroy";hitta.common.Events.STREETVIEW_LOADED="streetviewLoaded";hitta.common.Events.STREETVIEW_FIRST_CALLBACK="streetviewFirstCallback";hitta.common.Events.STREETVIEW_NAVIGATE_TO="streetviewNavigateTo";hitta.common.Events.STREETVIEW_PREVIEW_LOADED="streetviewPreviewLoaded";hitta.common.Events.STREETVIEW_PREVIEW_DISABLED="streetviewPreviewDisabled";hitta.common.Events.MAP_TYPE_CLICKED="maptypeClicked";hitta.common.Events.OVERLAY_ADD_TO_MAP="overlayAddToMap";hitta.common.Events.OVERLAY_REMOVE_FROM_MAP="overlayRemoveFromMap";hitta.common.Events.TRANSPARENT_PANCONTROL_PANNING="transparentPanControlPanning";hitta.common.Events.MAP_TYPE_CONTROL_ENABLE="mapTypeControlEnable";hitta.common.Events.MAP_TYPE_CONTROL_DISABLE="mapTypeControlDisable";hitta.common.Events.UPDATE_LARGER_MAP_LINK="updateLargerMapLink";hitta.common.Events.UPDATE_TOOL_MAP_MODE_ROUTE_LINK="updateToolMapModeRouteLink";var jq=jQuery;jq(function(){jq("a.target-blank").attr("target","_blank");var a=function(c,e){var d="";for(var b=0;b<c.length;b++){d+=c.charAt((-b+1024)%c.length);}if(!e){e=d;}return'<a href="mailto:'+d+'">'+e+"</a>";};jq("span.email").each(function(){var b=a(jq(this).attr("data-email"),jq(this).attr("data-display"));jq(this).html(b);});});hitta.statistics=new Statistics();hitta.Debug=function(){hitta.debugging=true;jq(function(){if(jq("body").attr("id")==="route"){window.map=hitta.routeManager.routeMap.map;window.manager=hitta.routeManager;window.ctx=window.map.getPolyLayer().globals.volatileCtx;window.cv=window.map.getPolyLayer().globals.volatileCanvas;window.pl=window.map.getPolyLayer();}if(jq("body").attr("id")==="map"){window.map=hitta.mapPage.page.mapManager.map;window.manager=hitta.mapPage.page.mapManager;window.ctx=window.map.getPolyLayer().globals.volatileCtx;window.cv=window.map.getPolyLayer().globals.volatileCanvas;window.breakStreetview=function(){var c=jq("#maptype-satellite");var a=jq("#streetview");var f=jq("#maptype-normal");hitta.common.Event.debug=true;HEvent.debug={src:HMapTypeControl};var e=0,d=arguments[0]||10,g=arguments[1]||100;var b=setInterval(function(){console.log(e);switch(e%3){case 0:c.click();break;case 1:a.click();break;case 2:f.click();break;}e++;if(e>=d){clearInterval(b);}},g);};window.listenTypeControl=function(){var a=window.manager.mapTypeControl;HEvent.addListener(a,HMapTypeControl.EVENT_ACTIVATE,function(){console.log("activate  waiting mode "+a.waitingMode);console.log(a);});HEvent.addListener(a,HMapTypeControl.EVENT_DEACTIVATE,function(){console.log("deactivate waiting mode "+a.waitingMode);console.log(a);});HEvent.addListener(a,HMapTypeControl.EVENT_BUFFERACTIVATION,function(){console.log("buffer act waiting mode "+a.waitingMode);console.log(a);});};window.openAll=function(){jq(window.map.getMarkers()).each(function(){window.map.disableExclusiveInfoBox();this.openInfoBoxBound();});};window.logMapClick=function(){jq(window.map.getContainer()).click(function(a){console.log(a);});};}});};function HSearchBox(){this.what=document.getElementById("what");this.where=document.getElementById("where");this.searchButton=document.getElementById("search-button");this.searchButtonContainer=document.getElementById("search-button-container");var a=document.getElementById("searchbox-hint-what");var b=document.getElementById("searchbox-hint-where");this.instructions=new HSearchBoxInstructions({what:this.what,where:this.where,whatInstructions:a!==null?a.innerHTML:"företag, bransch, namn, nummer, sökord, org.nr",whereInstructions:b!==null?b.innerHTML:"gata, ort, område, plats"});this.init();}HSearchBox.prototype.search=function(){var c=(this.what.value===this.whatInstructions)?"":this.what.value.trim();var b=(this.where.value===this.whereInstructions)?"":this.where.value.trim();var a=Hitta.UrlSegmentFormatter.formatForSearch(c);var d=Hitta.UrlSegmentFormatter.formatForSearch(b);if(a===""&&d===""){this.what.value="";this.where.value="";this.instructions.init();return 0;}if(a===""&&d!==""){window.location=Hitta.Router.reverse(Hitta.Routes.MapController_map)+"?ref=start#var="+encodeURIComponent(b);}else{if(d===""){window.location=Hitta.Router.reverse(Hitta.Routes.ResultController_mixedWhatOnly,{what:a});}else{window.location=Hitta.Router.reverse(Hitta.Routes.ResultController_mixed,{what:a,where:d});}}};HSearchBox.prototype.init=function(){var a=this;var d=function(f){if(f.preventDefault){f.preventDefault();}else{f.returnValue=false;}a.search();};var c=function(j){var k=a.searchButtonContainer.getElementsByTagName("DIV");var h=k[0];var f=k[1];var g=k[2];h.className="main-sprite-site button-hover-left-sprite";f.className="x-repeat-sprite-site button-hover-center-sprite";g.className="main-sprite-site button-hover-right-sprite";};var b=function(j){var k=a.searchButtonContainer.getElementsByTagName("DIV");var h=k[0];var f=k[1];var g=k[2];h.className="main-sprite-site button-left-sprite";f.className="x-repeat-sprite-site button-center-sprite";g.className="main-sprite-site button-right-sprite";};if(window.addEventListener){a.searchButton.addEventListener("click",d,false);a.searchButtonContainer.addEventListener("mouseover",c,false);a.searchButtonContainer.addEventListener("mouseout",b,false);}else{if(window.attachEvent){a.searchButton.attachEvent("onclick",d);a.searchButtonContainer.attachEvent("onmouseover",c);a.searchButtonContainer.attachEvent("onmouseout",b);}}a.what.focus();};if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}var hitta=window.hitta||{};if(document.getElementById("search-box-container")){var onLoad=function(){hitta.searchBox=new HSearchBox();};if(document.readyState==="complete"){onLoad();}if(window.addEventListener){window.addEventListener("load",onLoad,false);}else{if(window.attachEvent){window.attachEvent("onload",onLoad);}}}function HSearchBoxInstructions(a){this.what=a.what;this.where=a.where;this.whatInstructions=a.whatInstructions;this.whereInstructions=a.whereInstructions;this.whatInstructionsElement=this.createInstructionsElement("what",this.whatInstructions);this.whereInstructionsElement=this.createInstructionsElement("where",this.whereInstructions);this.init();}HSearchBoxInstructions.prototype.init=function(){this.setInstructions();this.setHighlight(this.what);};HSearchBoxInstructions.prototype.createInstructionsElement=function(b,e){var c=document.createElement("div");var d=document.createTextNode(e);c.setAttribute("id",b+"-instructions");c.setAttribute("class","instructions-container "+b);c.className="instructions-container "+b;c.appendChild(d);var a=document.getElementById(b+"-input-sizer");a.appendChild(c);return c;};HSearchBoxInstructions.prototype.setInstructions=function(){var a=this;this.resetInstructions(this.what,"what initial fade in");this.resetInstructions(this.where,"where initial fade in");this.addInstructionEvent(document.getElementById("what-instructions"),"click",function(){a.what.focus();});this.addInstructionEvent(document.getElementById("where-instructions"),"click",function(){a.where.focus();});this.addInstructionEvent(this.what,"click",function(){a.clearInstructions(a.what,"what click");});this.addInstructionEvent(this.what,"blur",function(){a.onBlur(a.what,"what blur");});this.addInstructionEvent(this.what,"keyup",function(){a.onKeyUp(a.what,"what keyup");});this.addInstructionEvent(this.what,"focus",function(){a.onFocus(a.what,"what focus");});this.addInstructionEvent(this.what,"paste",function(){a.onPaste(a.what,"what paste");});this.addInstructionEvent(this.where,"keyup",function(){a.onKeyUp(a.where,"where keyup");});this.addInstructionEvent(this.where,"blur",function(){a.onBlur(a.where,"where blur");});this.addInstructionEvent(this.where,"focus",function(){a.onFocus(a.where,"where focus");});this.addInstructionEvent(this.where,"paste",function(){a.onPaste(a.where,"where paste");});};HSearchBoxInstructions.prototype.addInstructionEvent=function(c,b,a){if(window.addEventListener){c.addEventListener(b,a,false);}else{if(window.attachEvent){c.attachEvent("on"+b,a);}}};HSearchBoxInstructions.prototype.isInstructionsVisible=function(a){return a.value===this.whereInstructions||a.value===this.whatInstructions;};HSearchBoxInstructions.prototype.onKeyUp=function(b,c){var a=b;if(a.value.length===0){this.resetInstructions(b,c);}else{this.clearInstructions(b,c);}};HSearchBoxInstructions.prototype.onPaste=function(a,b){this.clearInstructionsByPaste(a,b);};HSearchBoxInstructions.prototype.onFocus=function(a,b){this.setHighlight(a);};HSearchBoxInstructions.prototype.onBlur=function(a,b){this.removeHighlight(a);};HSearchBoxInstructions.prototype.setHighlight=function(a){var b=document.getElementById(a.id+"-input-sizer");if(b.className=="input-sizer"){b.className+=" active";}};HSearchBoxInstructions.prototype.removeHighlight=function(a){var b=document.getElementById(a.id+"-input-sizer");if(b.className=="input-sizer active"){b.className=b.className.replace(/(?:^|\s)active(?!\S)/,"");}};HSearchBoxInstructions.prototype.hide=function(b){var a=document.getElementById(b+"-instructions");a.style.display="none";};HSearchBoxInstructions.prototype.show=function(b){var a=document.getElementById(b+"-instructions");a.style.display="block";};HSearchBoxInstructions.prototype.clearInstructions=function(c,d){var a=document.getElementById(c.id+"-instructions");var b=c;if(b.value!==""&&(a.FadeState===2)){this.fade(c.id+"-instructions",1);}};HSearchBoxInstructions.prototype.clearInstructionsByPaste=function(b,c){var a=document.getElementById(b.id+"-instructions");if(a.FadeState===2){this.fade(b.id+"-instructions",1);}};HSearchBoxInstructions.prototype.resetInstructions=function(c,d){var b=document.getElementById(c.id+"-instructions");var a=c;if(a.value===""&&(b.FadeState===-2||b.FadeState===undefined)){this.fade(c.id+"-instructions",150);}else{if(b.FadeState!==2&&b.FadeState!==1){b.FadeState=-2;b.style.display="none";}}};HSearchBoxInstructions.prototype.animateFade=function(d,a,h){var f=this;var b=new Date().getTime();var g=b-d;var c=document.getElementById(a);if(c.FadeTimeLeft<=g){c.style.opacity=c.FadeState==1?"1":"0";c.style.filter="alpha(opacity = "+(c.FadeState==1?"100":"0")+")";c.FadeState=c.FadeState==1?2:-2;c.style.display=c.FadeState==-2?"none":"block";if(c.FadeState==2&&c.style.removeAttribute){c.style.removeAttribute("filter");}return;}c.FadeTimeLeft-=g;var e=c.FadeTimeLeft/h;if(c.FadeState===1){e=1-e;}c.style.opacity=e;c.style.display="block";c.style.filter="alpha(opacity = "+(e*100)+")";setTimeout(function(){f.animateFade(b,a,h);},33);};HSearchBoxInstructions.prototype.fade=function(a,d){var c=this;var b=document.getElementById(a);if(b===null){return;}if(b.FadeState===null){if(b.style.opacity===undefined||b.style.opacity===""){b.FadeState=-2;}else{if(b.style.opacity=="1"){b.FadeState=2;}}}if(b.FadeState==1||b.FadeState==-1){b.FadeState=b.FadeState==1?-1:1;b.FadeTimeLeft=d-b.FadeTimeLeft;}else{b.FadeState=b.FadeState==2?-1:1;b.FadeTimeLeft=d;setTimeout(function(){c.animateFade(new Date().getTime(),a,d);},1);}};function HAutoComplete(){this.URL_AUTOCOMPLETE="http://external.api.hitta.se/autocomplete/v1/";this.MAX_RESULTS=5;this.MIN_LENGTH=2;this.createAutocompleteUrl=function(b,c,a){return this.URL_AUTOCOMPLETE+encodeURIComponent(b)+"?"+c+"="+a+"&callback=?";};this.init();}HAutoComplete.prototype.init=function(){var a=this;$("#what").autocomplete({minLength:a.MIN_LENGTH,delay:20,source:function(b,c){$.getJSON(a.createAutocompleteUrl(b.term,"what",a.MAX_RESULTS),function(d){c(d.what);});},open:function(){$(this).autocomplete("widget").css("z-index",9999999);return false;}});$("#where").autocomplete({minLength:a.MIN_LENGTH,delay:20,source:function(b,c){$.getJSON(a.createAutocompleteUrl(b.term,"word",a.MAX_RESULTS),function(d){c(d.word);});},open:function(){$(this).autocomplete("widget").css("z-index",9999999);return false;}});};if(document.getElementById("search-box-container")){var onLoad=function(){var a=window.hitta||{};a.autoComplete=new HAutoComplete();};if(document.readyState==="complete"){onLoad();}if(window.addEventListener){window.addEventListener("load",onLoad,false);}else{if(window.attachEvent){window.attachEvent("onload",onLoad);}}}function HPopupMenuItem(a,b,d,c){this.label=a||"";this.action=b||"";this.targetBlank=d||false;this.onClick=c||"";}hitta.common.HPopupMenu=Class.extend({});hitta.common.HPopupMenu.prototype={CLASS_NAME:"hitta.common.HPopupMenu",toolbar:null,options:{items:[],container:{},title:""},init:function(a){if(typeof a==="object"){jq.extend(this.options,a);}var b=this;this.title=a.title||"";this.items=a.items||[];this.domElement={};this.container=a.container||jq("body");this.isActive=false;this.clickSource=a.clickSource;this.dockElement=a.dockElement||a.clickSource;this.target=a.target;this.width=a.width||140;this.top=a.top;this.left=a.left;this.justify=a.justify||"left";this.toolbar=new Hitta.Common.HContainer({width:a.width,hasCloseButton:false});this.toolbar.activate();this.registerClickSource();},create:function(){this.domElement=jq('<div class="popup-menu"/>');var b=jq('<div class="popup-menu-inner"/>');var c=this;if(this.title.length>0){var a=jq('<div class="popup-menu-item header"/>');a.append(this.title);c.domElement.append(a);}jq(this.items).each(function(f,g){var d={};if(typeof(g.action)=="function"){d=jq('<div class="popup-menu-item option"/>');d.bind("click",{self:c},function(e){g.action();e.data.self.hide();});}else{if(typeof(g.action)=="string"){d=jq('<a class="popup-menu-item option" href="'+g.action+'" />');d.attr("target",g.targetBlank?"_blank":"_self");if(g.onClick){d.attr("onclick",g.onClick);}}}d.bind("mouseover",{self:this},function(e){d.addClass("hover");});d.bind("mouseout",{self:this},function(e){d.removeClass("hover");});d.append(g.label);b.append(d);});this.toolbar.append(b);this.domElement.append(this.toolbar.getDomElement());},visible:function(){return this.domElement.css("display")=="block";},hide:function(){this.domElement.css("display","none");if(this.clickSource.parent().hasClass("expand")){this.clickSource.parent().removeClass("expand");}this.target.collapseArrow();},show:function(){this.domElement.css("display","block");jq("body").one("click",{self:this},function(b){b.data.self.hide();});var a=jq(".popup-menu-inner").height();this.toolbar.getContent().height(a);this.toolbar.getContentRight().height(a);},toggle:function(){if(this.visible()){this.hide();}else{this.show();}},position:function(){if(this.dockElement===undefined&&(this.top!==undefined&&this.left!==undefined)){this.domElement.css("left",this.left);this.domElement.css("top",this.top);}else{if(this.justify=="right"){var a=this.dockElement.width();var c=this.domElement.width();var b=a-c;this.domElement.css("left",this.dockElement.position().left+b);}else{this.domElement.css("left",this.dockElement.position().left);}this.domElement.css("top",(this.dockElement.position().top+this.dockElement.height()));}},render:function(){this.container.append(this.domElement);},registerClickSource:function(){var a=this;if(typeof(this.clickSource!="undefined")){this.clickSource.bind("click",function(b){b.stopPropagation();b.preventDefault();if(a.isActive){a.toggle();}else{a.activate();a.show();}});}},activate:function(){this.create();this.render();this.position();this.isActive=true;}};var Hitta=Hitta||{};Hitta.LeadsPopup={init:function(){this.addListeners();this.displayPopupFromStart();},addListeners:function(){$("a.jsShadowBox").on("click",this.openShadowBox);$(document).on("submit","#email-form",$.proxy(this.onFormSubmit,this));},openShadowBox:function(b){b.preventDefault();var a=$(b.target).data("url");$.facebox({ajax:a});},displayPopupFromStart:function(){if(Hitta.GlobalVars.getVar("showAdvertisePopup")){$.facebox({ajax:"/annonsera/popup"});}},onFormSubmit:function(b){b.preventDefault();var a=$(b.target);if(this.validateForm(a)){this.submitForm(a);}else{alert("Du måste fylla i alla uppgifter.");}},validateForm:function(a){var b=true;a.find(":input").each(function(){if($(this).val()===""){b=false;return false;}});return b;},submitForm:function(a){$.ajax({type:"post",url:a.attr("action"),data:a.serialize(),success:function(){a.addClass("emailSent");},error:function(){a.addClass("emailError");},beforeSend:function(){a.removeClass("emailSent emailError");a.addClass("sendingEmail");},complete:function(){a.removeClass("sendingEmail");}});}};$(function(){Hitta.LeadsPopup.init();});var Hitta=Hitta||{};Hitta.ServiceLinks={init:function(){var a=$("html.not-ie7 .servicelink").has(".popup");a.on("mouseenter",this.showPopup);a.on("mouseleave",this.hidePopup);},showPopup:function(){$(this).find(".popup").delay(500).fadeIn(100);},hidePopup:function(){$(this).find(".popup").stop(true,true).fadeOut(100);}};$(function(){Hitta.ServiceLinks.init();});Hitta.Common.Date={today:function(){var a=new Date();a.setHours(0);a.setMinutes(0);a.setSeconds(0);return a;},timeFromToday:function(e,a,c,d){var b=this.today();if(e!==undefined){b.setDate(b.getDate()+e);}if(a!==undefined){b.setHours(a);}if(c!==undefined){b.setMinutes(c);}if(d!==undefined){b.setSeconds(d);}return b;}};Hitta.Common.DateNames={"0":"Söndag","1":"Måndag","2":"Tisdag","3":"Onsdag","4":"Torsdag","5":"Fredag","6":"Lördag"};hitta.common.parseDate=function(b){var d=b.replace(/T/g,"-").replace(/\+/g,"-").replace(/:/g,"-");var a=d.split("-");var c=b.substring(19,20);var e=c=="+"?1:-1;return{year:Hitta.Common.parseDateEntity(a[0]),month:Hitta.Common.parseDateEntity(a[1]),day:Hitta.Common.parseDateEntity(a[2]),hour:Hitta.Common.parseDateEntity(a[3]),zoneHours:e*Hitta.Common.parseDateEntity(a[6].substring(0,2)),zoneMinutes:e*Hitta.Common.parseDateEntity(a[6].substring(2,4)),zoneSign:c,zone:a[6]};};Hitta.Common.parseDateEntity=function(a){if(a[0]=="0"){return parseInt(a[1],10);}else{return parseInt(a,10);}};hitta.common.extractParam=function(a,b){if(a!==undefined){return a;}else{return b;}};hitta.common.setCaretPosition=function(d,b){var c=document.getElementById(d);if(c!==null){if(c.createTextRange){var a=c.createTextRange();a.move("character",b);a.select();}else{if(c.selectionStart){c.focus();c.setSelectionRange(b,b);}else{c.focus();}}}};Hitta.Common.replaceSprite=function(b){var f,e,g=null;if(jq.browser.msie===true){f=jq(b).css("background-position-x");e=jq(b).css("background-position-y");g=f+" "+e;}else{g=jq(b).css("background-position");}var j=jq(b).css("background-image"),a=jq(b).width(),h=jq(b).height(),d=j.indexOf("http"),c=j.indexOf(".png");g=g.split(" ");j=j.substring(d,(c+4));jq(b).css("background","none");jq(b).append('<img src="'+j+'"/>').css("width",a).css("height",h).css("overflow","hidden");if(g[0]!="100%"||g[1]!="0%"){jq(b).find("img").css("margin-left",g[0]).css("margin-top",g[1]);}};function UrlSegmentFormatter(){}UrlSegmentFormatter.prototype={format:function(b){var a=b.replace(/\s/g,"+").replace(/\//g,"|").replace(/\\/g,"|").replace(/,/g,"").replace(/%/g,"procent").replace(/&/g,"och");return a;},formatAndLowerCase:function(a){return this.format(a.toLowerCase());},formatForSearch:function(b){if(b===undefined||!b.match(/[\d\w\-]/)){return"";}var a=b.replace(/\//g,"|").replace(/\\/g,"|").replace(/\s+$|^\s+/g,"");return encodeURIComponent(a);},formatAndLowerCaseForSearch:function(a){return this.formatForSearch(a.toLowerCase());}};Hitta.UrlSegmentFormatter=new UrlSegmentFormatter();Hitta.Common.HContainer=Class.extend({CLASS_NAME:"Hitta.Common.HContainer",init:function(a){this.options={hasCloseButton:true,closeButtonText:hitta.common.language.get("mapresult.label.close-button"),hasHead:true,hasBody:true,hasSpace:false,hasFoot:true,hasShadow:true,width:200};if(typeof a==="object"){jq.extend(this.options,a);}this.options.containerWidth=this.options.width-7;this.options.containerRightWidth=5;this.options.footLeftWidth=10;this.options.footRightWidth=10;this.options.footWidth=(this.options.width-this.options.footLeftWidth)-this.options.footRightWidth;this.clickElement="";},renderCloseButton:function(){this.clickElement=jq("<a>").attr("href","").attr("class","close-results-link");this.icon=jq("<span>").html("Stäng");this.clickElement.append(this.icon);return this.clickElement;},renderContainer:function(){this.domElement=jq("<div>").attr("class","h-container");this.domElement.css({width:this.options.width});},renderHead:function(){if(this.options.hasHead){this.head=jq("<div>").attr("class","h-container-head");this.head.css({width:this.options.width});this.domElement.append(this.head);this.headContent=jq("<div>").attr("class","h-container-head-content");this.headContent.css({width:this.options.containerWidth});this.head.append(this.headContent);if(this.options.hasCloseButton){this.headContent.append(this.renderCloseButton());}this.headRight=jq("<div>").attr("class","h-container-head-right main-sprite-map result-list-top-right-sprite");this.headRight.css({width:this.options.containerRightWidth});if(!this.options.hasShadow){this.headRight.css({background:"none"});}this.head.append(this.headRight);}},renderBody:function(){if(this.options.hasBody){this.containerBody=jq("<div>").attr("class","h-container-body");this.containerBody.css({width:this.options.width});this.domElement.append(this.containerBody);this.content=jq("<div>").attr("class","h-container-body-content");this.content.css({width:this.options.containerWidth});this.containerBody.append(this.content);this.contentRight=jq("<div>").attr("class","h-container-body-right y-repeat-sprite-map result-list-middle-right-sprite");this.contentRight.css({width:this.options.containerRightWidth});if(!this.options.hasShadow){this.contentRight.css({background:"none"});}this.containerBody.append(this.contentRight);}},renderSpace:function(){this.containerSpace=jq("<div>").attr("class","h-container-space");this.containerSpace.css({width:this.options.width});if(!this.options.hasSpace){this.containerSpace.css({height:"1px"});}this.domElement.append(this.containerSpace);this.containerSpaceContent=jq("<div>").attr("class","h-container-space-content");this.containerSpaceContent.css({width:this.options.containerWidth});this.containerSpace.append(this.containerSpaceContent);this.containerSpaceRight=jq("<div>").attr("class","h-container-space-right y-repeat-sprite-map result-list-middle-right-sprite");this.containerSpaceRight.css({width:this.options.containerRightWidth});if(!this.options.hasShadow){this.containerSpaceRight.css({background:"none"});}this.containerSpace.append(this.containerSpaceRight);},renderFoot:function(){if(this.options.hasFoot){this.foot=jq("<div>").attr("class","h-container-foot");this.foot.css({width:this.options.width});this.domElement.append(this.foot);this.footLeft=jq("<div>").attr("class","h-container-foot-left main-sprite-map result-list-left-bottom-sprite");this.footLeft.css({width:this.options.footLeftWidth});this.foot.append(this.footLeft);this.footContent=jq("<div>").attr("class","h-container-foot-content x-repeat-sprite-map result-list-middle-bottom-sprite");this.footContent.css({width:this.options.footWidth});this.foot.append(this.footContent);this.footRight=jq("<div>").attr("class","h-container-foot-right main-sprite-map result-list-bottom-right-sprite");this.footRight.css({width:this.options.footRightWidth});this.foot.append(this.footRight);if(!this.options.hasShadow){this.footLeft.css({background:"none"});this.footContent.css({background:"none"});this.footRight.css({background:"none"});}}},getDomElement:function(){return this.domElement;},getContent:function(){return this.content;},getContentRight:function(){return this.contentRight;},setContent:function(a){this.content.append(a);},setHeader:function(a){this.contentHeaderElement.append(a);},append:function(a,b){if(b!==undefined&&b){this.content.prepend(a);}else{this.content.append(a);}hitta.common.Event.trigger(hitta.common.Events.H_CONTAINER_TEMPLATE_APPENDED);},makeDraggable:function(){var a=this;this.domElement.draggable({handle:this.contentHeaderElement});this.contentHeaderElement.bind({mouseover:function(){a.domElement.addClass("mouseover");},mouseout:function(){a.domElement.removeClass("mouseover");}});},hide:function(){this.domElement.hide();},show:function(){this.domElement.show();},setHeight:function(a){this.content.height(a);this.containerRight.height(a);},setWidth:function(a){this.domElement.css({width:a});this.head.css({width:a-7});this.containerBody.css({width:a-7});this.containerSpace.css({width:a-7});this.foot.css({width:a-20});},observe:function(){if(this.clickElement!==""){this.clickElement.bind("click",{self:this},function(b){b.preventDefault();var a=b.data.self;hitta.common.Event.trigger(hitta.common.Events.H_CONTAINER_CLOSE,a.options.parentId);});}},create:function(){this.renderContainer();this.renderHead();this.renderBody();this.renderSpace();this.renderFoot();},activate:function(){this.active=true;this.create();this.observe();}});hitta.common.ShareLink=Class.extend({});hitta.common.ShareLink.prototype={CLASS_NAME:"hitta.common.ShareLink",init:function(a){this.type="shareList";this.domElement=jq("<div>").attr("id","share");this.toolbarContainer=jq("<div>").attr("id","share-toolbar-container");this.container=a.container;this.justify=a.justify||"left";this.mailBox=null;this.smsBox=null;this.setOffsetCallback=a.setOffsetCallback||function(){return{left:0,top:0};};this.activateSMS=!Hitta.isFailover&&((a.activateSMS!==undefined)?a.activateSMS:true);this.activateMail=(a.activateMail!==undefined)?a.activateMail:true;this.activateFacebook=(a.activateFacebook!==undefined)?a.activateFacebook:true;this.activateTwitter=(a.activateTwitter!==undefined)?a.activateTwitter:true;this.activateLinkedIn=(a.activateLinkedIn!==undefined)?a.activateLinkedIn:true;this.hBoxContainer=a.hBoxContainer||jq(document.body);},render:function(){var a=jq("#person").length>0||jq("#company").length>0;this.printOut=jq("<div>").attr("id","print-out");this.printOutLinkElement=jq("<div>");this.printOutLinkElement.attr("onclick","return xt_click(this, 'C', getXtn2(), xtpage + '::verktyg::skriv-ut', 'A');");this.printOutLinkElement.html("Skriv ut");this.printOut.append(this.printOutLinkElement);if(a){this.vCard=jq("<div>").attr("id","download-vcard");this.vCardLinkElement=jq("<a>").attr("href",this.createVCardUrl());this.vCardLinkElement.attr("onclick","return xt_click(this, 'C', getXtn2(), xtpage + '::verktyg::spara', 'A');");this.vCardLinkElement.html("Spara");this.vCard.append(this.vCardLinkElement);}this.tellOthers=jq("<div>").attr("id","tell-others");this.shareLinkElement=jq("<a>").attr("href","#");this.shareLinkElement.attr("onclick","return xt_click(this, 'C', getXtn2(), xtpage + '::verktyg::dela', 'A');");this.shareLinkElement.append('<span class="display-element">Dela</span>');this.downArrow=jq('<span class="main-sprite-map arrow-down-sprite"></span>');this.shareLinkElement.append(this.downArrow);this.tellOthers.append(this.shareLinkElement);this.tellOthers.append(this.toolbarContainer);this.domElement.append(this.printOut);this.domElement.append('<div class="navigation-separator">&bull;</div>');if(a){this.domElement.append(this.vCard);this.domElement.append('<div class="navigation-separator">&bull;</div>');}this.domElement.append(this.tellOthers);return this.domElement;},createVCardUrl:function(){var a=jq("#result-container .detail-content .vkiid").html();return jq("#person").length>0?Hitta.Router.reverse(Hitta.Routes.VCardController_personVCard,{id:a}):Hitta.Router.reverse(Hitta.Routes.VCardController_companyVCard,{id:a});},activate:function(){this.container.append(this.render());this.register();this.createShareMenu();},print:function(){if(jq("body#map").length!==0){var b=hitta.hash.getPrintOptions();var c=[];for(var a in b){if(b[a]&&b[a]!==""){c.push(a+"="+b[a]);}}c.push("mm=1");window.open(Hitta.Router.reverse(Hitta.Routes.PrintController_map)+"#"+c.join("&"));}else{window.print();}},toggleArrow:function(){if(this.downArrow.hasClass("arrow-up-sprite")){this.downArrow.removeClass("arrow-up-sprite").addClass("arrow-down-sprite");}else{this.downArrow.removeClass("arrow-down-sprite").addClass("arrow-up-sprite");}},collapseArrow:function(){this.downArrow.removeClass("arrow-up-sprite").addClass("arrow-down-sprite");},register:function(){var a=this;this.printOutLinkElement.bind("click",function(b){b.preventDefault();a.print();});this.shareLinkElement.bind("click",function(b){b.preventDefault();a.toggleArrow();});hitta.common.Event.register(hitta.common.Events.H_CONTAINER_CLOSE,this,this.collapseArrow);},createShareMenu:function(){var b=this;var a=[];if(this.activateSMS){a.push({label:"Skicka SMS",action:function(){if(b.smsBox===null){b.smsBox=new Hitta.Map.ShareSMSBox({parentId:"smsBox",closeButtonText:hitta.common.language.get("floating.toolbar.close"),setOffsetCallback:b.setOffsetCallback,hBoxContainer:b.hBoxContainer});b.smsBox.activate();}else{b.smsBox.toggle();}b.smsBox.loadRecaptcha();}});}if(this.activateMail){a.push({label:"Maila",action:function(){if(b.mailBox===null){b.mailBox=new Hitta.Map.ShareMailBox({parentId:"mailBox",closeButtonText:hitta.common.language.get("floating.toolbar.close"),setOffsetCallback:b.setOffsetCallback,hBoxContainer:b.hBoxContainer});b.mailBox.activate();}else{b.mailBox.toggle();}}});}if(this.activateFacebook){a.push({label:"Facebook",action:"http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location.href)+"&t="+encodeURIComponent(document.title),targetBlank:true,onClick:"return xt_click(this, 'C', getXtn2(), xtpage + '::verktyg::dela::facebook', 'A');"});}if(this.activateTwitter){a.push({label:"Twitter",action:"http://twitter.com/home?status="+encodeURIComponent(document.title)+": "+encodeURIComponent(window.location.href),targetBlank:true,onClick:"return xt_click(this, 'C', getXtn2(), xtpage + '::verktyg::dela::twitter', 'A');"});}if(this.activateLinkedIn){a.push({label:"LinkedIn",action:"http://www.linkedin.com/shareArticle?mini=true&amp;ro=false&amp;trk=bookmarklet&amp;title="+encodeURIComponent(document.title)+"&amp;url="+encodeURIComponent(window.location.href),targetBlank:true,onClick:"return xt_click(this, 'C', getXtn2(), xtpage + '::verktyg::dela::linkedin', 'A');"});}this.shareMenu=new hitta.common.HPopupMenu({items:a,clickSource:this.shareLinkElement,target:this,container:jq("#share"),width:130,dockElement:jq("#tell-others"),justify:this.justify});}};Hitta.Common.Control=Class.extend({});Hitta.Common.Control.prototype={CLASS_NAME:"Hitta.Common.Control",init:function(a){this.active=false;this.options=null;if(a){this.options=a;}},prepare:function(){},create:function(){},assign:function(){},observe:function(){},register:function(){},operate:function(){},isActive:function(){return this.active;},activate:function(){this.active=true;this.prepare();this.create();this.assign();this.observe();this.register();this.operate();}};Hitta.Common.PopupBox=Hitta.Common.HContainer.extend({CLASS_NAME:"Hitta.Map.PopupBox",init:function(a){this._super(a);},render:function(){this.contentHeaderElement=jq("<td>").attr("class","x-repeat-sprite-site popup-box-top-center-sprite popup-box-head");var b=jq("<tr></tr>");b.append('<td class="main-sprite-site popup-box-top-left-sprite"></td>');b.append(this.contentHeaderElement);this.clickElement=jq("<div></div>");this.clickElement.attr("class","popup-box-close-button");this.closeLink=jq("<a>");this.closeLink.attr("href","#");this.closeLink.html(this.options.closeButtonText);this.clickElement.append(this.closeLink);this.contentHeaderElement.append(this.clickElement);b.append('<td class="main-sprite-site popup-box-top-right-sprite"></td>');this.domElement.append(b);var a=jq("<tr></tr>");a.append('<td class="y-repeat-sprite-site popup-box-middle-left-sprite"></td>');this.content=jq("<td>").attr("class","popup-box-content");a.append(this.content);a.append('<td class="y-repeat-sprite-site popup-box-middle-right-sprite"></td>');this.domElement.append(a);this.domElement.append('<tr><td class="main-sprite-site popup-box-bottom-left-sprite"></td><td class="x-repeat-sprite-site popup-box-bottom-center-sprite"></td><td class="main-sprite-site popup-box-bottom-right-sprite"></td></tr>');},create:function(){this.domElement=jq('<table cellpadding="0" cellspacing="0">').attr("class","popup-box");this.render();}});Hitta.Map.ShareSMSBox=Hitta.Common.PopupBox.extend({CLASS_NAME:"Hitta.Map.ShareSMSBox",init:function(a){this._super(a);this.authToken="";this.id=this.options.parentId?this.options.parentId:"share-sms";},setup:function(){this.setHeader(this.renderHeader());this.setContent(this.renderContent());this.makeDraggable();this.boxContainer.append(this.getDomElement());this.options.hBoxContainer.append(this.boxContainer);var a=this.options.setOffsetCallback.apply(this,[this]);this.boxContainer.css({left:a.left,top:a.top});this.register();this.show();},getWidth:function(){return this.boxContainer.width();},renderHeader:function(){return'<div style="font-weight:bold;padding-top:10px;">'+hitta.common.language.get("share.sms.box.header")+"</div>";},renderContent:function(){var a=['<form class="share-sms-form" method="POST" action="">',"   <fieldset>","       <legend>",hitta.common.language.get("share.sms.form.legend"),"</legend>",'       <p id="desc" style="width:295px">',hitta.common.language.get("share.sms.form.desc"),"</p>",'       <div id="vcard-container">','           <input type="checkbox" name="vcard" value="" id="vcard" />','           <label for="vcard">',hitta.common.language.get("share.sms.form.label.vcard"),"</label>","       </div>",'       <div id="phone-container">','           <label for="phone">',hitta.common.language.get("share.sms.form.label.phone"),"</label>",'           <input type="text" name="phone" id="phone" />',"       </div>",'       <div id="recaptcha"></div>','       <div id="button-container">','           <input type="button" id="sms-submit-button" class="form-button" value="',hitta.common.language.get("share.mail.form.button.ok"),'">',"       </div>","   </fieldset>","</form>"];this.shareSmsContainer=jq("<div>").attr("id","share-sms-form-container");this.shareSmsFormErrorContainer=jq("<div>").attr("id","share-sms-form-error-msg-container");this.shareSmsFormErrorContainer.hide();this.shareSmsFormContainer=jq("<div>").attr("id","share-sms-form-container");this.shareSmsFormContainer.append(a.join(""));this.shareSmsContainer.append(this.shareSmsFormErrorContainer);this.shareSmsContainer.append(this.shareSmsFormContainer);return this.shareSmsContainer;},loadRecaptcha:function(){if(Recaptcha){Recaptcha.destroy();Recaptcha.create(hitta.common.Config.recaptcha.clientKey,"recaptcha",{theme:"white",callback:this.setSuitableFocus()});}},setSuitableFocus:function(){var a=jq("#phone").val();if(a===""){jq("#phone").focus();}else{setTimeout(function(){jq("#recaptcha_response_field").focus();},125);}},hide:function(a){if(this.id===a){this._super();this.domElement.removeClass("visible");}},show:function(){this._super();this.domElement.addClass("visible");this.setSuitableFocus();},setInputFocus:function(){jq("form.share-sms-form input#phone").focus();},observe:function(){this._super();var c=this;var b=jq("#sms-submit-button");var d=jq("#sms-cancel-button");var a=jq("#phone");jq("form.share-sms-form").find("input").keydown(function(e){if(e.which==13){e.preventDefault();}});b.bind("click",function(e){c.onSubmit(e);});d.bind("click",function(e){e.preventDefault();hitta.common.Event.trigger(hitta.common.Events.H_CONTAINER_CLOSE,c.id);});a.bind("keyup",function(e){var f=jq(this).val();if(f.substring(0,1)==="0"){jq(this).val(f.replace(0,"+46"));}if(e.which===13){jq("#recaptcha_response_field").focus();}});jq("body").delegate("#recaptcha_response_field","keyup",function(e){if(e.which===13){c.onSubmit(e);}});},onSubmit:function(g){var f=this,e="",h=null;g.preventDefault();var a=jq("#phone").val();var d=jq(".vkiid").html();var c=jq(document.body).attr("id")==="company";var b=jq("#vcard").get(0);if(a.length===0){this.shareSmsFormErrorContainer.text(hitta.common.language.get("share.sms.error.recipient-missing"));this.shareSmsFormErrorContainer.show();return 0;}jq.ajax({type:"POST",url:Hitta.Router.reverse(Hitta.Routes.InfoController_sendShareSms),data:({phone:a,vkikey:d,isCompany:c,asVcard:b.checked,challenge:Recaptcha.get_challenge(),response:Recaptcha.get_response()}),success:function(k){var j=k.replace(/"/g,"");f.responseHandler(j);},error:function(j){f.responseHandler("error");},dataType:"html"});},isValidPhoneNumber:function(a){var c=/^(\+\d)*\s*(\(\d{3}\)\s*)*\d{3}(-{0,1}|\s{0,1})\d{2}(-{0,1}|\s{0,1})\d{2}$/;var d=c.test(a);var b="";if(!d){if(a===""){b=hitta.common.language.get("share.sms.error.recipient-missing");}else{b=hitta.common.language.get("share.sms.error.recipient-incorrect");}}else{b=a;}return{isValid:d,message:b};},responseHandler:function(a){var b=hitta.common.language.get("share.sms.response.success.message");if(a==="error"){b=hitta.common.language.get("share.sms.response.error.message");}if(a==="recaptcha-error"){this.shareSmsFormErrorContainer.text(hitta.common.language.get("share.sms.error.incorrect-captcha"));this.shareSmsFormErrorContainer.show();this.loadRecaptcha();return 0;}this.shareSmsFormErrorContainer.hide();if(!this.shareSmsResponseMsgContainer){this.shareSmsResponseMsgContainer=jq("<div>").css({margin:"20px","font-weight":"bold"}).append(b);}else{this.shareSmsResponseMsgContainer.show();}this.shareSmsFormContainer.hide();this.shareSmsContainer.append(this.shareSmsResponseMsgContainer);},register:function(){hitta.common.Event.register(hitta.common.Events.H_CONTAINER_CLOSE,this,this.hide);},create:function(){this._super();this.boxContainer=jq("<div>").attr({id:"share-sms-box-container"}).css({height:"0px"});this.setup();},toggle:function(){if(this.domElement.hasClass("visible")){this.domElement.removeClass("visible");}else{this.domElement.addClass("visible");if(this.shareSmsResponseMsgContainer){this.shareSmsResponseMsgContainer.hide();}this.shareSmsFormErrorContainer.hide();this.shareSmsFormContainer.show();this.setInputFocus();}}});Hitta.Map.ShareMailBox=Hitta.Common.PopupBox.extend({CLASS_NAME:"Hitta.Map.ShareMailBox",TEST_NAME:"Magnus",init:function(a){this._super(a);this.id=this.options.parentId?this.options.parentId:"share-mail";this.messageLink=this.options.messageLink?this.options.messageLink:null;},setup:function(){var a=this;var b=this.options;this.setHeader(this.renderHeader());this.setContent(this.renderContent());this.makeDraggable();this.boxContainer.append(this.getDomElement());b.hBoxContainer.append(this.boxContainer);var c=b.setOffsetCallback?b.setOffsetCallback.apply(a,[a]):{left:100,top:100};this.boxContainer.css({left:c.left,top:c.top});this.register();this.show();},getWidth:function(){return this.boxContainer.width();},setPosition:function(a){this.boxContainer.css({left:a.left,top:a.top});},renderHeader:function(){return'<div style="font-weight:bold;padding-top:10px;">'+hitta.common.language.get("share.mail.box.header")+"</div>";},renderContent:function(){var b=['<form action="',hitta.common.Config.get("share.mail.route-path"),'" method="post">',"   <fieldset>","       <legend>",hitta.common.language.get("share.mail.form.legend"),"</legend>","       <div>",'           <div class="name-container">','               <label for="name">',hitta.common.language.get("share.mail.form.label.name"),"</label>",'               <input type="text" name="name" value="" id="name" />',"           </div>",'           <div class="email-container">','               <label for="email">',hitta.common.language.get("share.mail.form.label.email"),"</label>",'               <input type="text" name="email" value="" id="email" />',"           </div>","       </div>",'       <div class="message-container">','           <label for="message">',hitta.common.language.get("share.mail.form.label.message"),"</label>",'           <textarea name="message" id="message" cols="30" rows="5"></textarea>',"       </div>",'       <div class="button-container">','           <input type="button" id="mail-submit-button" value="',hitta.common.language.get("share.mail.form.button.ok"),'">',"       </div>","   </fieldset>","</form>"];var a=['<div id="share-mail-form-container">','   <div id="share-mail-form-container-header">',hitta.common.language.get("share.mail.form.header"),"</div>",'   <div id="share-mail-form-error-msg-container"></div>',b.join(""),"</div>",'<div id="share-mail-form-success-container"></div>'].join("");return a;},hide:function(a){if(this.id===a){this._super();this.domElement.removeClass("visible");jq("#share-mail-form-error-msg-container").empty();jq("#share-mail-form-successful").remove();hitta.common.Event.trigger(hitta.common.Events.SHARE_MAILBOX_HIDE,this.id);}},show:function(){this._super();this.domElement.addClass("visible");jq("#share-mail-form-container").show();jq("#share-mail-form-successful").remove();this.setInputFocus();hitta.common.Event.trigger(hitta.common.Events.SHARE_MAILBOX_SHOW,this.id);},setInputFocus:function(){jq("#share-mail-form-container input#name").focus();},observe:function(){this._super();var a=jq("#mail-submit-button");var b=jq("#mail-cancel-button");a.live("click",{self:this},function(c){c.preventDefault();c.data.self.sendMail(this);});b.live("click",{self:this},function(c){c.preventDefault();hitta.common.Event.trigger(hitta.common.Events.H_CONTAINER_CLOSE,c.data.self.id);});},isValidEmailAddress:function(c){var b=new RegExp(/^(("[\w-\s]+")|([\w\-]+(?:\.[\w\-]+)*)|("[\w-\s]+")([\w\-]+(?:\.[\w\-]+)*))(@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);var d=b.test(c);var a="";if(!d){if(c===""){a=hitta.common.language.get("share.mail.error.recipient-missing");}else{a=hitta.common.language.get("share.mail.error.recipient-incorrect");}}return{isValid:d,message:a};},sendMail:function(){var b=jq("#name");var a=jq("#email");var e=jq("#message");var d=(this.messageLink!==null)?this.messageLink:document.location.href;var c=this.isValidEmailAddress(a.val());if(c.isValid){jq.post(Hitta.Router.reverse(Hitta.Routes.InfoController_sendShareMail),{name:b.val(),email:a.val(),message:e.val(),link:d},function(g){jq("#share-mail-form-container").hide();jq("#share-mail-form-success-container").append('<div id="share-mail-form-successful">Ditt meddelande har skickats.</div>');if(typeof g!=="undefined"){}else{}},"json");}else{var f=jq("#share-mail-form-error-msg-container");f.empty();f.append(c.message);}},register:function(){hitta.common.Event.register(hitta.common.Events.H_CONTAINER_CLOSE,this,this.hide);},create:function(){this._super();this.boxContainer=jq("<div>").attr({"class":"popup-box-container"}).css({height:"0px"});},toggle:function(){if(this.domElement.hasClass("visible")){this.hide();}else{this.show();}},activate:function(){this._super();this.setup();}});function HShadeBox(a){this.container=null;this.marker=a.marker;this.content=a.content;this.size=a.size;this.lineHeight=a.lineHeight;this.useCloseLink=a.useCloseLink;this.closeOnClick=a.closeOnClick;this.closeAfterHover=a.closeAfterHover;this.icon=a.icon;this.title=a.title;this.position=null;this.borderWidth=6;this.borderHeight=6;if(jq.browser.msie&&parseInt(jq.browser.version,0)===9&&this.content.length>8&&this.content.indexOf(" ")===-1){var b=this.content.length*6;this.content="<div style='width:"+b+"px'>"+this.content+"</div>";}this.ui=this.createComponents();this.ui.innerContent.html(this.getInnerContent());}HShadeBox.prototype=new HOverlay();HShadeBox.prototype.remove=function(){try{this.container.removeChild(this.element);}catch(b){if(this.element===undefined){var c=this;var a=window.setInterval(function(){if(c.element!==undefined){c.container.removeChild(c.element);window.clearInterval(a);}},10);}}};HShadeBox.prototype.init=function(a){this.hmap=a;this.container=this.hmap.getPaneOverlay();this.position=this.marker.point.clone();this.appendElements();this.waitForContent();};HShadeBox.prototype.waitForContent=function(){var c=this;var b=this.ui.innerContent.find("img");if(b.length===0){this.continueInit();}else{b.bind("error",function(){jq(this).unbind("error");jq(this).remove();});var d=0,e=50;var a=setInterval(function(){if(b[0].complete||d===e){c.continueInit();clearInterval(a);}d++;},10);}};HShadeBox.prototype.removeImageIfBroken=function(a){if((a[0].complete&&a[0].naturalWidth===0)||a[0].naturalWidth===undefined){a.remove();}};HShadeBox.prototype.continueInit=function(){this.applyStyles(this.ui);this.zoom=this.ui.content.find("a.detail-page");this.registerListeners();this.element=this.ui.box[0];this.update();this.name=this.ui.content.find(".h-marker-content .display").html();};HShadeBox.prototype.appendElements=function(){this.container.appendChild(this.ui.box[0]);};HShadeBox.prototype.createComponents=function(){var a={box:jq("<div class='HShadeBox'></div>").css({position:"absolute",left:"-1000px"}),content:jq("<div></div>").attr("class","content"),innerContent:jq("<div></div>").attr("class","innerContent"),cornerTopLeft:jq("<div></div>"),cornerTopRight:jq("<div></div>"),cornerBottomLeft:jq("<div></div>"),cornerBottomRight:jq("<div></div>"),edgeTop:jq("<div></div>"),edgeRight:jq("<div></div>"),edgeBottom:jq("<div></div>"),edgeLeft:jq("<div></div>"),arrow:jq("<div></div>"),closeLink:jq("<a></a>").html("<span>X</span>")};a.content.append(a.innerContent);a.box.append(a.cornerTopLeft,a.edgeTop,a.cornerTopRight,a.edgeLeft,a.content,a.edgeRight,a.cornerBottomLeft,a.edgeBottom,a.cornerBottomRight,a.arrow);if(this.useCloseLink!==false){a.box.append(a.closeLink);}return a;};HShadeBox.prototype.getInnerContent=function(){if(this.title===undefined||this.title===null||this.title===""){return this.content;}var a=jq("<p></p>").html(this.title);a.css({"font-weight":"bold",padding:"0 0 4px 0"});return a.wrap("<div/>").parent().html()+this.content;};HShadeBox.prototype.getSizes=function(b){var a,e,d,f;if(this.size!==undefined&&this.size.width!==null){a=this.size.width-this.borderWidth*2;d=this.size.width;}else{a=b.content.width();d=a+this.borderWidth*2;if(jq.browser.mozilla){d+=1;}}if(this.size!==undefined&&this.size.height!==null){e=this.size.height-this.borderHeight*2;f=this.size.height;}else{e=b.content.height();f=b.content.height()+this.borderHeight*2;}var c={contentWidth:a,contentHeight:e,boxWidth:d,boxHeight:f};return c;};HShadeBox.prototype.applyContentStyles=function(a){a.innerContent.css({padding:"5px","line-height":"13px","background-color":"white"});if(jq.browser.msie&&parseInt(jq.browser.version,0)>7){a.innerContent.css("height",(a.innerContent.height()+1)+"px");}if(this.useCloseLink!==false){a.innerContent.css({"padding-top":"18px"});}a.content.css({"background-color":"white","float":"left","font-size":"10px",margin:"0",padding:"0"});if(this.size!==undefined&&this.size.height!==null){a.content.css("height",(this.size.height-this.borderHeight*2)+"px");}if(this.size!==undefined&&this.size.width!==null){a.content.css("width",(this.size.width-this.borderWidth*2)+"px");}return this.getSizes(a);};HShadeBox.prototype.applyBorderStyles=function(a,b){a.cornerTopLeft.addClass("infobox-top-left-sprite main-sprite-map").addClass("main-sprite-map");a.cornerTopRight.addClass("infobox-top-right-sprite main-sprite-map").addClass("main-sprite-map");a.cornerBottomLeft.addClass("infobox-bottom-left-sprite main-sprite-map").addClass("main-sprite-map");a.cornerBottomRight.addClass("infobox-bottom-right-sprite main-sprite-map").addClass("main-sprite-map");a.edgeTop.addClass("infobox-edge-top-sprite x-repeat-sprite-map").addClass("x-repeat-sprite-map");a.edgeLeft.addClass("infobox-edge-left-sprite y-repeat-sprite-map").addClass("y-repeat-sprite-map");a.edgeRight.addClass("infobox-edge-right-sprite y-repeat-sprite-map").addClass("y-repeat-sprite-map");a.edgeBottom.addClass("infobox-edge-bottom-sprite x-repeat-sprite-map").addClass("x-repeat-sprite-map");a.arrow.addClass("infobox-bottom-arrow-sprite").addClass("main-sprite-map");a.cornerTopLeft.css({width:this.borderWidth+"px","float":"left"});a.edgeTop.css({width:b.contentWidth+"px","float":"left"});a.cornerTopRight.css({width:this.borderWidth+"px","float":"left"});a.edgeRight.css({height:b.contentHeight+"px",width:this.borderWidth+"px","float":"left"});a.edgeLeft.css({height:b.contentHeight+"px",width:this.borderWidth+"px","float":"left"});a.cornerBottomLeft.css({width:this.borderWidth+"px","float":"left"});a.edgeBottom.css({width:b.contentWidth+"px","float":"left"});a.cornerBottomRight.css({width:this.borderWidth+"px","float":"left"});a.arrow.css({position:"absolute",bottom:"-5px",left:b.boxWidth+"px"});a.closeLink.addClass("close-link");return a;};HShadeBox.prototype.applyStyles=function(a){var b=this.applyContentStyles(a);this.applyBorderStyles(a,b);a.box.css({position:"absolute","z-index":"4000000",width:b.boxWidth+"px",height:b.boxHeight+"px"});};HShadeBox.prototype.registerListeners=function(){var a=this;if(this.useCloseLink!==false){this.ui.closeLink.click(function(){if(!a.marker.noClose||a.marker.noClose===undefined){a.marker.closeInfoBox();}});}if(this.closeOnClick!==false){this.ui.box.click(function(b){a.marker.closeInfoBox();b.stopPropagation();});}this.ui.box.mouseover(function(){a.mouseIsOver=true;});this.ui.box.mouseout(function(){a.mouseIsOver=false;});a.zoom.click(function(){hitta.common.Event.trigger(hitta.common.Events.MAP_INFO_BOX_ZOOM,{markerId:a.marker.parentMarker.hit.markerId,boundsSource:a.zoom[0].id});});hitta.common.Event.register(hitta.common.Events.MAPPIN_MANAGER_UPDATE,this,this.onTextUpdate);};HShadeBox.prototype.onTextUpdate=function(){};HShadeBox.prototype.setPosition=function(a){this.position=a;};HShadeBox.prototype.setContent=function(a){if(this.ui.innerContent.html()!==a){this.ui.innerContent.html(a);}this.name=this.ui.content.find(".h-marker-content .display").html();};HShadeBox.prototype.pan=function(b,a){this.position.x+=b;this.position.y+=a;this.update();};HShadeBox.prototype.setLayout=function(e){var a=this.ui.box.width();var j=this.ui.box.height();var c=jq(this.marker.element).width();var h=jq(this.marker.element).height();var d=11;var g={};var b={};var f="";this.layoutMode=e;switch(e){case"above":g={left:Math.floor(this.position.x-a/2+c/2)+"px",top:this.position.y-j+"px"};b={top:j-4+"px",left:Math.floor((a/2)-(d/2))+"px"};f="infobox-arrow-bottom-sprite";break;case"left":g={left:this.position.x-a+"px",top:Math.floor(this.position.y-j/2+h/2)+"px"};b={left:a-5+"px",top:Math.floor(j/2)-7+"px"};f="infobox-arrow-right-sprite";break;case"right":g={left:this.position.x+c+"px",top:Math.floor(this.position.y-j/2+h/2)+"px"};b={left:"-3px",top:(Math.floor(j/2)-7)+"px"};f="infobox-arrow-left-sprite";break;case"below":g={left:Math.floor(this.position.x-a/2+c/2)+"px",top:this.position.y+h+"px"};b={left:Math.floor((a/2)-(d/2))+"px",top:"-2px"};f="infobox-arrow-top-sprite";break;}this.ui.box.css(g);this.ui.arrow.css(b);if(!this.ui.arrow.hasClass(f)){this.ui.arrow.removeClass();this.ui.arrow.addClass(f);this.ui.arrow.addClass("main-sprite-map");}};HShadeBox.prototype.ORIENTATION_ABOVE=0;HShadeBox.prototype.ORIENTATION_BELOW=1;HShadeBox.prototype.ORIENTATION_RIGHT=2;HShadeBox.prototype.ORIENTATION_LEFT=3;HShadeBox.prototype.adapt=function(b){if(this.position!==null){var c=this.ui.box.width()/2;var a=this.ui.box.height();if(this.position.x<c){this.setLayout("right");}else{if(this.hmap.map.clientWidth-this.position.x<c){this.setLayout("left");}else{if(this.position.y<a){this.setLayout("below");}else{this.setLayout(b||"above");}}}this.recentAdapt=true;}};HShadeBox.prototype.update=function(){var a=this;this.adapt(this.defaultOrientation);};HShadeBox.prototype.getContentContainer=function(){return jq(this.ui.innerContent)[0];};HShadeBox.prototype.mapMove=function(){this.position=this.marker.point.clone();this.update();};HShadeBox.prototype.getOccupiedArea=function(a){var b=a||this.ui.box;var c=jq(b).offset();if(c!==null){return{left:c.left,top:c.top,bottom:c.top+jq(b).height(),right:c.left+jq(b).width()};}else{return null;}};HShadeBox.prototype.isAreaOccupied=function(b){var a=this.getOccupiedArea(this.ui.box);return this.intersectRect(a,b);};HShadeBox.prototype.intersectRect=function(b,a){return !(a.left>b.right||a.right<b.left||a.top>b.bottom||a.bottom<b.top);};HShadeBox.prototype.setMode=function(){};HShadeBox.prototype.getCurrentBound=function(){return{intersectsWidth:function(a){return false;}};};function HMarkerToolTip(a,b){var c=this;this.marker=a;this.name=b!==undefined?b:(this.marker.infoBox.name?this.marker.infoBox.name:"inget namn");this.colorIn="rgba(255,255,255,1)";this.colorOut=HMarkerToolTip.BGCOLOR_OUT;if(jq.browser.msie){c.colorIn=c.colorOut=HMarkerToolTip.BGCOLOR_IE;}this.toolTip=this.createToolTip();this.element=this.toolTip;jq(this.toolTip).addClass("marker-tooltip");this.listeners=[];}HMarkerToolTip.prototype=new HOverlay();HMarkerToolTip.BGCOLOR_OUT="rgba(255,255,255,.8)";HMarkerToolTip.BGCOLOR_IN="rgba(255,255,255,1)";HMarkerToolTip.BGCOLOR_IE="rgb(255,255,255)";HMarkerToolTip.MAX_ZOOM=1;HMarkerToolTip.prototype.init=function(a){var b=this;this.hmap=a;this.container=this.hmap.getPaneOverlay();this.container.appendChild(this.getElement());this.update();this.registerEventListeners();};HMarkerToolTip.prototype.createToolTip=function(){var a=jq("<div></div>"),e=jq("<div></div>"),b=this;a.append(e);var c=this.marker.point?this.marker.point.clone():new HPoint();var d=isNaN(c.x);c.y+=4;e.css({color:"#000",filter:"alpha(opacity=100)"});e.html(this.name);a.css({top:d?0:parseInt(c.y,10)+"px",left:d?0:parseInt(c.x,10)+"px",backgroundColor:b.colorOut});return a.get(0);};HMarkerToolTip.prototype.update=function(){if(this.marker.point){if(this.marker.hmap.getZoom()<HMarkerToolTip.MAX_ZOOM){this.forceHidden=true;this.toolTip.style.display="none";}else{this.forceHidden=false;}var a=this.marker.point.clone();a.y+=4;this.toolTip.style.left=parseInt(a.x,10)+17+"px";this.toolTip.style.top=parseInt(a.y,10)-1+"px";}};HMarkerToolTip.prototype.show=function(){if(this.forceHidden){return;}if(jq.fadeIn){jq(this.toolTip).fadeIn(80);}else{this.toolTip.style.display="block";}};HMarkerToolTip.prototype.hide=function(){if(this.forceHidden){return;}if(jq.fadeOut){jq(this.toolTip).fadeOut(150);}else{this.toolTip.style.display="none";}};HMarkerToolTip.prototype.mouseOver=function(){var a=this;a.element.style.backgroundColor=this.colorIn;};HMarkerToolTip.prototype.mouseOut=function(){var a=this;a.element.style.backgroundColor=this.colorOut;};HMarkerToolTip.prototype.registerEventListeners=function(){var a=this;this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_INTERNAL_MAP_MOVE,function(){a.update();}));this.listeners.push(HEvent.addListener(this.marker,HMarker.EVENT_INFOBOX_OPEN,function(){a.hide();}));this.listeners.push(HEvent.addListener(this.marker,HMarker.EVENT_INFOBOX_CLOSE,function(){a.show();}));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_INTERNAL_MAP_ZOOM,function(){if(a.hmap.getZoom()<HMarkerToolTip.MAX_ZOOM){a.forceHidden=true;a.toolTip.style.display="none";}else{a.toolTip.style.display="block";}}));this.listeners.push(HEvent.addDomListener(this.element,"mouseover",function(){a.mouseOver();}));this.listeners.push(HEvent.addDomListener(this.element,"mouseout",function(){a.mouseOut();}));this.listeners.push(HEvent.addDomListener(this.element,"click",function(b){a.marker.openInfoBoxBound();HEvent.stopEvent(b);}));};HMarkerToolTip.prototype.pan=function(b,a){};HMarkerToolTip.prototype.unregisterEventListeners=function(){if(this.listeners){HEvent.removeListeners(this.listeners);this.listeners=null;}};HMarkerToolTip.prototype.remove=function(){if(this.isAdded){this.unregisterEventListeners();HOverlay.prototype.remove.call(this);}};HShadeBox.__staticEventProperties="id,mode";HShadeBox.EVENT_NEW={ID:"hshadeboxnew",message:["new"]};HShadeBox.EVENT_CREATED={ID:"hshadeboxcreated",message:["created"]};HShadeBox.EVENT_ISHMAPINIT={ID:"hshadeboxishmapinit",message:["hmap init"]};HShadeBox.EVENT_DESTROYED={ID:"hshadeboxdestroyed",message:["destroyed"]};HShadeBox.EVENT_ILLEGAL={ID:"hshadeboxillegal",message:["is in illegal mode"]};HShadeBox.EVENT_HASILLEGAL={ID:"hshadeboxhasillegal",message:["has illegal modes"]};HShadeBox.EVENT_HASNOLEGAL={ID:"hshadeboxhasnolegal",message:["has no legal modes"]};HShadeBox.EVENT_SETMODE={ID:"hshadeboxsetmode",message:["sets mode from","to"]};HShadeBox.EVENT_UPDATING={ID:"hshadeboxupdating",message:["is updating"]};HShadeBox.EVENT_CHECKINGMODE={ID:"hshadeboxcheckingmode",message:["is checking mode"]};HShadeBox.EVENT_PREDICTINGBOUNDS={ID:"hshadeboxpredictingbounds",message:["is predicting bounds"]};HShadeBox.EVENT_NEWBOUNDS={ID:"hshadeboxnewbounds",message:["new bounds from","to"]};HShadeBox.EVENT_SUGGEST={ID:"hshadeboxsuggest",message:["suggests"]};HShadeBox.EVENT_GETSIBBLINGS={ID:"hshadeboxgetsibblings",message:["get sibbling boxes"]};HShadeBox.EVENT_ISPANNING={ID:"hshadeboxispanning",message:["ispanning"]};HShadeBox.EVENT_CLICKED="hshadeboxclicked";hitta.mapPage.Exception=Class.extend({init:function(a){this.options=a;this.scope=a.scope;this.message=a.message;},print:function(){if(console&&console.error){console.error([this.scope.CLASS_NAME],this.message);}else{alert(this.message);}}});Hitta.Map.Views.MapNavigation=Class.extend({});Hitta.Map.Views.MapNavigation.prototype={CLASS_NAME:"Hitta.Map.Views.MapNavigation",init:function(a){this.container=jq("#map-navigation");this.domElement=jq("<div>");this.mapContainer=a&&a.mapContainer?a.mapContainer:jq("#hmap-container");},setType:function(a){this.domElement.addClass(a);},render:function(){this.mapModeToolbar=jq("<div>").attr("id","map-mode-toolbar");this.mapNavigationLeft=jq("<div>").attr("id","map-navigation-left");this.mapTypeToolbar=jq("<div>").attr("id","map-type-toolbar");this.domElement.append(this.mapModeToolbar);this.domElement.append(this.mapNavigationLeft);this.mapContainer.append(this.mapTypeToolbar);return this.domElement;},activate:function(){this.container.append(this.render());},getMapModeToolbar:function(){return this.mapModeToolbar;},getMapTypeToolbar:function(){return this.mapTypeToolbar;},getMapNavigationLeft:function(){return this.mapNavigationLeft;}};Hitta.Map.Views.HButton=Class.extend({});Hitta.Map.Views.HButton.prototype={CLASS_NAME:"Hitta.Map.Views.HButton",init:function(a){this.domElement=jq("<div>").attr("class","button-container");this.container=a&&a.container!==undefined?a.container:document;this.controller=null;this.options={iconClass:null,display:"${display}",id:"${hButtonId}"};this.cssClasses={"default":{left:"map-button-left-sprite",center:"map-button-center-sprite",right:"map-button-right-sprite"},hover:{left:"map-button-hover-left-sprite",center:"map-button-hover-center-sprite",right:"map-button-hover-right-sprite"}};},render:function(){this.buttonLeft=jq("<div>").attr("class","main-sprite-map ").addClass(this.cssClasses["default"].left);this.buttonBody=jq("<div>").attr("class","x-repeat-sprite-map ").addClass(this.cssClasses["default"].center);this.buttonRight=jq("<div>").attr("class","main-sprite-map ").addClass(this.cssClasses["default"].right);if(this.options.iconClass!==null){this.buttonIcon=jq("<div>").attr("class","main-sprite-map map-button-icon");this.buttonIcon.addClass(this.options.iconClass);this.buttonBody.append(this.buttonIcon);}this.displayElement=jq("<a>").attr({href:"","class":"display-element",id:this.options.id});this.displayElement.html(this.options.display);this.buttonBody.append(this.displayElement);this.buttonContainer=jq("<div>");this.buttonContainer.append(this.buttonLeft);this.buttonContainer.append(this.buttonBody);this.buttonContainer.append(this.buttonRight);this.buttonClickArea=jq("<a>").append(this.buttonContainer);this.domElement.append(this.buttonClickArea);return this.domElement;},activate:function(){this.container.append(this.render());this.controller=new Hitta.Map.Controllers.HButton({id:this.options.id,domElement:this.domElement,display:this.options.display,view:this});this.controller.activate();}};Hitta.Map.Views.BackLink=Hitta.Map.Views.HButton.extend({CLASS_NAME:"Hitta.Map.Views.BackLink",init:function(a){this._super(a);jq.extend(this.options,{iconClass:"back-icon-sprite",display:"Tillbaka",id:"back-link"});},getUrlVars:function(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1];}return d;},activate:function(){var b=document.location.host;this.referrer=document.referrer;var a="ref";if(document.referrer.match(b)!==null||this.getUrlVars()[a]){if(this.getUrlVars()[a]==="start"){this.referrer="http://"+b;}this.container.append(this.render());this.controller=new Hitta.Map.Controllers.BackLink({id:this.options.id,domElement:this.domElement,display:this.options.display,referrer:this.referrer,view:this});this.controller.activate();}}});Hitta.Map.Views.ToggleResult=Hitta.Map.Views.HButton.extend({CLASS_NAME:"Hitta.Map.Views.ToggleResult",init:function(a){this._super(a);jq.extend(this.options,{iconClass:"map-button-center-sprite",display:"Träfflista",id:"toggle-result"});this.buttonCssClasses={"default":{left:"map-button-left-sprite",center:"map-button-center-sprite",right:"map-button-right-sprite"},hover:{left:"map-button-hover-left-sprite",center:"map-button-hover-center-sprite",right:"map-button-hover-right-sprite"}};},create:function(){this.buttonLeft=jq("<div>").attr("class","main-sprite-map ").addClass(this.cssClasses["default"].left);this.buttonBody=jq("<div>").attr("class","x-repeat-sprite-map ").addClass(this.cssClasses["default"].center);this.buttonRight=jq("<div>").attr("class","main-sprite-map ").addClass(this.cssClasses["default"].right);this.buttonBody.append('<a href="#" class="display-element">'+this.options.display+'</a><span id="toggle-result-arrow" class="main-sprite-map arrow-down-sprite">&nbsp;</span>');this.buttonContainer=jq("<div>");this.buttonContainer.append(this.buttonLeft);this.buttonContainer.append(this.buttonBody);this.buttonContainer.append(this.buttonRight);this.buttonClickArea=jq("<a>").append(this.buttonContainer);this.domElement.append(this.buttonClickArea);this.domElement.css({display:"none"});this.domElement.attr("id","toggle-result-button");return this.domElement;},observe:function(){this.buttonContainer.bind("click",{self:this},function(a){this.resultContainer=jq("#search-result-container .h-container");this.toggleResultButton=jq("#toggle-result-button");this.resultContainer.css({display:"block"});this.toggleResultButton.css({display:"none"});hitta.common.Event.trigger(hitta.common.Events.MAP_RESIZED);});this.buttonContainer.bind("mouseenter",{self:this},function(b){b.preventDefault();var a=b.data.self;a.onMouseEnter(a.id);});this.buttonContainer.bind("mouseleave",{self:this},function(b){b.preventDefault();var a=b.data.self;a.onMouseLeave(a.id);});},toggleButton:function(d,c){var a=this.buttonCssClasses[d];var b=this.buttonCssClasses[c];this.buttonLeft.removeClass(a.left);this.buttonBody.removeClass(a.center);this.buttonRight.removeClass(a.right);this.buttonLeft.addClass(b.left);this.buttonBody.addClass(b.center);this.buttonRight.addClass(b.right);},onMouseEnter:function(){this.toggleButton("default","hover");},onMouseLeave:function(){this.toggleButton("hover","default");},render:function(){this.container.append(this.domElement);},register:function(){hitta.common.Event.register(hitta.common.Events.TOOLBAR_MAP_MODE_HIDE,this);hitta.common.Event.register(hitta.common.Events.TOOLBAR_MAP_MODE_SHOW,this);},activate:function(){this.create();this.observe();this.register();this.render();}});Hitta.Map.Views.LargerMap=Hitta.Map.Views.HButton.extend({CLASS_NAME:"Hitta.Map.Views.LargerMap",init:function(a){this._super(a);jq.extend(this.options,{iconClass:"larger-map-sprite",display:"Större karta",id:"larger-map"});},activate:function(){this.container.append(this.render());this.controller=new Hitta.Map.Controllers.LargerMap({id:this.options.id,domElement:this.domElement,display:this.options.display,view:this});this.controller.activate();}});Hitta.Map.Controllers.HButton=Class.extend({CLASS_NAME:"Hitta.Map.Controllers.HButton",init:function(a){if(a&&a.clickElement){this.clickElement=a.clickElement;}if(a&&a.toggleElement){this.toggleElement=a.toggleElement;}if(a&&a.id){this.id=a.id;}if(a&&a.display){this.display=a.display;}},onMouseEnter:function(a){alert(this.display);},onMouseLeave:function(a){alert(this.display);},observe:function(){if(this.domElement!==undefined){var a=this;this.domElement.bind("mouseenter",function(b){a.onMouseEnter(a.id);});this.domElement.bind("mouseleave",function(b){a.onMouseLeave(a.id);});}},register:function(){},setLinkHref:function(){this.domElement.find("a").attr("href","/");},activate:function(){this.observe();this.register();this.setLinkHref();}});Hitta.Map.Controllers.BackLink=Hitta.Map.Controllers.HButton.extend({CLASS_NAME:"Hitta.Map.Controllers.BackLink",init:function(a){this._super(a);jq.extend(this,a);},toggle:function(e,d){var a=this.view;var b=a.cssClasses[e];var c=a.cssClasses[d];a.buttonLeft.removeClass(b.left);a.buttonBody.removeClass(b.center);a.buttonRight.removeClass(b.right);a.buttonLeft.addClass(c.left);a.buttonBody.addClass(c.center);a.buttonRight.addClass(c.right);},onMouseEnter:function(){this.toggle("default","hover");},onMouseLeave:function(){this.toggle("hover","default");},setLinkHref:function(){this.domElement.find("a").attr("href",this.referrer);}});Hitta.Map.ZoomButton=Class.extend({CLASS_NAME:"Hitta.Map.ZoomButton",init:function(){this.cssClasses={"default":{left:"map-button-left-sprite",center:"map-button-center-sprite",right:"map-button-right-sprite"},hover:{left:"map-button-hover-left-sprite",center:"map-button-hover-center-sprite",right:"map-button-hover-right-sprite"}};},toggle:function(e,d,b){var a=this.cssClasses[e];var c=this.cssClasses[d];jq(b[0]).removeClass(a.left);jq(b[1]).removeClass(a.center);jq(b[2]).removeClass(a.right);jq(b[0]).addClass(c.left);jq(b[1]).addClass(c.center);jq(b[2]).addClass(c.right);},onMouseEnter:function(c){var a=jq(c).find(".button-container");var b=a.children();this.toggle("default","hover",b);},onMouseLeave:function(c){var a=jq(c).find(".button-container");var b=a.children();this.toggle("hover","default",b);},observe:function(){var a=this;jq("#HzoomOutButton").live("mouseenter",function(){a.onMouseEnter.apply(a,[this]);});jq("#HzoomOutButton").live("mouseleave",function(){a.onMouseLeave.apply(a,[this]);});jq("#HzoomInButton").live("mouseenter",function(){a.onMouseEnter.apply(a,[this]);});jq("#HzoomInButton").live("mouseleave",function(){a.onMouseLeave.apply(a,[this]);});},activate:function(){this.observe();}});Hitta.Map.Controllers.LargerMap=Hitta.Map.Controllers.HButton.extend({CLASS_NAME:"Hitta.Map.Controllers.LargerMap",init:function(a){this._super(a);jq.extend(this,a);},toggle:function(e,d){var a=this.view;var b=a.cssClasses[e];var c=a.cssClasses[d];a.buttonLeft.removeClass(b.left);a.buttonBody.removeClass(b.center);a.buttonRight.removeClass(b.right);a.buttonLeft.addClass(c.left);a.buttonBody.addClass(c.center);a.buttonRight.addClass(c.right);},onMouseEnter:function(){this.toggle("default","hover");},onMouseLeave:function(){this.toggle("hover","default");},setLinkHref:function(){var a=window.location;var c=a.host;var d=a.protocol;var b=[d,"//",c,Hitta.Router.reverse(Hitta.Routes.MapController_map),"#",hitta.smallMap.getHash()];this.domElement.find("a").attr("href",b.join(""));},register:function(){hitta.common.Event.register(hitta.common.Events.UPDATE_LARGER_MAP_LINK,this,this.setLinkHref);}});Hitta.Map.PoiManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.PoiManager",poisRetrieved:false,init:function(){this.initiated=false;HMapConfig.setPath("HPOIMANAGER_IMAGES","images/web/map/pois/");},poiFamiliesLoaded:function(){for(var a=0;a<HPOIManager.poifamilies.length;a++){var b=HPOIManager.poifamilies[a];if(b.tags!==null&&b.tags.indexOf("permanent")>-1){HPOIManager.addPOIType(b.getPoiType());}}HPOIManager.poiFamiliesLoaded=true;},onAddPoiType:function(c){var b=HPOIManager.getCachedPOIFamilyById(c);var a=b.getPoiType();HPOIManager.addPOIType(a);},onRemovePoiType:function(c){var b=HPOIManager.getCachedPOIFamilyById(c);var a=b.getPoiType();HPOIManager.removePOIType(a);},addPermanentPOIs:function(a){HEvent.addListener(HPOIManager,HPOIManager.EVENT_FAMILIES_RETRIEVED,this.poiFamiliesLoaded);HPOIManager.init(a);HPOIManager.refreshAllFamilies();},register:function(){var a=this;hitta.common.Event.register(hitta.common.Events.POI_MANAGER_ADD_POITYPE,this,this.onAddPoiType);hitta.common.Event.register(hitta.common.Events.POI_MANAGER_REMOVE_POITYPE,this,this.onRemovePoiType);HEvent.addListener(HPOIManager,HPOIManager.EVENT_POIS_RETRIEVED,function(){a.poisRetrieved=true;});}});Hitta.Map.MapModeManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.MapModeManager",mapModeToolbar:null,routeLinkTool:null,operate:function(){this.mapModeToolbar=new Hitta.Map.MapMode.Toolbar(this.options);this.mapModeToolbar.activate();this.routeLinkTool=new Hitta.Map.MapMode.LinkTool({label:"Vägbeskrivning",url:Hitta.Router.reverse(Hitta.Routes.Application_route),noHash:true});if(!Hitta.isFailover){this.mapModeToolbar.add(this.routeLinkTool);this.mapModeToolbar.add(new Hitta.Map.MapMode.PoiTool({label:"Bensinstationer",id:"gas_stations"}));this.mapModeToolbar.add(new Hitta.Map.MapMode.Delimiter());this.mapModeToolbar.add(new Hitta.Map.MapMode.PoiTool({label:"Brevlådor",id:"letterboxes"}));}this.mapModeToolbar.add(new Hitta.Map.MapMode.CoordinateTool({label:"Koordinater",id:"coordinate"}));this.mapModeToolbar.add(new Hitta.Map.MapMode.DistanceTool({label:"Mäta avstånd",id:"distance"}));this.mapModeToolbar.add(new Hitta.Map.MapMode.MapPinTool({label:"Skapa karta",id:"map-pin"}));},findToolbar:function(a){if(this.mapModeToolbar!==null){return this.mapModeToolbar.find(a);}return null;},onSearchResult:function(b){var a=b.hits;if(a.length==1&&a[0].getRouteLink&&a[0].getRouteLink()!==null){this.routeLinkTool.url=a[0].getRouteLink();}else{this.routeLinkTool.url=Hitta.Router.reverse(Hitta.Routes.Application_route);}},register:function(){hitta.common.Event.register(hitta.common.Events.MAP_SET_BOUNDS,this,this.onSearchResult);hitta.common.Event.register(hitta.common.Events.MAP_SET_BOUNDS_BOUNDARY_SEARCH,this,this.onSearchResult);},hideToolbar:function(){this.mapModeToolbar.hide();}});Hitta.Map.MapMode.Element=Class.extend({CLASS_NAME:"Hitta.Map.MapMode.Element",init:function(a){this.options=a;},getLabel:function(){return this.options.label;}});Hitta.Map.MapMode.Tool=Class.extend({CLASS_NAME:"Hitta.Map.MapMode.Tool",init:function(){this.label="label not set";this.id="map-mode";this.handler=null;},create:function(){this.domElement=jq('<li class="map-mode-tool">');this.domElement.append(this.label);},observe:function(){this.domElement.bind("click",{self:this},function(d){d.preventDefault();var b=d.data.self;try{b.onClick(b);}catch(f){if(f.print){f.print();}else{var c=["\nFile name: ",f.fileName,"\nLine number: ",f.lineNumber,"\nExection name: ",f.name,"\nMessage: ",f.message].join("");var a=new hitta.mapPage.Exception({scope:b,message:c});a.print();}}});this.domElement.bind("mouseover",{self:this},function(a){a.data.self.domElement.addClass("hover");});this.domElement.bind("mouseout",{self:this},function(a){a.data.self.domElement.removeClass("hover");});},onToggle:function(a){this.onDeactivateOthers(a);if(this.id===a){if(this.domElement.hasClass("active")){this.domElement.removeClass("active");hitta.hash.removeTool(a);}else{this.domElement.addClass("active");hitta.hash.addTool(a);}}},register:function(){hitta.common.Event.register(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,this,this.onToggle);},assign:function(){},render:function(){this.create();this.assign();this.observe();this.register();return this.domElement;},onClick:function(a){hitta.common.Event.trigger(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,a.id);},onDeactivateOthers:function(a){if(a!==this.id){this.domElement.removeClass("active");}}});Hitta.Map.MapMode.FloatingTool=Hitta.Map.MapMode.Tool.extend({CLASS_NAME:"Hitta.Map.MapMode.FloatingTool",init:function(a){this._super();this.label=a.label;this.id=a.id;this.handler=new Hitta.Map.MapMode.FloatingToolbar(this.id);},onClick:function(a){this._super(a);this.openToolbar();},openToolbar:function(){if(this.handler.isActive()){this.handler.toggle();}else{this.handler.activate();this.handler.show();}},register:function(){var a=this;a._super();hitta.common.Event.register(hitta.common.Events.FLOATING_TOOL_OPEN,a,function(b){if(a.id===b){a.openToolbar();}});}});Hitta.Map.MapMode.PoiTool=Hitta.Map.MapMode.Tool.extend({CLASS_NAME:"Hitta.Map.MapMode.PoiTool",init:function(a){this._super();this.label=a.label;this.id=a.id;},onClick:function(a){this._super(a);this.openPoi();},openPoi:function(){var b=false;if(HPOIManager.poifamilies!==undefined){b=HPOIManager.getCachedPOIFamilyById(this.id);}if(b){var a=b.getPoiType();if(HPOIManager.getPOITypeByFamilyId(this.id)){HPOIManager.removePOIType(a);}else{HPOIManager.addPOIType(a);}}else{throw new hitta.mapPage.Exception({scope:this,message:'The familyId "'+this.id+'" seems to be undefined or wrong!'});}},register:function(){var a=this;this._super();hitta.common.Event.register(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,this,this.onCloseOthers);hitta.common.Event.register(hitta.common.Events.POI_TOOL_OPEN,a,function(c){if(a.id===c){if(HPOIManager.poiFamiliesLoaded){a.openPoi();}else{var b=HEvent.addListener(HPOIManager,HPOIManager.EVENT_FAMILIES_RETRIEVED,function(){a.openPoi();HEvent.removeListener(b);});}}});},onCloseOthers:function(c){if(c!==this.id){var b=false;if(HPOIManager.poifamilies!==undefined){b=HPOIManager.getCachedPOIFamilyById(this.id);}if(b){var a=b.getPoiType();HPOIManager.removePOIType(a);}}}});Hitta.Map.MapMode.LinkTool=Hitta.Map.MapMode.Tool.extend({init:function(a){this.url=a.url;this.label=a.label;this.noHash=a.noHash?true:false;this.pageType=a.pageType||false;},onClick:function(){var c;if(this.noHash){c=this.url;}else{var b=this.url.indexOf("#")!==-1?"&":"#";c=this.url+(hitta.smallMap.getHash?b+hitta.smallMap.getHash():"");}if(jq.browser.msie&&jq.browser.version<9){var a=document.createElement("a");a.href=c;document.body.appendChild(a);a.click();}else{window.location=c;}},updateLinkHref:function(a){if(a&&this.pageType==="smallmap"){this.url=a;this.noHash=true;}},register:function(){this._super();hitta.common.Event.register(hitta.common.Events.UPDATE_TOOL_MAP_MODE_ROUTE_LINK,this,this.updateLinkHref);}});Hitta.Map.MapMode.Toolbar=Class.extend({CLASS_NAME:"Hitta.Map.MapMode.Toolbar",init:function(a){this.container=a.container;this.label=a.label;this.hContainer=new Hitta.Common.HContainer({hasHead:false,hasCloseButton:false,width:a.width});this.hContainer.activate();this.elements=[];this.buttonCssClasses={"default":{left:"map-button-left-sprite",center:"map-button-center-sprite",right:"map-button-right-sprite"},hover:{left:"map-button-hover-left-sprite",center:"map-button-hover-center-sprite",right:"map-button-hover-right-sprite"}};},create:function(){this.domElement=jq("<div>").attr("class","main-container");this.buttonContainer=jq("<div>").attr("class","button-container");this.buttonLeft=jq("<div>").attr("class","main-sprite-map ").addClass(this.buttonCssClasses["default"].left);this.buttonBody=jq('<div title="Visa fler kartfunktioner">').attr("class","x-repeat-sprite-map ").addClass(this.buttonCssClasses["default"].center);this.buttonRight=jq("<div>").attr("class","main-sprite-map ").addClass(this.buttonCssClasses["default"].right);this.buttonBody.append('<a href="#">'+this.label+'<span>...</span></a><span id="map-mode-arrow" class="main-sprite-map arrow-down-sprite">&nbsp;</span>');this.buttonContainer.append(this.buttonLeft);this.buttonContainer.append(this.buttonBody);this.buttonContainer.append(this.buttonRight);this.domElement.append(this.buttonContainer);this.domElement.append(this.hContainer.getDomElement());this.list=jq("<ul>").attr("class","map-mode-toolbar");this.hContainer.append(this.list);},observe:function(){this.buttonContainer.bind("click",{self:this},function(b){b.preventDefault();var a=b.data.self;a.toggleCollapse();});this.buttonContainer.bind("mouseenter",{self:this},function(b){b.preventDefault();var a=b.data.self;a.onMouseEnter(a.id);});this.buttonContainer.bind("mouseleave",{self:this},function(b){b.preventDefault();var a=b.data.self;a.onMouseLeave(a.id);});},toggleCollapse:function(){if(this.domElement.hasClass("collapse")){this.domElement.removeClass("collapse");}else{this.domElement.addClass("collapse");var a=jq("ul.map-mode-toolbar").height();this.hContainer.getContent().height(a);this.hContainer.getContentRight().height(a);}this.toggleArrow();},toggleButton:function(d,c){var a=this.buttonCssClasses[d];var b=this.buttonCssClasses[c];this.buttonLeft.removeClass(a.left);this.buttonBody.removeClass(a.center);this.buttonRight.removeClass(a.right);this.buttonLeft.addClass(b.left);this.buttonBody.addClass(b.center);this.buttonRight.addClass(b.right);},onMouseEnter:function(){this.toggleButton("default","hover");},onMouseLeave:function(){this.toggleButton("hover","default");},toggleArrow:function(){var a=jq("#map-mode-arrow");if(a.hasClass("arrow-down-sprite")){a.removeClass("arrow-down-sprite");a.addClass("arrow-up-sprite");}else{a.removeClass("arrow-up-sprite");a.addClass("arrow-down-sprite");}},add:function(a){this.elements.push(a);this.list.append(a.render());},hideAll:function(){for(var b=0;b<this.elements.length;b++){var a=this.elements[b].handler;if(a&&a.hide&&a.isActive()){a.hide();hitta.common.Event.trigger(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,a.id);}}},find:function(a){var b=null;jq(this.elements).each(function(c,d){if(d.id!==undefined&&a===d.id){b=d;}});return b;},render:function(){this.container.append(this.domElement);},onHide:function(){this.domElement.removeClass("collapse");},onHideAll:function(a){this.hideAll();if(a&&a.collapseMenu){this.toggleCollapse();}},onShow:function(){this.domElement.addClass("collapse");this.toggleArrow();},register:function(){hitta.common.Event.register(hitta.common.Events.TOOLBAR_MAP_MODE_HIDE,this,this.onHide);hitta.common.Event.register(hitta.common.Events.TOOLBAR_MAP_MODE_SHOW,this,this.onShow);hitta.common.Event.register(hitta.common.Events.TOOLBAR_HIDE_ALL,this,this.onHideAll);},activate:function(){this.create();this.observe();this.register();this.render();}});Hitta.Map.MapMode.FloatingToolbar=Class.extend({CLASS_NAME:"Hitta.Map.MapMode.FloatingToolbar",init:function(a){this.id=a;this.active=false;this.hContainer=new Hitta.Common.PopupBox({parentId:this.id,closeButtonText:hitta.common.language.get("floating.toolbar.close")});this.hContainer.activate();},isActive:function(){return this.active;},visible:function(){return this.domElement.hasClass("visible");},hide:function(){try{this.domElement.removeClass("visible");}catch(a){}},show:function(){this.domElement.addClass("visible");},toggle:function(){if(this.visible()){this.hide();}else{this.show();}},create:function(){this.domElement=jq("<div>").attr({"class":"floating-toolbar-container",id:this.id});this.domElement.append(this.hContainer.getDomElement());this.renderContent();},renderContent:function(){this.hContainer.setHeader(this.id);this.hContainer.setContent(this.id);this.hContainer.makeDraggable();},observe:function(){},register:function(){hitta.common.Event.register(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,this,this.onCloseOthers);hitta.common.Event.register(hitta.common.Events.H_CONTAINER_CLOSE,this,this.onClose);},onCloseOthers:function(a){if(a!==this.id){this.hide();}},onClose:function(a){if(this.id===a){this.hide();hitta.common.Event.trigger(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,a);}},assign:function(){},render:function(){hitta.common.Event.trigger(hitta.common.Events.MAP_PAGE_APPEND_RESULT_CONTAINER,this.domElement);},activate:function(){this.create();this.assign();this.observe();this.register();this.render();this.active=true;}});Hitta.Map.MapMode.Delimiter=Class.extend({CLASS_NAME:"Hitta.Map.MapMode.Delimiter",init:function(){this.label="label not set";this.id="map-mode";this.handler=null;},create:function(){this.domElement=jq('<li class="map-mode-delimiter"><div></div></li>');},render:function(){this.create();return this.domElement;}});Hitta.Map.SparRemovalBox=Hitta.Common.PopupBox.extend({CLASS_NAME:"Hitta.Map.SparRemovalBox",init:function(a){this._super(a);this.id=this.options.parentId?this.options.parentId:"share-mail";this.messageLink=this.options.messageLink?this.options.messageLink:null;},setup:function(){var a=this;var b=this.options;this.setHeader(this.renderHeader());this.setContent(this.renderContent());this.makeDraggable();this.boxContainer.append(this.getDomElement());b.hBoxContainer.append(this.boxContainer);var c=b.setOffsetCallback?b.setOffsetCallback.apply(a,[a]):{left:100,top:100};this.boxContainer.css({left:c.left,top:c.top});this.register();this.show();},getWidth:function(){return this.boxContainer.width();},setPosition:function(a){this.boxContainer.css({left:a.left,top:a.top});},renderHeader:function(){return'<div style="font-weight:bold;padding-top:10px;">'+hitta.common.language.get("spar.removal.box.header")+"</div>";},renderContent:function(){var b=['<form action="',hitta.common.Config.get("share.mail.route-path"),'" method="post">',"       <div>",'           <div class="form-section">','               <label for="name">',hitta.common.language.get("spar.removal.form.label.name"),"</label>",'               <input type="text" name="name" value="" id="name" />',"           </div>",'           <div class="form-section">','               <label for="email">',hitta.common.language.get("spar.removal.form.label.email"),"</label>",'               <input type="text" name="email" value="" id="email" />',"           </div>",'           <div class="form-section">','               <label for="phone">',hitta.common.language.get("spar.removal.form.label.phone"),"</label>",'               <input type="text" name="phone" value="" id="phone" />',"           </div>","       </div>",'       <div class="message-container" style="padding-bottom:10px; width:320px">','           <label for="message">',hitta.common.language.get("spar.removal.form.label.message"),"</label>",'           <textarea name="message" id="message" cols="30" rows="5"></textarea>',"       </div>",'       <div id="recaptcha"></div>','       <div class="button-container">','           <input type="button" id="mail-submit-button" value="',hitta.common.language.get("spar.removal.form.button.ok"),'">',"       </div>","</form>"];var a=['<div id="popup-box-form-container" class="form-container">','   <div id="popup-box-form-error-msg-container"></div>',b.join(""),"</div>",'<div id="popup-box-form-success-container"></div>'].join("");return a;},hide:function(a){if(this.id===a){this._super();this.domElement.removeClass("visible");jq("#popup-box-form-error-msg-container").empty();jq("#popup-box-form-successful").remove();hitta.common.Event.trigger(hitta.common.Events.SHARE_MAILBOX_HIDE,this.id);}},show:function(){this._super();this.domElement.addClass("visible");jq("#popup-box-form-container").show();jq("#popup-box-form-successful").remove();this.setInputFocus();hitta.common.Event.trigger(hitta.common.Events.SHARE_MAILBOX_SHOW,this.id);this.loadRecaptcha();},setInputFocus:function(){jq("#popup-box-form-container input#name").focus();},observe:function(){this._super();var a=jq("#mail-submit-button");var b=jq("#mail-cancel-button");a.live("click",{self:this},function(c){c.preventDefault();c.data.self.requestRemoval(this);});b.live("click",{self:this},function(c){c.preventDefault();hitta.common.Event.trigger(hitta.common.Events.H_CONTAINER_CLOSE,c.data.self.id);});},loadRecaptcha:function(){if(Recaptcha){Recaptcha.destroy();Recaptcha.create(hitta.common.Config.recaptcha.clientKey,"recaptcha",{theme:"white"});}},requestRemoval:function(){var g=this;var d=jq("#name");var c=jq("#email");var f=jq("#message");var a=jq("#phone");var h=jq("#id");var e=(this.messageLink!==null)?this.messageLink:document.location.href;var b=this.validate();if(b.isValid){jq.ajax({type:"POST",url:Hitta.Router.reverse(Hitta.Routes.ChangeRequestController_removeSpar),data:({name:d.val(),email:c.val(),phone:a.val(),message:f.val(),vkiid:h.val(),captchaChallenge:Recaptcha.get_challenge(),captchaResponse:Recaptcha.get_response()}),success:function(j){g.displayConfirmationMessage("Meddelandet har skickats.<br/>Dina uppgifter kommer att tas bort från hitta.se inom 48 timmar");},error:function(j){if(j.status===403){g.displayErrorMessage(hitta.common.language.get("spar.removal.error.incorrect-captcha"));g.loadRecaptcha();}else{g.displayConfirmationMessage("Något gick fel. Vi kan tyvärr inte ta emot din begäran nu. Prova igen lite senare.");}},dataType:"json"});}else{this.displayErrorMessage(b.message);}},displayErrorMessage:function(a){var b=jq("#popup-box-form-error-msg-container");b.empty();b.append(a);},displayConfirmationMessage:function(a){jq("#popup-box-form-container").hide();jq("#popup-box-form-success-container").append('<div id="popup-box-form-successful">'+a+"</div>");},validate:function(){var b=[this.isValidName(jq("#name").val()),this.isValidEmailAddress(jq("#email").val()),this.isValidPhoneNumber(jq("#phone").val()),this.isValidMessage(jq("#message").val())];for(var a=0;a<b.length;a++){if(!b[a].isValid){return b[a];}}return{isValid:true};},isValidName:function(a){if(a===""){return{isValid:false,message:hitta.common.language.get("spar.removal.error.name-missing")};}else{return{isValid:true};}},isValidPhoneNumber:function(a){if(a===""){return{isValid:false,message:hitta.common.language.get("spar.removal.error.phone-missing")};}else{return{isValid:true};}},isValidEmailAddress:function(c){var b=new RegExp(/^(("[\w-\s]+")|([\w\-]+(?:\.[\w\-]+)*)|("[\w-\s]+")([\w\-]+(?:\.[\w\-]+)*))(@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);var d=b.test(c);var a="";if(!d){if(c===""){a=hitta.common.language.get("spar.removal.error.email-missing");}else{a=hitta.common.language.get("spar.removal.error.email-incorrect");}}return{isValid:d,message:a};},isValidMessage:function(a){if(a===""){return{isValid:false,message:hitta.common.language.get("spar.removal.error.message-missing")};}else{return{isValid:true};}},register:function(){hitta.common.Event.register(hitta.common.Events.H_CONTAINER_CLOSE,this,this.hide);},create:function(){this._super();this.boxContainer=jq("<div>").attr({"class":"popup-box-container",id:"spar-removal-popup"}).css({height:"0px",width:"360px"});},toggle:function(){if(this.domElement.hasClass("visible")){this.hide();}else{this.show();}},activate:function(){this._super();this.setup();}});hitta.common.banners=hitta.common.banners||{};hitta.common.banners={eastNP:"",segQS:"",pageviewId:"",getAllBannersData:function(){var a={"directions-ros-ad-1":{id:742},"directions-ros-ad-2":{id:743},"directions-ros-ad-3":{id:744},"directions-banner":{id:2193,width:912,height:120},"result-mixed-ros-ad-1":{id:632},"result-mixed-ros-ad-2":{id:633},"result-mixed-ros-ad-3":{id:634},"result-persons-ros-ad-1":{id:638},"result-persons-ros-ad-2":{id:639},"result-persons-ros-ad-3":{id:640},"result-companies-ros-ad-1":{id:635},"result-companies-ros-ad-2":{id:636},"result-companies-ros-ad-3":{id:637},"detail-person-ros-ad-1":{id:629},"detail-person-ros-ad-2":{id:630},"detail-person-ros-ad-3":{id:631},"detail-company-ros-ad-1":{id:626},"detail-company-ros-ad-2":{id:627},"detail-company-ros-ad-3":{id:628},"person-detail-panorama":{id:2075,width:980,height:120},"person-result-panorama":{id:2077,width:980,height:120},"start-takeover":{id:2082,width:1000,height:618},"test-start-takeover":{id:2124,width:1000,height:618}};return a;},setPageViewId:function(){this.pageviewId=Math.uuidFast();},getCookie:function(b){var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var c=a[d].substr(0,a[d].indexOf("="));var e=a[d].substr(a[d].indexOf("=")+1);c=c.replace(/^\s+|\s+$/g,"");if(c==b){return e;}}return null;},loadBanners:function(){var a=this;this.segQS=this.loadAudiencescienceAdTagCode();var b=this.getCookie("nPsegs");if(b!==null&&b.length>0){this.eastNP=";EASTnp="+b;}this.setPageViewId();$(".banner-containers").each(function(d){var e=Math.floor(Math.random()*1000000);$(this).attr("id",e);var c={bannerContainerId:e,banner:$(this).attr("data-banner"),what:$(this).attr("data-what"),where:$(this).attr("data-where")};a.loadBanner(c);});},loadBanner:function(a){var c=this;var b={};b=this.getAllBannersData();$.each(b,function(e,d){if(e==a.banner){c.createBanner(d.id,a);}});},createBanner:function(f,b,c){var e="EAS_fif_"+f,d='<div id="'+e+'" class="banner"></div>';$("#"+b.bannerContainerId).append(d);var a="http://ads.aftonbladet.se/eas?encoding=utf-8;cu="+f+";cre=mu;pageviewid="+this.pageviewId+";js=y;target=_blank;sw1="+b.what+";sw2="+b.where+";EASTbt="+this.segQS+this.eastNP;if(c!==undefined){a+=c;}this.EAS_load_fif(e,a,0,0,f);},EAS_load_fif:function(c,b,e,a,j){var g=document,f=g.createElement("iframe"),h=g.getElementById(c);f.src="/public/html/web/EAS_fif.html";f.style.width=e+"px";f.style.height=a+"px";f.style.margin="0px";f.style.borderWidth="0px";f.style.padding="0px";f.scrolling="no";f.frameBorder="0";f.allowTransparency="true";f.EAS_src=b+";fif=y";f.name="geb-banner-"+j;h.appendChild(f);},loadAudiencescienceAdTagCode:function(){var c="";var a=[];var d=document.cookie.indexOf("rsi_segs=");if(d>=0){d=document.cookie.indexOf("=",d)+1;if(d>0){var b=document.cookie.indexOf(";",d);if(b==-1){b=document.cookie.length;}c=document.cookie.substring(d,b);}}return c;}};$(function(){hitta.common.banners.loadBanners();});(function(f){f.facebox=function(n,m){f.facebox.loading(n.settings||[]);if(n.ajax){g(n.ajax,m);}else{if(n.image){c(n.image,m);}else{if(n.div){k(n.div,m);}else{if(f.isFunction(n)){n.call(f);}else{f.facebox.reveal(n,m);}}}}};f.extend(f.facebox,{settings:{opacity:0.35,overlay:true,imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <div class="content-wrapper">         </div>         <a href="#" class="close main-sprite-site close-sprite"></a>       </div>     </div>'},loading:function(){l();if(f("#facebox .loading").length==1){return true;}e();f("#facebox .content-wrapper").empty().append('<div class="loading-container"><div class="loading"></div></div>');f("#facebox").show().css({top:h()[1]+(j()/10)+10,left:f(window).width()/2-(f("#facebox .popup").outerWidth()/2)});f(window).resize(function(){if(f("#facebox").css("display")!=="none"){f("#facebox").show().css({left:f(window).width()/2-(f("#facebox .popup").outerWidth()/2)});}});f(document).bind("keydown.facebox",function(m){if(m.keyCode==27){f.facebox.close();}return true;});f(document).trigger("loading.facebox");},reveal:function(n,m){f(document).trigger("beforeReveal.facebox");if(m){f("#facebox .content-wrapper").addClass(m);}f("#facebox .content-wrapper").empty().append(n);f("#facebox .popup").children().fadeIn("normal");f("#facebox").css("left",f(window).width()/2-(f("#facebox .popup").outerWidth()/2));f(document).trigger("reveal.facebox").trigger("afterReveal.facebox");},close:function(){f(document).trigger("close.facebox");return false;}});f.fn.facebox=function(m){if(f(this).length==0){return;}l(m);function n(){f.facebox.loading(true);if(this.rel){var o=this.rel.match(/facebox\[?\.(\w+)\]?/);}else{var o=null;}if(o){o=o[1];}g(m.ajax,o);return false;}return this.bind("click.facebox",n);};function l(o){if(f.facebox.settings.inited){return true;}else{f.facebox.settings.inited=true;}f(document).trigger("init.facebox");d();var m=f.facebox.settings.imageTypes.join("|");f.facebox.settings.imageTypesRegexp=new RegExp("\\.("+m+")(\\?.*)?$","i");if(o){f.extend(f.facebox.settings,o);}f("body").append(f.facebox.settings.faceboxHtml);var n=[new Image(),new Image()];f("#facebox").find(".b:first, .bl").each(function(){n.push(new Image());n.slice(-1).src=f(this).css("background-image").replace(/url\((.+)\)/,"$1");});f("#facebox .close").click(f.facebox.close);}function h(){var n,m;if(self.pageYOffset){m=self.pageYOffset;n=self.pageXOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){m=document.documentElement.scrollTop;n=document.documentElement.scrollLeft;}else{if(document.body){m=document.body.scrollTop;n=document.body.scrollLeft;}}}return new Array(n,m);}function j(){var m;if(self.innerHeight){m=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){m=document.documentElement.clientHeight;}else{if(document.body){m=document.body.clientHeight;}}}return m;}function d(){var m=f.facebox.settings;m.closeImage=m.close_image||m.closeImage;m.imageTypes=m.image_types||m.imageTypes;m.faceboxHtml=m.facebox_html||m.faceboxHtml;}function k(n,m){if(n.match(/#/)){var o=window.location.href.split("#")[0];var p=n.replace(o,"");if(p=="#"){return;}f.facebox.reveal(f(p).html(),m);}else{if(n.match(f.facebox.settings.imageTypesRegexp)){c(n,m);}else{g(n,m);}}}function c(n,m){var o=new Image();o.onload=function(){f.facebox.reveal('<div class="image"><img src="'+o.src+'" /></div>',m);};o.src=n;}function g(n,m){f.facebox.jqxhr=f.get(n,function(o){f.facebox.reveal(o,m);});}function b(){return f.facebox.settings.overlay==false||f.facebox.settings.opacity===null;}function e(){if(b()){return;}if(f("#facebox_overlay").length==0){f("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');}f("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",f.facebox.settings.opacity).click(function(){f(document).trigger("close.facebox");}).fadeIn(200);return false;}function a(){if(b()){return;}f("#facebox_overlay").fadeOut(200,function(){f("#facebox_overlay").removeClass("facebox_overlayBG");f("#facebox_overlay").addClass("facebox_hide");f("#facebox_overlay").remove();});return false;}f(document).bind("close.facebox",function(){if(f.facebox.jqxhr){f.facebox.jqxhr.abort();f.facebox.jqxhr=null;}f(document).unbind("keydown.facebox");f("#facebox").fadeOut(function(){f("#facebox .content-wrapper").removeClass().addClass("content-wrapper").empty();f("#facebox .loading").remove();f(document).trigger("afterClose.facebox");});a();});})(jQuery);function HDistanceTool(c,a,e,b){this.hmap=c;this.polyLayer=c.getPolyLayer();this.distanceCallback=a;this.pointCallback=e;this.doneCallback=b;this.hmap.disableDoubleClickZoom();this.polyline=new HPolyline();this.polyLayer.addPoly(this.polyline);this.polyStyle=new HPolyStyle();this.polyStyle.strokeOpacity=0.6;this.polyStyle.weight=8;this.polyline.setStyle(this.polyStyle);this.polyLayer.setStyle(this.polyLayer.getCtxVolatile(),this.polyStyle);this.currentDistance=0;var d=this;this.listeners=[];this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_CLICK,function(f){d.mapClick(f);}));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_DBLCLICK,function(f){d.mapDblClick(f);}));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_MOUSE_MOVE,function(g,f){d.mapMouseMove(g);}));}HDistanceTool.prototype.close=function(){this.hmap.enableDoubleClickZoom();this.polyLayer.removePoly(this.polyline);this.polyLayer.clearAll();HEvent.removeListeners(this.listeners);};HDistanceTool.prototype.reset=function(){this.polyline.reset();this.polyLayer.clearAll();this.isDrawing=false;};HDistanceTool.prototype.undo=function(){if(this.isDrawing&&this.polyline.getVertexCount()>0){this.polyline.deleteVertex(this.polyline.getVertexCount()-1);this.polyLayer.update();this.currentDistance=this.polyline.getLength();this.distanceCallback(this.currentDistance);}};HDistanceTool.prototype.drawPolyline=function(b){if(!b){return;}this.reset();for(var a=0;a<b.length;a++){this.polyline.addVertex(b[a]);}this.polyLayer.update();this.currentDistance=this.polyline.getLength();this.distanceCallback(this.currentDistance);};HDistanceTool.prototype.mapClick=function(a){if(!this.isDrawing){this.reset();}this.isDrawing=true;this.polyline.addVertex(a);this.polyLayer.update();this.currentDistance=this.polyline.getLength();this.distanceCallback(this.currentDistance);this.pointCallback(a);};HDistanceTool.prototype.mapDblClick=function(a){this.isDrawing=false;this.polyLayer.clear(this.polyLayer.getCtxVolatile());this.doneCallback();};HDistanceTool.prototype.mapMouseMove=function(c){if(this.isDrawing){var a=this.polyLayer.getCtxVolatile();this.polyLayer.clear(a);var b=this.polyline.getVertex(this.polyline.getVertexCount()-1);this.polyLayer.drawLine(a,b,c);this.distanceCallback(this.currentDistance+b.distanceTo(c));}};function HCoordinateTool(a,c){this.hmap=a;this.callback=c;this.marker=new HMarker(this.hmap.getCenter(),HCoordinateTool.ICON);this.marker.enableDragging();this.hmap.addOverlay(this.marker);var b=this;this.listeners=[];this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_CLICK,function(d){b.mapClick(d);}));this.listeners.push(HEvent.addListener(this.marker,HMarker.EVENT_DRAG_MOVE,function(d){b.markerMove(d);}));}HCoordinateTool.ICON={image:Hitta.Router.fromPublic("/images/web/legacy/siktebla.png"),anchor:new HPoint(39,39),infoBoxAnchorTop:new HPoint(39,-2),infoBoxAnchorBottom:new HPoint(39,79)};HCoordinateTool.prototype.close=function(){HEvent.removeListeners(this.listeners);this.hmap.removeOverlay(this.marker);};HCoordinateTool.prototype.mapClick=function(a){this.marker.setRT90Point(a);this.callback(a);};HCoordinateTool.prototype.markerMove=function(a){this.callback(a);};eval(function(h,b,j,d,g,f){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36));};if(!"".replace(/^/,String)){while(j--){f[g(j)]=d[j]||g(j);}d=[function(a){return f[a];}];g=function(){return"\\w+";};j=1;}while(j--){if(d[j]){h=h.replace(new RegExp("\\b"+g(j)+"\\b","g"),d[j]);}}return h;}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}));Vector.prototype.squaredDistanceFrom=function(c){var a=this.elements;var g=c.elements;var d,b=a.length;var e=0;for(d=0;d<b;++d){var f=a[d]-g[d];e+=f*f;}return e;};if(!("indexOf" in Array.prototype)){Array.prototype.indexOf=function(b){for(var d=this,c=0,a=d.length;c<a;++c){if(d[c]==b){return c;}}return -1;};}if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b&&a?this:a,e.concat(Array.prototype.slice.call(arguments)));};b.prototype=this.prototype;c.prototype=new b();return c;};}Matrix.Translation=function(a){if(a.elements.length==2){var b=Matrix.I(3);b.elements[2][0]=a.elements[0];b.elements[2][1]=a.elements[1];return b;}if(a.elements.length==3){var b=Matrix.I(4);b.elements[0][3]=a.elements[0];b.elements[1][3]=a.elements[1];b.elements[2][3]=a.elements[2];return b;}throw"Invalid length for Translation";};Matrix.prototype.flatten=function(){var a=[];if(this.elements.length==0){return[];}for(var b=0;b<this.elements[0].length;b++){for(var c=0;c<this.elements.length;c++){a.push(this.elements[c][b]);}}return a;};Matrix.prototype.ensure4x4=function(){if(this.elements.length==4&&this.elements[0].length==4){return this;}if(this.elements.length>4||this.elements[0].length>4){return null;}for(var b=0;b<this.elements.length;b++){for(var a=this.elements[b].length;a<4;a++){if(b==a){this.elements[b].push(1);}else{this.elements[b].push(0);}}}for(var b=this.elements.length;b<4;b++){if(b==0){this.elements.push([1,0,0,0]);}else{if(b==1){this.elements.push([0,1,0,0]);}else{if(b==2){this.elements.push([0,0,1,0]);}else{if(b==3){this.elements.push([0,0,0,1]);}}}}}return this;};Matrix.prototype.make3x3=function(){if(this.elements.length!=4||this.elements[0].length!=4){return null;}return Matrix.create([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]]);};Vector.prototype.flatten=function(){return this.elements;};function mht(a){var c="";if(a.length==16){for(var b=0;b<4;b++){c+="<span style='font-family: monospace'>["+a[b*4+0].toFixed(4)+","+a[b*4+1].toFixed(4)+","+a[b*4+2].toFixed(4)+","+a[b*4+3].toFixed(4)+"]</span><br>";}}else{if(a.length==9){for(var b=0;b<3;b++){c+="<span style='font-family: monospace'>["+a[b*3+0].toFixed(4)+","+a[b*3+1].toFixed(4)+","+a[b*3+2].toFixed(4)+"]</font><br>";}}else{return a.toString();}}return c;}function makeLookAt(r,q,p,d,c,a,g,f,e){var s=$V([r,q,p]);var u=$V([d,c,a]);var l=$V([g,f,e]);var b;var h=s.subtract(u).toUnitVector();var k=l.cross(h).toUnitVector();var j=h.cross(k).toUnitVector();var o=$M([[k.e(1),k.e(2),k.e(3),0],[j.e(1),j.e(2),j.e(3),0],[h.e(1),h.e(2),h.e(3),0],[0,0,0,1]]);var n=$M([[1,0,0,-r],[0,1,0,-q],[0,0,1,-p],[0,0,0,1]]);return o.x(n);}function makeOrtho(b,h,a,g,j,f){var e=-(h+b)/(h-b);var d=-(g+a)/(g-a);var c=-(f+j)/(f-j);return $M([[2/(h-b),0,0,e],[0,2/(g-a),0,d],[0,0,-2/(f-j),c],[0,0,0,1]]);}function makePerspective(d,c,b,h){var a=b*Math.tan(d*Math.PI/360);var f=-a;var g=f*c;var e=a*c;return makeFrustum(g,e,f,a,b,h);}function makeFrustum(h,l,b,k,m,j){var g=2*m/(l-h);var e=2*m/(k-b);var f=(l+h)/(l-h);var d=(k+b)/(k-b);var c=-(j+m)/(j-m);var a=-2*j*m/(j-m);return $M([[g,0,f,0],[0,e,d,0],[0,0,c,a],[0,0,-1,0]]);}function makeOrtho(b,h,a,g,j,f){var e=-(h+b)/(h-b);var d=-(g+a)/(g-a);var c=-(f+j)/(f-j);return $M([[2/(h-b),0,0,e],[0,2/(g-a),0,d],[0,0,-2/(f-j),c],[0,0,0,1]]);}
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
;var swfobject=function(){var G="undefined",s="object",V="Shockwave Flash",Z="ShockwaveFlash.ShockwaveFlash",r="application/x-shockwave-flash",U="SWFObjectExprInst",A="onreadystatechange",R=window,k=document,u=navigator,W=false,X=[h],p=[],Q=[],L=[],m,T,H,E,M=false,a=false,o,J,n=true,P=function(){var ad=typeof k.getElementById!=G&&typeof k.getElementsByTagName!=G&&typeof k.createElement!=G,ak=u.userAgent.toLowerCase(),ab=u.platform.toLowerCase(),ah=ab?/win/.test(ab):/win/.test(ak),af=ab?/mac/.test(ab):/mac/.test(ak),ai=/webkit/.test(ak)?parseFloat(ak.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,aa=!+"\v1",aj=[0,0,0],ae=null;if(typeof u.plugins!=G&&typeof u.plugins[V]==s){ae=u.plugins[V].description;if(ae&&!(typeof u.mimeTypes!=G&&u.mimeTypes[r]&&!u.mimeTypes[r].enabledPlugin)){W=true;aa=false;ae=ae.replace(/^.*\s+(\S+\s+\S+$)/,"$1");aj[0]=parseInt(ae.replace(/^(.*)\..*$/,"$1"),10);aj[1]=parseInt(ae.replace(/^.*\.(.*)\s.*$/,"$1"),10);aj[2]=/[a-zA-Z]/.test(ae)?parseInt(ae.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof R.ActiveXObject!=G){try{var ag=new ActiveXObject(Z);if(ag){ae=ag.GetVariable("$version");if(ae){aa=true;ae=ae.split(" ")[1].split(",");aj=[parseInt(ae[0],10),parseInt(ae[1],10),parseInt(ae[2],10)];}}}catch(ac){}}}return{w3:ad,pv:aj,wk:ai,ie:aa,win:ah,mac:af};}(),l=function(){if(!P.w3){return;}if((typeof k.readyState!=G&&k.readyState=="complete")||(typeof k.readyState==G&&(k.getElementsByTagName("body")[0]||k.body))){f();}if(!M){if(typeof k.addEventListener!=G){k.addEventListener("DOMContentLoaded",f,false);}if(P.ie&&P.win){k.attachEvent(A,function(){if(k.readyState=="complete"){k.detachEvent(A,arguments.callee);f();}});if(R==top){(function(){if(M){return;}try{k.documentElement.doScroll("left");}catch(aa){setTimeout(arguments.callee,0);return;}f();})();}}if(P.wk){(function(){if(M){return;}if(!/loaded|complete/.test(k.readyState)){setTimeout(arguments.callee,0);return;}f();})();}t(f);}}();function f(){if(M){return;}try{var ac=k.getElementsByTagName("body")[0].appendChild(F("span"));ac.parentNode.removeChild(ac);}catch(ad){return;}M=true;var aa=X.length;for(var ab=0;ab<aa;ab++){X[ab]();}}function N(aa){if(M){aa();}else{X[X.length]=aa;}}function t(ab){if(typeof R.addEventListener!=G){R.addEventListener("load",ab,false);}else{if(typeof k.addEventListener!=G){k.addEventListener("load",ab,false);}else{if(typeof R.attachEvent!=G){j(R,"onload",ab);}else{if(typeof R.onload=="function"){var aa=R.onload;R.onload=function(){aa();ab();};}else{R.onload=ab;}}}}}function h(){if(W){Y();}else{K();}}function Y(){var aa=k.getElementsByTagName("body")[0];var ad=F(s);ad.setAttribute("type",r);var ac=aa.appendChild(ad);if(ac){var ab=0;(function(){if(typeof ac.GetVariable!=G){var ae=ac.GetVariable("$version");if(ae){ae=ae.split(" ")[1].split(",");P.pv=[parseInt(ae[0],10),parseInt(ae[1],10),parseInt(ae[2],10)];}}else{if(ab<10){ab++;setTimeout(arguments.callee,10);return;}}aa.removeChild(ad);ac=null;K();})();}else{K();}}function K(){var aj=p.length;if(aj>0){for(var ai=0;ai<aj;ai++){var ab=p[ai].id;var ae=p[ai].callbackFn;var ad={success:false,id:ab};if(P.pv[0]>0){var ah=c(ab);if(ah){if(I(p[ai].swfVersion)&&!(P.wk&&P.wk<312)){z(ab,true);if(ae){ad.success=true;ad.ref=C(ab);ae(ad);}}else{if(p[ai].expressInstall&&D()){var al={};al.data=p[ai].expressInstall;al.width=ah.getAttribute("width")||"0";al.height=ah.getAttribute("height")||"0";if(ah.getAttribute("class")){al.styleclass=ah.getAttribute("class");}if(ah.getAttribute("align")){al.align=ah.getAttribute("align");}var ak={};var aa=ah.getElementsByTagName("param");var af=aa.length;for(var ag=0;ag<af;ag++){if(aa[ag].getAttribute("name").toLowerCase()!="movie"){ak[aa[ag].getAttribute("name")]=aa[ag].getAttribute("value");}}S(al,ak,ab,ae);}else{q(ah);if(ae){ae(ad);}}}}}else{z(ab,true);if(ae){var ac=C(ab);if(ac&&typeof ac.SetVariable!=G){ad.success=true;ad.ref=ac;}ae(ad);}}}}}function C(ad){var aa=null;var ab=c(ad);if(ab&&ab.nodeName=="OBJECT"){if(typeof ab.SetVariable!=G){aa=ab;}else{var ac=ab.getElementsByTagName(s)[0];if(ac){aa=ac;}}}return aa;}function D(){return !a&&I("6.0.65")&&(P.win||P.mac)&&!(P.wk&&P.wk<312);}function S(ad,ae,aa,ac){a=true;H=ac||null;E={success:false,id:aa};var ah=c(aa);if(ah){if(ah.nodeName=="OBJECT"){m=g(ah);T=null;}else{m=ah;T=aa;}ad.id=U;if(typeof ad.width==G||(!/%$/.test(ad.width)&&parseInt(ad.width,10)<310)){ad.width="310";}if(typeof ad.height==G||(!/%$/.test(ad.height)&&parseInt(ad.height,10)<137)){ad.height="137";}k.title=k.title.slice(0,47)+" - Flash Player Installation";var ag=P.ie&&P.win?"ActiveX":"PlugIn",af="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+ag+"&MMdoctitle="+k.title;if(typeof ae.flashvars!=G){ae.flashvars+="&"+af;}else{ae.flashvars=af;}if(P.ie&&P.win&&ah.readyState!=4){var ab=F("div");aa+="SWFObjectNew";ab.setAttribute("id",aa);ah.parentNode.insertBefore(ab,ah);ah.style.display="none";(function(){if(ah.readyState==4){ah.parentNode.removeChild(ah);}else{setTimeout(arguments.callee,10);}})();}v(ad,ae,aa);}}function q(ab){if(P.ie&&P.win&&ab.readyState!=4){var aa=F("div");ab.parentNode.insertBefore(aa,ab);aa.parentNode.replaceChild(g(ab),aa);ab.style.display="none";(function(){if(ab.readyState==4){ab.parentNode.removeChild(ab);}else{setTimeout(arguments.callee,10);}})();}else{ab.parentNode.replaceChild(g(ab),ab);}}function g(af){var ae=F("div");if(P.win&&P.ie){ae.innerHTML=af.innerHTML;}else{var ab=af.getElementsByTagName(s)[0];if(ab){var ag=ab.childNodes;if(ag){var aa=ag.length;for(var ad=0;ad<aa;ad++){if(!(ag[ad].nodeType==1&&ag[ad].nodeName=="PARAM")&&!(ag[ad].nodeType==8)){ae.appendChild(ag[ad].cloneNode(true));}}}}}return ae;}function v(al,aj,ab){var aa,ad=c(ab);if(P.wk&&P.wk<312){return aa;}if(ad){if(typeof al.id==G){al.id=ab;}if(P.ie&&P.win){var ak="";for(var ah in al){if(al[ah]!=Object.prototype[ah]){if(ah.toLowerCase()=="data"){aj.movie=al[ah];}else{if(ah.toLowerCase()=="styleclass"){ak+=' class="'+al[ah]+'"';}else{if(ah.toLowerCase()!="classid"){ak+=" "+ah+'="'+al[ah]+'"';}}}}}var ai="";for(var ag in aj){if(aj[ag]!=Object.prototype[ag]){ai+='<param name="'+ag+'" value="'+aj[ag]+'" />';}}ad.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ak+">"+ai+"</object>";Q[Q.length]=al.id;aa=c(al.id);}else{var ac=F(s);ac.setAttribute("type",r);for(var af in al){if(al[af]!=Object.prototype[af]){if(af.toLowerCase()=="styleclass"){ac.setAttribute("class",al[af]);}else{if(af.toLowerCase()!="classid"){ac.setAttribute(af,al[af]);}}}}for(var ae in aj){if(aj[ae]!=Object.prototype[ae]&&ae.toLowerCase()!="movie"){e(ac,ae,aj[ae]);}}ad.parentNode.replaceChild(ac,ad);aa=ac;}}return aa;}function e(ac,aa,ab){var ad=F("param");ad.setAttribute("name",aa);ad.setAttribute("value",ab);ac.appendChild(ad);}function B(ab){var aa=c(ab);if(aa&&aa.nodeName=="OBJECT"){if(P.ie&&P.win){aa.style.display="none";(function(){if(aa.readyState==4){b(ab);}else{setTimeout(arguments.callee,10);}})();}else{aa.parentNode.removeChild(aa);}}}function b(ac){var ab=c(ac);if(ab){for(var aa in ab){if(typeof ab[aa]=="function"){ab[aa]=null;}}ab.parentNode.removeChild(ab);}}function c(ac){var aa=null;try{aa=k.getElementById(ac);}catch(ab){}return aa;}function F(aa){return k.createElement(aa);}function j(ac,aa,ab){ac.attachEvent(aa,ab);L[L.length]=[ac,aa,ab];}function I(ac){var ab=P.pv,aa=ac.split(".");aa[0]=parseInt(aa[0],10);aa[1]=parseInt(aa[1],10)||0;aa[2]=parseInt(aa[2],10)||0;return(ab[0]>aa[0]||(ab[0]==aa[0]&&ab[1]>aa[1])||(ab[0]==aa[0]&&ab[1]==aa[1]&&ab[2]>=aa[2]))?true:false;}function w(af,ab,ag,ae){if(P.ie&&P.mac){return;}var ad=k.getElementsByTagName("head")[0];if(!ad){return;}var aa=(ag&&typeof ag=="string")?ag:"screen";if(ae){o=null;J=null;}if(!o||J!=aa){var ac=F("style");ac.setAttribute("type","text/css");ac.setAttribute("media",aa);o=ad.appendChild(ac);if(P.ie&&P.win&&typeof k.styleSheets!=G&&k.styleSheets.length>0){o=k.styleSheets[k.styleSheets.length-1];}J=aa;}if(P.ie&&P.win){if(o&&typeof o.addRule==s){o.addRule(af,ab);}}else{if(o&&typeof k.createTextNode!=G){o.appendChild(k.createTextNode(af+" {"+ab+"}"));}}}function z(ac,aa){if(!n){return;}var ab=aa?"visible":"hidden";if(M&&c(ac)){c(ac).style.visibility=ab;}else{w("#"+ac,"visibility:"+ab);}}function O(ab){var ac=/[\\\"<>\.;]/;var aa=ac.exec(ab)!=null;return aa&&typeof encodeURIComponent!=G?encodeURIComponent(ab):ab;}var d=function(){if(P.ie&&P.win){window.attachEvent("onunload",function(){var af=L.length;for(var ae=0;ae<af;ae++){L[ae][0].detachEvent(L[ae][1],L[ae][2]);}var ac=Q.length;for(var ad=0;ad<ac;ad++){B(Q[ad]);}for(var ab in P){P[ab]=null;}P=null;for(var aa in swfobject){swfobject[aa]=null;}swfobject=null;});}}();return{registerObject:function(ae,aa,ad,ac){if(P.w3&&ae&&aa){var ab={};ab.id=ae;ab.swfVersion=aa;ab.expressInstall=ad;ab.callbackFn=ac;p[p.length]=ab;z(ae,false);}else{if(ac){ac({success:false,id:ae});}}},getObjectById:function(aa){if(P.w3){return C(aa);}},embedSWF:function(ae,ak,ah,aj,ab,ad,ac,ag,ai,af){var aa={success:false,id:ak};if(P.w3&&!(P.wk&&P.wk<312)&&ae&&ak&&ah&&aj&&ab){z(ak,false);N(function(){ah+="";aj+="";var am={};if(ai&&typeof ai===s){for(var ao in ai){am[ao]=ai[ao];}}am.data=ae;am.width=ah;am.height=aj;var ap={};if(ag&&typeof ag===s){for(var an in ag){ap[an]=ag[an];}}if(ac&&typeof ac===s){for(var al in ac){if(typeof ap.flashvars!=G){ap.flashvars+="&"+al+"="+ac[al];}else{ap.flashvars=al+"="+ac[al];}}}if(I(ab)){var aq=v(am,ap,ak);if(am.id==ak){z(ak,true);}aa.success=true;aa.ref=aq;}else{if(ad&&D()){am.data=ad;S(am,ap,ak,af);return;}else{z(ak,true);}}if(af){af(aa);}});}else{if(af){af(aa);}}},switchOffAutoHideShow:function(){n=false;},ua:P,getFlashPlayerVersion:function(){return{major:P.pv[0],minor:P.pv[1],release:P.pv[2]};},hasFlashPlayerVersion:I,createSWF:function(ac,ab,aa){if(P.w3){return v(ac,ab,aa);}else{return undefined;}},showExpressInstall:function(ac,ad,aa,ab){if(P.w3&&D()){S(ac,ad,aa,ab);}},removeSWF:function(aa){if(P.w3){B(aa);}},createCSS:function(ad,ac,ab,aa){if(P.w3){w(ad,ac,ab,aa);}},addDomLoadEvent:N,addLoadEvent:t,getQueryParamValue:function(ad){var ac=k.location.search||k.location.hash;if(ac){if(/\?/.test(ac)){ac=ac.split("?")[1];}if(ad==null){return O(ac);}var ab=ac.split("&");for(var aa=0;aa<ab.length;aa++){if(ab[aa].substring(0,ab[aa].indexOf("="))==ad){return O(ab[aa].substring((ab[aa].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(a){var aa=c(U);if(aa&&m){aa.parentNode.replaceChild(m,aa);if(T){z(T,true);if(P.ie&&P.win){m.style.display="block";}}if(H){H(E);}}a=false;}}};}();(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"];}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f);},f);b=d+f;return g;};}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d);};}}());var Recording=function(c){this.isPreloaded=false;this.thumbs=new Array(6);this.thumbsLoaded=0;var d=c[0];var g=c[1];var b=c[2];var j=c[3];var a=c[5];var f=CCLMD.utils.geogToWebMercator(b,g);f.elements.push(j);this.id=d;this.position=Vector.create([b,g,j]);this.projectedPosition=f;this.recorderDirection=(a===CCLMD.SOURCE_CYCLOMEDIA?1:-1)*c[4]*CCLMD.DEG_TO_RAD;this.groundLevelOffset=(a===CCLMD.SOURCE_CYCLOMEDIA)?c[6]:3;this.source=a;this.forwardTarget=false;this.backwardTarget=false;var e=Math.floor((180+b)/0.01);var h=Math.floor((90-g)/0.01);Recording.prototype.getTileURL=function(l,n,k,m){return CCLMD.getPath()+h+"/"+e+"/"+d+"_"+CCLMD.utils.getLevelFromIndex(n)+"_"+CCLMD.utils.getFaceFromIndex(l)+"_"+(k+1)+"_"+(m+1)+".jpg";};};function RecordingPreloader(){var b=0;var c=[];var d={};var a={};this.isPending=function(e){return c.indexOf(e)>=0;};this.isLoading=function(e){var f=e.id;return !!d[f];};this.clearPending=function(){c.length=0;b=0;};this.add=function(e){var f=e.id;var g=a[f];if(g){e.thumbs=g.thumbs;e.isPreloaded=true;}else{if(!this.isPending(e)&&!this.isLoading(e)){c.push(e);}}};}function RecordingManager(j,r){var l=0.03;var u=j;this.events=r;var d=[];var c=false;var b=[];var g={};var h=0;var e=this;var k=-1;var n=-1;var p=null;var m=new RecordingPreloader();this.column=-1;this.row=-1;function t(w){if(b.length>0){for(var v=0;v<b.length;++v){o(b[v],w);}c=true;}else{w(true);}}function o(w,z){var v=w.url;h++;g[v]=$.ajax({url:v,dataType:"json",crossDomain:true,success:function(A){q(v,A);w.success=true;p&=true;e.events.trigger("position-fetched");},error:function(A){w.success=false;p&=false;e.events.trigger("streetview-error","error.no-position-found");}}).done(function(){h--;delete g[v];if(h===0){c=false;z(!!p);}});}function a(){if(c){for(var v in g){var w=g[v];w.abort();delete g[v];}c=false;}h=0;b=[];}function q(v,z){var A=z.points;var B=[];for(var w=0;w<A.length;++w){B[w]=new Recording(A[w]);}d[v]=B;}this.clearAreas=function(){d=[];};this.setPosition=function(v,D,A){var F=function(G){A(v,D,G);};a();var B=f(v,D);var w=d;this.clearAreas();for(var z=0;z<B.length;++z){var C=B[z];var E=s(C.column,C.row);if(w[E]){d[E]=w[E];}else{b.push({column:C.column,row:C.row,url:E});}}t(F);e.column=Math.floor((180+v)/0.01);e.row=Math.floor((90-D)/0.01);};this.getTileURL=function(v,z,B,w,A){return CCLMD.getPath()+this.row+"/"+this.column+"/"+v+"_"+CCLMD.utils.getLevelFromIndex(B)+"_"+CCLMD.utils.getFaceFromIndex(z)+"_"+(w+1)+"_"+(A+1)+".jpg";};function s(v,w){return u+w+"/"+v;}function f(w,D){var z=(180+w)/0.01;var F=(90-D)/0.01;var A=Math.floor(z);var H=Math.floor(F);var B=A>0&&(z-A)<l;var v=A<35999&&(A+1-z)<l;var G=H>0&&(F-H)<l;var E=H<17999&&(H+1-F)<l;var C=[{column:A,row:H}];if(B){C.push({column:A-1,row:H});}if(v){C.push({column:A+1,row:H});}if(G){C.push({column:A,row:H-1});}if(E){C.push({column:A,row:H+1});}if(B&&G){C.push({column:A-1,row:H-1});}if(v&&G){C.push({column:A+1,row:H-1});}if(B&&E){C.push({column:A-1,row:H+1});}if(v&&E){C.push({column:A+1,row:H+1});}k=A;n=H;p=true;return C;}this.getNearest=function(v,C){var z=null;var F=10000;var E=Vector.create([v,C]);for(var w in d){if(d.hasOwnProperty(w)){var D=d[w];for(var A=0;A<D.length;++A){var B=E.squaredDistanceFrom(D[A].position);if(B<F){F=B;z=D[A];}}}}return z;};this.getWithinRadius=function(D,C,z){var E=CCLMD.utils.geogToWebMercator(D,C);var v=[];z*=z;for(var B in d){if(d.hasOwnProperty(B)){var A=d[B];for(var w=0;w<A.length;++w){if(E.squaredDistanceFrom(A[w].projectedPosition)<=z){v.push(A[w]);}}}}return v;};this.startPreloading=function(v,z){z=z||1;m.clearPending();for(var w=0;w<v.length;++w){if(w===z){break;}m.add(v[w]);}};this.onpreload=function(v,w){};}function TileManager(n,e,a,A){var r=this;var z=n;var k=e;var h=a;var m=A;var o=CCLMD.ZOOM_RESOLUTIONS;var v=CCLMD.ZOOM_TILE_DIMENSIONALITIES;var s=[];var q=[];var p=[];var b=o.length-1;var t=new C(v[v.length-1]);var B=[];var l=CCLMD.utils.clipSutherlandHodgman;var g=false;c();function c(){var I=Math.atan(2*Math.tan(Math.PI*0.25)/o[0]);for(var H=0;H<b;++H){var G=I;I=Math.atan(2*Math.tan(Math.PI*0.25)/o[H+1]);p[H]=(I+G)*0.5;}var E=t.level;var J=E*E;for(var H=0;H<6;++H){B[H]=u(E,H,0,0);s[H]=[];q[H]=[];for(var F=0;F<J;++F){s[H][F]=new j();}for(var F=0;F<o.length;++F){q[H][F]=new w(v[F]*v[F]);}}}function u(F,G,K,J){var I=new Array(5);var H=t.level+1;var M=H*H;var L=M*G;var E;E=L+F*(J*H+K);I[0]=t.vertices[E];E+=F;I[1]=t.vertices[E];E+=F*H;I[2]=t.vertices[E];E-=F;I[3]=t.vertices[E];I[4]=I[0];return I;}function j(){this.currentZoom=-1;this.loadingZoom=-1;this.failed=false;}function w(E){this.max=E;this.now=0;}function D(J,H,G,F,I,E){this.id=J;this.face=H;this.zoom=G;this.column=F;this.row=I;this.url=E;this.img=null;}this.preloadRecording=function(F,I){if(F.isPreloaded){return;}for(var H=0;H<6;++H){if(F.thumbs[H]){continue;}var E=F.getTileURL(H,0,0,0);var G=new D(F.id,H,0,0,0,E);G.onLoadEnd=function(J){if(J.img!==null){F.thumbs[J.face]=J.img;F.thumbsLoaded++;if(F.thumbsLoaded===6){F.isPreloaded=true;if(I){I();}}}};k.add(G);}};this.load=function(){g=true;};this.update=function(){if(g===false||!h.canLoadTiles()){return;}var ac=z.width;var K=z.height;var N=v[v.length-1];var X=o.length-1;var I=k.getPending();for(var af=0;af<6;++af){var H=q[af][X];if(H.max===H.now){continue;}var F=l(B[af],z.projectionMatrix,ac,K);if(F.length===0){continue;}var T=0;var S=0;var ai=F.length;for(var ad=0;ad<ai;++ad){T+=F[ad].elements[0];S+=F[ad].elements[1];}T/=ai;S/=ai;var ag=z.focalLength;var L=Math.abs(Math.atan((T+0.5-ac*0.5)/ag)-Math.atan((T-0.5-ac*0.5)/ag));var W=Math.abs(Math.atan((S+0.5-K*0.5)/ag)-Math.atan((S-0.5-K*0.5)/ag));var V=Math.min(L,W);var G=0;if(V<p[p.length-1]){G=X;}else{for(var ad=0;ad<p.length;++ad){if(V>p[ad]){G=ad;break;}}}H=q[af][G];if(H.max===H.now){continue;}var Y=s[af];var E=v[G];var O=N/E;var Q=0;for(var P=0;P<E;++P){for(var J=0;J<E;++J,Q+=O){var U=X;var ae;for(var aa=0;aa<O;++aa){ae=(O*P+aa)*N+O*J;for(var ab=0;ab<O;++ab,++ae){if(Y[ae].loadingZoom<U){U=Y[ae].loadingZoom;}}}if(G>U&&l(u(O,af,J,P),z.projectionMatrix,ac,K).length>0){var ah=m.getImageId();var M=h.getTileURL(ah,af,G,J,P);var aj=new D(ah,af,G,J,P,M);aj.onLoadStart=d;aj.onLoadEnd=f;k.add(aj);for(var Z=0;Z<O;++Z){ae=(O*P+Z)*N+O*J;for(var R=0;R<O;++R,++ae){Y[ae].loadingZoom=G;}}H.now++;}}}}if(k.getPending()>I){r.onviewloadstart();}};var d=function(E){r.ontileloadstart(E);};var f=function(K,N){var L=K.face;var O=K.zoom;var F=K.column;var P=K.row;var M=s[L];var I=v[v.length-1];var H=I/v[O];var J=P*H*I+F*H;for(var E=0;E<H;++E){J=(P*H+E)*I+F*H;for(var G=0;G<H;++G,++J){M[J].currentZoom=O;M[J].failed=!N;}}r.ontileloadend(K,N);if(k.getConcurrent()===0&&k.getPending()===0){r.onviewloadend();}};this.resetLoad=function(){for(var G=0;G<6;++G){var E=s[G];for(var F=0;F<E.length;++F){var H=E[F];H.currentZoom=-1;H.loadingZoom=-1;H.failed=false;}for(var I=0;I<o.length;++I){q[G][I].max=v[I]*v[I];q[G][I].now=0;}}g=false;k.clearPending();};this.onviewloadstart;this.onviewloadend;this.ontileloadstart;this.ontileloadend;function C(N){var E=N;var O=E+1;var I=[];var F=2/E;var H,G;var M,L,K;var J=0;K=1;for(G=0;G<O;++G){L=1;for(H=0;H<O;++H){I.push(Vector.create([1,L,K]));L-=F;}K-=F;}K=1;for(G=0;G<O;++G){L=-1;for(H=0;H<O;++H){I.push(Vector.create([-1,L,K]));L+=F;}K-=F;}L=-1;for(G=0;G<O;++G){M=-1;for(H=0;H<O;++H){I.push(Vector.create([M,L,1]));M+=F;}L+=F;}L=1;for(G=0;G<O;++G){M=-1;for(H=0;H<O;++H){I.push(Vector.create([M,L,-1]));M+=F;}L-=F;}K=1;for(G=0;G<O;++G){M=1;for(H=0;H<O;++H){I.push(Vector.create([M,-1,K]));M-=F;}K-=F;}K=1;for(G=0;G<O;++G){M=-1;for(H=0;H<O;++H){I.push(Vector.create([M,1,K]));M+=F;}K-=F;}for(H=0,J=I.length;H<J;++H){I[H]=I[H].multiply(2);}this.level=E;this.vertices=I;}}function TileLoader(h,a){var c=6;var k=0;var b=[];var e={};var g=window.setInterval(function(){l();},1000/30);var l=function(){while(b.length&&k<c){j();}};var j=function(){++k;var o=b.shift();var n=o.url;e[n]=o;var m=new Image();m.crossOrigin="anonymous";m.src=o.url;m.onload=function(){f(o,m,true);};m.onerror=function(){f(o,m,false);};d(o);return m;};var d=function(m){if(m.onLoadStart){m.onLoadStart(m);}};var f=function(o,m,p){--k;var n=o.url;delete e[n];if(p){o.img=m;if(o.id===a.getImageId()){h.drawTile(o.face,o.zoom,o.column,o.row,m);}}if(o.onLoadEnd){o.onLoadEnd(o,p);}};this.getPending=function(){return b.length;};this.clearPending=function(){b.length=0;};this.add=function(m){b.push(m);};this.getConcurrent=function(){return k;};}function Camera(){var b=this;var c=Matrix.create([[1,0,0],[0,0,-1],[0,-1,0]]);var a=null;this.focalLength=0;this.yaw=0;this.pitch=0;this.hFov=Math.PI/2;this.width=0;this.height=0;this.position=Vector.create([0,0,0]);this.extrinsicMatrix=Matrix.I(3);this.intrinsicMatrix=c;this.projectionMatrix=Matrix.I(3);this.update=function(e,g,j,k,d){var h=e/(2*Math.tan(d*0.5));b.focalLength=h;b.width=e;b.height=g;b.yaw=j;b.pitch=k;b.hFov=d;a=Matrix.create([[-h,0,e*0.5],[0,-h,g*0.5],[0,0,1]]);b.intrinsicMatrix=a.multiply(c);b.extrinsicMatrix=Matrix.RotationX(-k).multiply(Matrix.RotationZ(j));b.projectionMatrix=b.intrinsicMatrix.multiply(b.extrinsicMatrix);};}function MarkerShape(e){var d=40;var b=Matrix.Zero(3,d);a();function a(){var g=(Math.PI*2)/d;for(var f=0;f<d;++f){b.elements[0][f]=Math.sin(g*f)*e;b.elements[1][f]=Math.cos(g*f)*e;}}this.getPoints=function c(){return b;};}function ArrowShape(d){var c;a();function a(){var e=Vector.create([0,0,0]);c=[e.add(Vector.create([0,1,0]).multiply(d)),e.add(Vector.create([0.3,0.2,0]).multiply(d)),e.add(Vector.create([0.1,0.2,0]).multiply(d)),e.add(Vector.create([0.13,-1,0]).multiply(d)),e.add(Vector.create([-0.13,-1,0]).multiply(d)),e.add(Vector.create([-0.1,0.2,0]).multiply(d)),e.add(Vector.create([-0.3,0.2,0]).multiply(d))];}this.getPoints=function b(){return c;};}function ShapeDrawer(k,e,B){k.onselectstart=function(){return false;};var f=k.getContext("2d");var o=this;var C=CCLMD.RECORDING_RADIUS;var j=new MarkerShape(C);var n=j.getPoints();var r=n.dimensions();var z=r.cols;var A=[];var b=null;var g=[];var v=0;var s=0;var h=true;k.addEventListener("mousemove",m,false);k.addEventListener("mousedown",c,false);k.addEventListener("mouseup",u,false);k.addEventListener("touchstart",q,false);k.addEventListener("touchend",p,false);function m(E){v=E.pageX;s=E.pageY;d(v,s);}var a=false;function q(G){G.preventDefault();if(G.touches.length===1){v=G.touches[0].pageX;s=G.touches[0].pageY;d(v,s);l=null;var F=A.length;for(var E=0;E<F;++E){if(g[E].highlight){l=A[E];}}a=true;}}function p(G){if(a&&l){var F=A.length;for(var E=0;E<F;++E){if(g[E].highlight&&l==A[E]){if(o.onmarkerclick){o.onmarkerclick(A[E]);break;}}}}a=false;}function d(H,G){var J=CCLMD.utils.getPagePosition(k);var E=H-J.x;var L=G-J.y;var I=A.length;var K=false;for(var F=0;F<I;++F){if(g[F].visible&&!g[F].highlight&&D(g[F].vertices,E,L)){g[F].highlight=true;k.style.cursor="pointer";K=true;}else{if(g[F].highlight&&!D(g[F].vertices,E,L)){g[F].highlight=false;k.style.cursor="move";K=true;}}}if(K){w(k.width,k.height);}}var l;function c(G){l=null;var F=A.length;for(var E=0;E<F;++E){if(g[E].highlight){l=A[E];}}}function u(G){if(l){var F=A.length;for(var E=0;E<F;++E){if(g[E].highlight&&l==A[E]){if(o.onmarkerclick){o.onmarkerclick(A[E]);break;}}}}}this.onmarkerclick;this.setRecordings=function(I,J){A=I;b=J;g=[];var G=A.length;for(var F=0;F<G;++F){g.push({vertices:null,visible:false,highlight:false});}if(b&&b.isPreloaded){var E=b.thumbs;for(var H=0;H<6;++H){e.drawTile(H,0,0,0,E[H]);}}w(k.width,k.height);d(v,s);};this.getRecording=function(F,E){var H=A.length;for(var G=0;G<H;++G){if(g[G].visible&&D(g[G].vertices,F,E)){return A[G];}}return null;};function D(I,O,L){var J=0;var N=I.dimensions();npol=N.cols;for(var F=0,E=npol-1;F<npol;E=F++){var H=I.elements[0][F];var M=I.elements[1][F];var G=I.elements[0][E];var K=I.elements[1][E];if((((M<=L)&&(L<K))||((K<=L)&&(L<M)))&&(O<(G-H)*(L-M)/(K-M)+H)){J=!J;}}return J;}function t(E){f.clearRect(0,0,E.width,E.height);}function w(Q,O){k.height=O;k.width=Q;t(k);var S=B.projectionMatrix;var J=B.position;var I=A.length;if(I===0){return;}var R=b.source;for(var H=0;H<I;++H){var F=A[H];var N=F.projectedPosition.subtract(J);var P=S.multiply(N);var E=P.elements;var V=g[H];if(E[2]>-1){V.visible=false;}else{E=N.elements;if(R===F.source&&R===CCLMD.SOURCE_CYCLOMEDIA){E[2]-=F.groundLevelOffset;}else{if(R===CCLMD.SOURCE_CYCLOMEDIA){E[2]=-2;}else{E[2]=-1.25;}}E[2]*=2;if(F.forwardTarget&&V.highlight){f.fillStyle="rgba(255,184,42,0.7)";}else{if(F.forwardTarget){f.fillStyle="rgba(251,169,28,0.7)";}else{if(V.highlight){f.fillStyle="rgba(86,135,240,0.7)";}else{if(E[2]>0||E[2]<-10){f.fillStyle="rgba(56,105,210,0.2)";}else{f.fillStyle="rgba(56,105,210,0.7)";f.shadowColor="rgba(0,0,0,0.5)";f.shadowBlur=20;f.shadowOffsetX=0;f.shadowOffsetY=10;}}}}f.beginPath();f.lineJoin="round";f.lineWidth=0;f.strokeStyle="transparent";var L=false;var G=S.multiply(N);var M=S.multiply(n);for(var T=0;T<z;++T){for(var U=0;U<3;++U){M.elements[U][T]+=G.elements[U];}}for(var T=0;T<z;++T){var W=M.elements[2][T];if(W>-1){L=true;break;}}if(!L){V.visible=true;V.vertices=[];for(var K=0;K<z;++K){M.elements[0][K]/=M.elements[2][K];M.elements[1][K]/=M.elements[2][K];M.elements[2][K]=1;x=M.elements[0][K];y=M.elements[1][K];f[K===0?"moveTo":"lineTo"](x,y);}V.vertices=M;f.closePath();f.fill();f.stroke();}else{V.visible=false;}}}}this.draw=w;this.setVisibility=function(E){if(h===E){return;}h=E;if(h){w(k.width,k.height);}else{t(k);}};this.clear=function(){g=[];A=[];b=null;};}var CCLMD=(function(){var c={},j={},m=Math.PI/180,f=80,b=160,o=320,l=640,k=1280,h=1,g=1,e=1,a=1,d=2;var n="./";return{CLEAR_COLOR:14540253,DEG_TO_RAD:m,FOV_DEF:120*m,FOV_MAX:150*m,FOV_MIN:30*m,PITCH_DEF:12*m,RECORDING_RADIUS:2,RECORDING_VIEW_RADIUS:50,SOURCE_CYCLOMEDIA:1,SOURCE_MAP_JACK:2,VIEWER_TYPE_2D:"2d",VIEWER_TYPE_CSS3:"css3",VIEWER_TYPE_FLASH:"flash",VIEWER_TYPE_UNDEFINED:"undefined",VIEWER_TYPE_WEBGL:"webgl",ZOOM_RESOLUTIONS:[f,b,o,l,k],ZOOM_TILE_DIMENSIONALITIES:[h,g,e,a,d],getPath:function(){return n;},setPath:function(p){if(p.charAt(p.length-1)!=="/"){p+="/";}n=p;},createPanoramaViewer:function(r,p){var q=new PanoramaViewer(r,p?p:{});c[r]=q;return q;},destroyPanoramaViewer:function(q){var p=c[q];if(p!=undefined){p.destroy();delete c[q];}},flash:{REQUIRED_FLASH_VERSION:"10.0.0",getFlashViewerId:(function(){var p=0;return function(){return"flashViewer"+p++;};}()),registerFlashViewer:function(p,q){j[p]=q;},onAPIReady:function(p){j[p].onAPIReady();},onViewLoadStart:function(p){j[p].onViewLoadStart();},onViewLoadEnd:function(p){j[p].onViewLoadEnd();},onViewChanged:function(p,s,r,q){j[p].onViewChanged(s,r,q);},onTileLoadStart:function(p,q){j[p].onTileLoadStart(q);},onTileLoadEnd:function(p,q,r){j[p].onTileLoadEnd(q,r);},onRecordingClicked:function(p,q){j[p].onRecordingClicked(q);},getTileURL:function(p,q,s,u,r,t){return j[p].getTileURL(q,s,u,r,t);},saveSnapshot:function(p){j[p].saveSnapshot();}},utils:{clipSutherlandHodgman:(function(){var r;var q=[];var t=[];function s(G,J,D,B,u){u=u||0;t.length=0;for(var w=0;w<G.length-1;++w){t[w]=J.multiply(G[w]);}var K;var I=t.length;q.length=0;var v=t[I-1];var A,z;var L,C;for(K=0;K<I;++K){A=t[K];z=A.elements;L=z[2];C=v.elements[2];if(L<=-1){if(C>-1){q.push(p(v,A));}q.push(Vector.create([z[0]/L,z[1]/L,L]));}else{if(C<=-1){q.push(p(v,A));}}v=A;}I=q.length;if(I===0){return q;}t.length=0;r=t;t=q;q=r;var P;var N;var O,H;var M,F;v=t[I-1];for(K=0;K<I;++K){A=t[K];O=A.elements[0];H=v.elements[0];M=A.elements[1];F=v.elements[1];if(O<D){if(H>=D){P=H-O;N=F-M;q.push(Vector.create([D+u,M+N*(((D+u)-O)/P)]));}q.push(A);}else{if(H<D){P=O-H;N=M-F;q.push(Vector.create([D+u,F+N*(((D+u)-H)/P)]));}}v=A;}I=q.length;if(I===0){return q;}t.length=0;r=t;t=q;q=r;v=t[I-1];for(K=0;K<I;++K){A=t[K];O=A.elements[0];H=v.elements[0];M=A.elements[1];F=v.elements[1];if(O>=0){if(H<0){P=H-O;N=F-M;q.push(Vector.create([0-u,M+N*(((0-u)-O)/P)]));}q.push(A);}else{if(H>0){P=O-H;N=M-F;q.push(Vector.create([0-u,F+N*(((0-u)-H)/P)]));}}v=A;}I=q.length;if(I===0){return q;}t.length=0;r=t;t=q;q=r;v=t[I-1];for(K=0;K<I;++K){A=t[K];O=A.elements[0];H=v.elements[0];M=A.elements[1];F=v.elements[1];if(M<B){if(F>=B){P=H-O;N=F-M;q.push(Vector.create([O+P*(((B+u)-M)/N),B+u]));}q.push(A);}else{if(F<B){P=O-H;N=M-F;q.push(Vector.create([H+P*(((B+u)-F)/N),B+u]));}}v=A;}I=q.length;if(I===0){return q;}t.length=0;r=t;t=q;q=r;v=t[I-1];for(K=0;K<I;++K){A=t[K];O=A.elements[0];H=v.elements[0];M=A.elements[1];F=v.elements[1];if(M>=0){if(F<0){P=H-O;N=F-M;q.push(Vector.create([O+P*(((0-u)-M)/N),0-u]));}q.push(A);}else{if(F>=0){P=O-H;N=M-F;q.push(Vector.create([H+P*(((0-u)-F)/N),0-u]));}}v=A;}return q;}function p(u,z){var w=u.subtract(z);w=w.multiply((1-u.elements[2])/w.elements[2]);return u.add(w);}return s;}()),getPagePosition:function(q){var r=0;var p=0;if(q.offsetParent){do{r+=q.offsetLeft;p+=q.offsetTop;}while(q=q.offsetParent);return{x:r,y:p};}return undefined;},isMobileDevice:function(){var p=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(p)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte|android|ipad|playbook|silk\-/i.test(p.substr(0,4))){return true;}return false;},geogToWebMercator:function(v,u){var r=Math.PI/180;v*=r;u*=r;var s=Math.sin(u);var q=6378137;var t=Vector.create([q*v,q*0.5*Math.log((1+s)/(1-s))]);return t;},greatCirclesDistance:function(E,r,t,z,B){B=B===undefined||B;if(B){var s=CCLMD.DEG_TO_RAD;E*=s;r*=s;t*=s;z*=s;}var A=Math.abs(t-E);var p=Math.abs(z-r);var v=Math.sin(A/2);var D=Math.sin(p/2);var q=Math.cos(E);var w=Math.cos(t);var C=2*Math.asin(Math.sqrt(v*v+q*w*D*D));var u=6371009;return u*C;},parseQueryString:function(){var q=window.location.search;var p={};q.replace(/([^?=&]+)(=([^&]*))?/g,function(s,r,u,t){p[r]=t;});return p;},getLevelFromIndex:function(p){return"12345"[p];},getFaceFromIndex:function(p){return"RLTUBF"[p];}}};}());function PanoramaViewer(M,ah){var aD=CCLMD.DEG_TO_RAD;var ag=512;var m=384;var o=Math.PI*0.5;var c=-26.5*aD;var n=41.5*aD;var a=-20.5*aD;var aO=70*aD;var aA=30*aD;var aM=62*aD;var az=aA;var T=this;var aV=["","Webkit","Moz","O","ms","Ms"];var ak;var L=["","-webkit-","-moz-","-o-","-ms-","-ms-"];var e;var j=["","webkit","moz","o","ms","ms"];a3();var aE=document.getElementById(M);var ad=null;var X=CCLMD.VIEWER_TYPE_UNDEFINED;if(aE===null){alert('Component with id "'+M+'" does not exist.');return;}var F=$("#"+M);this.contentWrapper={};this.getContentWrapper=function(){return this.contentWrapper;};this.setContentWrapper=function(a5){this.contentWrapper=a5;};var al=CCLMD.utils.parseQueryString();var aC=CCLMD.utils.getPagePosition;var aP=v();var z=a4();var aT=0;var P=CCLMD.PITCH_DEF;var a0=CCLMD.FOV_DEF;var ap=o;var ay=c;var Y=aO;var am=aA;var aR=new Camera();var r=false;var aW=-1;this.continueViewerSetup=function(a5){this.contentWrapper=document.createElement("div");this.contentWrapper.setAttribute("style","position: relative; width: 100%; height: 100%; "+e+"user-select: none;");this.contentWrapper.appendChild(a5.domElement);aE.appendChild(this.contentWrapper);};var aI=this;F.on("viewerLoaded",function(a6,a5){aI.continueViewerSetup(a5);});var B=al.forcetype||ah.forcetype||false;if(B==="webgl"||(!B&&aF())){ad=new WebGLViewer(aP,z,e,F);X=CCLMD.VIEWER_TYPE_WEBGL;}else{if(B==="css3"||(!B&&aw()&&CCLMD.utils.isMobileDevice())){ad=new CSS3Viewer(aP,z,e,ak,F);X=CCLMD.VIEWER_TYPE_CSS3;}else{if(!a1()&&B==="flash"){F.html('<div><h1 style="text-align: center;"><a href="http://get.adobe.com/flashplayer/">Installera flashplayer!</a></h1></div>');throw {message:"flash.not.installed"};}else{if(B==="flash"||(!B&&a1())){ad=new FlashViewer(aP,z,al.forcereloadflash,F);X=CCLMD.VIEWER_TYPE_FLASH;}else{if(B==="canvas"||(!B&&aK())){ad=new Canvas2DViewer(aP,z,null,F);X=CCLMD.VIEWER_TYPE_2D;}else{F.html('<div><h1 style="text-align: center;"><a href="http://get.adobe.com/flashplayer/">Installera flashplayer!</a></h1></div>');throw {message:"render.not.found"};}}}}}ad.requestAnimationFrame=G;this.getViewerType=function(){return X;};this.getEvents=function(){return F;};function N(){return(navigator.userAgent.indexOf("Windows")!==-1);}var aa=(function(){var a7=J(document,"fullScreenElement");var a5;switch(a7){case"":a5={requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenElement:"fullscreenElement",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"};break;case"moz":a5={requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenElement:"mozFullScreenElement",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"};break;case"webkit":a5={requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitCancelFullScreen",fullscreenElement:"webkitFullScreenElement",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"};break;}var a6;if(a5!=null){a6={requestFullscreen:function(a8){a8[a5.requestFullscreen]();},exitFullscreen:document[a5.exitFullscreen],isFullscreen:function(){return document[a5.fullscreenElement]!=null;},fullscreenElement:document[a5.fullscreenElement],onfullscreenchange:function(a8){},onfullscreenerror:function(a8){}};$(document).on(a5.fullscreenchange,function(a8){a6.fullscreenElement=document[a5.fullscreenElement];a6.onfullscreenchange.call(a6,a8);});$(document).on(a5.fullscreenerror,function(a8){a6.onfullscreenerror.call(a6,a8);});}return a6;}());if(aa){aa.onfullscreenchange=function(a5){aP=v();z=a4();G();};w([[":"+e+"full-screen #contentWrapper",["width","100%"],["height","100%"]]]);}var aU;var h;var A;var E=false;if(ad.isPluginBased()){ad.onViewLoadStart=aG;ad.onViewLoadEnd=aN;ad.onViewChanged=aY;ad.onTileLoadStart=u;ad.onTileLoadEnd=aL;ad.getTileURL=I;ad.setMaxHFov(CCLMD.FOV_MAX);ad.setMinHFov(CCLMD.FOV_MIN);ad.setCameraBounds(ay,ap,am,Y);ad.onmarkerclick=function(a5){if(a5){aU.setPosition(a5.position.elements[0],a5.position.elements[1],function(){return aQ.apply(this,arguments);});}};A=ad;h=ad;h.preloadRecording=function(){};}else{ad.saveSnapshot=function(){alert("Not available");};var R=document.createElement("canvas");R.setAttribute("style","position:absolute;left:0px;top:0px;cursor:move;"+e+"user-select: none;");A=new ShapeDrawer(R,ad,aR);A.onmarkerclick=function(a5){if(a5){aU.setPosition(a5.position.elements[0],a5.position.elements[1],function(){return aQ.apply(this,arguments);});}};h=new TileManager(aR,new TileLoader(ad,this),{getTileURL:I,canLoadTiles:function(){return t!=null;}},this);h.onviewloadstart=aG;h.onviewloadend=aN;h.ontileloadstart=u;h.ontileloadend=aL;Z();T.contentWrapper.appendChild(R);}aU=new RecordingManager(CCLMD.getPath(),this.getEvents());aU.onpreload=h.preloadRecording;$(window).on("resize",Q);var t;var an=null;var U=[];var p=null;var f=null;var l=false;var S=false;this.getYaw=function(){return aT;};this.setYaw=function(a5){aT=a5;G();};this.getPitch=function(){return P;};this.setPitch=function(a5){P=a5;G();};this.getHFov=ad.getHFov;this.setHFov=function(a5){a0=a5;G();};this.getVFov=function(){return Math.atan(Math.tan(a0*0.5)*z/aP)*2;};this.setVFov=function(a5){a0=Math.atan(Math.tan(a5*0.5)*aP/z)*2;G();};this.openNearestImage=function(a6,a5){T.getEvents().trigger("openneareststart");aU.setPosition(a6,a5,function(){return b.apply(T,arguments);});};function b(a8,a6,a7){var a5=aU.getNearest(a8,a6);if(a5){aU.setPosition(a5.position.elements[0],a5.position.elements[1],aQ.bind(this));}else{aQ(a8,a6,a7);}}function aQ(a5,bd,bf){h.resetLoad();var a7;if(bf){a7=aU.getNearest(a5,bd);}else{h.load();if(ad.isPluginBased()){A.setRecordings(U,an);}}if(a7){ad.clear();an=a7;t=an.id;h.load();aR.position=an.projectedPosition;if(an.source===CCLMD.SOURCE_CYCLOMEDIA){ap=o;ay=c;Y=aO;am=aA;}else{ap=n;ay=a;Y=aM;am=az;}if(ad.isPluginBased()){ad.setCameraBounds(ay,ap,am,Y);}U=aU.getWithinRadius(a5,bd,CCLMD.RECORDING_VIEW_RADIUS);for(var a9=U.length;a9>=0;--a9){if(U[a9]===an){U.splice(a9,1);}}var bc=U.length;for(var a9=0;a9<bc;++a9){var a6=U[a9];var be=a6.projectedPosition.subtract(an.projectedPosition);be.elements[2]=0;var a8=be.angleFrom([0,1,0]);if(be.elements[0]<0){a8=2*Math.PI-a8;}var bi=a6.projectedPosition.elements[0]-an.projectedPosition.elements[0];var bg=a6.projectedPosition.elements[1]-an.projectedPosition.elements[1];var bb=Math.sqrt(bi*bi+bg*bg);a6.relativePosition=be;a6.relativeYaw=a8;a6.relativeDistance=bb;}aS();var bh=function(bk,bj){return bj.scoreForward===bk.scoreForward?0:(bj.scoreForward<bk.scoreForward?-1:1);};U.sort(bh);aU.startPreloading(U);A.setRecordings(U,an);}else{var ba=false;if(ba){an=null;t=null;A.setRecordings([],null);}}G();T.getEvents().trigger("opennearestend");}this.getRecording=function(){return an;};this.getImageId=function(){return t;};var k=true;this.getVisibilityRecordings=function(){return k;};this.setVisibilityRecordings=function(a5){if(a5!==k){k=a5;A.setVisibility(a5);}};this.saveSnapshot=function(){ad.saveSnapshot();};this.deviceOrientationAvailable=function(){return window.DeviceOrientationEvent!=undefined;};this.deviceMotionAvailable=function(){return window.DeviceMotionEvent!==undefined;};this.fullScreenAvailable=function(){return aa!=null;};this.getFullScreen=function(){return this.fullScreenAvailable()&&aa.isFullscreen();};this.toggleFullScreen=function(){if(this.fullScreenAvailable()){if(aa.isFullscreen()){aa.exitFullscreen();}else{aa.requestFullscreen(T.contentWrapper);}}};this.getUseDeviceOrientation=function(){return l;};this.getUseDeviceMotion=function(){return S;};this.setUseDeviceOrientation=function(a5){l=a5;};this.setUseDeviceMotion=function(a5){S=a5;};this.invalidateSize=q;function aG(){T.getEvents().trigger("viewloadstart");}function aN(){T.getEvents().trigger("viewloadend");}function aY(a7,a8,a5){var a6=(aT!==a7)||(P!==a8)||(a0!==a5);aT=a7;P=a8;a0=a5;if(a6){G();}T.getEvents().trigger("viewchanged",[aT,P,a0]);}function u(a5){T.getEvents().trigger("tileloadstart",a5);}function aL(a5,a6){T.getEvents().trigger("tileloadend",[a5,a6]);}function a3(){var a6="UserSelect";for(var a5=0;a5<aV.length;a5++){if((aV[a5]+a6) in document.documentElement.style){ak=aV[a5];e=L[a5];return;}}if(navigator.appName==="Opera"){ak="O";e="-o-";return;}}function aw(){return((ak+"Perspective") in document.documentElement.style&&aK());}function aF(){var a7=document.createElement("canvas");try{if(a7.getContext!==undefined){var a5=a7.getContext("webgl")||a7.getContext("experimental-webgl");if(a5){if(a5.getParameter(a5.MAX_CUBE_MAP_TEXTURE_SIZE)>=CCLMD.ZOOM_RESOLUTIONS[CCLMD.ZOOM_RESOLUTIONS.length-1]){return true;}}}}catch(a6){}return false;}function a1(){return swfobject.hasFlashPlayerVersion(CCLMD.flash.REQUIRED_FLASH_VERSION)&&!CCLMD.utils.isMobileDevice();}function aK(){var a6=document.createElement("canvas");var a5=a6.getContext!==undefined;a6=null;return a5;}function w(be){var a5=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(a5);if(!window.createPopup){a5.appendChild(document.createTextNode(""));}var bf=document.styleSheets[document.styleSheets.length-1];for(var a9=0,ba=be.length;a9<ba;a9++){var a8=1,bd=be[a9],a7=bd[0],a6="";if(Object.prototype.toString.call(bd[1][0])==="[object Array]"){bd=bd[1];a8=0;}for(var bb=bd.length;a8<bb;a8++){var bc=bd[a8];a6+=bc[0]+":"+bc[1]+(bc[2]?" !important":"")+";\n";}if(bf.insertRule){bf.insertRule(a7+"{"+a6+"}",bf.cssRules.length);}else{bf.addRule(a7,a6,-1);}}}function D(a6,a7){if(a7 in a6){return true;}a7=a7.substr(0,1).toUpperCase()+a7.substr(1);for(var a5=0;a5<j.length;a5++){if((j[a5]+a7) in a6){return a6[j[a5]+a7];}}return undefined;}function J(a6,a7){if(a7 in a6){return"";}a7=a7.substr(0,1).toUpperCase()+a7.substr(1);for(var a5=0;a5<j.length;a5++){if((j[a5]+a7) in a6){return j[a5];}}return null;}function G(){if(aW===-1){aW=window.requestAnimationFrame(ac,aE);}}function ac(){if(ad===null){return;}if(a0<CCLMD.FOV_MIN){a0=CCLMD.FOV_MIN;}if(a0>CCLMD.FOV_MAX){a0=CCLMD.FOV_MAX;}var a9=Math.atan(Math.tan(a0*0.5)*z/aP)*2;var a6=Math.min(ap-ay,Y);var a5=Math.min(ap-ay,am);var a8=false;if(a9<a5){a9=a5;a8=true;}if(a9>a6){a9=a6;a8=true;}if(a8){a0=Math.atan(Math.tan(a9*0.5)*aP/z)*2;}var a7=a9*0.5;if((P-a7)<ay){P=ay+a7;}if((P+a7)>ap){P=ap-a7;}while(aT<0){aT+=Math.PI*2;}while(aT>=Math.PI*2){aT-=Math.PI*2;}aR.update(aP,z,aT,P,a0);aS();h.update();ad.setYaw(aT);ad.setPitch(P);ad.setHFov(a0);ad.render(aP,z);A.draw(aP,z);aW=-1;aY(aT,P,a0);}function aS(){var a6=1;var bh=0.5;var bl=Math.PI/4;var bf=aR.yaw;var bb=U.length;var be=-1;var a7=-1;var a8=-1;var a5=-1;for(var ba=0;ba<bb;++ba){var bd=U[ba];var a9=bd.relativeYaw;var bg=bd.relativeDistance;var bc=Math.acos(Math.cos(bf-a9));var bk=(bc>bl)?-1:((1-Math.pow(bc/Math.PI,a6))/(1+0.1*Math.pow(bg,bh)));if(bk>0&&bk>be){be=bk;a7=ba;}bd.scoreForward=bk;bd.forwardTarget=false;var bj=Math.acos(Math.cos(bf-a9+Math.PI));var bi=(bj>bl)?-1:((1-Math.pow(bj/Math.PI,a6))/(1+0.1*Math.pow(bg,bh)));if(bi>0&&bi>a8){a8=bi;a5=ba;}bd.scoreBackward=bi;bd.backwardTarget=false;}if(be>=0){p=U[a7];p.forwardTarget=true;}else{p=null;}if(a8>=0){f=U[a5];f.backwardTarget=true;}else{f=null;}}this.getViewer=function(){return ad;};this.destroy=function(){if(X==CCLMD.VIEWER_TYPE_UNDEFINED){return;}aj();F.off("viewerLoaded");aE.removeChild(T.contentWrapper);aU.areas={};A.clear();U=[];an=null;aU=null;A=null;ad=null;h=null;};function v(){var a5=aE;if(aa!=null&&aa.isFullscreen()){a5=T.contentWrapper;}return("getComputedStyle" in window)?parseInt(window.getComputedStyle(a5,null).width):a5.clientWidth;}function a4(){var a5=aE;if(aa!=null&&aa.isFullscreen()){a5=T.contentWrapper;}return("getComputedStyle" in window)?parseInt(window.getComputedStyle(a5,null).height):a5.clientHeight;}function Q(a5){q();}function q(){var a5=v();var a6=a4();if(a5!==aP||a6!==z){aP=a5;z=a6;G();}}var g=false;var aH=false;var aq=0;var ao=0;var at=0;var a2=0;var aX=0;var af=null;function Z(){$(aE).on("mousedown",O);$(aE).on("dblclick",au);$(aE).on("keydown",W);$(document).on("mousemove",av);$(document).on("mouseup",V);$(document).on("mouseout",aJ);$(T.contentWrapper).on("mousewheel",K);$(T.contentWrapper).on("DOMMouseScroll",K);$(T.contentWrapper).on("touchstart",ab);$(T.contentWrapper).on("touchmove",aZ);$(T.contentWrapper).on("touchend",d);$(T.contentWrapper).on("touchcancel",s);$(T.contentWrapper).on("gestureend",H);if(window.DeviceOrientationEvent){window.ondeviceorientation=ae;}if(window.DeviceMotionEvent){window.ondevicemotion=aB;}E=true;}function aj(){if(E==false){return;}$(aE).off("mousedown");$(aE).off("dblclick");$(aE).off("keydown");$(document).off("mousemove",av);$(document).off("mouseup",V);$(document).off("mouseout",aJ);$(T.contentWrapper).off("mousewheel");$(T.contentWrapper).off("DOMMouseScroll");$(T.contentWrapper).off("touchstart");$(T.contentWrapper).off("touchmove");$(T.contentWrapper).off("touchend");$(T.contentWrapper).off("touchcancel");$(T.contentWrapper).off("gestureend");$(window).off("resize",Q);E=false;}function W(a8){var a6=a8.keyCode||a8.which;var a7=45;if(a8.shiftKey){a7*=2;}if(a8.ctrlKey){a7*=0.1;}var a5=true;switch(a6){case 37:case 65:ai(0,0);ar(a7,0);break;case 39:case 68:ai(0,0);ar(-a7,0);break;case 33:case 82:ai(0,0);ar(0,a7);break;case 34:case 70:ai(0,0);ar(0,-a7);break;case 38:case 87:if(p){if(ad.isPluginBased()){ad.onmarkerclick(p);}else{A.onmarkerclick(p);}}break;case 83:case 40:if(f){if(ad.isPluginBased()){ad.onmarkerclick(f);}else{A.onmarkerclick(f);}}break;default:a5=false;break;}if(a5){if(a8.cancelBubble){a8.cancelBubble();}if(a8.preventDefault){a8.preventDefault();}if(a8.stopPropagation){a8.stopPropagation();}return false;}return true;}function O(a5){C(a5.pageX,a5.pageY);}function av(a5){ax(a5.pageX,a5.pageY);}function V(a5){g=false;}function aJ(a5){if(!(a5.relatedTarget||a5.toElement)){g=false;}}function au(a5){A.onmarkerclick(p);a5.preventDefault();}function K(a7){var a6=a7.originalEvent;var a5=a0;if(g==false&&aH==false){ai(a6.pageX,a6.pageY);aH=true;}if(a6.wheelDeltaY){a0-=(a6.wheelDeltaY*0.05)*aD;}else{if(a6.wheelDelta){a0-=(a6.wheelDelta*0.05)*aD;}else{if(a6.detail){a0+=(a6.detail*1)*aD;}}}if(a0<CCLMD.FOV_MIN){a0=CCLMD.FOV_MIN;}if(a0>CCLMD.FOV_MAX){a0=CCLMD.FOV_MAX;}var bc=Math.atan(Math.tan(a0*0.5)*z/aP)*2;var a9=Math.min(ap-ay,Y);var bg=Math.min(ap-ay,am);var bf=false;if(bc<bg){bc=bg;bf=true;}if(bc>a9){bc=a9;bf=true;}if(bf){a0=Math.atan(Math.tan(bc*0.5)*aP/z)*2;}if(a5!==a0){var a8=aC(T.contentWrapper);var be=a6.pageX-a8.x;var bd=a6.pageY-a8.y;var bb=a5*(z/aP);var ba=a0*(z/aP);aT=aT+((((aP/2)-be)/aP))*(a0-a5);P=P+((((z/2)-(z-bd))/z))*(ba-bb);G();}}function ab(a6){var a7=a6.originalEvent;aX=0;if(a7.touches.length===1){var a5=af;var a8=Date.now();af=a8;if(a8-a5<250){if(!ad.isPluginBased()){A.onmarkerclick(p);a7.preventDefault();}}else{C(a7.touches[0].pageX,a7.touches[0].pageY);}}else{af=null;}a6.preventDefault();return false;}function aZ(a7){var a6=a7.originalEvent;if(a6.touches.length===1){ax(a6.touches[0].pageX,a6.touches[0].pageY);}else{if(a6.touches.length>1){var ba=a6.touches[0].pageX;var bh=a6.touches[0].pageY;var a8=a6.touches[1].pageX;var bf=a6.touches[1].pageY;var bb=Math.sqrt(Math.pow(Math.abs(ba-a8),2)+Math.pow(Math.abs(bh-bf),2));var a5=a0;if(Math.abs(bb-aX)!=bb){a0=a0+(aX-bb)*aD*0.5;if(a0<CCLMD.FOV_MIN){a0=CCLMD.FOV_MIN;}if(a0>CCLMD.FOV_MAX){a0=CCLMD.FOV_MAX;}}aX=bb;if(a5!==a0){var a9=aC(T.contentWrapper);var bg=(a6.touches[0].pageX+a6.touches[1].pageX)/2-a9.x;var be=(a6.touches[0].pageY+a6.touches[1].pageY)/2-a9.y;var bc=a5*(z/aP);var bd=a0*(z/aP);aT=aT+((((aP/2)-bg)/aP))*(a0-a5);P=P+((((z/2)-(z-be))/z))*(bd-bc);G();}}}}function d(a5){g=false;}function s(a5){g=false;}function H(a5){g=false;}function aB(a6){if(S){var a5=a6.rotationRate;if(a5!=null){a0=a0+((-(Math.round(a5.alpha)*aD)/6));P=P+((-(Math.round(a5.beta)*aD)/4))%Math.PI;aT=aT+((-(Math.round(a5.gamma)*aD)/4))%(Math.PI*2);G();}}}function ae(a6){if(l){var a8;if(a6.webkitCompassHeading!=undefined){a8=(360-a6.webkitCompassHeading);}else{if(a6.alpha!=null){a8=(270-a6.alpha)*-1;}}a8=Math.round(a8);var a7=Math.round(a6.beta);var a5=Math.round(a6.gamma);aT=(360-a8)*aD;P=(Math.abs(a5)-90)*aD;G();}}function C(a5,a7){g=true;var a6=aC(T.contentWrapper);ai(a5-a6.x,a7-a6.y);}function ax(a5,a7){aH=false;var a6=aC(T.contentWrapper);if(g){ar(a5-a6.x,a7-a6.y);}}function ai(a5,a6){aq=a5;ao=a6;at=P;a2=aT;}function ar(a5,a7){var a6=1.2*a0/aP;aT=(aq-a5)*a6+a2;P=(a7-ao)*a6+at;G();}function I(a5,a7,a9,a6,a8){return aU.getTileURL(a5,a7,a9,a6,a8);}}function WebGLViewer(a,c,O,A){var H=this;var f=0;var D=0;var g=Math.PI*0.5;var K=document.createElement("canvas");K.setAttribute("style",O+"user-select: none;");var J={preserveDrawingBuffer:true};var o=K.getContext("webgl",J)||K.getContext("experimental-webgl",J);this.domElement=K;var G=[64,128,256,512,1024,2048];var z=Math.max($(window).height(),$(window).width());var b;for(i=0;i<G.length;++i){b=G[i];if(z<G[i]){break;}}var N;var n;var u;var m;var w;var L;var p;var l;var e;var E;var C;var d=[o.TEXTURE_CUBE_MAP_POSITIVE_X,o.TEXTURE_CUBE_MAP_NEGATIVE_X,o.TEXTURE_CUBE_MAP_POSITIVE_Y,o.TEXTURE_CUBE_MAP_NEGATIVE_Y,o.TEXTURE_CUBE_MAP_POSITIVE_Z,o.TEXTURE_CUBE_MAP_NEGATIVE_Z];h();function h(){q();v();k();A.trigger("viewerLoaded",H);}function q(){var T=j(o.VERTEX_SHADER,"        attribute mediump vec2 a_position;                uniform mediump vec2 u_resolution;                void main()        {            vec2 zeroToOne = a_position / u_resolution;                        vec2 zeroToTwo = zeroToOne * 2.0;                        vec2 clipSpace = zeroToTwo - 1.0;                        gl_Position = vec4(clipSpace, 0, 1);        }");var R=j(o.FRAGMENT_SHADER,"        uniform mediump vec4 u_color;                void main()        {            gl_FragColor = u_color;        }");N=s(T,R);var S=j(o.VERTEX_SHADER,"        attribute mediump vec2 a_position;        attribute mediump vec2 a_texCoord;                uniform mediump vec2 u_resolution;                varying mediump vec2 v_texCoord;                void main()        {            vec2 zeroToOne = a_position / u_resolution;                        vec2 zeroToTwo = zeroToOne * 2.0;                        vec2 clipSpace = zeroToTwo - 1.0;                        gl_Position = vec4(clipSpace, 0, 1);                        v_texCoord = a_texCoord;        }");var P=j(o.FRAGMENT_SHADER,"        uniform mediump sampler2D u_image;                varying mediump vec2 v_texCoord;                void main()        {            gl_FragColor = texture2D(u_image, v_texCoord);        }");n=s(S,P);var U=j(o.VERTEX_SHADER,"        attribute vec3 a_position;                uniform mat4 u_MVMatrix;        uniform mat4 u_PMatrix;                varying mediump vec3 v_texCoord;                void main(void)        {            gl_Position = u_PMatrix * u_MVMatrix * vec4(a_position, 1.0);            v_texCoord = a_position;        }");var Q=j(o.FRAGMENT_SHADER,"        varying mediump vec3 v_texCoord;                uniform samplerCube u_image;                void main(void)         {            gl_FragColor = textureCube(u_image, v_texCoord);        }");u=s(U,Q);}function j(P,R){var Q=o.createShader(P);o.shaderSource(Q,R);o.compileShader(Q);if(!o.getShaderParameter(Q,o.COMPILE_STATUS)){alert("An error occurred compiling the shaders: "+o.getShaderInfoLog(Q));return null;}return Q;}function s(R,Q){var P=o.createProgram();o.attachShader(P,R);o.attachShader(P,Q);o.linkProgram(P);if(!o.getProgramParameter(P,o.LINK_STATUS)){alert("Unable to initialize the shader program.");return null;}return P;}function v(){L=o.createFramebuffer();M();}function M(){var P=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];p=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,p);o.bufferData(o.ARRAY_BUFFER,new Float32Array(P),o.STATIC_DRAW);l=o.createBuffer();o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l);var Q=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(Q),o.STATIC_DRAW);}function k(){m=t();w=r();F();}function t(){var Q=o.createTexture();o.bindTexture(o.TEXTURE_CUBE_MAP,Q);o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE);o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);if(o.TEXTURE_WRAP_R){o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_R,o.CLAMP_TO_EDGE);}for(var P=0;P<6;++P){o.texImage2D(d[P],0,o.RGBA,b,b,0,o.RGBA,o.UNSIGNED_BYTE,null);}o.bindTexture(o.TEXTURE_CUBE_MAP,null);return Q;}function r(){var P=o.createTexture();o.bindTexture(o.TEXTURE_2D,P);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);o.bindTexture(o.TEXTURE_2D,null);return P;}function F(){o.useProgram(N);var Q=CCLMD.ZOOM_RESOLUTIONS[CCLMD.ZOOM_RESOLUTIONS.length-1];var Y=Q;var R=o.getAttribLocation(N,"a_position");var W=o.getUniformLocation(N,"u_resolution");var X=o.getUniformLocation(N,"u_color");B(0,0,Q,Y,R);var U=CCLMD.CLEAR_COLOR;var P=((U>>16)&255)/255;var T=((U>>8)&255)/255;var V=(U&255)/255;o.uniform2f(W,Q,Y);o.uniform4f(X,P,T,V,1);o.bindFramebuffer(o.FRAMEBUFFER,L);for(var S=0;S<6;++S){o.bindTexture(o.TEXTURE_CUBE_MAP,m);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,d[S],m,0);o.viewport(0,0,Q,Y);o.drawArrays(o.TRIANGLES,0,6);}o.bindFramebuffer(o.FRAMEBUFFER,null);I();}function B(Q,V,T,P,S){var R=[Q,V,Q+T,V,Q,V+P,Q,V+P,Q+T,V,Q+T,V+P];var U=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,U);o.bufferData(o.ARRAY_BUFFER,new Float32Array(R),o.STATIC_DRAW);o.enableVertexAttribArray(S);o.vertexAttribPointer(S,2,o.FLOAT,false,0,0);return U;}function I(){o.useProgram(u);E=o.getUniformLocation(u,"u_PMatrix");C=o.getUniformLocation(u,"u_MVMatrix");o.uniform1i(o.getUniformLocation(u,"u_image"),0);e=o.getAttribLocation(u,"a_position");}this.isPluginBased=function(){return false;};this.getYaw=function(){return f;};this.getPitch=function(){return D;};this.getHFov=function(){return g;};this.setYaw=function(P){f=P;};this.setPitch=function(P){D=P;};this.setHFov=function(P){g=P;};this.clear=F;this.drawTile=function(U,P,Q,S,aa){o.useProgram(n);var ad=b;var Z=ad;var ag=ad/CCLMD.ZOOM_RESOLUTIONS[P];var ae=CCLMD.ZOOM_TILE_DIMENSIONALITIES[P]-1;var T=o.getAttribLocation(n,"a_position");var X=o.getAttribLocation(n,"a_texCoord");var ab=o.getUniformLocation(n,"u_resolution");var ac=o.getUniformLocation(n,"u_image");o.uniform1i(ac,0);o.uniform2f(ab,ad,Z);o.bindFramebuffer(o.FRAMEBUFFER,L);var R,W,V;var Y=ag*aa.width;if(U!=2&&U!=3){W=(ae-Q)*Y;V=S*Y;R=[1,0,0,0,1,1,1,1,0,0,0,1];}else{W=Q*Y;V=(ae-S)*Y;R=[0,1,1,1,0,0,0,0,1,1,1,0];}o.bindTexture(o.TEXTURE_CUBE_MAP,m);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,d[U],m,0);o.bindTexture(o.TEXTURE_2D,w);o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,aa);B(W,V,Y,Y,T);var af=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,af);o.bufferData(o.ARRAY_BUFFER,new Float32Array(R),o.STATIC_DRAW);o.enableVertexAttribArray(X);o.vertexAttribPointer(X,2,o.FLOAT,false,0,0);o.viewport(0,0,ad,Z);o.drawArrays(o.TRIANGLES,0,6);o.bindFramebuffer(o.FRAMEBUFFER,null);I();H.requestAnimationFrame();};this.render=function(Q,P){if(K.width!==Q||K.height!==P){K.width=Q;K.height=P;}o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);var S=Math.atan(Math.tan(g*0.5)*P/Q)*2;var T=makePerspective(S*180/Math.PI,Q/P,0.1,100);var R=Matrix.RotationX(-D).multiply(Matrix.RotationY(f)).ensure4x4();o.bindBuffer(o.ARRAY_BUFFER,p);o.enableVertexAttribArray(e);o.vertexAttribPointer(e,3,o.FLOAT,false,0,0);o.bindTexture(o.TEXTURE_CUBE_MAP,m);o.uniformMatrix4fv(E,false,new Float32Array(T.flatten()));o.uniformMatrix4fv(C,false,new Float32Array(R.flatten()));o.viewport(0,0,Q,P);o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l);o.drawElements(o.TRIANGLES,36,o.UNSIGNED_SHORT,0);};this.requestAnimationFrame=function(){};}function FlashViewer(w,u,D,d){this.flashViewer=null;var E=CCLMD.flash.REQUIRED_FLASH_VERSION;var B="";var v={};var C={};C.quality="high";C.bgcolor="#ffffff";C.allowscriptaccess="sameDomain";C.allowfullscreen="true";C.wmode="transparent";var k=CCLMD.flash.getFlashViewerId();var q={};q.id=k;q.name=k;var F=document.createElement("div");F.setAttribute("id","flashViewerReplaceDiv");F.setAttribute("style","position: absolute; visibility: hidden;");document.body.appendChild(F);var m="/public/swf/streetview/viewer_cubemap.swf";if(D){m+="?time="+Date.now();}var G=this;swfobject.embedSWF(m,F.id,w,u,E,B,v,C,q,function(H){G.flashViewer=document.getElementById(q.id);G.domElement=G.flashViewer;document.body.removeChild(G.flashViewer);d.trigger("viewerLoaded",G);});var p=this;CCLMD.flash.registerFlashViewer(q.id,this);var A=false;var a=0;var e=0;var s=CCLMD.FOV_DEF;var o=false;var h=-Math.PI*0.5;var t=Math.PI*0.5;var c=CCLMD.FOV_MIN;var j=CCLMD.FOV_MAX;var f=CCLMD.FOV_MIN;var n=CCLMD.FOV_MAX;var r=CCLMD.CLEAR_COLOR;var l=true;this.onAPIReady=function(){A=true;this.flashViewer.setYaw(a);this.flashViewer.setPitch(e);this.flashViewer.setHFov(s);this.flashViewer.setMinPitch(h);this.flashViewer.setMaxPitch(t);this.flashViewer.setMinHFov(c);this.flashViewer.setMaxHFov(j);this.flashViewer.setMinVFov(f);this.flashViewer.setMaxVFov(n);this.flashViewer.setClearColor(r);this.flashViewer.setVisibilityRecordings(l);this.flashViewer.setRecordingRadius(CCLMD.RECORDING_RADIUS);if(o){this.flashViewer.load();}if(z!=null&&b!=null){this.flashViewer.setRecordings(z,b);}};this.onViewLoadStart=function(){};this.onViewLoadEnd=function(){};this.onViewChanged=function(J,I,H){};this.onTileLoadStart=function(H){};this.onTileLoadEnd=function(H,I){};this.isPluginBased=function(){return true;};this.getYaw=function(){return(A)?this.flashViewer.getYaw():0;};this.getPitch=function(){return(A)?this.flashViewer.getPitch():0;};this.getHFov=function(){return(A)?this.flashViewer.getHFov():CCLMD.FOV_DEF;};this.setYaw=function(H){if(A){this.flashViewer.setYaw(H);}else{a=H;}};this.setPitch=function(H){if(A){this.flashViewer.setPitch(H);}else{e=H;}};this.setHFov=function(H){if(A){this.flashViewer.setHFov(H);}else{s=H;}};this.setMaxHFov=function(H){if(A){this.flashViewer.setMaxHFov(H);}else{j=H;}};this.setMinHFov=function(H){if(A){this.flashViewer.setMinHFov(H);}else{c=H;}};this.setCameraBounds=function(J,K,H,I){if(A){this.flashViewer.setMinPitch(J);this.flashViewer.setMaxPitch(K);this.flashViewer.setMinVFov(H);this.flashViewer.setMaxVFov(I);}else{h=J;t=K;f=H;n=I;}};this.setClearColor=function(H){if(A){this.flashViewer.setClearColor(H);}else{r=H;}};this.load=function(){if(A){this.flashViewer.load();}else{o=true;}};this.resetLoad=function(){if(A){this.flashViewer.resetLoad();}};this.setVisibility=function(H){if(A){this.flashViewer.setVisibilityRecordings(H);}else{l=H;}};this.update=function(){};this.clear=function(){};this.getTileURL=function(H,J,L,I,K){};this.render=function(I,H){this.flashViewer.width=I;this.flashViewer.height=H;};this.draw=function(I,H){};var z;var b;var g;this.setRecordings=function(J,H){g={};for(var I=0;I<J.length;++I){g[J[I].id]=J[I];}z=J;b=H;if(A){this.flashViewer.setRecordings(J,H);}};this.onRecordingClicked=function(H){if(p.onmarkerclick){if(!g[H]){throw"recording does not exist: "+H;}p.onmarkerclick(g[H]);}};this.onmarkerclick=function(H){};this.saveSnapshot=function(){if(A){this.flashViewer.saveSnapshot();}};this.requestAnimationFrame=function(){};}function Canvas2DViewer(m,l,n,d){var f=this;var j=0;var g=0;var k=Math.PI/2;var p=document.createElement("canvas");p.setAttribute("style",n+"user-select: none;");this.domElement=p;var e=null;var o=null;var a=null;var s=CCLMD.ZOOM_RESOLUTIONS[CCLMD.ZOOM_RESOLUTIONS.length-1];var b=[];var h=[];var q=[];c();function c(){r(m,l);var B=CCLMD.CLEAR_COLOR;var A=B>>16;var z=(B>>8)&255;var t=B&255;var w="rgb("+A+", "+z+", "+t+")";for(var v=0;v<6;++v){b[v]=document.createElement("canvas");b[v].width=s;b[v].height=s;h[v]=b[v].getContext("2d");h[v].fillStyle=w;h[v].fillRect(0,0,s,s);var u=h[v].getImageData(0,0,s,s);q[v]=u.data;}d.trigger("viewerLoaded",f);}function r(w,u){var B=CCLMD.CLEAR_COLOR;var A=B>>16;var z=(B>>8)&255;var t=B&255;var v="rgb("+A+", "+z+", "+t+")";p.width=w;p.height=u;e=p.getContext("2d");e.fillStyle=v;e.fillRect(0,0,w,u);o=e.getImageData(0,0,w,u);a=o.data;}this.isPluginBased=function(){return false;};this.getYaw=function(){return j;};this.getPitch=function(){return g;};this.getHFov=function(){return k;};this.setYaw=function(t){j=t;};this.setPitch=function(t){g=t;};this.setHFov=function(t){k=t;};this.clear=function(){var B=CCLMD.CLEAR_COLOR;var A=B>>16;var z=(B>>8)&255;var t=B&255;var w="rgb("+A+", "+z+", "+t+")";for(var v=0;v<6;++v){h[v].fillStyle=w;h[v].fillRect(0,0,s,s);var u=h[v].getImageData(0,0,s,s);q[v]=u.data;}f.requestAnimationFrame();};this.drawTile=function(z,w,v,C,A){var B=s/CCLMD.ZOOM_RESOLUTIONS[w];var u=B*A.width;h[z].drawImage(A,v*u,C*u,u,u);var t=h[z].getImageData(0,0,s,s);q[z]=t.data;f.requestAnimationFrame();};this.render=function(z,C){if(p.width!==z||p.height!==C){r(z,C);}var J=Math.PI;var D=J*0.5;var L=s*0.5;var aj=2*Math.tan(k*0.5);var af=C/z*aj;var T=-Math.cos(j);var Q=Math.sin(j);var R=Q*Math.cos(g);var O=Math.sin(g);var M=T*Math.cos(g);var B=Q*Math.cos(g+D);var w=Math.sin(g+D);var ao=T*Math.cos(g+D);var an=O*ao-M*w;var al=M*B-R*ao;var ak=R*w-O*B;var ag=R-0.5*aj*an+0.5*af*B;var ae=O-0.5*aj*al+0.5*af*w;var ad=M-0.5*aj*ak+0.5*af*ao;var Z=(aj*an)/z;var F=(aj*al)/z;var aa=(aj*ak)/z;var Y=(af*B)/C;var E=(af*w)/C;var ab=(af*ao)/C;var I=ag+0.5*(Z-Y);var H=ae+0.5*(F-E);var G=ad+0.5*(aa-ab);var K=0;for(var ah=0;ah<C;++ah){var S=I-ah*Y;var P=H-ah*E;var N=G-ah*ab;for(var ai=0;ai<z;++ai){var A=S<0?-S:S;var t=P<0?-P:P;var am=N<0?-N:N;var W;var V;var ac;var X;if(A>t&&A>am){X=L/A;W=N*X;V=P*X;if(S>0){ac=q[0];}else{ac=q[1];W=-W;}}else{if(t>am){X=L/t;W=S*X;V=N*X;if(P>0){ac=q[2];}else{ac=q[3];V=-V;}}else{X=L/am;W=S*X;V=P*X;if(N>0){ac=q[4];W=-W;}else{ac=q[5];}}}V=-V;W=W+L;V=V+L;var U=((V&4294967295)*s+(W&4294967295))*4;a[K]=ac[U];a[K+1]=ac[U+1];a[K+2]=ac[U+2];K+=4;S+=Z;P+=F;N+=aa;}}e.putImageData(o,0,0);};this.requestAnimationFrame=function(){};}function CSS3Viewer(p,l,r,o,e){var s=180/Math.PI;var j=0;var g=0;var k=Math.PI*0.5;var z;var q;var f=this;var u=document.createElement("div");u.setAttribute("style","overflow: hidden; "+r+"user-select: none; ");var n=document.createElement("div");n.setAttribute("style","position: relative; width: 100%; height: 100%; "+r+"user-select: none; ");u.appendChild(n);var A=Math.max($(window).height(),$(window).width());if((A%2)!=0){A++;}var v=0.5*A;var a=[];var h=[];var d=["rotateY(-90deg)","rotateY(90deg)","rotateX(-90deg)","rotateX(90deg)","rotateY(180deg)","rotateY(0deg)"];this.domElement=u;c();function c(){for(var B=0;B<6;++B){a[B]=document.createElement("canvas");h[B]=a[B].getContext("2d");b(a[B]);}w(p,l);m();e.trigger("viewerLoaded",f);}function w(C,B){z=C*0.5;q=B*0.5;u.style.width=C+"px";u.style.height=B+"px";t();}function m(){var G=CCLMD.CLEAR_COLOR;var F=G>>16;var E=(G>>8)&255;var B=G&255;var D="rgb("+F+", "+E+", "+B+")";for(var C=0;C<6;++C){h[C].fillStyle=D;h[C].fillRect(0,0,A,A);}}function b(B){B.setAttribute("width",A);B.setAttribute("height",A);B.setAttribute("style","position: absolute; top: 0px; left: 0px; "+r+"user-select: none; "+r+"transform-style: preserve-3d; "+r+"transform-origin: 0% 0%; ");B.draggable=false;B.onmousedown=function(C){C.preventDefault();};n.appendChild(B);}function t(){var D=z/Math.tan(k*0.5);var B=D.toFixed(10);n.style[o+"Perspective"]=B+"px";var G=(A+1)/A;var F="translate3d("+z+"px, "+q+"px, "+B+"px) rotateX("+(g*s).toFixed(10)+"deg) rotateY("+(j*s).toFixed(10)+"deg) ";var E=" scale("+G+") translate3d(-"+v+"px, -"+v+"px, -"+v+"px)";for(var C=0;C<6;++C){a[C].style[o+"Transform"]=F+d[C]+E;}}this.isPluginBased=function(){return false;};this.getYaw=function(){return j;};this.getPitch=function(){return g;};this.getHFov=function(){return k;};this.setYaw=function(B){j=B;};this.setPitch=function(B){g=B;};this.setHFov=function(B){k=B;};this.clear=m;this.drawTile=function(E,D,C,H,F){var G=A/CCLMD.ZOOM_RESOLUTIONS[D];var B=G*F.width;h[E].drawImage(F,C*B,H*B,B,B);};this.render=function(C,B){if(u.style.width===C+"px"&&u.style.height===B+"px"){t();}else{w(C,B);}};this.requestAnimationFrame=function(){};}(function(){function af(b,o,n){if(b===o){return 0!==b||1/b==1/o;}if(null==b||null==o){return b===o;}b._chain&&(b=b._wrapped);o._chain&&(o=o._wrapped);if(b.isEqual&&ar.isFunction(b.isEqual)){return b.isEqual(o);}if(o.isEqual&&ar.isFunction(o.isEqual)){return o.isEqual(b);}var m=an.call(b);if(m!=an.call(o)){return !1;}switch(m){case"[object String]":return b==""+o;case"[object Number]":return b!=+b?o!=+o:0==b?1/b==1/o:b==+o;case"[object Date]":case"[object Boolean]":return +b==+o;case"[object RegExp]":return b.source==o.source&&b.global==o.global&&b.multiline==o.multiline&&b.ignoreCase==o.ignoreCase;}if("object"!=typeof b||"object"!=typeof o){return !1;}for(var l=n.length;l--;){if(n[l]==b){return !0;}}n.push(b);var l=0,k=!0;if("[object Array]"==m){if(l=b.length,k=l==o.length){for(;l--&&(k=l in b==l in o&&af(b[l],o[l],n));){}}}else{if("constructor" in b!="constructor" in o||b.constructor!=o.constructor){return !1;}for(var j in b){if(ar.has(b,j)&&(l++,!(k=ar.has(o,j)&&af(b[j],o[j],n)))){break;}}if(k){for(j in o){if(ar.has(o,j)&&!l--){break;}}k=!l;}}n.pop();return k;}var ac=this,T=ac._,ak={},ao=Array.prototype,aj=Object.prototype,aq=ao.slice,Q=ao.unshift,an=aj.toString,g=aj.hasOwnProperty,R=ao.forEach,h=ao.map,ai=ao.reduce,ah=ao.reduceRight,ae=ao.filter,ad=ao.every,ab=ao.some,ag=ao.indexOf,Z=ao.lastIndexOf,aj=Array.isArray,f=Object.keys,aa=Function.prototype.bind,ar=function(b){return new am(b);};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=ar),exports._=ar):ac._=ar;ar.VERSION="1.3.3";var ap=ar.each=ar.forEach=function(b,m,l){if(b!=null){if(R&&b.forEach===R){b.forEach(m,l);}else{if(b.length===+b.length){for(var k=0,j=b.length;k<j;k++){if(k in b&&m.call(l,b[k],k,b)===ak){break;}}}else{for(k in b){if(ar.has(b,k)&&m.call(l,b[k],k,b)===ak){break;}}}}}};ar.map=ar.collect=function(k,m,j){var l=[];if(k==null){return l;}if(h&&k.map===h){return k.map(m,j);}ap(k,function(b,o,n){l[l.length]=m.call(j,b,o,n);});if(k.length===+k.length){l.length=k.length;}return l;};ar.reduce=ar.foldl=ar.inject=function(b,m,l,k){var j=arguments.length>2;b==null&&(b=[]);if(ai&&b.reduce===ai){k&&(m=ar.bind(m,k));return j?b.reduce(m,l):b.reduce(m);}ap(b,function(o,n,p){if(j){l=m.call(k,l,o,n,p);}else{l=o;j=true;}});if(!j){throw new TypeError("Reduce of empty array with no initial value");}return l;};ar.reduceRight=ar.foldr=function(b,n,m,l){var k=arguments.length>2;b==null&&(b=[]);if(ah&&b.reduceRight===ah){l&&(n=ar.bind(n,l));return k?b.reduceRight(n,m):b.reduceRight(n);}var j=ar.toArray(b).reverse();l&&!k&&(n=ar.bind(n,l));return k?ar.reduce(j,n,m,l):ar.reduce(j,n);};ar.find=ar.detect=function(k,m,j){var l;X(k,function(b,o,n){if(m.call(j,b,o,n)){l=b;return true;}});return l;};ar.filter=ar.select=function(k,m,j){var l=[];if(k==null){return l;}if(ae&&k.filter===ae){return k.filter(m,j);}ap(k,function(b,o,n){m.call(j,b,o,n)&&(l[l.length]=b);});return l;};ar.reject=function(k,m,j){var l=[];if(k==null){return l;}ap(k,function(b,o,n){m.call(j,b,o,n)||(l[l.length]=b);});return l;};ar.every=ar.all=function(k,m,j){var l=true;if(k==null){return l;}if(ad&&k.every===ad){return k.every(m,j);}ap(k,function(b,o,n){if(!(l=l&&m.call(j,b,o,n))){return ak;}});return !!l;};var X=ar.some=ar.any=function(b,l,k){l||(l=ar.identity);var j=false;if(b==null){return j;}if(ab&&b.some===ab){return b.some(l,k);}ap(b,function(n,m,o){if(j||(j=l.call(k,n,m,o))){return ak;}});return !!j;};ar.include=ar.contains=function(k,l){var j=false;if(k==null){return j;}if(ag&&k.indexOf===ag){return k.indexOf(l)!=-1;}return j=X(k,function(b){return b===l;});};ar.invoke=function(b,k){var j=aq.call(arguments,2);return ar.map(b,function(l){return(ar.isFunction(k)?k||l:l[k]).apply(l,j);});};ar.pluck=function(b,j){return ar.map(b,function(k){return k[j];});};ar.max=function(b,l,k){if(!l&&ar.isArray(b)&&b[0]===+b[0]){return Math.max.apply(Math,b);}if(!l&&ar.isEmpty(b)){return -Infinity;}var j={computed:-Infinity};ap(b,function(n,m,o){m=l?l.call(k,n,m,o):n;m>=j.computed&&(j={value:n,computed:m});});return j.value;};ar.min=function(b,l,k){if(!l&&ar.isArray(b)&&b[0]===+b[0]){return Math.min.apply(Math,b);}if(!l&&ar.isEmpty(b)){return Infinity;}var j={computed:Infinity};ap(b,function(n,m,o){m=l?l.call(k,n,m,o):n;m<j.computed&&(j={value:n,computed:m});});return j.value;};ar.shuffle=function(k){var j=[],l;ap(k,function(b,m){l=Math.floor(Math.random()*(m+1));j[m]=j[l];j[l]=b;});return j;};ar.sortBy=function(b,l,k){var j=ar.isFunction(l)?l:function(m){return m[l];};return ar.pluck(ar.map(b,function(n,m,o){return{value:n,criteria:j.call(k,n,m,o)};}).sort(function(n,m){var p=n.criteria,o=m.criteria;return p===void 0?1:o===void 0?-1:p<o?-1:p>o?1:0;}),"value");};ar.groupBy=function(b,l){var k={},j=ar.isFunction(l)?l:function(m){return m[l];};ap(b,function(n,m){var o=j(n,m);(k[o]||(k[o]=[])).push(n);});return k;};ar.sortedIndex=function(b,n,m){m||(m=ar.identity);for(var l=0,k=b.length;l<k;){var j=l+k>>1;m(b[j])<m(n)?l=j+1:k=j;}return l;};ar.toArray=function(b){return !b?[]:ar.isArray(b)||ar.isArguments(b)?aq.call(b):b.toArray&&ar.isFunction(b.toArray)?b.toArray():ar.values(b);};ar.size=function(b){return ar.isArray(b)?b.length:ar.keys(b).length;};ar.first=ar.head=ar.take=function(k,j,l){return j!=null&&!l?aq.call(k,0,j):k[0];};ar.initial=function(k,j,l){return aq.call(k,0,k.length-(j==null||l?1:j));};ar.last=function(k,j,l){return j!=null&&!l?aq.call(k,Math.max(k.length-j,0)):k[k.length-1];};ar.rest=ar.tail=function(k,j,l){return aq.call(k,j==null||l?1:j);};ar.compact=function(b){return ar.filter(b,function(j){return !!j;});};ar.flatten=function(b,j){return ar.reduce(b,function(k,l){if(ar.isArray(l)){return k.concat(j?l:ar.flatten(l));}k[k.length]=l;return k;},[]);};ar.without=function(b){return ar.difference(b,aq.call(arguments,1));};ar.uniq=ar.unique=function(b,l,k){var k=k?ar.map(b,k):b,j=[];b.length<3&&(l=true);ar.reduce(k,function(o,n,m){if(l?ar.last(o)!==n||!o.length:!ar.include(o,n)){o.push(n);j.push(b[m]);}return o;},[]);return j;};ar.union=function(){return ar.uniq(ar.flatten(arguments,true));};ar.intersection=ar.intersect=function(b){var j=aq.call(arguments,1);return ar.filter(ar.uniq(b),function(k){return ar.every(j,function(l){return ar.indexOf(l,k)>=0;});});};ar.difference=function(b){var j=ar.flatten(aq.call(arguments,1),true);return ar.filter(b,function(k){return !ar.include(j,k);});};ar.zip=function(){for(var b=aq.call(arguments),l=ar.max(ar.pluck(b,"length")),k=Array(l),j=0;j<l;j++){k[j]=ar.pluck(b,""+j);}return k;};ar.indexOf=function(b,l,k){if(b==null){return -1;}var j;if(k){k=ar.sortedIndex(b,l);return b[k]===l?k:-1;}if(ag&&b.indexOf===ag){return b.indexOf(l);}k=0;for(j=b.length;k<j;k++){if(k in b&&b[k]===l){return k;}}return -1;};ar.lastIndexOf=function(k,j){if(k==null){return -1;}if(Z&&k.lastIndexOf===Z){return k.lastIndexOf(j);}for(var l=k.length;l--;){if(l in k&&k[l]===j){return l;}}return -1;};ar.range=function(k,j,o){if(arguments.length<=1){j=k||0;k=0;}for(var o=arguments[2]||1,n=Math.max(Math.ceil((j-k)/o),0),m=0,l=Array(n);m<n;){l[m++]=k;k=k+o;}return l;};var V=function(){};ar.bind=function(b,l){var k,j;if(b.bind===aa&&aa){return aa.apply(b,aq.call(arguments,1));}if(!ar.isFunction(b)){throw new TypeError;}j=aq.call(arguments,2);return k=function(){if(!(this instanceof k)){return b.apply(l,j.concat(aq.call(arguments)));}V.prototype=b.prototype;var m=new V,n=b.apply(m,j.concat(aq.call(arguments)));return Object(n)===n?n:m;};};ar.bindAll=function(b){var j=aq.call(arguments,1);j.length==0&&(j=ar.functions(b));ap(j,function(k){b[k]=ar.bind(b[k],b);});return b;};ar.memoize=function(b,k){var j={};k||(k=ar.identity);return function(){var l=k.apply(this,arguments);return ar.has(j,l)?j[l]:j[l]=b.apply(this,arguments);};};ar.delay=function(k,j){var l=aq.call(arguments,2);return setTimeout(function(){return k.apply(null,l);},j);};ar.defer=function(b){return ar.delay.apply(ar,[b,1].concat(aq.call(arguments,1)));};ar.throttle=function(r,q){var p,o,n,m,l,k,b=ar.debounce(function(){l=m=false;},q);return function(){p=this;o=arguments;n||(n=setTimeout(function(){n=null;l&&r.apply(p,o);b();},q));m?l=true:k=r.apply(p,o);b();m=true;return k;};};ar.debounce=function(k,j,m){var l;return function(){var n=this,b=arguments;m&&!l&&k.apply(n,b);clearTimeout(l);l=setTimeout(function(){l=null;m||k.apply(n,b);},j);};};ar.once=function(k){var j=false,l;return function(){if(j){return l;}j=true;return l=k.apply(this,arguments);};};ar.wrap=function(k,j){return function(){var b=[k].concat(aq.call(arguments,0));return j.apply(this,b);};};ar.compose=function(){var b=arguments;return function(){for(var j=arguments,k=b.length-1;k>=0;k--){j=[b[k].apply(this,j)];}return j[0];};};ar.after=function(k,j){return k<=0?j():function(){if(--k<1){return j.apply(this,arguments);}};};ar.keys=f||function(b){if(b!==Object(b)){throw new TypeError("Invalid object");}var k=[],j;for(j in b){ar.has(b,j)&&(k[k.length]=j);}return k;};ar.values=function(b){return ar.map(b,ar.identity);};ar.functions=ar.methods=function(b){var k=[],j;for(j in b){ar.isFunction(b[j])&&k.push(j);}return k.sort();};ar.extend=function(b){ap(aq.call(arguments,1),function(j){for(var k in j){b[k]=j[k];}});return b;};ar.pick=function(b){var j={};ap(ar.flatten(aq.call(arguments,1)),function(k){k in b&&(j[k]=b[k]);});return j;};ar.defaults=function(b){ap(aq.call(arguments,1),function(j){for(var k in j){b[k]==null&&(b[k]=j[k]);}});return b;};ar.clone=function(b){return !ar.isObject(b)?b:ar.isArray(b)?b.slice():ar.extend({},b);};ar.tap=function(k,j){j(k);return k;};ar.isEqual=function(k,j){return af(k,j,[]);};ar.isEmpty=function(b){if(b==null){return true;}if(ar.isArray(b)||ar.isString(b)){return b.length===0;}for(var j in b){if(ar.has(b,j)){return false;}}return true;};ar.isElement=function(b){return !!(b&&b.nodeType==1);};ar.isArray=aj||function(b){return an.call(b)=="[object Array]";};ar.isObject=function(b){return b===Object(b);};ar.isArguments=function(b){return an.call(b)=="[object Arguments]";};ar.isArguments(arguments)||(ar.isArguments=function(b){return !(!b||!ar.has(b,"callee"));});ar.isFunction=function(b){return an.call(b)=="[object Function]";};ar.isString=function(b){return an.call(b)=="[object String]";};ar.isNumber=function(b){return an.call(b)=="[object Number]";};ar.isFinite=function(b){return ar.isNumber(b)&&isFinite(b);};ar.isNaN=function(b){return b!==b;};ar.isBoolean=function(b){return b===true||b===false||an.call(b)=="[object Boolean]";};ar.isDate=function(b){return an.call(b)=="[object Date]";};ar.isRegExp=function(b){return an.call(b)=="[object RegExp]";};ar.isNull=function(b){return b===null;};ar.isUndefined=function(b){return b===void 0;};ar.has=function(k,j){return g.call(k,j);};ar.noConflict=function(){ac._=T;return this;};ar.identity=function(b){return b;};ar.times=function(k,j,m){for(var l=0;l<k;l++){j.call(m,l);}};ar.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");};ar.result=function(b,k){if(b==null){return null;}var j=b[k];return ar.isFunction(j)?j.call(b):j;};ar.mixin=function(b){ap(ar.functions(b),function(j){e(j,ar[j]=b[j]);});};var d=0;ar.uniqueId=function(k){var j=d++;return k?k+j:j;};ar.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/.^/,al={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},W;for(W in al){al[al[W]]=W;}var c=/\\|'|\r|\n|\t|\u2028|\u2029/g,a=/\\(\\|'|r|n|t|u2028|u2029)/g,U=function(b){return b.replace(a,function(k,j){return al[j];});};ar.template=function(b,l,k){k=ar.defaults(k||{},ar.templateSettings);b="__p+='"+b.replace(c,function(m){return"\\"+al[m];}).replace(k.escape||Y,function(n,m){return"'+\n_.escape("+U(m)+")+\n'";}).replace(k.interpolate||Y,function(n,m){return"'+\n("+U(m)+")+\n'";}).replace(k.evaluate||Y,function(n,m){return"';\n"+U(m)+"\n;__p+='";})+"';\n";k.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",j=new Function(k.variable||"obj","_",b);if(l){return j(l,ar);}l=function(m){return j.call(this,m,ar);};l.source="function("+(k.variable||"obj")+"){\n"+b+"}";return l;};ar.chain=function(b){return ar(b).chain();};var am=function(b){this._wrapped=b;};ar.prototype=am.prototype;var S=function(b,j){return j?ar(b).chain():b;},e=function(b,j){am.prototype[b]=function(){var k=aq.call(arguments);Q.call(k,this._wrapped);return S(j.apply(ar,k),this._chain);};};ar.mixin(ar);ap("pop,push,reverse,shift,sort,splice,unshift".split(","),function(k){var j=ao[k];am.prototype[k]=function(){var l=this._wrapped;j.apply(l,arguments);var b=l.length;(k=="shift"||k=="splice")&&b===0&&delete l[0];return S(l,this._chain);};});ap(["concat","join","slice"],function(k){var j=ao[k];am.prototype[k]=function(){return S(j.apply(this._wrapped,arguments),this._chain);};});am.prototype.chain=function(){this._chain=true;return this;};am.prototype.value=function(){return this._wrapped;};}).call(this);(function(){var V=this,b=V.Backbone,a=Array.prototype.slice,Q=Array.prototype.splice,Y;Y="undefined"!==typeof exports?exports:V.Backbone={};Y.VERSION="0.9.2";var Z=V._;!Z&&"undefined"!==typeof require&&(Z=require("underscore"));var X=V.jQuery||V.Zepto||V.ender;Y.setDomLibrary=function(f){X=f;};Y.noConflict=function(){V.Backbone=b;return this;};Y.emulateHTTP=!1;Y.emulateJSON=!1;var R=/\s+/,W=Y.Events={on:function(l,k,s){var r,p,o,n,m;if(!k){return this;}l=l.split(R);for(r=this._callbacks||(this._callbacks={});p=l.shift();){o=(m=r[p])?m.tail:{},o.next=n={},o.context=s,o.callback=k,r[p]={tail:n,next:m?m.next:o};}return this;},off:function(s,r,p){var o,n,l,m,k,f;if(n=this._callbacks){if(!s&&!r&&!p){return delete this._callbacks,this;}for(s=s?s.split(R):Z.keys(n);o=s.shift();){if(l=n[o],delete n[o],l&&(r||p)){for(m=l.tail;(l=l.next)!==m;){if(k=l.callback,f=l.context,r&&k!==r||p&&f!==p){this.on(o,k,f);}}}}return this;}},trigger:function(l){var k,r,p,o,n,m;if(!(p=this._callbacks)){return this;}n=p.all;l=l.split(R);for(m=a.call(arguments,1);k=l.shift();){if(r=p[k]){for(o=r.tail;(r=r.next)!==o;){r.callback.apply(r.context||this,m);}}if(r=n){o=r.tail;for(k=[k].concat(m);(r=r.next)!==o;){r.callback.apply(r.context||this,k);}}}return this;}};W.bind=W.on;W.unbind=W.off;var S=Y.Model=function(g,f){var k;g||(g={});f&&f.parse&&(g=this.parse(g));if(k=T(this,"defaults")){g=Z.extend({},k,g);}f&&f.collection&&(this.collection=f.collection);this.attributes={};this._escapedAttributes={};this.cid=Z.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(g,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=Z.clone(this.attributes);this.initialize.apply(this,arguments);};Z.extend(S.prototype,W,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return Z.clone(this.attributes);},get:function(f){return this.attributes[f];},escape:function(g){var f;if(f=this._escapedAttributes[g]){return f;}f=this.get(g);return this._escapedAttributes[g]=Z.escape(null==f?"":""+f);},has:function(f){return null!=this.get(f);},set:function(k,f,r){var p,o;Z.isObject(k)||null==k?(p=k,r=f):(p={},p[k]=f);r||(r={});if(!p){return this;}p instanceof S&&(p=p.attributes);if(r.unset){for(o in p){p[o]=void 0;}}if(!this._validate(p,r)){return !1;}this.idAttribute in p&&(this.id=p[this.idAttribute]);var f=r.changes={},m=this.attributes,n=this._escapedAttributes,l=this._previousAttributes||{};for(o in p){k=p[o];if(!Z.isEqual(m[o],k)||r.unset&&Z.has(m,o)){delete n[o],(r.silent?this._silent:f)[o]=!0;}r.unset?delete m[o]:m[o]=k;!Z.isEqual(l[o],k)||Z.has(m,o)!=Z.has(l,o)?(this.changed[o]=k,r.silent||(this._pending[o]=!0)):(delete this.changed[o],delete this._pending[o]);}r.silent||this.change(r);return this;},unset:function(g,f){(f||(f={})).unset=!0;return this.set(g,null,f);},clear:function(f){(f||(f={})).unset=!0;return this.set(Z.clone(this.attributes),f);},fetch:function(g){var g=g?Z.clone(g):{},f=this,k=g.success;g.success=function(n,m,l){if(!f.set(f.parse(n,l),g)){return !1;}k&&k(f,n);};g.error=Y.wrapError(g.error,f,g);return(this.sync||Y.sync).call(this,"read",this,g);},save:function(g,f,o){var n,m;Z.isObject(g)||null==g?(n=g,o=f):(n={},n[g]=f);o=o?Z.clone(o):{};if(o.wait){if(!this._validate(n,o)){return !1;}m=Z.clone(this.attributes);}g=Z.extend({},o,{silent:!0});if(n&&!this.set(n,o.wait?g:o)){return !1;}var l=this,k=o.success;o.success=function(r,p,s){p=l.parse(r,s);if(o.wait){delete o.wait;p=Z.extend(n||{},p);}if(!l.set(p,o)){return false;}k?k(l,r):l.trigger("sync",l,r,o);};o.error=Y.wrapError(o.error,l,o);f=this.isNew()?"create":"update";f=(this.sync||Y.sync).call(this,f,this,o);o.wait&&this.set(m,g);return f;},destroy:function(g){var g=g?Z.clone(g):{},f=this,m=g.success,l=function(){f.trigger("destroy",f,f.collection,g);};if(this.isNew()){return l(),!1;}g.success=function(n){g.wait&&l();m?m(f,n):f.trigger("sync",f,n,g);};g.error=Y.wrapError(g.error,f,g);var k=(this.sync||Y.sync).call(this,"delete",this,g);g.wait||l();return k;},url:function(){var f=T(this,"urlRoot")||T(this.collection,"url")||J();return this.isNew()?f:f+("/"==f.charAt(f.length-1)?"":"/")+encodeURIComponent(this.id);},parse:function(f){return f;},clone:function(){return new this.constructor(this.attributes);},isNew:function(){return null==this.id;},change:function(g){g||(g={});var f=this._changing;this._changing=!0;for(var l in this._silent){this._pending[l]=!0;}var k=Z.extend({},g.changes,this._silent);this._silent={};for(l in k){this.trigger("change:"+l,this,this.get(l),g);}if(f){return this;}for(;!Z.isEmpty(this._pending);){this._pending={};this.trigger("change",this,g);for(l in this.changed){!this._pending[l]&&!this._silent[l]&&delete this.changed[l];}this._previousAttributes=Z.clone(this.attributes);}this._changing=!1;return this;},hasChanged:function(f){return !arguments.length?!Z.isEmpty(this.changed):Z.has(this.changed,f);},changedAttributes:function(g){if(!g){return this.hasChanged()?Z.clone(this.changed):!1;}var f,m=!1,l=this._previousAttributes,k;for(k in g){if(!Z.isEqual(l[k],f=g[k])){(m||(m={}))[k]=f;}}return m;},previous:function(f){return !arguments.length||!this._previousAttributes?null:this._previousAttributes[f];},previousAttributes:function(){return Z.clone(this._previousAttributes);},isValid:function(){return !this.validate(this.attributes);},_validate:function(g,f){if(f.silent||!this.validate){return !0;}var g=Z.extend({},this.attributes,g),k=this.validate(g,f);if(!k){return !0;}f&&f.error?f.error(this,k,f):this.trigger("error",this,k,f);return !1;}});var O=Y.Collection=function(g,f){f||(f={});f.model&&(this.model=f.model);f.comparator&&(this.comparator=f.comparator);this._reset();this.initialize.apply(this,arguments);g&&this.reset(g,{silent:!0,parse:f.parse});};Z.extend(O.prototype,W,{model:S,initialize:function(){},toJSON:function(f){return this.map(function(g){return g.toJSON(f);});},add:function(v,u){var t,s,r,p,o,n={},m={},f=[];u||(u={});v=Z.isArray(v)?v.slice():[v];t=0;for(s=v.length;t<s;t++){if(!(r=v[t]=this._prepareModel(v[t],u))){throw Error("Can't add an invalid model to a collection");}p=r.cid;o=r.id;n[p]||this._byCid[p]||null!=o&&(m[o]||this._byId[o])?f.push(t):n[p]=m[o]=r;}for(t=f.length;t--;){v.splice(f[t],1);}t=0;for(s=v.length;t<s;t++){(r=v[t]).on("all",this._onModelEvent,this),this._byCid[r.cid]=r,null!=r.id&&(this._byId[r.id]=r);}this.length+=s;Q.apply(this.models,[null!=u.at?u.at:this.models.length,0].concat(v));this.comparator&&this.sort({silent:!0});if(u.silent){return this;}t=0;for(s=this.models.length;t<s;t++){if(n[(r=this.models[t]).cid]){u.index=t,r.trigger("add",r,this,u);}}return this;},remove:function(k,f){var o,n,m,l;f||(f={});k=Z.isArray(k)?k.slice():[k];o=0;for(n=k.length;o<n;o++){if(l=this.getByCid(k[o])||this.get(k[o])){delete this._byId[l.id],delete this._byCid[l.cid],m=this.indexOf(l),this.models.splice(m,1),this.length--,f.silent||(f.index=m,l.trigger("remove",l,this,f)),this._removeReference(l);}}return this;},push:function(g,f){g=this._prepareModel(g,f);this.add(g,f);return g;},pop:function(g){var f=this.at(this.length-1);this.remove(f,g);return f;},unshift:function(g,f){g=this._prepareModel(g,f);this.add(g,Z.extend({at:0},f));return g;},shift:function(g){var f=this.at(0);this.remove(f,g);return f;},get:function(f){return null==f?void 0:this._byId[null!=f.id?f.id:f];},getByCid:function(f){return f&&this._byCid[f.cid||f];},at:function(f){return this.models[f];},where:function(f){return Z.isEmpty(f)?[]:this.filter(function(g){for(var k in f){if(f[k]!==g.get(k)){return !1;}}return !0;});},sort:function(g){g||(g={});if(!this.comparator){throw Error("Cannot sort a set without a comparator");}var f=Z.bind(this.comparator,this);1==this.comparator.length?this.models=this.sortBy(f):this.models.sort(f);g.silent||this.trigger("reset",this,g);return this;},pluck:function(f){return Z.map(this.models,function(g){return g.get(f);});},reset:function(g,f){g||(g=[]);f||(f={});for(var l=0,k=this.models.length;l<k;l++){this._removeReference(this.models[l]);}this._reset();this.add(g,Z.extend({silent:!0},f));f.silent||this.trigger("reset",this,f);return this;},fetch:function(g){g=g?Z.clone(g):{};void 0===g.parse&&(g.parse=!0);var f=this,k=g.success;g.success=function(n,m,l){f[g.add?"add":"reset"](f.parse(n,l),g);k&&k(f,n);};g.error=Y.wrapError(g.error,f,g);return(this.sync||Y.sync).call(this,"read",this,g);},create:function(g,f){var l=this,f=f?Z.clone(f):{},g=this._prepareModel(g,f);if(!g){return !1;}f.wait||l.add(g,f);var k=f.success;f.success=function(n,m){f.wait&&l.add(n,f);k?k(n,m):n.trigger("sync",g,m,f);};g.save(null,f);return g;},parse:function(f){return f;},chain:function(){return Z(this.models).chain();},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={};},_prepareModel:function(g,f){f||(f={});g instanceof S?g.collection||(g.collection=this):(f.collection=this,g=new this.model(g,f),g._validate(g.attributes,f)||(g=!1));return g;},_removeReference:function(f){this==f.collection&&delete f.collection;f.off("all",this._onModelEvent,this);},_onModelEvent:function(g,f,l,k){("add"==g||"remove"==g)&&l!=this||("destroy"==g&&this.remove(f,k),f&&g==="change:"+f.idAttribute&&(delete this._byId[f.previous(f.idAttribute)],this._byId[f.id]=f),this.trigger.apply(this,arguments));}});Z.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(f){O.prototype[f]=function(){return Z[f].apply(Z,[this.models].concat(Z.toArray(arguments)));};});var I=Y.Router=function(f){f||(f={});f.routes&&(this.routes=f.routes);this._bindRoutes();this.initialize.apply(this,arguments);},P=/:\w+/g,N=/\*\w+/g,M=/[-[\]{}()+?.,\\^$|#\s]/g;Z.extend(I.prototype,W,{initialize:function(){},route:function(g,f,k){Y.history||(Y.history=new U);Z.isRegExp(g)||(g=this._routeToRegExp(g));k||(k=this[f]);Y.history.route(g,Z.bind(function(l){l=this._extractParameters(g,l);k&&k.apply(this,l);this.trigger.apply(this,["route:"+f].concat(l));Y.history.trigger("route",this,f,l);},this));return this;},navigate:function(g,f){Y.history.navigate(g,f);},_bindRoutes:function(){if(this.routes){var g=[],f;for(f in this.routes){g.unshift([f,this.routes[f]]);}f=0;for(var k=g.length;f<k;f++){this.route(g[f][0],g[f][1],this[g[f][1]]);}}},_routeToRegExp:function(f){f=f.replace(M,"\\$&").replace(P,"([^/]+)").replace(N,"(.*?)");return RegExp("^"+f+"$");},_extractParameters:function(g,f){return g.exec(f).slice(1);}});var U=Y.History=function(){this.handlers=[];Z.bindAll(this,"checkUrl");},L=/^[#\/]/,K=/msie [\w.]+/;U.started=!1;Z.extend(U.prototype,W,{interval:50,getHash:function(f){return(f=(f?f.location:window.location).href.match(/#(.*)$/))?f[1]:"";},getFragment:function(g,f){if(null==g){if(this._hasPushState||f){var g=window.location.pathname,k=window.location.search;k&&(g+=k);}else{g=this.getHash();}}g.indexOf(this.options.root)||(g=g.substr(this.options.root.length));return g.replace(L,"");},start:function(g){if(U.started){throw Error("Backbone.history has already been started");}U.started=!0;this.options=Z.extend({},{root:"/"},this.options,g);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var g=this.getFragment(),f=document.documentMode;if(f=K.exec(navigator.userAgent.toLowerCase())&&(!f||7>=f)){this.iframe=X('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(g);}this._hasPushState?X(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange" in window&&!f?X(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=g;g=window.location;f=g.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f){return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;}this._wantsPushState&&this._hasPushState&&f&&g.hash&&(this.fragment=this.getHash().replace(L,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment));if(!this.options.silent){return this.loadUrl();}},stop:function(){X(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);U.started=!1;},route:function(g,f){this.handlers.unshift({route:g,callback:f});},checkUrl:function(){var f=this.getFragment();f==this.fragment&&this.iframe&&(f=this.getFragment(this.getHash(this.iframe)));if(f==this.fragment){return !1;}this.iframe&&this.navigate(f);this.loadUrl()||this.loadUrl(this.getHash());},loadUrl:function(g){var f=this.fragment=this.getFragment(g);return Z.any(this.handlers,function(k){if(k.route.test(f)){return k.callback(f),!0;}});},navigate:function(g,f){if(!U.started){return !1;}if(!f||!0===f){f={trigger:f};}var k=(g||"").replace(L,"");this.fragment!=k&&(this._hasPushState?(0!=k.indexOf(this.options.root)&&(k=this.options.root+k),this.fragment=k,window.history[f.replace?"replaceState":"pushState"]({},document.title,k)):this._wantsHashChange?(this.fragment=k,this._updateHash(window.location,k,f.replace),this.iframe&&k!=this.getFragment(this.getHash(this.iframe))&&(f.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,k,f.replace))):window.location.assign(this.options.root+g),f.trigger&&this.loadUrl(g));},_updateHash:function(g,f,k){k?g.replace(g.toString().replace(/(javascript:|#).*$/,"")+"#"+f):g.hash=f;}});var j=Y.View=function(f){this.cid=Z.uniqueId("view");this._configure(f||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents();},q=/^(\S+)\s*(.*)$/,e="model,collection,el,id,attributes,className,tagName".split(",");Z.extend(j.prototype,W,{tagName:"div",$:function(f){return this.$el.find(f);},initialize:function(){},render:function(){return this;},remove:function(){this.$el.remove();return this;},make:function(g,f,k){g=document.createElement(g);f&&X(g).attr(f);k&&X(g).html(k);return g;},setElement:function(g,f){this.$el&&this.undelegateEvents();this.$el=g instanceof X?g:X(g);this.el=this.$el[0];!1!==f&&this.delegateEvents();return this;},delegateEvents:function(g){if(g||(g=T(this,"events"))){this.undelegateEvents();for(var f in g){var m=g[f];Z.isFunction(m)||(m=this[g[f]]);if(!m){throw Error('Method "'+g[f]+'" does not exist');}var l=f.match(q),k=l[1],l=l[2],m=Z.bind(m,this),k=k+(".delegateEvents"+this.cid);""===l?this.$el.bind(k,m):this.$el.delegate(l,k,m);}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid);},_configure:function(g){this.options&&(g=Z.extend({},this.options,g));for(var f=0,l=e.length;f<l;f++){var k=e[f];g[k]&&(this[k]=g[k]);}this.options=g;},_ensureElement:function(){if(this.el){this.setElement(this.el,!1);}else{var f=T(this,"attributes")||{};this.id&&(f.id=this.id);this.className&&(f["class"]=this.className);this.setElement(this.make(this.tagName,f),!1);}}});S.extend=O.extend=I.extend=j.extend=function(g,f){var k=h(this,g,f);k.extend=this.extend;return k;};var d={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Y.sync=function(g,f,m){var l=d[g];m||(m={});var k={type:l,dataType:"json"};m.url||(k.url=T(f,"url")||J());if(!m.data&&f&&("create"==g||"update"==g)){k.contentType="application/json",k.data=JSON.stringify(f.toJSON());}Y.emulateJSON&&(k.contentType="application/x-www-form-urlencoded",k.data=k.data?{model:k.data}:{});if(Y.emulateHTTP&&("PUT"===l||"DELETE"===l)){Y.emulateJSON&&(k.data._method=l),k.type="POST",k.beforeSend=function(n){n.setRequestHeader("X-HTTP-Method-Override",l);};}"GET"!==k.type&&!Y.emulateJSON&&(k.processData=!1);return X.ajax(Z.extend(k,m));};Y.wrapError=function(g,f,k){return function(m,l){l=m===f?l:m;g?g(f,l,k):f.trigger("error",f,l,k);};};var c=function(){},h=function(g,f,l){var k;k=f&&f.hasOwnProperty("constructor")?f.constructor:function(){g.apply(this,arguments);};Z.extend(k,g);c.prototype=g.prototype;k.prototype=new c;f&&Z.extend(k.prototype,f);l&&Z.extend(k,l);k.prototype.constructor=k;k.__super__=g.prototype;return k;},T=function(g,f){return !g||!g[f]?null:Z.isFunction(g[f])?g[f]():g[f];},J=function(){throw Error('A "url" property or function must be specified');};}).call(this);
/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.0 - 2013-06-11
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2013 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
;if(!jQuery.support.cors&&jQuery.ajaxTransport&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i;var getOrPostRegEx=/^get|post$/i;var sameSchemeRegEx=new RegExp("^"+location.protocol,"i");var htmlRegEx=/text\/html/i;var jsonRegEx=/\/json/i;var xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(e,d,c){if(e.crossDomain&&e.async&&getOrPostRegEx.test(e.type)&&httpRegEx.test(e.url)&&sameSchemeRegEx.test(e.url)){var b=null;var a=(d.dataType||"").toLowerCase();return{send:function(l,k){b=new XDomainRequest();if(/^\d+$/.test(d.timeout)){b.timeout=d.timeout;}b.ontimeout=function(){k(500,"timeout");};b.onload=function(){var g="Content-Length: "+b.responseText.length+"\r\nContent-Type: "+b.contentType;var f={code:200,message:"success"};var o={text:b.responseText};try{if(a==="html"||htmlRegEx.test(b.contentType)){o.html=b.responseText;}else{if(a==="json"||(a!=="text"&&jsonRegEx.test(b.contentType))){try{o.json=jQuery.parseJSON(b.responseText);}catch(m){f.code=500;f.message="parseerror";}}else{if(a==="xml"||(a!=="text"&&xmlRegEx.test(b.contentType))){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=false;try{n.loadXML(b.responseText);}catch(m){n=undefined;}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length){f.code=500;f.message="parseerror";throw"Invalid XML: "+b.responseText;}o.xml=n;}}}}catch(h){throw h;}finally{k(f.code,f.message,o,g);}};b.onprogress=function(){};b.onerror=function(){k(500,"error",{text:b.responseText});};var j="";if(d.data){j=(jQuery.type(d.data)==="string")?d.data:jQuery.param(d.data);}b.open(e.type,e.url);b.send(j);},abort:function(){if(b){b.abort();}}};}});}hitta.mapPage.Page=Class.extend({init:function(a){jq("html").removeClass("ghost-scroll");this.hasSmallZoomControl=a&&a.hasSmallZoomControl!==undefined?a.hasSmallZoomControl:false;this.container=jq("#hmap-container");this.mapManager=new Hitta.Map.MapManager(this.container,{hasSmallZoomControl:this.hasSmallZoomControl});hitta.mapPage.page=this;},activate:function(){this.mapManager.activate();this.disableMouseWheelZoomForFrames();},disablePanControl:function(){if(this.mapManager.panControl!==undefined){this.mapManager.panControl.disable();}},disableMouseWheelZoomForFrames:function(){var a=this.mapManager.options;if(top!==self&&(a!==undefined&&a.wheelzoom!=="true")){this.mapManager.map.disableMouseWheelZoom();}},disableMapTypeControl:function(){jq("#map-type-toolbar").hide();},disableZoomBarControl:function(){jq("#HZoomControl").hide();},addDefaultZoomBarControl:function(){this.mapManager.addDefaultZoomBarControl();},addSmallZoomBarControl:function(){this.mapManager.addSmallZoomBarControl();}});hitta.mapPage.PrintMap=Class.extend({mapIsAdjusted:false,init:function(a){this.options=a;this.mapManager=hitta.mapPage.page.mapManager;this.poiManager=this.mapManager.managers.poi;},print:function(){this.removeElements();if(!this.mapIsAdjusted){this.adjustMap();}this.redrawHitlist();this.addElements();if(hitta.hash.print!="delayed"){window.setTimeout(function(){window.print();},1000);}},removeElements:function(){jq("#map-header").css("display","none");jq("#map-navigation").css("display","none");jq("#HZoomControl").css("display","none");if(this.poiManager.poisRetrieved){jq(".floating-toolbar-container").removeClass("visible");}else{var a=HEvent.addListener(HPOIManager,HPOIManager.EVENT_POIS_RETRIEVED,function(){jq(".floating-toolbar-container").removeClass("visible");HEvent.removeListener(a);});}},addElements:function(){if(hitta.hash.print=="delayed"){this.addInstructions();}},addInstructions:function(){var c=jq("<div id='topbox'/>");c.css({width:jq("#hmap-container").width(),height:"70px",position:"relative"});var a=jq("<div/>").append('Justera kartan tills du är nöjd med kartbilden och klicka sedan på "Skriv ut".');a.css({width:"400px",height:"45px",border:"2px solid green",padding:"5px","line-height":"20px",position:"absolute",left:"50%","margin-left":"-200px","margin-top":"5px"});var b=jq("<input type='button' value='Skriv ut' />");b.css({width:"75px","float":"right","margin-right":"10px"});b.click(function(){window.print();});a.append(b);c.append(a);c.insertBefore(jq("#mapContainer"));},adjustMap:function(){var d=jq("#hmap-container");var b=d.height()-550;var c=d.width()-550;var a={width:"550px",height:"550px"};var f={"margin-left":-(c/2)+"px","margin-top":-(b/2)+"px"};jq("body").css("overflow","auto");jq("#hmap-container").css(a);if(jq.browser.msie!==true||jq.browser.version=="7.0"){jq("#mapContainer div img").css(f);if(this.poiManager.poisRetrieved){jq(".hmap-element div div").css(f);}else{var e=HEvent.addListener(HPOIManager,HPOIManager.EVENT_POIS_RETRIEVED,function(){jq(".hmap-element div div").css(f);HEvent.removeListener(e);});}jq(".hmap-element div div div").css(f);}this.mapIsAdjusted=true;},redrawHitlist:function(){var l=this;var h=this.options.resultManager;var c=h.resultContainer;var b=jq(jq(".hit-list")[0]);var d=null;if(jq(".hit-list").length>1){d=jq(jq(".hit-list")[1]);}else{d=jq("<div></div>");d.css=b.css;b.parent().append(d);}if(c!==null){c.setWidth(600);jq("#search-result-container").css({top:450,left:0});jq(".paging").css("display","none");jq(".h-container-body-head").css("display","none");jq(".hit-list").css({width:"300px"});d.css({position:"absolute",top:"0px","margin-top":"10px",left:"50%"});}var a=jq(".header")[0];var k=jq(".header")[1];if(jq(".person-header-icon").length==1){Hitta.Common.replaceSprite(".person-header-icon");}if(jq(".company-header-icon").length==1){Hitta.Common.replaceSprite(".company-header-icon");}if(jq(".location-header-icon").length==1){Hitta.Common.replaceSprite(".location-header-icon");}var m=b.find("li").clone();var f=d.find("li").clone();jq(".header").remove();jq(".h-container").find("*").css({border:"0",background:"none"});jq(".h-container-body-content").css({overflow:"show",height:"500"});b.find("li").remove();d.find("li").remove();var e=b;var g=0;try{m.each(function(o,q){if(o===0){e.append(a);}var n=new Hitta.Map.Company(h.companyResult.hits[o],o);n.format();var p=l.createAddressElement(n,o);jq(q).append(p);e.append(q);if(o>8){e=d;}if(o+1==m.length){jq(q).css("margin-bottom","10px");}g=o;});f.each(function(n,q){if(n===0){e.append(k);}var p=new Hitta.Map.Person(h.personResult.hits[n],n);p.format();var o=l.createAddressElement(p,n);jq(q).append(o);e.append(q);if(n+g+1>7){e=d;}});}catch(j){}},addCloseLink:function(){var a=jq("<div id='closeLink' />");a.css({position:"absolute",top:"20px",left:"580px",width:"150px",height:"50px",border:"solid 1px black","background-color":"#efefef"});a.html("Stäng");a.click(function(){location.reload(true);});jq("body").append(a);},createAddressElement:function(f,d){var a=f.address;if(f!==undefined&&a.name!==undefined){var c=jq("<span />");c.css({display:"block",position:"relative",left:"25px","font-size":"0.9em","line-height":"15px","margin-bottom":"5px"});var b=d+" "+a.name||"";var e=a.number!==undefined?" "+a.number+", ":"";var g=a.city||"";c.append(b+e+g);return c;}else{}}});var VIEWS=VIEWS||{};VIEWS.StreetviewSplitter=Backbone.View.extend({id:"splitter",bindedAdjustHeight:null,minPosition:100,maxPosition:null,initialize:function(){this.streetviewManager=this.options.streetviewManager;this.container=this.options.container;this.conf=hitta.common.Config.streetview.horizontal.init;this.partofcontainer=this.streetviewManager.DEFAULT_HEIGHT;this.mapContainer=$("#"+this.streetviewManager.HMAP_ELEMENT_ID);this.assignDraggable();this.bindEvents();},setMaxPosition:function(){this.maxPosition=$("#mapContainer").height()-100;},bindEvents:function(){this.bindedAdjustHeight=_.bind(this.adjustHeight,this);$(window).on("resize",this.bindedAdjustHeight);},dragging:function(){this.updateViewSize(this.$el.position().top);this.adjustHeight();},updateViewSize:function(a){this.partofcontainer=(a/this.streetviewManager.getContainerHeight());},getHeight:function(){return this.$el.height();},setSplitterTopPosition:function(a){this.$el.css({top:"1px"});},adjustHeight:function(){var c=this.streetviewManager.getContainerHeight();var b=c*this.partofcontainer;var a=(c-b);var d=this.getHeight();this.mapContainer.css({height:a-d+"px"});this.streetviewManager.setSize(b,this.streetviewManager.getContainerWidth());this.streetviewManager.adjustHeight();this.setSplitterTopPosition();this.assignDraggable();},assignDraggable:function(){this.setMaxPosition();this.$el.draggable({axis:"y",stop:_.bind(this.dragging,this),containment:[null,this.minPosition,null,this.maxPosition]});},unload:function(){this.$el.hide();$(window).off("resize",this.bindedAdjustHeight);},render:function(){this.$el.insertAfter(this.container);this.$el.show();this.adjustHeight();}});var VIEWS=VIEWS||{};VIEWS.StreetviewManager=Backbone.View.extend({STREETVIEW_ELEMENT_ID:"StreetviewArea",STREETVIEW_CONTAINER_ELEMENT_ID:"streetview-container",HMAP_ELEMENT_ID:"hmap-container",DEFAULT_HEIGHT:0.63,isLoaded:false,hmap:null,manager:null,viewCoordinator:null,streetViewContainer:null,mapContainer:null,initialize:function(){this.manager=this.options.mapManager;this.hmap=this.manager.map;this.streetViewContainer=$("#"+this.STREETVIEW_CONTAINER_ELEMENT_ID);this.streetViewArea=$("<div/>",{id:this.STREETVIEW_ELEMENT_ID});this.streetViewArea.attr("tabindex","0");this.streetViewContainer.append(this.streetViewArea);this.mapContainer=jq("#"+this.HMAP_ELEMENT_ID);this.setSize(this.getContainerHeight()*this.DEFAULT_HEIGHT,this.getContainerWidth());},load:function(){if(this.viewerNotCreated()){this.setupMap();this.embedStreetViewer();}HEvent.trigger(this.manager.mapTypeControl,HMapTypeControl.EVENT_ACTIVATE);},setupMap:function(){this.manager.panControl.disable();jq(this.hmap.getContainer()).css({bottom:0,top:"auto",height:this.getContainerHeight()*this.DEFAULT_HEIGHT});},viewerNotCreated:function(){return this.viewCoordinator===null;},unload:function(){if(this.viewCoordinator){this.viewCoordinator.remove();this.viewCoordinator=null;}if(this.hSplit){this.hSplit.unload();this.hSplit.remove();this.hSplit=null;}this.unembedView();this.mapContainer.css({height:this.getContainerHeight()+"px"});this.hmap.checkResize();if(this.mapAvatar){this.mapAvatar.remove();this.mapAvatar=null;}this.isLoaded=false;},embedStreetViewer:function(){this.streetViewContainer.show();this.start();},start:function(){this.createViewCoordinator();if(this.viewCoordinator.isLoaded){this.initMapAvatar();this.createViewSplitter();}this.isLoaded=true;},createViewSplitter:function(){this.hSplit=this.hSplit||new VIEWS.StreetviewSplitter({container:this.streetViewContainer,streetviewManager:this});this.hSplit.render();},createViewCoordinator:function(){this.viewCoordinator=this.viewCoordinator||new VIEWS.StreetViewCoordinator({viewerElementId:this.STREETVIEW_ELEMENT_ID});},initMapAvatar:function(){var a,b;if(hitta.hash.center){a=HPointRT90.fromHash(hitta.hash.center);b=parseFloat(hitta.hash.heading)||0;}var c=a||this.hmap.getCenter();this.mapAvatar=new VIEWS.StreetViewMapAvatar({hmap:this.hmap,center:c,coordinator:this.viewCoordinator,heading:b});},unembedView:function(){this.streetViewContainer.hide();$("#"+this.STREETVIEW_ELEMENT_ID).html("");},setSize:function(a,b){this.streetViewArea.height(a);this.streetViewArea.width(b);},adjustHeight:function(){if(this.viewCoordinator&&this.viewCoordinator.viewer){this.viewCoordinator.viewer.invalidateSize();}this.hmap.checkResize();},getContainerHeight:function(){return jq("body").innerHeight();},getContainerWidth:function(){return jq("body").innerWidth();}});var StreetViewCalc={calculateHeading:function(c,b){var a=Math.atan2(c.east-b.east,c.north-b.north);return(180+180*a/Math.PI);},degreeToRadians:function(a){return Math.PI/180*a;},radiansToDegree:function(a){return 180/Math.PI*a;},calculateHeadingIndex:function(a){return Math.round(a/45)%8;}};function StreetViewDotsMapProvider(){this.elements=[];}StreetViewDotsMapProvider.prototype=new HMapProvider();StreetViewDotsMapProvider.DOT_TILE_BASE_URL=HMapConfig.Path.STREETVIEW_DOT_TILE_BASE_URL;StreetViewDotsMapProvider.prototype.initTiles=function(d){this.hmap=d;var e=this.hmap.getPaneMap();var a=this.hmap.getTileCount();this.elements.length=a;this.container=e;for(var c=0;c<a;c++){var b=document.createElement("img");HMapHelpers.applyStyle([b],{position:"absolute",top:-HTile.TILE_WIDTH+"px",left:-HTile.TILE_HEIGHT+"px",width:HTile.TILE_WIDTH+"px",height:HTile.TILE_HEIGHT+"px"});this.elements[c]=b;e.appendChild(b);}};StreetViewDotsMapProvider.prototype.updateTile=function(d,c,b,a){this.elements[d].src=StreetViewDotsMapProvider.DOT_TILE_BASE_URL+c+"/"+b+"/"+a;};var VIEWS=VIEWS||{};VIEWS.StreetViewCoordinator=Backbone.View.extend({errorMessages:{"error.no-position-found":"Det finns ingen gatubild på denna position, flytta markören till ett område på kartan med blå markering.","render.not.found":"Ingen renderering kunde hittas","flash.not.installed":"Flash kunde inte startas, det verkar inte vara installerat","browser.not.supported":"Den webläsare du använder stöds tyvärr inte av gatubildstjänsten"},initialize:function(){this.isLoaded=false;this.viewerElementId=this.options.viewerElementId;this.streetviewPositionError=$(".streetview-errors");this.streetViewArea=$("div#StreetviewArea");if(this.checkForOldBrowsers()){this.showErrorMessage(undefined,"browser.not.supported");return;}try{this.initViewer();this.setupViewerEvents();this.isLoaded=true;}catch(a){this.showErrorMessage(undefined,a.message);}},initViewer:function(){CCLMD.setPath(HMapConfig.Path.STREETVIEW_SERVICE_URL);this.viewer=CCLMD.createPanoramaViewer(this.viewerElementId);},setupViewerEvents:function(){this.viewer.getEvents().on("streetview-error",_.bind(this.showErrorMessage,this));this.viewer.getEvents().on("position-fetched",_.bind(this.hideErrorMessage,this));},remove:function(){if(this.viewer){this.viewer.getEvents().off("error.no-position-found");this.viewer.getEvents().off("position-fetched");this.viewer=null;CCLMD.destroyPanoramaViewer(this.viewerElementId);}this.isLoaded=false;},getViewerHeading:function(){return StreetViewCalc.radiansToDegree(this.viewer.getYaw());},navigateTo:function(b,a){this.viewer.openNearestImage(b.getLng(),b.getLat());this.turnTo(a);},zoomOut:function(){this.viewer.setVFov(this.viewer.getVFov()+0.1);},zoomIn:function(){this.viewer.setVFov(this.viewer.getVFov()-0.1);},turnTo:function(a){this.viewer.setYaw(StreetViewCalc.degreeToRadians(a));},showErrorMessage:function(a,b){this.streetviewPositionError.html(this.errorMessages[b]);this.streetviewPositionError.show();this.streetViewArea.addClass("inactive");},hideErrorMessage:function(a){this.streetviewPositionError.hide();this.streetViewArea.removeClass("inactive");},checkForOldBrowsers:function(){return($.browser.msie!==undefined&&$.browser.version<8);}});var VIEWS=VIEWS||{};VIEWS.StreetviewControl=Backbone.View.extend({id:"streetviewControl",tagName:"li",initialize:function(){this.mapManager=this.options.mapManager;this.template=_.template('<span id="streetviewbuttonOpen" class="map-type-buttons-sprite"><a>Gatubild</a></span> <span id="streetviewbuttonClose" class="map-type-buttons-sprite"><a>Stäng gatubild</a></span>');this.$el.append(this.template);this.streetviewManager=new VIEWS.StreetviewManager({mapManager:this.mapManager});hitta.common.Event.register(hitta.common.Events.STREETVIEW_INIT,this,this.startStreetview);this.splitMapContainer=$("#splitmap-container");},events:{"click #streetviewbuttonOpen":"startStreetview","click #streetviewbuttonClose":"closeStreetview"},bindElements:function(){this.streetviewbuttonOpen=$("#streetviewbuttonOpen");this.streetviewbuttonClose=$("#streetviewbuttonClose");this.maptoolbar=$("#map-mode-toolbar");var a=$("#share");this.printLink=a.find("#print-out");this.navigationSeparator=a.find(".navigation-separator");},adjustElementForStreetViewMode:function(){this.printLink.hide();this.navigationSeparator.hide();this.streetviewbuttonOpen.hide();this.maptoolbar.hide();this.streetviewbuttonClose.show();},startStreetview:function(){this.streetviewManager.load();this.adjustElementForStreetViewMode();this.splitMapContainer.addClass("streetview-activated");hitta.common.Event.trigger(hitta.common.Events.TOOLBAR_HIDE_ALL,{collapseMenu:true});hitta.hash.viewtype="streetview";hitta.hash.place();},adjustElementForMapViewMode:function(){this.streetviewbuttonOpen.show();this.streetviewbuttonClose.hide();this.printLink.show();this.maptoolbar.show();this.navigationSeparator.show();},closeStreetview:function(){this.streetviewManager.unload();this.adjustElementForMapViewMode();this.splitMapContainer.removeClass("streetview-activated");hitta.hash.viewtype="";hitta.hash.place();},render:function(){var a=$(".edge-last");this.$el.insertBefore(a);this.$el.addClass("last");$("#maptype-satellite").removeClass("last");$("#HMapTypeControl").addClass("streetview");this.bindElements();this.streetviewbuttonClose.hide();}});var VIEWS=VIEWS||{};VIEWS.StreetViewMapAvatar=Backbone.View.extend({AVATAR_IMG_BASE_URL:HMapConfig.Path.STREETVIEW_AVATAR_IMAGE_BASE_URL,AVATAR_IMG_FILE_EXT:".png",AVATAR_DEFAULT_HEADING:null,AVATAR_BEAM_STROKE_COLOR:null,AVATAR_BEAM_STROKE_OPACITY:null,AVATAR_BEAM_STROKE_WEIGHT:null,AVATAR_BEAM_FILL_COLOR:null,AVATAR_BEAM_FILL_OPACITY:null,AVATAR_BEAM_LENGTH:null,AVATAR_BEAM_ANGLE_DEGREES:null,AVATAR_BEAM_ANGLE:null,AVATAR_BEAM_ARC_POINTS:null,initialize:function(){this.initCenter=this.options.center;this.hmap=this.options.hmap;this.coordinator=this.options.coordinator;this.viewer=this.coordinator.viewer;this.shouldRegisterClick=true;this.AVATAR_DEFAULT_HEADING=this.options.heading;this.AVATAR_BEAM_STROKE_COLOR="255, 255, 255";this.AVATAR_BEAM_STROKE_OPACITY=0.8;this.AVATAR_BEAM_STROKE_WEIGHT=2;this.AVATAR_BEAM_FILL_COLOR="20, 100, 220";this.AVATAR_BEAM_FILL_OPACITY=0.4;this.AVATAR_BEAM_LENGTH=55;this.AVATAR_BEAM_ANGLE_DEGREES=90;this.AVATAR_BEAM_ANGLE=StreetViewCalc.degreeToRadians(this.AVATAR_BEAM_ANGLE_DEGREES);this.AVATAR_BEAM_ARC_POINTS=this.AVATAR_BEAM_ANGLE_DEGREES/10;this.initMap();this.isLoaded=true;},initMap:function(){var b=this.hmap;b.disableDoubleClickZoom();this.dotsLayer=new StreetViewDotsMapProvider();b.getMapProviderManager().add(this.dotsLayer);this.preloadImages();this.avatar=new HMarker(this.initCenter,this.createAvatarIcon());this.avatar.enableDragging();this.avatarData={};this.avatarData.position=this.avatar.getRT90Point();this.avatarData.heading=this.AVATAR_DEFAULT_HEADING;var a=new HIcon(this.AVATAR_IMG_BASE_URL+"beamdrag.png");a.anchor=new HPoint(35,35);a.size=new HSize(100,100);this.beamDrag=new HMarker(this.initCenter,a);this.bindEvents();b.addOverlay(this.beamDrag);b.addOverlay(this.avatar);this.navigateToRT90(this.initCenter,this.avatarData.heading);},preloadImages:function(){this.avatarImages=[];for(var b=0;b<9;b++){var a=new Image();a.src=this.AVATAR_IMG_BASE_URL+"avatar"+b+this.AVATAR_IMG_FILE_EXT;this.avatarImages[b]=a;}},createAvatarIcon:function(){var a=new HIcon(this.AVATAR_IMG_BASE_URL+"avatar0"+this.AVATAR_IMG_FILE_EXT);a.anchor=new HPoint(12,40);a.infoBoxAnchorTop=new HPoint(9,-2);a.infoBoxAnchorBottom=new HPoint(9,40);a.size=new HSize(25,48);return a;},bindEvents:function(){this.listeners=[];this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_MOVE,_.bind(this.mapMove,this)));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_CLICK,_.bind(this.mapClick,this)));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_ZOOM,_.bind(this.updateBeam,this)));this.listeners.push(HEvent.addListener(this.avatar,HMarker.EVENT_DRAG_START,_.bind(this.avatarDragStart,this)));this.listeners.push(HEvent.addListener(this.avatar,HMarker.EVENT_DRAG_END,_.bind(this.avatarDragEnd,this)));hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_LOCATION,this,this.updatePositionAfterUpdatedLocation);var a=this.beamDrag.getElement();this.listeners.push(HEvent.addDomListener(a,"mousedown",_.bind(this.beamDragStart,this)));this.listeners.push(HEvent.addDomListener(this.hmap.map,"mousemove",_.bind(this.beamDragMove,this)));this.listeners.push(HEvent.addDomListener(this.hmap.map,"mouseup",_.bind(this.beamDragEnd,this)));this.bindedUpdateBeams=_.bind(this.updateBeam,this);hitta.common.Event.register(hitta.common.Events.MAP_RESIZED,this,this.bindedUpdateBeams);this.viewer.getEvents().on("opennearestend",_.bind(this.updatePositionAfterMovedStreetView,this));this.viewer.getEvents().on("viewchanged",_.bind(this.updateHeadingWhenChanging,this));},updatePositionAfterMovedStreetView:function(){var a=this.viewer.getRecording()?this.viewer.getRecording().position:null;if(a){var b=a.elements[0];var c=a.elements[1];this.updateAvatarPosition(new HPointLatLng(c,b));}},updatePositionAfterUpdatedLocation:function(){this.updateViewerPosition(this.hmap.getCenter());},updateHeadingWhenChanging:function(a,c){var b=StreetViewCalc.radiansToDegree(c);this.drawBeam(b);hitta.hash.heading=b;hitta.hash.place();},remove:function(){HEvent.removeListeners(this.listeners);hitta.common.Event.unregister(hitta.common.Events.MAP_RESIZED,this,this.bindedUpdateBeams);this.viewer.getEvents().off("viewchanged");this.viewer.getEvents().off("opennearestend");this.hmap.removeOverlay(this.beamDrag);this.hmap.removeOverlay(this.avatar);this.hmap.getMapProviderManager().remove(this.dotsLayer);this.hmap.enableDoubleClickZoom();this.clearBeam();this.isLoaded=false;},navigateToRT90:function(a,c){var b=this.hmap.fromRT90ToLatLng(a);this.coordinator.navigateTo(b,c);},navigateToEncoded:function(a){console.log("navigateToEncoded",a);},updateAvatarPosition:function(a){this.avatarData.position=this.hmap.fromLatLngToRT90(a);this.setAvatarPosition(this.avatarData.position);this.hmap.setCenter(this.avatarData.position);hitta.hash["var"]="";hitta.hash.place();},setAvatarPosition:function(a){this.avatar.setRT90Point(a);this.beamDrag.setRT90Point(a);hitta.hash.center=a.toHash();hitta.hash.place();},updateBeam:function(){this.drawBeam(this.coordinator.getViewerHeading());},updateAvatarImage:function(b){var a=StreetViewCalc.calculateHeadingIndex(b);this.avatar.setImage(this.avatarImages[a].src);},drawBeam:function(l){this.updateAvatarImage(l);var e=this.hmap.getPolyLayer();var k=e.getCtxVolatile();e.clear(k);var h=this.avatar.getRT90Point();var a=this.hmap.fromRT90toContainerPixel(h);var d=StreetViewCalc.degreeToRadians(l);var j=[];j.push(a);for(var c=0;c<=this.AVATAR_BEAM_ARC_POINTS;c++){var b=d+(this.AVATAR_BEAM_ANGLE*c/this.AVATAR_BEAM_ARC_POINTS)-(this.AVATAR_BEAM_ANGLE/2);var g=Math.sin(b)*this.AVATAR_BEAM_LENGTH;var f=-Math.cos(b)*this.AVATAR_BEAM_LENGTH;j[c+1]=new HPoint(g+a.x,f+a.y);}j[j.length]=j[0];k.save();e.setStyle(k,{fillColor:this.AVATAR_BEAM_FILL_COLOR,fillOpacity:this.AVATAR_BEAM_FILL_OPACITY,strokeColor:this.AVATAR_BEAM_STROKE_COLOR,strokeOpacity:this.AVATAR_BEAM_STROKE_OPACITY,weight:this.AVATAR_BEAM_STROKE_WEIGHT});e.drawPixelPoly(k,j,true);e.drawPixelPoly(k,j,false);k.restore();},clearBeam:function(){var a=this.hmap.getPolyLayer();a.clear(a.getCtxVolatile());},updateViewerPosition:function(a){var b=this.hmap.fromRT90ToLatLng(a);this.coordinator.navigateTo(b,this.coordinator.getViewerHeading());},avatarDragStart:function(){this.clearBeam();this.avatar.setImage(this.avatarImages[8].src);},preventClickWhenDraggingStop:function(){var a=this;this.shouldRegisterClick=false;setTimeout(function(){a.shouldRegisterClick=true;},100);},avatarDragEnd:function(a){this.preventClickWhenDraggingStop();this.beamDrag.setRT90Point(a);this.updateViewerPosition(a);},mapMove:function(){if(this.isLoaded){this.drawBeam(this.coordinator.getViewerHeading());}},mapClick:function(a){if(this.shouldRegisterClick){this.beamDrag.setRT90Point(a);this.updateViewerPosition(a);}},beamDragStart:function(a){var b=a||window.event;this.isDraggingBeam=true;this.shouldRegisterClick=false;this.beamDragAvatarCenter=this.avatar.getContainerPixelPoint();this.coordinator.turnTo(this.getBeamDragAngle(b));return HEvent.stopEvent(b);},beamDragMove:function(a){if(this.isDraggingBeam){var b=a||window.event;this.coordinator.turnTo(this.getBeamDragAngle(b));return HEvent.stopEvent(b);}return true;},beamDragEnd:function(a){if(this.isDraggingBeam){var b=a||window.event;this.isDraggingBeam=false;this.preventClickWhenDraggingStop();hitta.hash.place();return HEvent.stopEvent(b);}return true;},getBeamDragAngle:function(c){var d=HMapHelpers.getMousePosition(c);var b=this.hmap.globals;var a=Math.atan2(this.beamDragAvatarCenter.x-(d.x-b.mapPosition.x),-(this.beamDragAvatarCenter.y-(d.y-b.mapPosition.y)));return 180+180*a/Math.PI;}});Hitta.Map.SearchForm={what:null,where:null,bounds:null,searchMode:null,groupId:null,page:null,vkiid:null,submitButton:null,isActive:function(){var a=(this.what.length>0);var b=(this.where.length>0);return a&&b;},setWhat:function(a){jq("#what").val(a);},setWhere:function(a){jq("#where").val(a);},setBounds:function(a){this.bounds=a;},setSearchMode:function(a){this.searchMode=a;},setGroupId:function(a){this.groupId=a;},setVkiid:function(a){this.vkiid=a;},setFocus:function(){if(this.what.length!==0){this.what.get(0).focus();}},setPage:function(a){this.page=a;},notSet:function(){return this.what.val()===""&&this.where.val()==="";},locationSet:function(){return(this.whatEncoded()===""||this.whatEncoded()==="-")&&this.whereEncoded()!==""&&this.whereEncoded()!=="-";},mixedSet:function(){return this.whatEncoded()!==""&&this.whatEncoded()!=="-"&&this.whereEncoded()!==""&&this.whereEncoded()!=="-";},boundarySet:function(){return this.what.val()!==""&&this.where.val()==="";},groupSet:function(){return(this.groupId!==null&&this.groupId!=="");},boundsSet:function(){return(this.bounds!==null&&this.bounds!=="");},vkiidSet:function(){return(this.vkiid!==null&&this.vkiid!=="");},searchModeSet:function(){return(this.searchMode!==undefined&&this.searchMode!==null&&this.searchMode!=="");},whatEncoded:function(){var a=jq.trim(this.what.val());if(a===""){a="-";}return Hitta.UrlSegmentFormatter.formatForSearch(a);},whereEncoded:function(){var a=jq.trim(this.where.val());if(a===""){if(hitta.hash["var"]){a=decodeURIComponent(hitta.hash["var"]);}else{a="-";}}return Hitta.UrlSegmentFormatter.formatForSearch(a);},onClearForm:function(){this.what.val("");this.where.val("");},register:function(){},init:function(){this.what=jq("#what");this.where=jq("#where");this.submitButton=jq("#submit");this.register();this.setFocus();},reset:function(){this.what=null;this.where=null;this.searchMode=null;this.groupId=null;this.page=null;this.vkiid=null;this.submitButton=null;}};Hitta.Map.GenericResult=Class.extend({CLASS_NAME:"Hitta.Map.GenericResult",setPhones:function(){this.addPhones(this.hit.phone);},addPhones:function(b){if(b!==undefined&&jq.isArray(b)&&b.length>0){for(var c=0;c<b.length;c++){var a=[hitta.common.language.get("map.marker.popup.phone"),hitta.common.language.get("map.marker.popup.mobile"),hitta.common.language.get("map.marker.popup.telefax")];if(jq.inArray(b[c].label,a)>-1){b[c].mapLabel=b[c].label;}else{b[c].mapLabel=jq.inArray(b[c].areaCode,["070","072","073","076"])>-1?hitta.common.language.get("map.marker.popup.mobile"):hitta.common.language.get("map.marker.popup.phone");}}if(!this.phones){this.phones=[];}jq.merge(this.phones,b);}},getDetailPageLink:function(){if(!this.detailPage){return null;}var d=Hitta.Map.SearchForm!==undefined?Hitta.Map.SearchForm.whatEncoded():"";var a=Hitta.Map.SearchForm!==undefined?Hitta.Map.SearchForm.whereEncoded():"";var e=[];if(d!=="-"&&a!=="-"){e.push("vad=");e.push(d);e.push("&var=");e.push(a);}else{if(d!=="-"){e.push("vad=");e.push(d);}else{if(a!=="-"){e.push("var=");e.push(a);}}}var b={name:Hitta.UrlSegmentFormatter.formatAndLowerCase(this.detailPage.display),location:Hitta.UrlSegmentFormatter.formatAndLowerCase(this.detailPage.city),id:this.detailPage.vkiid};var c=Hitta.Router.reverse(this.detailPage.action,b);if(e.length>0){c+=(c.indexOf("?")>-1)?"&":"?";c+=e.join("");}return c;},hasProduct:function(a){if(!this.products){return false;}return this.products[a.id]!==undefined;},getRouteLink:function(){if(!this.address||!this.address.coordinate){return null;}var a="";if(this.address.street&&this.address.street!==""){a+=this.address.street+" ";}if(this.address.number&&this.address.number!==""){a+=this.address.number+" ";}if(this.address.zipcode&&this.address.zipcode!==""){a+=this.address.zipcode+" ";}if(this.address.city&&this.address.city!==""){a+=this.address.city;}a=a.replace(/ $/,"");a=a.replace(/ /g,"+");var b="{url}#stop={north}:{east}~RT90|{address}";b=b.replace("{url}",Hitta.Router.reverse(Hitta.Routes.Application_route));b=b.replace("{north}",this.address.coordinate.north);b=b.replace("{east}",this.address.coordinate.east);b=b.replace("{address}",a);return b;}});Hitta.Map.Company=Hitta.Map.GenericResult.extend({CLASS_NAME:"Hitta.Map.Company",init:function(b,a){if(b!==undefined){this.hit=b;this.id=b.id;this.display=b.displayName;}else{this.hit="${hit}";this.id="${id}";this.display="${display}";}this.type="company";this.hasKartPrio=false;this.label="-";if(a!==undefined){this.index=a;this.markerId=this.type+"_"+a;}else{this.index="${index}";this.markerId="${markerId}";}},format:function(){this.setAddresses();this.setPhones();this.setProducts();this.setLinks();this.setDetailPage();return this;},setAddresses:function(){this.address=jq.isArray(this.hit.address)?this.hit.address[0]:this.hit.address;if(this.address&&this.address.coordinate){this.label=this.index+1;this.hMarker=new Hitta.Map.CompanyMarker(this);}},setProducts:function(){var c=this.hit.product||[];this.products={};for(var a=0;a<c.length;a++){var b=c[a];this.products[b.code]=b;}if(this.hasProduct(Hitta.Products.KARTPRIO)){this.xitiImp=[encodeURIComponent(this.display),this.hit.id,Hitta.Products.KARTPRIO.text];this.logoPath=this.getProductImageUrl(this.products[Hitta.Products.KARTPRIO.id]);this.hasKartPrio=true;}if(this.hasProduct(Hitta.Products.KARTPRIO_DELUXE)){this.xitiImp=[encodeURIComponent(this.display),this.hit.id,Hitta.Products.KARTPRIO_DELUXE.text];this.logoPath=this.getProductImageUrl(this.products[Hitta.Products.KARTPRIO_DELUXE.id]);}if((jq("#company").size()>0)&&(jq("#larger-map").size()>0)){jq("#larger-map").attr("onclick","return xt_adc(this,'PUB-["+this.hit.id+"]-[visa-pa-karta]-["+encodeURIComponent(this.display)+"]-["+encodeURIComponent("Större karta")+"]');");}},getProductImageUrl:function(b){if(b.image){for(var a=0;a<b.image.length;a++){if(b.image[a].type==="large"){return b.image[a].url;}}}return"";},setLinks:function(){this.links=this.hit.links;},setDetailPage:function(){this.detailPage={display:this.display,city:(this.address!==undefined&&this.address.city!==undefined)?this.address.city:"-",vkiid:this.id,action:Hitta.Routes.DetailController_company};}});Hitta.Map.Person=Hitta.Map.GenericResult.extend({CLASS_NAME:"Hitta.Map.Person",init:function(c,b,a){this.hit=c;this.id=c.id;this.display=c.displayName;this.index=b;this.type="person";this.markerId=this.type+"_"+b;this.hasKartPrio=false;this.label="-";this.activeAddressIndex=a?a:0;},format:function(){this.setAddresses();this.setPhones();this.setDetailPage();this.setProducts();return this;},setProducts:function(){this.products={};},setAddresses:function(){if(jq.isArray(this.hit.address)){this.address=this.hit.address[this.activeAddressIndex];this.addPhones(this.address.phone);}else{this.address=this.hit.address;}if(this.address&&this.address.coordinate){this.label=this.index+1;this.hMarker=new Hitta.Map.PersonMarker(this);}},setDetailPage:function(){this.detailPage={display:this.display,city:(this.address!==undefined&&this.address.city!==undefined)?this.address.city:"-",vkiid:this.id,action:Hitta.Routes.DetailController_person};}});Hitta.Map.Location=Class.extend({});Hitta.Map.Location.prototype={CLASS_NAME:"Hitta.Map.Location",init:function(b,a){this.hit=b;this.id=b.id;this.display=b.displayName;this.index=a;this.type="location";this.markerId=this.type+"_"+a;this.locaionType=b.type;this.label=a+1;if(b.address!==undefined){this.setTypeAddress();}else{this.setTypePoi();}},setTypePoi:function(){this.type=this.hit.type;this.bounds=this.hit.bounds;this.city=this.hit.communityName;var a=this.hit.coordinate;if(a!==undefined){this.poi={};this.poi.coord={east:a.east,north:a.north};this.hMarker=new Hitta.Map.LocationMarker(this);}},setTypeAddress:function(){this.type="ADRESS";var a=this.hit.address;if(a!==undefined){this.address={};this.address.city=a.city;this.address.name=a.street;this.address.number=a.number!==undefined?a.number:"";this.address.zipcode=a.zipcode;var b=a.coordinate;if(b!==undefined){this.address.coord={east:b.east,north:b.north};this.hMarker=new Hitta.Map.LocationMarker(this);}}},getRouteLink:function(){try{var d=this.address?this.address.coord:null;if(d===null){d=this.hit?this.hit.coordinate:null;}if(d===null){return null;}var a="";if(this.address){if(this.address.name&&this.address.name!==""){a+=this.address.name+" ";}if(this.address.number&&this.address.number!==""){a+=this.address.number+" ";}if(this.address.zipcode&&this.address.zipcode!==""){a+=this.address.zipcode+" ";}if(this.address.city&&this.address.city!==""){a+=this.address.city;}}else{if(this.hit){a=this.hit.displayName;}}a=a.replace(/ $/,"");a=a.replace(/ /g,"+");var b="{url}#stop={north}:{east}~RT90|{address}";b=b.replace("{url}",Hitta.Router.reverse(Hitta.Routes.Application_route));b=b.replace("{north}",d.north);b=b.replace("{east}",d.east);b=b.replace("{address}",a);return b;}catch(c){console.log(c);return"getRouteLink generated error";}}};Hitta.Map.TradeById=Hitta.Map.GenericResult.extend({CLASS_NAME:"Hitta.Map.TradeById",init:function(b,a){if(b!==undefined){this.hit=b;this.id=b.id;this.display=b.displayName;}else{this.hit="${hit}";this.id="${id}";this.display="${display}";}this.type="tradebyid";this.label="-";if(a!==undefined){this.index=a;this.markerId=this.type+"_"+a;}else{this.index="${index}";this.markerId="${markerId}";}this.address={};},format:function(){this.setAddresses();this.setLinks();this.setDetailPage();return this;},formatAddress:function(a){this.address.city=a.city||null;this.address.street=a.street||null;this.address.number=a.number||null;this.address.zipcode=a.zipcode||null;if(a.coordinate!==undefined){var b=a.coordinate;this.address.coordinate={east:b.east,north:b.north};this.label=this.index+1;this.hMarker=new Hitta.Map.TradeByIdMarker(this);}this.addPhones(a.phone);},setAddresses:function(){var c=this.hit.address;for(var b=0,a=c.length;b<a;b++){this.formatAddress(c[b]);}},addPhones:function(b){if(b!==undefined&&jq.isArray(b)&&b.length>0){for(var c=0;c<b.length;c++){var a=[hitta.common.language.get("map.marker.popup.phone"),hitta.common.language.get("map.marker.popup.mobile"),hitta.common.language.get("map.marker.popup.telefax")];if(jq.inArray(b[c].label,a)>-1){b[c].mapLabel=b[c].label;}else{b[c].mapLabel=jq.inArray(b[c].areaCode,["070","072","073","076"])>-1?hitta.common.language.get("map.marker.popup.mobile"):hitta.common.language.get("map.marker.popup.phone");}}if(!this.phones){this.phones=[];}jq.merge(this.phones,b);}},setLinks:function(){this.links=this.hit.Link;},setDetailPage:function(){this.detailPage={display:this.display,city:(this.address.city!==undefined)?this.address.city:"-",vkiid:this.id,action:Hitta.Routes.DetailController_company};}});Hitta.Map.Kartprio=Class.extend({});Hitta.Map.Kartprio.prototype={CLASS_NAME:"Hitta.Map.Kartprio",hMarker:null,marker:null,onCloseListener:null,id:null,init:function(a,b){this.hMarker=a;this.marker=a.hMarker;this.id=b;},select:function(){this.marker.openInfoBoxBound();this.hMarker.makeSticky();if(this.marker.xitiImp!==undefined){hitta.statistics.impression(this.marker.xitiImp);delete this.marker.xitiImp;}},close:function(){this.marker.setMode(HMarker.MODE_INFOBOX_HOVER);this.marker.closeInfoBox();},onClose:function(){}};Hitta.Map.KartprioCollection=Class.extend({});Hitta.Map.KartprioCollection.prototype={CLASS_NAME:"Hitta.Map.KartprioCollection",items:[],open:[],keepers:[],init:function(a){if(a!==undefined){this.populateItems(a);}},openRandomly:function(){this.closeAll();this.keepers=this.getKeepers();this.open=this.randomizeOpen(this.keepers,2);this.adjustBoxOrientation();},getKeepers:function(){var b=this;var a=[];jq(this.open).each(function(c,d){jq(b.items).each(function(e,f){if(d.id===f.id){a.push(f);}});});return a;},closeAll:function(){jq(this.open).each(function(a,b){b.close();});},populateItems:function(h){var b=[];for(var e=0,a=h.length;e<a;e++){var f=h[e];if(f.products&&f.products[Hitta.Products.KARTPRIO.id]){var g=h[e].hMarker;var c=h[e].hMarker.hMarker;c.setMode(HMarker.MODE_INFOBOX_HOVER);var d=new Hitta.Map.Kartprio(g,f.id);b.push(d);}}this.items=b;},randomizeOpen:function(e,h){var a=e;var g=this;jq(e).each(function(k,l){var j=g.items.indexOf(l);if(j!==-1){g.items.splice(j,1);}});var f=this.items.length>0?(2-e.length):0;f=Math.min(f,this.items.length);for(var c=0;c<f;c++){var d=Math.floor(Math.random()*this.items.length);var b=this.items[d];a.push(b);this.items.splice(d,1);}jq(a).each(function(j,k){k.select();});return a;},adjustBoxOrientation:function(){if(this.open.length===2){var a=this.open[0].marker.rt90point.north>this.open[1].marker.rt90point.north?1:0;this.open[a].marker.infoBox.defaultOrientation="below";this.open[a].marker.infoBox.adapt("below");}}};Hitta.Map.Views.MapHeader=Class.extend({});Hitta.Map.Views.MapHeader.prototype={CLASS_NAME:"Hitta.Map.Views.MapHeader",init:function(){this.domElement=jq("#map-header");},setType:function(a){this.domElement.addClass(a);},render:function(){return this.domElement;},activate:function(){this.domElement.show();},append:function(a){this.domElement.append(a);},prepend:function(a){this.domElement.prepend(a);}};Hitta.Map.Views.SubmitButton=Hitta.Map.Views.HButton.extend({CLASS_NAME:"Hitta.Map.Views.SubmitButton",init:function(a){this._super(a);jq.extend(this.options,{display:this.getDisplay(),id:"submit-button"});},getDisplay:function(){return'<input type="submit" class="button" id="submit" value="'+hitta.common.language.get("searchbox.submitbutton.value")+'">';},activate:function(){this.controller=new Hitta.Map.Controllers.SubmitButton({id:this.options.id,domElement:this.domElement,display:this.options.display,view:this});this.controller.activate();}});Hitta.Map.Views.SearchBox=Class.extend({});Hitta.Map.Views.SearchBox.prototype={CLASS_NAME:"Hitta.Map.Views.SearchBox",x:null,whereLabelText:hitta.common.language.get("searchbox.label.whatlabel"),whatField:null,whereField:null,whereWidth:0,whatWidth:0,init:function(a){this.type="searchbox";this.domElement=jq("<div>").attr("class","content-container");this.container=a.container;this.searchForm=a.searchForm;this.submitButton=new Hitta.Map.Views.SubmitButton();},render:function(){this.domElement.append(this.tellOthers);var c=jq("<a>").attr({title:"hitta.se",href:Hitta.Router.reverse(Hitta.Routes.Application_index),"class":"main-sprite-map map-logo-sprite"});var d=jq("<form>").attr("id","search");var b=jq("<fieldset>").attr("class","map-map-search-box");b.append("<legend>Sök</legend>");this.whatField=this.createField("What","vad",this.whereLabelText,"företag, namn, sökord, ...");b.append(this.whatField);this.whereField=this.createField("Where","var","Var?","gata, ort, område, plats");b.append(this.whereField);b.append(this.submitButton.render());d.append(b);this.mapSearchBoxContainer=jq("<div>").attr("id","map-search-box-container");this.mapSearchBoxContainer.append(c,d);this.domElement.append(this.mapSearchBoxContainer);return this.domElement;},createField:function(g,c,d,e){var h=jq("<div />");h.addClass("map-search-field");var j=jq("<label></label>");j.attr({"for":g,id:"label"+g});var b=jq("<span></span>");b.addClass("label-text");b.html(d);j.append(b);var a=jq("<span></span>");a.addClass("input-sizer");a.attr({id:g.toLowerCase()+"-input-sizer"});j.append(a);var k=jq("<div />");k.addClass(g.toLowerCase()+"-search-input-container");var f=jq("<input type='text' value='' id='"+g.toLowerCase()+"' name='"+c+"' />");k.append(f);h.append(j);h.append(k);return h;},activate:function(){this.container.setType(this.type);this.container.activate();this.container.append(this.render());this.register();this.controller=new Hitta.Map.Controllers.SearchBox({domElement:this.domElement,searchForm:this.searchForm});this.controller.activate();this.submitButton.activate();this.whereWidth=jq("#where").width();this.whatWidth=jq("#what").width();this.resizeControls();var a=window.hitta||{};a.autoComplete=new HAutoComplete();var b=this;},addInstructions:function(){if(this.instructions===undefined||this.instructions===null){this.instructions=new HSearchBoxInstructions({what:this.domElement.find("#what")[0],where:this.domElement.find("#where")[0],whatInstructions:"företag, namn, sökord, nr",whereInstructions:"gata, ort, område, plats"});}},register:function(){jq("#what, #where").keydown(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation();}});var a=this;jq(window).resize(function(){window.clearTimeout(a.x);a.x=window.setTimeout(function(){a.resizeControls();},50);});hitta.common.Event.register(hitta.common.Events.MAP_ALL_DONE,this,this.addInstructions);},resizeControls:function(){var b=jq(window).width();var f=930;var a=630;var e=590;var d=53;if(b<f){var h=f-b;var g=b>=a?this.whereWidth-h/2:d;var c=b>=a?this.whatWidth-h/2:d;jq("#where").animate({width:g},50);jq("#where-input-sizer").animate({width:g},50);jq("#what").animate({width:c},50);jq("#what-input-sizer").animate({width:c},50);}else{if(b>=f){jq("#where").width(this.whereWidth);jq("#what").width(this.whatWidth);jq("#where-input-sizer").width(this.whereWidth);jq("#what-input-sizer").width(this.whatWidth);}}if(b<a){jq("#labelWhat span.label-text").html(hitta.common.language.get("searchbox.label.whatlabel.compact"));jq("div.what-search-input-container").addClass("short");this.instructions.hide("what");this.instructions.hide("where");}else{jq("#labelWhat span.label-text").html(this.whereLabelText);jq("div.what-search-input-container").removeClass("short");if(this.instructions!==undefined){this.instructions.show("what");this.instructions.show("where");}}if(b<e){jq("#submit").attr("value","Visa");jq("#submit").addClass("compact");}else{jq("#submit").attr("value",hitta.common.language.get("searchbox.submitbutton.value"));jq("#submit").removeClass("compact");}}};Hitta.Map.Views.Logo=Class.extend({});Hitta.Map.Views.Logo.prototype={CLASS_NAME:"Hitta.Map.Views.Logo",init:function(a){this.type="logo";this.domElement=jq("<div>").attr("class","content-container");this.container=a.container;},render:function(){this.linkContainer=jq("<a>").attr({href:Hitta.Router.reverse(Hitta.Routes.Application_index),title:"hitta.se",target:"_blank"});this.logoElement=jq("<img>").attr({alt:"Karta - hitta.se",src:Hitta.Router.fromPublic("images/web/map/map-logo-2x.png"),width:"46px",height:"47px"});this.linkContainer.append(this.logoElement);this.domElement.append(this.linkContainer);return this.domElement;},activate:function(){this.container.append(this.render());},hide:function(){this.domElement.hide();}};Hitta.Map.Controllers.SubmitButton=Hitta.Map.Controllers.HButton.extend({CLASS_NAME:"Hitta.Map.Controllers.SubmitButton",init:function(a){this._super(a);jq.extend(this,a);},toggle:function(e,d){var a=this.view;var b=a.cssClasses[e];var c=a.cssClasses[d];a.buttonLeft.removeClass(b.left);a.buttonBody.removeClass(b.center);a.buttonRight.removeClass(b.right);a.buttonLeft.addClass(c.left);a.buttonBody.addClass(c.center);a.buttonRight.addClass(c.right);},onMouseEnter:function(){this.toggle("default","hover");},setLinkHref:function(){this.domElement.find("a").attr("href","#");},onMouseLeave:function(){this.toggle("hover","default");}});Hitta.Map.Controllers.SearchBox=Class.extend({CLASS_NAME:"Hitta.Map.Controllers.SearchBox",init:function(a){this.searchForm=a.searchForm;},assign:function(){this.whatHidden=jq("#what-hidden");this.whereHidden=jq("#where-hidden");this.searchModeHidden=jq("#searchMode-hidden");this.groupIdHidden=jq("#groupId-hidden");this.searchFormHidden=jq("#search-hidden");this.pageHidden=jq("#page-hidden");},adjustMapNavigation:function(){jq("#mapContainer").addClass("search-box-enabled");},activate:function(){this.assign();this.searchForm.setWhat(this.whatHidden.val());this.searchForm.setWhere(this.whereHidden.val());this.searchForm.setSearchMode(this.searchModeHidden.val());this.searchForm.setGroupId(this.groupIdHidden.val());this.searchForm.setPage(this.pageHidden.val());this.searchFormHidden.remove();this.adjustMapNavigation();}});function HTransparentPanControl(b,a){this.hmap=b;this.alphaStrategy=jq.browser.msie?false:true;this.left=0;this.right=0;this.top=0;this.bottom=0;this.setOptions(a);}HTransparentPanControl.prototype={color:["0","255"],offset:14,padding:85,elementSize:60,setOptions:function(a){for(var b in a){if(a.hasOwnProperty(b)){this[b]=a[b];}}},getElementRemainder:function(){return(100-this.elementSize)/2;},getColor:function(b){var a=this.hmap.getMapType();return"rgb"+(jq.browser.msie?"":"a")+"("+this.color[a]+","+this.color[a]+","+this.color[a]+(jq.browser.msie?")":","+b+")");},callback:function(c){if(this.dragging){return;}var f=HMapHelpers.getMousePosition(c);var e=jq(this.hmap.getContainer()).offset();var b=f.x-e.left;var a=f.y-e.top;this.lastmode=this.dir;if(b<(this.offset+this.padding+this.left)&&b>(this.left)){this.dir=0;this.isOffsetTriggered=(b<(this.offset+this.left));this.alphaOffset=this.offset+this.padding-b;}else{if(a<(this.offset+this.top)&&a>this.top){this.dir=1;this.isOffsetTriggered=true;this.alphaOffset=this.offset+this.padding-a;}else{if(b>(this.size.width-this.offset-this.padding-this.right)&&b<(this.size.width+this.right)){this.isOffsetTriggered=(b>(this.size.width-this.offset-this.right));this.dir=2;this.alphaOffset=b-(this.size.width-(this.offset+this.padding));}else{if(a>(this.size.height-this.offset-this.bottom)&&a<(this.size.height-this.bottom)){this.isOffsetTriggered=true;this.dir=3;this.alphaOffset=a-(this.size.width-(this.offset+this.padding));}else{this.dir=-1;jq(this.hmap.getContainer()).data("direction",-1);this.alphaOffset=-1;this.hmap.getContainer().style.cursor="auto";}}}}if(this.dir!==-1){jq(this.hmap.getContainer()).data("direction",this.dir);this.hmap.getContainer().style.cursor="pointer";}if(this.alphaOffset!==-1){var d=!this.isOffsetTriggered?"0.4":"0.4";jq(this.element).css("backgroundColor",this.getColor(d));jq(this.element).css("filter",this.alphaStrategy?"":"alpha(opacity=40)");}if(this.dir!==this.lastmode){this.show();}},init:function(){var a=this;this.listeners=[];jq(this.hmap.getContainer()).data("direction",-1);this.listeners.push(HEvent.addDomListener(this.hmap.getContainer(),"mousemove",function(b){a.callback(b);}));this.listeners.push(HEvent.addDomListener(this.hmap.getContainer(),"mouseout",function(b){a.callback(b);}));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_DRAG_START,function(){a.dragging=a.ignore=true;}));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_DRAG_END,function(){a.dragging=a.ignore=false;}));this.listeners.push(HEvent.addListener(this.hmap,HMap.EVENT_MAP_MOVE_END,function(){a.size=a.hmap.getSize();}));this.isReady=true;this.isMouseOver=false;this.size=this.hmap.getSize();},disable:function(){this.isReady=false;this.disabled=true;},remove:function(){var a=this;if(!a.isReady){return;}a.isReady=false;jq(".transparent-pan-control").fadeOut(300,function(){a.isReady=true;jq(".transparent-pan-control").remove();});this.element=null;this.dir=-1;},show:function(){if(!this.isReady){return;}if(this.minZoom||this.maxZoom){var b=this.hmap.getZoom();if((this.minZoom&&b<this.minZoom)||(this.maxZoom&&b>this.maxZoom)){this.disabled=true;return;}else{this.disabled=false;}}var a=this.hmap.getContainer();var c=this;if(this.element&&this.dir===-1){this.remove();return;}this.element=this.getElement();if(HMapHelpers.isIEVersionBelow(8)){jq(this.element).mouseover(function(d){if(c.isMouseOver){return;}jq(c.element).fadeIn(100);c.isMouseOver=true;});jq(this.element).mouseout(function(d){if(!c.isMouseOver){return;}c.isMouseOver=false;});jq(this.element).click(function(h){c.dir=jq(c.hmap.getContainer()).data("direction");var j=HMapHelpers.getMousePosition(h);var g=jq(c.hmap.getContainer()).offset();var f=j.x-g.left;var d=j.y-g.top;if((f>(c.size.width-c.offset-c.right))||(f>(c.size.width-c.offset-c.right))){c.panDir();}});}switch(this.dir){case 0:jq(this.element).css({left:this.left+"px",top:this.getElementRemainder()+"%",height:this.elementSize+"%",width:this.offset+"px"});break;case 1:jq(this.element).css({left:this.getElementRemainder()+"%",top:this.top+"px",width:this.elementSize+"%",height:this.offset+"px"});break;case 2:jq(this.element).css({right:this.right+"px",top:this.getElementRemainder()+"%",height:this.elementSize+"%",width:this.offset+"px"});break;case 3:jq(this.element).css({left:this.getElementRemainder()+"%",bottom:this.bottom+"px",height:this.offset+"px",width:this.elementSize+"%"});break;}jq(this.element).css("cursor","pointer");jq(this.hmap.getContainer()).mouseup(function(h){c.dir=jq(c.hmap.getContainer()).data("direction");var j=HMapHelpers.getMousePosition(h);var g=jq(c.hmap.getContainer()).offset();var f=j.x-g.left;var d=j.y-g.top;if((f<(c.offset+c.padding+c.left)&&f>(c.left))||(d<(c.offset+c.top)&&d>c.top)||(f>(c.size.width-c.offset-c.right))||(f>(c.size.width-c.offset-c.right))){c.panDir();}c.panDir();});if(HMapHelpers.isIEVersionBelow(8)){}else{if(HMapHelpers.isIEVersionBelow(9)){jq(this.element).click(function(){c.panDir();});}}a.appendChild(this.element);},panDir:function(){var b=this;var a=null;if(!b.isOffsetTriggered||b.disabled||b.dragging){return;}switch(b.dir){case 0:a={dirHorz:1,dirVert:0};break;case 1:a={dirHorz:0,dirVert:1};break;case 2:a={dirHorz:-1,dirVert:0};break;case 3:a={dirHorz:0,dirVert:-1};break;default:return;}b.hmap.panDirection(a.dirHorz,a.dirVert);},getElement:function(){var a=jq("<div></div>");this.arrow=jq("<div>");if(this.dir!==-1){this.arrow.attr("class","main-sprite-"+this.sprite+" pan-arrow-"+this.dir+"-sprite");}this.arrow.css({top:"50%",left:"50%",right:"50%",bottom:"50%",position:"absolute",marginTop:"-4px",marginLeft:"-3px"});a.addClass("transparent-pan-control");a.css({backgroundColor:this.getColor(0),filter:this.alphaStrategy?"":"alpha(opacity=0)",position:"absolute",zIndex:"1000000",cursor:"pointer"});a.append(this.arrow);return a.get(0);}};Hitta.Map.MapManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.MapManager",init:function(a,b){this._super(b);this.map=null;this.container=a;this.options=this.getDefaultOptions();if(b){jq.extend(this.options,b);}this.options.mpp=null;this.formSubmitted=false;this.searchForm=Hitta.Map.SearchForm;this.showZoomToolbar=(b!==undefined&&b.showZoomToolbar!==undefined)?b.showZoomToolbar:true;this.hasSmallZoomControl=(b!==undefined&&b.hasSmallZoomControl!==undefined)?b.hasSmallZoomControl:false;this.showLogo=(b!==undefined&&b.showLogo!==undefined)?b.showLogo:true;this.showMapModeToolbar=(b!==undefined&&b.showMapModeToolbar!==undefined)?b.showMapModeToolbar:true;this.showScale=(b!==undefined&&b.showScale!==undefined)?b.showScale:true;this.createContainers();this.populateViews();this.populateManagers();this.poiControl=new Hitta.Partner.PoiControl(this);},setShareBoxOffsetCallback:function(d){var b=d.getWidth();var e=jq("#share").offset();var c=jq("#share").width();var a=jq("#share").height();return{left:e.left-b+c,top:e.top+a+10};},addPermanentPOIs:function(){if(this.managers[this.MANAGERS.POI]){this.managers[this.MANAGERS.POI].addPermanentPOIs(this.map);}},createContainers:function(){this.mapHeader=new Hitta.Map.Views.MapHeader();this.mapNavigation=new Hitta.Map.Views.MapNavigation();this.mapNavigation.activate();},populateViews:function(){var a=hitta.common.Config.views;this.views={};this.views[a.LOGO]=new Hitta.Map.Views.Logo({container:this.mapNavigation.getMapNavigationLeft()});this.views[a.SEARCH_BOX]=new Hitta.Map.Views.SearchBox({container:this.mapHeader,searchForm:this.searchForm});this.views[a.SHARE_LINK]=new hitta.common.ShareLink({container:this.mapHeader,justify:"right",setOffsetCallback:this.setShareBoxOffsetCallback,hBoxContainer:jq("#mapContainer"),activateSMS:false});this.views[a.BACK_LINK]=new Hitta.Map.Views.BackLink({container:this.mapNavigation.getMapNavigationLeft()});this.views[a.TOGGLE_RESULT]=new Hitta.Map.Views.ToggleResult({container:this.mapNavigation.getMapNavigationLeft()});this.views[a.LARGER_MAP]=new Hitta.Map.Views.LargerMap({container:this.mapNavigation.getMapNavigationLeft()});this.views[a.ZOOM_BUTTON]=new Hitta.Map.ZoomButton();},populateManagers:function(){var a=hitta.common.Config.managers;this.MANAGERS=a;this.managers={};this.managers[a.SEARCH]=new Hitta.Map.SearchManager();this.managers[a.MAP_MODE]=new Hitta.Map.MapModeManager({container:this.mapNavigation.getMapModeToolbar(),label:hitta.common.language.get("map-mode.map.label"),width:182});this.managers[a.POI]=new Hitta.Map.PoiManager();this.managers[a.STATE]=new Hitta.Map.StateManager();this.managers[a.DISTANCE]=new Hitta.Map.DistanceManager();this.managers[a.COORDINATE]=new Hitta.Map.CoordinateManager();this.managers[a.MAP_PIN]=new Hitta.Map.MapPinManager();this.managers[a.TRADE]=new Hitta.Partner.TradeControl();},getHMap:function(){return this.map;},getDefaultOptions:function(){return jq.extend(true,{},hitta.common.Config.defaultMapOptions);},setOptions:function(){if(this.options===null){return 0;}if(this.options.mapType){this.setMapType(this.options.mapType);}if(this.options.center){this.setCenter(this.options.center);}if(this.options.zoomLevel){this.setZoomLevel(this.options.zoomLevel);}},prepare:function(){this.mapTypeControl=new HMapTypeControl({container:this.mapNavigation.getMapTypeToolbar().get(0),externalHandler:true});this.bounds=new HBoundsRT90();this.mapControlsAdded=false;this.pagingStartIndex=hitta.common.Config.get("map.result.paging.default-startIndex");this.pagingCount=hitta.common.Config.get("map.result.paging.default-count");HSmallZoomControl.GFX_URL=Hitta.Router.fromPublic("images/web/map/");},activateManagers:function(f){for(var c=0,a=f.length;c<a;c++){var b=f[c];if(this.managers[b]){try{this.managers[b].activate();}catch(d){console.log([this.CLASS_NAME,"activateManagers"],d);}}}},activateViews:function(d){for(var f=0,a=d.length;f<a;f++){var c=d[f];if(this.views[c]){try{this.views[c].activate();}catch(g){console.log([this.CLASS_NAME,"activateViews"],g);}}}if(!this.showLogo){var b=hitta.common.Config.views;this.views[b.LOGO].hide();}if(!this.showMapModeToolbar){this.mapNavigation.mapTypeToolbar.hide();}},setMapType:function(a){if(a){this.options.mapType=a;}},setCenter:function(a){if(a&&a.east){this.options.east=a.east;}if(a&&a.north){this.options.north=a.north;}if(a&&a.coordinateSystem){this.options.coordinateSystem=a.coordinateSystem;}this.center=new HPointRT90(this.options.east,this.options.north);},setZoomLevel:function(a){if(a){this.options.zoomLevel=a;}},show:function(){if(this.managers.state.isActive()){hitta.common.Event.trigger(hitta.common.Events.STATE_GET_CURRENT);}else{hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW);}},addMapControls:function(){if(!this.mapControlsAdded){var c=this;this.map.addControl(this.mapTypeControl);if(this.showZoomToolbar){var b=this.hasSmallZoomControl?new HSmallZoomControl():new HZoomControl();this.map.addControl(b);}this.panControl=new HTransparentPanControl(this.map,{sprite:"map",top:43,right:0,left:0,bottom:2,minZoom:0,maxZoom:10});this.panControl.init();var a=[{id:"maptype-normal",isNative:true,mapTo:"map",provider:HStandardMapProvider.MAP_TYPE_NORMAL},{id:"maptype-satellite",isNative:true,mapTo:"sat",provider:HStandardMapProvider.MAP_TYPE_SATELLITE}];jq(a).each(function(e){var f=this;jq("#"+f.id).click(function(g){if(c.mapTypeControl.active){c.mapTypeControl.changeTypeTo(f.provider);hitta.common.Event.trigger(hitta.common.Events.MAP_TYPE_CLICKED,{id:f.id,manager:c});}g.preventDefault();});});if(!Hitta.isFailover){var d=new VIEWS.StreetviewControl({container:jq("#HMapTypeControl"),mapManager:this,center:new HPointRT90(this.options.east,this.options.north),zl:this.options.zoomLevel});d.render();}if(this.showScale){this.map.addControl(new HScaleControl());}this.map.checkResize();this.mapControlsAdded=true;}},assign:function(){this.viewport=jq(window);this.searchForm.init();},observe:function(){var a=this;this.searchForm.submitButton.bind("click",function(b){b.preventDefault();a.submitForm(true);});},observeOnResize:function(){var a=this;this.viewport.bind("resize",function(b){setTimeout(function(){a.map.checkResize();hitta.common.Event.trigger(hitta.common.Events.MAP_RESIZED);},500);});},onAppendResultContainer:function(a){jq(this.container.get(0).parentNode).append(a);},onSetBoundsBoundarySearch:function(j){if(this.map){var e,c,g,f,b;var h=this.map.getZoom()===1;var d=j.hits;if(h&&this.formSubmitted){if(d.length===1){b=d[0];f=b.address;c=b.poi;if(f!==undefined){e=f.coord||f.coordinate;}else{if(c!==undefined){e=c.coord;}}if(e!==undefined){g=new HPointRT90(e.east,e.north);}hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,{point:g,zl:8});}else{if(d.length>1){var a=this.getBoundsFromHits(d);hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,{bounds:a});}}}this.formSubmitted=false;}else{this.onSetBounds(j);}},getBoundsFromHits:function(b){var e=new HBoundsRT90();for(var d=0;d<b.length;d++){var f=b[d];var c=f.address;var g=f.poi;var h;if(c!==undefined){h=c.coord||c.coordinate;}else{if(g!==undefined){h=g.coord;}}if(h!==undefined){var a=new HPointRT90(h.east,h.north);e.extend(a);}}return e;},onSetBounds:function(b){this.bounds=null;var a=b.state&&b.state.zoomLevel&&b.state.east&&b.state.north;if(!a){this.setBoundsForHits(b.hits);}var c={bounds:this.bounds,mapType:this.options.mapType,state:b.state};if(b.hits.length===0){this.options=this.getDefaultOptions();}hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,c);this.formSubmitted=false;},setBoundsForHits:function(e){var h,c,l,k,a,b,m;if(e.length===1){a=e[0];a=a.hit!==undefined?a.hit:a;k=a.address!==undefined?a.address[0]:a;if(k===undefined&&a.address!==undefined){k=a.address;}if(k.area!==undefined){b=k.area;}if(b===undefined&&a.area!==undefined){b=a.area;}if(b!==undefined&&this.bounds===null){var j=b.lowerLeft.coordinate;var d=b.upperRight.coordinate;this.bounds=new HBoundsRT90({east:j.east,north:j.north},{east:d.east,north:d.north});}else{if(k!==undefined&&this.bounds===null){if(k.coordinate!==undefined){this.bounds=new HBoundsRT90();l=new HPointRT90(k.coordinate.east,k.coordinate.north);this.bounds.extend(l);}}}}else{for(var f=0,g=e.length;f<g;f++){a=e[f];k=a.address!==undefined?a.address:a;c=a.poi;if(c!==undefined){h=c.coord;}else{h=k.coordinate;}if(h!==undefined){if(this.bounds===null){this.bounds=new HBoundsRT90();}l=new HPointRT90(h.east,h.north);this.bounds.extend(l);}}}},setCoordinateToHashOnClick:function(){this.coordinateOnClick=new Hitta.Partner.CoordinateOnClickControl(this.map);this.coordinateOnClick.activate();},getZoomLevel:function(a,b){return this.map.getBoundsZoomLevel(a.bounds,b);},onMapShow:function(l){var j=this;var g=[];if(this.map===null){this.map=new HMap(this.container.get(0));hitta.hmap=this.map;jq(this.map.globals.innerContainer).addClass("hmap-element");HEvent.addListener(this.map,HMap.EVENT_MAP_DRAG_END,function(){j.onMapDragEnd.apply(j,[this]);});HEvent.addListener(this.map,HMap.EVENT_MAP_ZOOM_ACTIVATED_BY_CONTROL,function(){j.onMapZoom.apply(j,[this]);});HEvent.addListener(this.map,HMap.EVENT_MAP_TYPE_CHANGED,function(){j.onMapTypeChanged.apply(j,[this]);});HEvent.addListener(this.map,HMap.EVENT_MAP_MOVE_END,function(){j.onMapMoveEnd.apply(j,[this]);if(arguments[0]==="panBy"){HEvent.trigger(j.map,HMap.EVENT_MAP_DRAG_END);}});this.observeOnResize();var h=l!==undefined;var d=h&&l.state!==undefined&&l.state!==null;var b=d&&l.state.mpu&&l.state.mpu!==undefined&&l.state.mpu!==null;var f=b?false:true;if(this.managers[this.MANAGERS.POI]&&f){this.managers[this.MANAGERS.POI].addPermanentPOIs(this.map);}if(this.managers[this.MANAGERS.DISTANCE]){this.managers[this.MANAGERS.DISTANCE].setHMap(this.map);}if(this.managers[this.MANAGERS.COORDINATE]){this.managers[this.MANAGERS.COORDINATE].setHMap(this.map);}if(this.managers[this.MANAGERS.MAP_PIN]){this.managers[this.MANAGERS.MAP_PIN].setHMap(this.map);}}this.options=jq.extend(this.options,l.state);if(l&&l.boundary){return 0;}else{if(l&&l.point){this.options.east=l.point.east;this.options.north=l.point.north;this.options.zoomLevel=l.zl;}else{if(l&&l.bounds){var e={width:jq(document).width(),height:jq(document).height()};this.options.east=l.bounds.getCenter().east;this.options.north=l.bounds.getCenter().north;this.options.zoomLevel=this.getZoomLevel(l,e);}else{if(l&&l.center&&l.zoomLevel){this.options.east=l.center.east;this.options.north=l.center.north;this.options.zoomLevel=l.zoomLevel;}else{if(l&&l.state&&this.options.mpp===null){var k=jq.extend(this.options,l.params);if(k.multiPoint!==null||k.mpu!==null||k.mpp!==null){this.poiControl.setMap(this.map);if(k.multiPoint&&k.mpu){this.poiControl.showMP_MPU(k);}else{if(k.multiPoint){this.poiControl.showMP(k);}else{if(k.mpu){this.poiControl.showMPU(k);}}}return false;}if(k.coc!==undefined&&k.coc){this.setCoordinateToHashOnClick();}}else{if(this.options.mpp){this.poiControl.setMap(this.map);this.poiControl.showMPP(this.options);return false;}}}}}}var a=new HPointRT90(this.options.east,this.options.north);if(hitta.hash.viewtype==="streetview"||hitta.hash.type==="streetview"){this.isStreetview=true;if(!hitta.hash.heading){hitta.hash.heading="0";hitta.hash.place();}}else{this.isStreetview=false;}this.map.setCenter(a,this.options.zoomLevel,this.options.mapType);this.addMapControls();for(var c=0;c<g.length;c++){this.map.addOverlay(g[c]);if(g.length===1){g[c].openInfoBoxBound();g[c].infoBox.update();}else{g[c].setMode(HMarker.MODE_INFOBOX_HOVER);}}if(this.statusUpdateListener===undefined){this.statusUpdateListener=HEvent.addListener(HStandardMapProvider,HMap.EVENT_MAP_STATUS_UPDATE,function(){j.checkZoomLevel.apply(j,[this]);});}hitta.common.Event.trigger(hitta.common.Events.MAP_SHOWED);},showStreetView:function(){this.mapNavigation.getMapModeToolbar()[0].style.display="none";hitta.common.Event.trigger(hitta.common.Events.STREETVIEW_INIT,{manager:this,center:new HPointRT90(this.options.east,this.options.north),zl:this.options.zoomLevel});},onMapAllDone:function(){this.setHash();if(this.isStreetview){this.showStreetView();}},setHash:function(){var a=this.map.getMaxZoomLevel(this.options.mapType);this.map.setZoom(Math.min(this.options.zoomLevel,a));hitta.hash.center=this.map.getCenter().toHash();hitta.hash.zl=this.map.getZoom();hitta.hash.setBounds();hitta.hash.place();},onSetFocus:function(a){if(a.bounds){this.setFocusByBounds(a.bounds);}else{if(a.hits){this.setFocusByHits(a.hits);}}},setFocusByBounds:function(c){var b={width:jq(document).width(),height:jq(document).height()};this.options.east=c.getCenter().east;this.options.north=c.getCenter().north;this.options.zoomLevel=this.getZoomLevel({bounds:c},b);var a=new HPointRT90(this.options.east,this.options.north);this.map.setCenter(a,undefined,this.options.mapType);this.setHash();},setFocusByHits:function(a){this.bounds=null;this.setBoundsForHits(a);this.setFocusByBounds(this.bounds);},onSetOptions:function(b){var d=b.points;if(b&&b.zoomLevel){this.options.zoomLevel=b.zoomLevel;}if(b&&b.mapType){this.options.mapType=b.mapType;}this.bounds=new HBoundsRT90();for(var c=0,a=d.length;c<a;c++){this.bounds.extend(d[c]);}hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,{center:this.bounds.getCenter(),zoomLevel:this.options.zoomLevel,mapType:this.options.mapType});},checkZoomLevel:function(){var b=new HPointRT90(this.options.east,this.options.north);var d=this.options.mapType;var c=this.map.getZoom();var a=HStandardMapProvider.zoomLevel[d].max;if(c>a){this.map.setCenter(b,a,d);}},onAddOverlay:function(a){var b=a.render();this.map.addOverlay(b,b.toolTip.name);},onMapDragEnd:function(){this.searchForm.setWhere("");if(!this.searchForm.groupSet()&&this.searchForm.boundarySet()){this.boundarySearch();}hitta.common.Event.trigger(hitta.common.Events.MAP_DRAG_END,{hmap:this.map});},onMapZoom:function(){this.options.zoomLevel=this.map.getZoom();this.searchForm.setWhere("");if(!this.searchForm.groupSet()&&this.searchForm.boundarySet()){this.boundarySearch();}this.poiControl.refresh();hitta.common.Event.trigger(hitta.common.Events.MAP_ZOOM,{hmap:this.map});},onMapTypeChanged:function(){this.options.mapType=this.map.getMapType();hitta.common.Event.trigger(hitta.common.Events.MAP_TYPE_CHANGED,{hmap:this.map});},onMapMoveEnd:function(){hitta.common.Event.trigger(hitta.common.Events.MAP_MOVE_END,{hmap:this.map});},showAjaxLoader:function(){var b=jq(".ajax-loader");var a=jq(document);var c=a.height();var d=a.width();b.css({display:"block",left:d/2,top:c/2});},hideAjaxLoader:function(){var a=jq(".ajax-loader");a.css({display:"none"});},hasLocationHash:function(){return window.location.hash!=="";},pageLoad:function(){this.show();if(this.hideInfoBoxes){jq("img.h-marker").each(function(){if(!this.link){jq(this).css("cursor","move");}else{jq(this).on("click",function(){window.location=this.link;});}});}},onSearchFromLocationHash:function(c){var b=hitta.common.Config.SEARCH_MODE;var a=this.searchForm;var d=null;if(c.searchMode!==undefined){a.setSearchMode(c.searchMode);d=c.searchMode;}if(c.what!==""){a.setWhat(c.what);}if(c.where!==""){a.setWhere(c.where);}if(c.bounds!==""){a.setBounds(c.bounds);}if(c.gid){a.setGroupId(c.gid);}if(c.vkiid!==undefined){a.setVkiid(c.vkiid);}if(hitta.hash.zl!==undefined){this.options.isVkiidSearch=true;}if(this.managers.search.isActive()){if(a.searchModeSet()){if(d===b.MIXED||d===b.MIXED_ALL){hitta.common.Event.trigger(hitta.common.Events.SEARCH_MIXED_ALL_PRODUCTS,{startIndex:this.pagingStartIndex,pageCount:this.pagingCount,state:c.state});}else{if(d===b.COMPANIES||d===b.COMPANIES_ALL){if(a.groupSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_GROUP,[this.pagingStartIndex,this.pagingCount]);}else{hitta.common.Event.trigger(hitta.common.Events.SEARCH_COMPANY_ALL_PRODUCTS,{startIndex:this.pagingStartIndex,pageCount:this.pagingCount});}}else{if(d===b.PERSONS){hitta.common.Event.trigger(hitta.common.Events.SEARCH_PERSON,[this.pagingStartIndex,this.pagingCount]);}else{if(d===b.LOCATIONS){hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION,{from:this.pagingStartIndex,to:this.pagingCount});}else{if(d===b.BOUNDARY&&a.boundsSet()){this.formSubmitted=true;hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY,{bounds:c.bounds,startIndex:this.pagingStartIndex,pageCount:this.pagingCount});}}}}}}else{if(this.searchForm.groupSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_GROUP,[this.pagingStartIndex,this.pagingCount]);}else{if(a.locationSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION,{from:this.pagingStartIndex,to:this.pagingCount});}else{if(a.mixedSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_MIXED_ALL_PRODUCTS,{startIndex:this.pagingStartIndex,pageCount:this.pagingCount,state:c.state});}else{if(a.vkiidSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_VKID,c);}else{hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,c);}}}}}}},submitForm:function(b){var c=this.searchForm.whatEncoded();var a=this.searchForm.whereEncoded();if((c===""||c==="-")&&(a===""||a==="-")){return 0;}this.formSubmitted=true;if(this.managers.search.isActive()){if(this.searchForm.boundarySet()){this.boundarySearch(b);}else{if(this.searchForm.locationSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION,{from:this.pagingStartIndex,to:this.pagingCount,level:1});}else{if(this.searchForm.mixedSet()){hitta.common.Event.trigger(hitta.common.Events.SEARCH_MIXED_ALL_PRODUCTS,[this.pagingStartIndex,this.pagingCount]);}}}}if(this.managers.state.isActive()){hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_ON_FORM_SUBMIT,{hmap:this.map,vad:this.searchForm.whatEncoded().replace(/-/,""),where:this.searchForm.whereEncoded().replace(/-/,"")});}hitta.common.Event.trigger(hitta.common.Events.RESULT_RESET_PAGING);},onMarkerRemove:function(a){try{if(a.hMarker.element.parentElement||a.hMarker.element.parentNode){this.map.removeOverlay(a.hMarker);}if(a.hMarker.toolTip.element.parentElement){this.map.removeOverlay(a.hMarker.toolTip);}}catch(b){console.log(["Exception @ "+this.CLASS_NAME+"#onMarkerRemove"],a,b);}},onPreRender:function(){},onRenderFinished:function(a){if(this.kartprioCollection===undefined||this.kartprioCollection===false){this.kartprioCollection=new Hitta.Map.KartprioCollection(a);}else{this.kartprioCollection.populateItems(a);}this.kartprioCollection.openRandomly();hitta.common.Event.trigger(hitta.common.Events.RESULT_HITS_RENDERED,{hmap:this.map,vad:this.searchForm.whatEncoded().replace(/-/,""),where:this.searchForm.whereEncoded().replace(/-/,""),state:this.map.globals});},boundarySearch:function(b){if(this.map!==undefined){var a=this.map.getBounds();var c=a.sw.north+":"+a.sw.east+","+a.ne.north+":"+a.ne.east;hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY,{bounds:c,startIndex:this.pagingStartIndex,pageCount:this.pagingCount,manual:b||false});hitta.common.Event.trigger(hitta.common.Events.RESULT_RESET_PAGING);}},onActiveSearch:function(b){var a=hitta.common.Config.SEARCH_MODE;if(b===a.BOUNDARY_MANUAL||b===a.MIXED_ALL){this.kartprioCollection=undefined;}},disableMapTypeControl:function(){this.mapTypeControl.active=false;},enableMapTypeControl:function(){this.mapTypeControl.active=true;},searchFromLocationChoice:function(a){jq("#where").val(a.where);this.submitForm();},register:function(){hitta.common.Event.register(hitta.common.Events.MAP_PAGE_APPEND_RESULT_CONTAINER,this,this.onAppendResultContainer);hitta.common.Event.register(hitta.common.Events.MAP_SET_BOUNDS,this,this.onSetBounds);hitta.common.Event.register(hitta.common.Events.MAP_SET_BOUNDS_BOUNDARY_SEARCH,this,this.onSetBoundsBoundarySearch);hitta.common.Event.register(hitta.common.Events.MAP_SET_OPTIONS,this,this.onSetOptions);hitta.common.Event.register(hitta.common.Events.MAP_ADD_OVERLAY,this,this.onAddOverlay);hitta.common.Event.register(hitta.common.Events.MAP_SHOW,this,this.onMapShow);hitta.common.Event.register(hitta.common.Events.SEARCH_FROM_LOCATION_HASH,this,this.onSearchFromLocationHash);hitta.common.Event.register(hitta.common.Events.MAP_SHOW_AJAX_LOADER,this,this.showAjaxLoader);hitta.common.Event.register(hitta.common.Events.MAP_HIDE_AJAX_LOADER,this,this.hideAjaxLoader);hitta.common.Event.register(hitta.common.Events.MARKERS_PRE_RENDER,this,this.onPreRender);hitta.common.Event.register(hitta.common.Events.MARKER_RENDER_FINISHED,this,this.onRenderFinished);hitta.common.Event.register(hitta.common.Events.MARKER_REMOVE,this,this.onMarkerRemove);hitta.common.Event.register(hitta.common.Events.SEARCH_MODE,this,this.onActiveSearch);hitta.common.Event.register(hitta.common.Events.MAP_TYPE_CONTROL_DISABLE,this,this.disableMapTypeControl);hitta.common.Event.register(hitta.common.Events.MAP_TYPE_CONTROL_ENABLE,this,this.enableMapTypeControl);hitta.common.Event.register(hitta.common.Events.SUBMIT_SEARCH_FROM_LOCATION_CHOICE,this,this.searchFromLocationChoice);hitta.common.Event.register(hitta.common.Events.MAP_ALL_DONE,this,this.onMapAllDone);hitta.common.Event.register(hitta.common.Events.MAP_FOCUS,this,this.onSetFocus);},operate:function(){this.pageLoad();}});Hitta.Map.ResultManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.ResultManager",init:function(){this.id="search-result-container";this.markerManager=new Hitta.Map.MarkerManager();this.markerManager.activate();this.resultContainer=new Hitta.Map.HResultContainer({parentId:this.id,width:300,hasSpace:true});this.resultContainer.activate();this.resultContainer.hide();this.companyResult=new Hitta.Map.CompanyResult();this.personResult=new Hitta.Map.PersonResult();this.locationResult=new Hitta.Map.LocationResult();this.locationChoiceResult=new Hitta.Map.LocationChoiceResult();this.tradeByIdResult=new Hitta.Map.TradeByIdResult();this.errorResult=new Hitta.Map.ErrorResult();if(hitta.hash!==undefined&&hitta.hash.print!==undefined){this.isPrintMode=hitta.hash.print=="true"||hitta.hash.print=="delayed";}},mergeHits:function(){return jq.merge(this.companyResult.getResult(),this.personResult.getResult());},renderGlobalResult:function(k,j){var f=this;var e=j!==undefined?j:hitta.common.Events.MAP_SET_BOUNDS;this.reset();var d=this.balanceResult(k);var h=d.companies===0&&d.persons===0&&k.locations.included===0;var b=this.locationIsAmbiguous(k);if(typeof(k)==="object"){if(h&&b){var a=hitta.common.Config.get("map.result.paging.default-startIndex");var g=hitta.common.Config.get("map.result.paging.default-count");hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION_CHOICE,{from:a,to:g});}else{if(d.companies>0||h){this.companyResult.format(k,d);this.resultContainer.add({id:"company",resultList:this.companyResult});}if(d.persons>0||h){this.personResult.format(k,d);this.resultContainer.add({id:"person",resultList:this.personResult});}var c=this.mergeHits();hitta.common.Event.trigger(e,{hits:c,state:k.state});this.markerManager.render(c);this.resultContainer.show();this.adjustResultListPadding();this.updateSearchResultHeight();if(jq("#toggle-result-button").css("display")=="block"){this.resultContainer.hide();}}}},locationIsAmbiguous:function(b){var e=["companies","persons"];for(var a=0;a<2;a++){var c=e[a];if(b[c]&&b[c].included>0){for(var d=0;d<b[c].attribute.length;d++){var f=b[c].attribute[d];if(f.name=="location.unique"&&f.value=="false"){return true;}}}}return false;},renderResult:function(k,j){var f=this;var e=j!==undefined?j:hitta.common.Events.MAP_SET_BOUNDS;this.reset();var d=this.balanceResult(k);var h=d.companies===0&&d.persons===0&&k.locations.included===0;var b=this.locationIsAmbiguous(k);if(typeof(k)==="object"){if(h&&b){var a=hitta.common.Config.get("map.result.paging.default-startIndex");var g=hitta.common.Config.get("map.result.paging.default-count");hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION_CHOICE,{from:a,to:g});}else{if(h||(this.companyResult.searchMode!==hitta.common.Config.SEARCH_MODE.BOUNDARY_PERSONS&&d.companies>0)){this.companyResult.format(k,d);this.resultContainer.add({id:"company",resultList:this.companyResult});}if(h||(this.personResult.searchMode!==hitta.common.Config.SEARCH_MODE.BOUNDARY_COMPANIES&&d.persons>0)){this.personResult.format(k,d);this.resultContainer.add({id:"person",resultList:this.personResult});}var c=this.mergeHits();hitta.common.Event.trigger(e,{hits:c,state:k.state});this.markerManager.render(c);this.resultContainer.show();this.adjustResultListPadding();this.updateSearchResultHeight();if(jq("#toggle-result-button").css("display")=="block"){this.resultContainer.hide();}}}},renderLocationsResult:function(b){var a=b.locations.location;this.reset();if(b.locations.included>0){this.locationResult.format(b,{locations:a.length});this.resultContainer.add({id:"location",resultList:this.locationResult});hitta.common.Event.trigger(hitta.common.Events.MAP_SET_BOUNDS,{hits:this.locationResult.hits});this.markerManager.render(this.locationResult.getResult());}else{hitta.common.Event.trigger(hitta.common.Events.MAP_SET_BOUNDS,{hits:this.locationResult.getResult()});this.resultContainer.add({id:"error",resultList:this.errorResult});}this.resultContainer.show();this.adjustResultListPadding();this.updateSearchResultHeight();if(jq("#toggle-result-button").css("display")=="block"){this.resultContainer.hide();}},renderLocationsChoiceResult:function(b){var a=b.locations.hits;this.reset();if(a.length>0){this.locationChoiceResult.format(b,{locations:a.length});this.resultContainer.add({id:"locationChoice",resultList:this.locationChoiceResult});hitta.common.Event.trigger(hitta.common.Events.MAP_SET_BOUNDS,{hits:this.locationChoiceResult.hits});this.markerManager.render(this.locationChoiceResult.getResult());}else{hitta.common.Event.trigger(hitta.common.Events.MAP_SET_BOUNDS,{hits:this.locationResult.getResult()});this.resultContainer.add({id:"error",resultList:this.errorResult});}this.resultContainer.show();this.adjustResultListPadding();this.updateSearchResultHeight();if(jq("#toggle-result-button").css("display")=="block"){this.resultContainer.hide();}},searchResultHandler:function(a){try{this.renderResult(a);}catch(b){console.log([this.CLASS_NAME,"searchResultHandler"],b);}},globalSearchResultHandler:function(a){try{this.renderGlobalResult(a);}catch(b){console.log([this.CLASS_NAME,"globalSearchResultHandler"],b);}},boundarySearchResultHandler:function(a){try{this.renderResult(a,hitta.common.Events.MAP_SET_BOUNDS_BOUNDARY_SEARCH);}catch(b){console.log([this.CLASS_NAME,"boundarySearchResultHandler"],b);}},locationSearchResultHandler:function(a,c){try{this.renderLocationsResult(a);}catch(b){console.log([this.CLASS_NAME,"locationSearchResultHandler"],b);}},locationChoiceSearchResultHandler:function(a){try{this.renderLocationsChoiceResult(a);}catch(b){console.log([this.CLASS_NAME,"locationChoiceSearchResultHandler"],b);}},tradeByIdSearchResultHandler:function(a){var c=a.companies;var b=c.total;this.reset();if(b>0){this.tradeByIdResult.format(c);this.resultContainer.add({id:"tradebyid",resultList:this.tradeByIdResult});this.markerManager.render(this.tradeByIdResult.getResult());}else{this.resultContainer.add({id:"error",resultList:this.errorResult});}this.resultContainer.show();this.adjustResultListPadding();this.updateSearchResultHeight();},balanceKartPrio:function(b){var d=0;var a="12";var c=b.length;while(c--){if(b[c].products.length>0&&b[c].products[0][a]!==undefined){d++;}}return d;},balanceResult:function(a){var g=0;var c=0;try{if(a){var b=a.companies.included;var d=a.persons.included;g=b;c=d;if(b+d>20){if(d<10){g=20-d;}else{if(b<10){c=20-b;}else{g=10;c=10;}}}}}catch(f){console.log([this.CLASS_NAME,"balanceResult"],f);}return{companies:g,persons:c};},create:function(){this.mainContainer=jq("<div>").attr({id:this.id});this.mainContainer.append(this.resultContainer.getDomElement());jq("#map-navigation").append(this.mainContainer);},onClose:function(a){if(this.id===a){jq("#toggle-result-button").css({display:"block"});this.resultContainer.hide();}},reset:function(){this.markerManager.clear();this.companyResult.reset();this.personResult.reset();this.locationResult.reset();this.locationChoiceResult.reset();this.tradeByIdResult.reset();this.errorResult.reset();this.resultContainer.reset();},onResetPaging:function(){this.companyResult.resetPaging();this.personResult.resetPaging();this.locationResult.resetPaging();},adjustResultListPadding:function(){if(this.resultContainer.getContent().find(".hit-list").length>0){this.resultContainer.getContent().find(".hit-list").removeClass("top");jq(this.resultContainer.getContent().find(".hit-list")[0]).addClass("top");}},updateSearchResultHeight:function(){var a=jq(document.body).height()-200;if(this.resultContainer.activeResultLists.length===1&&this.resultContainer.activeResultLists[0]==="error"){this.resultContainer.resetHeight();}else{if(this.isPrintMode){this.resultContainer.getContent().height(450);this.resultContainer.getContentRight().height(450);}else{var b=0;jq.each(this.resultContainer.getContent().find(".hit-list"),function(c,d){if(jq(d).css("display")!=="none"){b+=jq(d).height();}});if(b>a){this.resultContainer.getContent().css({overflow:"auto"});this.resultContainer.getContent().height(a);this.resultContainer.getContentRight().height(a);}else{this.resultContainer.getContent().css({overflow:"hidden"});this.resultContainer.getContent().height(b+30);this.resultContainer.getContentRight().height(b+30);}}}},setSearchMode:function(a){this.personResult.setSearchMode(a);this.companyResult.setSearchMode(a);this.locationResult.setSearchMode(a);},register:function(){hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS,this,this.searchResultHandler);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_GLOBAL,this,this.globalSearchResultHandler);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_BOUNDARY,this,this.boundarySearchResultHandler);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_LOCATION,this,this.locationSearchResultHandler);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_LOCATION_CHOICE,this,this.locationChoiceSearchResultHandler);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_TRADE_BY_ID,this,this.tradeByIdSearchResultHandler);hitta.common.Event.register(hitta.common.Events.H_CONTAINER_CLOSE,this,this.onClose);hitta.common.Event.register(hitta.common.Events.MAP_RESIZED,this,this.updateSearchResultHeight);hitta.common.Event.register(hitta.common.Events.RESULT_RESET_PAGING,this,this.onResetPaging);hitta.common.Event.register(hitta.common.Events.SEARCH_MODE,this,this.setSearchMode);}});Hitta.Map.StateManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.StateManager",mapTypesMapper:{map:HStandardMapProvider.MAP_TYPE_NORMAL,sat:HStandardMapProvider.MAP_TYPE_SATELLITE},params:{vkid:null,center:null,vad:null,"var":null,type:null,zl:null,tool:null,mp:null,mpu:null},queryStringParams:{},decode:function(c){var a;try{a=decodeURIComponent(c).replace(/\+/g," ");}catch(b){a=unescape(c).replace(/\+/g," ");}return a;},onCurrentState:function(){var a=window.location.href;var g=a.split("#")[1];var d=null;var h="var";if(typeof g==="string"&&g!==""){if(d===null){d={};}var e=g.split("&");for(var b=0,j=e.length;b<j;b++){var c=e[b].split("=");var k=c[0];this.queryStringParams[k]=c[1];}for(b in this.queryStringParams){if(this.queryStringParams[b]!==undefined){this.params[b]=this.decode(this.queryStringParams[b]);}}if(this.params.mp!==undefined){d.multiPoint=this.params.mp;}if(this.params.mpu!==undefined){d.mpu=this.params.mpu;}if(this.params.fb!==undefined){d.coc=this.params.fb.toLowerCase()==="true";}if(this.validMapState()){d.zoomLevel=window.parseInt(this.params.zl);d.mapType=null!==this.params.type?this.mapTypesMapper[this.params.type]:HStandardMapProvider.MAP_TYPE_NORMAL;d.east=null!==this.params.center?window.parseInt(this.params.center.split(":")[0]):null;d.north=null!==this.params.center?window.parseInt(this.params.center.split(":")[1]):null;}else{if(this.params.type!==null&&typeof this.mapTypesMapper[this.params.type]!=="undefined"){d.mapType=this.mapTypesMapper[this.params.type];}}}if(this.params.mp!==undefined&&this.params.mp||this.params.mpu!==undefined&&this.params.mpu){hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,{state:d,params:this.params});}else{if(this.params.vad||this.params[h]||this.params.vkid){var f={};if(this.params.vad!==undefined){f.what=this.params.vad;}if(this.params[h]!==undefined){f.where=this.params[h];}if(this.params.bounds!==undefined){f.bounds=this.params.bounds;}if(this.params.gid!==undefined){f.gid=this.params.gid;}if(this.params.p!==undefined){f.p=this.params.p;}if(this.params.sm!==undefined&&this.params.sm){f.searchMode=parseInt(this.params.sm,10);}if(this.params.vkid!==undefined&&this.params.vkid){f.vkiid=this.params.vkid;}f.state=d;this.registerAllDone(hitta.common.Events.RESULT_HITS_RENDERED);hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,{state:d});hitta.common.Event.trigger(hitta.common.Events.SEARCH_FROM_LOCATION_HASH,f);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_BOUNDARY,this,this.openToolFromState);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS_LOCATION,this,this.openToolFromState);hitta.common.Event.register(hitta.common.Events.SEARCH_SUCCESS,this,this.openToolFromState);}else{this.registerAllDone(hitta.common.Events.MAP_SHOWED);hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW,{state:d,params:this.params});}}this.openToolFromState();},registerAllDone:function(a){hitta.common.Event.register(a,this,function(){hitta.common.Event.trigger(hitta.common.Events.MAP_ALL_DONE);});},openToolFromState:function(){hitta.common.Event.unregister(hitta.common.Events.SEARCH_SUCCESS_BOUNDARY,this,this.openToolFromState);hitta.common.Event.unregister(hitta.common.Events.SEARCH_SUCCESS_LOCATION,this,this.openToolFromState);hitta.common.Event.unregister(hitta.common.Events.SEARCH_SUCCESS,this,this.openToolFromState);if(this.params.tool){switch(this.params.tool){case"distance":this.openTool("distance");break;case"coordinate":this.openTool("coordinate");break;case"map-pin":this.openTool("map-pin");break;case"gas_stations":hitta.common.Event.trigger(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,"gas_stations");hitta.common.Event.trigger(hitta.common.Events.POI_TOOL_OPEN,"gas_stations");hitta.common.Event.trigger(hitta.common.Events.TOOLBAR_MAP_MODE_SHOW);break;case"letterboxes":hitta.common.Event.trigger(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,"letterboxes");hitta.common.Event.trigger(hitta.common.Events.POI_TOOL_OPEN,"letterboxes");hitta.common.Event.trigger(hitta.common.Events.TOOLBAR_MAP_MODE_SHOW);break;}}hitta.common.Event.register(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,this,this.onMapToolToggle);},openTool:function(a){hitta.common.Event.trigger(hitta.common.Events.TOOL_MAP_MODE_TOGGLE,a);hitta.common.Event.trigger(hitta.common.Events.FLOATING_TOOL_OPEN,a);hitta.common.Event.trigger(hitta.common.Events.TOOLBAR_MAP_MODE_SHOW);},validMapState:function(){if(null!==this.params.center){return true;}else{if(null!==this.params.zl&&null!==this.params.mp){return true;}}return false;},onMapStateChanged:function(a){this.updateLocationHash(a);if(hitta.hash.print){hitta.common.Event.trigger(hitta.common.Events.PRINT_MAP_PAGE,this);}},onMapZoomChanged:function(a){hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{rlm:hitta.common.Config.RESULT_LIST_MODE.ZOOMED});this.onMapStateChanged(a);},onHashUpdated:function(a){hitta.hash.refresh(a);hitta.hash.place();},updateLocationHash:function(b){var c=b.hmap;var d=b.vad;var a=b.where;if(d!==undefined){this.params.vad=d;}if(a!==undefined){this.params["var"]=a;}hitta.hash.center=[c.getCenter().north,c.getCenter().east].join(":");hitta.hash.place();this.params.zl=c.getZoom();this.params.type=this.getMappedMapType(c.getMapType());this.params.center=hitta.hash.center;this.params.sm=hitta.hash.sm;this.ffHashEncodingFix();hitta.hash.importObject(this.params);hitta.hash.place();},getMappedMapType:function(b){var c="map";for(var a in this.mapTypesMapper){if(this.mapTypesMapper[a]==b){c=a;}}return c;},ffHashEncodingFix:function(){if(typeof this.params.mpu!=="undefined"){this.params.mpu=this.queryStringParams.mpu;}},onMapToolToggle:function(a){if(this.params.tool===a){this.params.tool=null;}else{this.params.tool=a;}this.ffHashEncodingFix();this.params.center=hitta.hash.center;hitta.hash.importObject(this.params);hitta.hash.place();},register:function(){hitta.common.Event.register(hitta.common.Events.STATE_GET_CURRENT,this,this.onCurrentState);hitta.common.Event.register(hitta.common.Events.MAP_DRAG_END,this,this.onMapStateChanged);hitta.common.Event.register(hitta.common.Events.MAP_ZOOM,this,this.onMapZoomChanged);hitta.common.Event.register(hitta.common.Events.MAP_TYPE_CHANGED,this,this.onMapStateChanged);hitta.common.Event.register(hitta.common.Events.STATE_UPDATE_ON_FORM_SUBMIT,this,this.onMapStateChanged);hitta.common.Event.register(hitta.common.Events.STATE_UPDATE,this,this.onMapStateChanged);hitta.common.Event.register(hitta.common.Events.STATE_UPDATE_HASH,this,this.onHashUpdated);hitta.common.Event.register(hitta.common.Events.RESULT_HITS_RENDERED,this,this.onMapStateChanged);}});Hitta.Map.SearchManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.SearchManager",currentLevel:1,init:function(){var a=this;this.resultManager=new Hitta.Map.ResultManager();this.searchForm=Hitta.Map.SearchForm;this.SEARCH_MODE_CONFIG=hitta.common.Config.SEARCH_MODE;this.RESULT_LIST_MODE_CONFIG=hitta.common.Config.RESULT_LIST_MODE;},isActive:function(){return this._super()&&this.searchForm.isActive();},prepare:function(){this.resultManager.activate();},getResultBounds:function(a){var c={minNorth:0,maxNorth:0,minEast:0,maxEast:0};var e=a.companies.company;if(e){for(var b=0;b<e.length;b++){var d=e[b];if(d.address&&d.address.length>0&&d.address[0].coordinate){var f=d.address[0].coordinate;if(c.minNorth===0||f.north<c.minNorth){c.minNorth=f.north;}if(c.maxNorth===0||f.north>c.maxNorth){c.maxNorth=f.north;}if(c.minEast===0||f.east<c.minEast){c.minEast=f.east;}if(c.maxEast===0||f.east>c.maxEast){c.maxEast=f.east;}}}}return c.minNorth+":"+c.minEast+","+c.maxNorth+":"+c.maxEast;},mergeHits:function(e,b){var a=e.length;var f=[];for(var d=0;d<a;d++){if(b[d]!==undefined&&b[d].products.length>0&&b[d].products[0]["12"]!==undefined){f.push(b[d]);}}for(var c=0;c<a;c++){f.push(e[c]);}return f;},addKartPrioToData:function(c,f){var d=this.searchForm.whatEncoded();var b=this.getResultBounds(c);var e={what:d,startIndex:1,pageCount:20,boundary:b};var a=Hitta.Router.reverse(Hitta.Routes.JsonResultController_getJsonMapSearchKartprio,e);jq.ajax({url:a,dataType:"json",success:function(g){f(g);}});},search:function(c){var a=this;var b=Hitta.Router.reverse(c.action,c.params);this.setHash({from:c.params.startIndex,pageCount:c.params.pageCount,level:c.params.level});hitta.AJAXCOUNT=hitta.AJAXCOUNT||0;if(hitta.AJAXCOUNT>0){hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);return;}hitta.AJAXCOUNT++;hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW_AJAX_LOADER);jq.ajax({url:b,dataType:"json",success:function(d){d.state=c.state;c.callback(d,a);hitta.AJAXCOUNT--;},error:function(g,f,d,e){hitta.AJAXCOUNT--;hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW);}});},setHash:function(a){hitta.hash.from=a.from;hitta.hash.pageCount=a.pageCount;hitta.hash.level=a.level;hitta.hash.place();},vkidResponseHandler:function(a){a.kartprio=a.pois;hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},searchResponseHandler:function(a){a=this.clearKartPrio(a);hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},companyAndMixedSearchResponseHandler:function(b,d,c){var a=this;this.addKartPrioToData(b,function(e){a.companyAndMixedSearchKartPrioOnSuccessHandler(b,e);});},companyAndMixedSearchKartPrioOnSuccessHandler:function(b,a){if(a){b.kartprio=a.companies;}hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS,b);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},groupSearchResponseHandler:function(a){a=this.clearKartPrio(a);hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},boundarySearchResponseHandler:function(a){a=this.clearKartPrio(a);hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS_BOUNDARY,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},boundarySearchGlobalResponseHandler:function(a){a=this.clearKartPrio(a);hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS_GLOBAL,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},locationSearchResponseHandler:function(a){hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS_LOCATION,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},onSearchMixed:function(b){this.searchForm.groupId="";var c=this;var e=b[0];var d=b[1];var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchMixed,params:{what:this.searchForm.whatEncoded(),where:this.searchForm.whereEncoded(),startIndex:e,pageCount:d},callback:function(f){c.companyAndMixedSearchResponseHandler.apply(c,[f,e,d]);},state:b.state};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.MIXED,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.MIXED);},onSearchMixedAllProducts:function(b){this.searchForm.groupId="";var d=this;var e=(b!==undefined&&b.what!==undefined)?b.what:this.searchForm.whatEncoded();var a=(b!==undefined&&b.where!==undefined)?b.where:this.searchForm.whereEncoded();var g=(b!==undefined&&b.startIndex!==undefined)?b.startIndex:1;var f=(b!==undefined&&b.pageCount!==undefined)?b.pageCount:20;var c={action:Hitta.Routes.JsonResultController_getJsonMapSearchMixedAllProducts,params:{what:e,where:a,startIndex:g,pageCount:f},callback:function(h){d.companyAndMixedSearchResponseHandler.apply(d,[h,g,f]);},state:b.state};this.search(c);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.MIXED_ALL,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.MIXED_ALL);},onSearchCompany:function(c){var d=this;var f=c[0];var e=c[1];var a=c[2];var b={action:Hitta.Routes.JsonResultController_getJsonMapSearchCompany,params:{what:this.searchForm.whatEncoded(),where:this.searchForm.whereEncoded(),startIndex:f,pageCount:e},callback:function(g){d.companyAndMixedSearchResponseHandler.apply(d,[g,a,e]);},state:c.state};this.search(b);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.COMPANIES,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.COMPANIES);},onSearchCompanyAllProducts:function(b){this.searchForm.groupId="";var d=this;var f=(b!==undefined&&b.startIndex!==undefined)?b.startIndex:1;var e=(b!==undefined&&b.pageCount!==undefined)?b.pageCount:20;var a=(b!==undefined&&b.kartPrioStartIndex!==undefined)?b.kartPrioStartIndex:1;var c={action:Hitta.Routes.JsonResultController_getJsonMapSearchCompanyAllProducts,params:{what:this.searchForm.whatEncoded(),where:this.searchForm.whereEncoded(),startIndex:f,pageCount:e},callback:function(g){d.companyAndMixedSearchResponseHandler.apply(d,[g,a,e]);},state:b.state};this.search(c);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.COMPANIES_ALL,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.COMPANIES_ALL);},onSearchPerson:function(b){var c=this;var e=b[0];var d=b[1];var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchPerson,params:{what:this.searchForm.whatEncoded(),where:this.searchForm.whereEncoded(),startIndex:e,pageCount:d},callback:function(f){c.searchResponseHandler.apply(c,[f]);},state:b.state};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.PERSONS,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.PERSONS);},onSearchBoundary:function(e){var d=(e!==undefined&&e.bounds!==undefined)?e.bounds:this.mapBounds;var g=(e!==undefined&&e.startIndex!==undefined)?e.startIndex:1;var f=(e!==undefined&&e.pageCount!==undefined)?e.pageCount:20;var b=(e!==undefined&&e.manual!==undefined)?e.manual:false;this.searchForm.groupId="";var c=this;var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchBoundary,params:{what:this.searchForm.whatEncoded(),startIndex:g,pageCount:f,boundary:d},callback:function(h){c.boundarySearchResponseHandler.apply(c,[h]);}};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.BOUNDARY,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,(b===true?this.SEARCH_MODE_CONFIG.BOUNDARY_MANUAL:this.SEARCH_MODE_CONFIG.BOUNDARY_AUTO));},onSearchBoundaryGlobal:function(d){var f=(d!==undefined&&d.startIndex!==undefined)?d.startIndex:1;var e=(d!==undefined&&d.pageCount!==undefined)?d.pageCount:20;var b=(d!==undefined&&d.manual!==undefined)?d.manual:false;this.searchForm.groupId="";var c=this;var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchBoundaryGlobal,params:{what:this.searchForm.whatEncoded(),startIndex:f,pageCount:e},callback:function(g){c.boundarySearchGlobalResponseHandler.apply(c,[g]);}};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.BOUNDARY,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,(b===true?this.SEARCH_MODE_CONFIG.BOUNDARY_MANUAL:this.SEARCH_MODE_CONFIG.BOUNDARY_AUTO));},onSearchBoundaryPerson:function(b){var e=b[0];var d=b[1];this.searchForm.groupId="";var c=this;var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchBoundaryPerson,params:{what:this.searchForm.whatEncoded(),startIndex:e,pageCount:d,boundary:this.mapBounds},callback:function(f){c.boundarySearchResponseHandler.apply(c,[f,e,d]);}};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.BOUNDARY_PERSONS,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.BOUNDARY_PERSONS);},onSearchBoundaryPersonGlobal:function(d){var f=(d!==undefined&&d.startIndex!==undefined)?d.startIndex:1;var e=(d!==undefined&&d.pageCount!==undefined)?d.pageCount:20;var b=(d!==undefined&&d.manual!==undefined)?d.manual:false;this.searchForm.groupId="";var c=this;var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchBoundaryPersonGlobal,params:{what:this.searchForm.whatEncoded(),startIndex:f,pageCount:e},callback:function(g){c.boundarySearchGlobalResponseHandler.apply(c,[g]);}};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.BOUNDARY,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,(b===true?this.SEARCH_MODE_CONFIG.BOUNDARY_MANUAL:this.SEARCH_MODE_CONFIG.BOUNDARY_AUTO));},onSearchBoundaryCompany:function(c){var f=c[0];var e=c[1];var a=c[2];this.searchForm.groupId="";var d=this;var b={action:Hitta.Routes.JsonResultController_getJsonMapSearchBoundaryCompany,params:{what:this.searchForm.whatEncoded(),startIndex:f,pageCount:e,boundary:this.mapBounds},callback:function(g){d.boundarySearchResponseHandler.apply(d,[g,a,e]);}};this.search(b);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.BOUNDARY_COMPANIES,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.BOUNDARY_COMPANIES);},onSearchBoundaryCompanyGlobal:function(d){var f=(d!==undefined&&d.startIndex!==undefined)?d.startIndex:1;var e=(d!==undefined&&d.pageCount!==undefined)?d.pageCount:20;var b=(d!==undefined&&d.manual!==undefined)?d.manual:false;this.searchForm.groupId="";var c=this;var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchBoundaryCompanyGlobal,params:{what:this.searchForm.whatEncoded(),startIndex:f,pageCount:e},callback:function(g){c.boundarySearchGlobalResponseHandler.apply(c,[g]);}};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.BOUNDARY,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,(b===true?this.SEARCH_MODE_CONFIG.BOUNDARY_MANUAL:this.SEARCH_MODE_CONFIG.BOUNDARY_AUTO));},onSearchGroup:function(b){var c=this;var e=b[0];var d=b[1];var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchGroup,params:{what:this.searchForm.whatEncoded(),groupId:this.searchForm.groupId,startIndex:e,pageCount:d},callback:function(f){c.groupSearchResponseHandler.apply(c,[f]);}};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.GROUP,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.GROUP);},onSearchVkid:function(c){var b=hitta.hash;var d=this;var a={action:Hitta.Routes.JsonResultController_getVkiid,params:{vkiid:b.vkid},callback:function(e){d.vkidResponseHandler.apply(d,[e]);},state:c.state};this.search(a);},onSearchLocation:function(b){var e=b.from;var d=b.to;var c=b.level||this.currentLevel;this.currentLevel=c;var a={action:Hitta.Routes.JsonResultController_getJsonMapSearchLocation,params:{where:this.searchForm.whereEncoded(),startIndex:e,pageCount:d,level:c},callback:b.callback||this.locationSearchResponseHandler};this.search(a);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{sm:this.SEARCH_MODE_CONFIG.LOCATIONS,rlm:this.RESULT_LIST_MODE_CONFIG.DEFAULT});hitta.common.Event.trigger(hitta.common.Events.SEARCH_MODE,this.SEARCH_MODE_CONFIG.LOCATIONS);},onSearchLocationChoice:function(a){var b=this;a.callback=this.searchLocationChoiceResponseHandler;this.onSearchLocation(a);},searchLocationChoiceResponseHandler:function(a){hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS_LOCATION_CHOICE,a);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},updateMapBounds:function(b){var a=b.hmap.getBounds();this.mapBounds=a.sw.north+":"+a.sw.east+","+a.ne.north+":"+a.ne.east;},clearKartPrio:function(a){a.kartprio={total:0,included:0,company:[]};return a;},register:function(){hitta.common.Event.register(hitta.common.Events.SEARCH_MIXED,this,this.onSearchMixed);hitta.common.Event.register(hitta.common.Events.SEARCH_MIXED_ALL_PRODUCTS,this,this.onSearchMixedAllProducts);hitta.common.Event.register(hitta.common.Events.SEARCH_COMPANY,this,this.onSearchCompany);hitta.common.Event.register(hitta.common.Events.SEARCH_COMPANY_ALL_PRODUCTS,this,this.onSearchCompanyAllProducts);hitta.common.Event.register(hitta.common.Events.SEARCH_PERSON,this,this.onSearchPerson);hitta.common.Event.register(hitta.common.Events.SEARCH_BOUNDARY,this,this.onSearchBoundary);hitta.common.Event.register(hitta.common.Events.SEARCH_BOUNDARY_GLOBAL,this,this.onSearchBoundaryGlobal);hitta.common.Event.register(hitta.common.Events.SEARCH_BOUNDARY_PERSON,this,this.onSearchBoundaryPerson);hitta.common.Event.register(hitta.common.Events.SEARCH_BOUNDARY_PERSON_GLOBAL,this,this.onSearchBoundaryPersonGlobal);hitta.common.Event.register(hitta.common.Events.SEARCH_BOUNDARY_COMPANY,this,this.onSearchBoundaryCompany);hitta.common.Event.register(hitta.common.Events.SEARCH_BOUNDARY_COMPANY_GLOBAL,this,this.onSearchBoundaryCompanyGlobal);hitta.common.Event.register(hitta.common.Events.SEARCH_GROUP,this,this.onSearchGroup);hitta.common.Event.register(hitta.common.Events.SEARCH_VKID,this,this.onSearchVkid);hitta.common.Event.register(hitta.common.Events.SEARCH_LOCATION,this,this.onSearchLocation);hitta.common.Event.register(hitta.common.Events.SEARCH_LOCATION_CHOICE,this,this.onSearchLocationChoice);hitta.common.Event.register(hitta.common.Events.MAP_MOVE_END,this,this.updateMapBounds);}});Hitta.Map.MarkerManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.MarkerManager",init:function(){this.markers=null;},render:function(b){this.markers={};hitta.common.Event.trigger(hitta.common.Events.MARKERS_PRE_RENDER);for(var d=0,a=b.length;d<a;d++){if(b[d].hMarker!==undefined){var c=b[d].hMarker;if(b.length==1){c.isSingleHit=true;}this.markers[c.getId()]=c;hitta.common.Event.trigger(hitta.common.Events.MAP_ADD_OVERLAY,c);}}hitta.common.Event.trigger(hitta.common.Events.MARKER_RENDER_FINISHED,b);},clear:function(){if(this.markers===null){return 0;}for(var b in this.markers){if(this.markers[b]!==null){var a=this.markers[b];a.hMarker.infoBox.defaultOrientation="above";if(a.hMarker.isAdded&&(a.hMarker.element.parentElement||a.hMarker.element.parentNode)){a.remove();}}}this.markers=null;},resetAll:function(){if(arguments[0]===hitta.common.Config.SEARCH_MODE.BOUNDARY_AUTO){return;}if(this.ncMarkers){for(var a in this.ncMarkers){if(this.ncMarkers.hasOwnProperty(a)){delete this.ncMarkers[a].hMarker.noClose;this.ncMarkers[a].remove();}}delete this.ncMarkers;}},onRender:function(d){hitta.common.Event.trigger(hitta.common.Events.MARKERS_PRE_RENDER);for(var c=0,a=d.length;c<a;c++){var b=d[c];this.markers[b.getId()]=b;hitta.common.Event.trigger(hitta.common.Events.MAP_ADD_OVERLAY,b);}hitta.common.Event.trigger(hitta.common.Events.MARKER_RENDER_FINISHED,this.markers);},onClear:function(){this.clear();},onMarkerHide:function(b){var a=this.markers[b];if(a!==undefined){var c=a.hit;this.markers[b].hide();}},onMarkerShow:function(b){var a=this.markers[b];if(a!==undefined){var c=a.hit;this.markers[b].show();}},register:function(){hitta.common.Event.register(hitta.common.Events.SEARCH_MODE,this,this.resetAll);hitta.common.Event.register(hitta.common.Events.MARKERS_CLEAR,this,this.onClear);hitta.common.Event.register(hitta.common.Events.MARKERS_RENDER,this,this.onRender);hitta.common.Event.register(hitta.common.Events.MARKER_POPUP_HIDE,this,this.onMarkerHide);hitta.common.Event.register(hitta.common.Events.MARKER_POPUP_SHOW,this,this.onMarkerShow);}});Hitta.Map.DistanceManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.DistanceManager",init:function(){this.hmap=null;this.hdistanceTool=null;},setHMap:function(a){this.hmap=a;},distanceCallback:function(a){hitta.common.Event.trigger(hitta.common.Events.DISTANCE_MANAGER_UPDATE,a);},pointCallback:function(a){hitta.common.Event.trigger(hitta.common.Events.DISTANCE_MANAGER_POINT);},doneCallback:function(){hitta.common.Event.trigger(hitta.common.Events.DISTANCE_MANAGER_DONE);},show:function(){this.hdistanceTool=new HDistanceTool(this.hmap,this.distanceCallback,this.pointCallback,this.doneCallback);},hide:function(){if(null!==this.hdistanceTool){this.clear();this.hdistanceTool.close();}this.hdistanceTool=null;},clear:function(){var a=this;a.hdistanceTool.reset();},undo:function(){var a=this;a.hdistanceTool.undo();},register:function(){hitta.common.Event.register(hitta.common.Events.DISTANCE_TOOL_SHOW,this,this.show);hitta.common.Event.register(hitta.common.Events.DISTANCE_TOOL_HIDE,this,this.hide);hitta.common.Event.register(hitta.common.Events.DISTANCE_TOOL_CLEAR,this,this.clear);hitta.common.Event.register(hitta.common.Events.DISTANCE_TOOL_UNDO,this,this.undo);}});Hitta.Map.CoordinateManager=Hitta.Common.Control.extend({init:function(){this.hmap=null;this.hcoordinateTool=null;},setHMap:function(a){this.hmap=a;},coordinateCallback:function(b){var a=this.hmap.fromRT90ToLatLng(b);hitta.common.Event.trigger(hitta.common.Events.COORDINATE_MANAGER_UPDATE,{rt90point:b,wgs84point:a});},show:function(){var a=this;a.hcoordinateTool=new HCoordinateTool(a.hmap,a.coordinateCallback);a.coordinateCallback(a.hmap.getCenter());},hide:function(){if(null!==this.hcoordinateTool){this.hcoordinateTool.close();}this.hcoordinateTool=null;},register:function(){var a=this;hitta.common.Event.register(hitta.common.Events.COORDINATE_TOOL_SHOW,a,a.show);hitta.common.Event.register(hitta.common.Events.COORDINATE_TOOL_HIDE,a,a.hide);}});Hitta.Map.MapPinManager=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Map.MapPinManager",init:function(){this.hmap=null;this.currentContainer=null;this.listeners=[];this.mapClickListener=null;this.markers=[];this.currentMarker=null;},setHMap:function(a){this.hmap=a;},updateText:function(b){var a=this;a.currentContainer.html(b);hitta.common.Event.trigger(hitta.common.Events.MAPPIN_MANAGER_UPDATE,a.createUrl());},updateIcon:function(c){var b=this;var a=jq.extend({},HIcon.H_DEFAULT_ICON,{image:c});b.currentMarker.setIcon(a);hitta.common.Event.trigger(hitta.common.Events.MAPPIN_MANAGER_UPDATE,b.createUrl());},createUrl:function(){var e=this;var d="[";for(var b=0;b<e.markers.length;b++){var a=e.markers[b].getRT90Point();var c=e.markers[b].getIcon();var f=e.markers[b].getInfoBox();var g=f.getContentContainer();d+='{ "x":"'+a.east+'", "y":"'+a.north+'", "i":"'+c.image+'", "t":"'+jq(g).text()+'"}';if(b<e.markers.length-1){d+=",";}}d+="]";return d;},clear:function(){var b=this;for(var a=0;a<b.markers.length;a++){b.hmap.removeOverlay(b.markers[a]);}b.currentContainer=null;b.currentMarker=null;HEvent.removeListeners(b.listeners);b.listeners=[];b.markers=[];hitta.common.Event.trigger(hitta.common.Events.MAPPIN_MANAGER_UPDATE,b.createUrl());},newMapPin:function(){var d=this;var c=new HIcon(Hitta.Router.fromPublic(hitta.common.Config.get("map-pin.marker.default.image-path")));c.size=hitta.common.Config.get("map-pin.marker.size");var b=new HMarker(d.hmap.getCenter(),c);b.enableDragging();d.hmap.addOverlay(b);b.bindInfoBoxHtml('<div style="line-height: 14px;">(ny punkt)</div>',new HSize(150,110));b.openInfoBoxBound();d.markers.push(b);var a=b.getInfoBox().getContentContainer();d.currentContainer=jq(a);d.listeners.push(HEvent.addListener(b,HMarker.EVENT_DRAG_END,function(e){hitta.common.Event.trigger(hitta.common.Events.MAPPIN_MANAGER_UPDATE,d.createUrl());}));if(null!==d.mapClickListener){HEvent.removeListener(d.mapClickListener);d.mapClickListener=null;}d.mapClickListener=HEvent.addListener(d.hmap,HMap.EVENT_MAP_CLICK,function(e){d.currentMarker.setRT90Point(e);hitta.common.Event.trigger(hitta.common.Events.MAPPIN_MANAGER_UPDATE,d.createUrl());});jq(b.element).click(function(e){e.stopPropagation();});jq(b.getInfoBox().element).click(function(e){e.stopPropagation();});d.currentMarker=b;hitta.common.Event.trigger(hitta.common.Events.MAPPIN_MANAGER_UPDATE,d.createUrl());},register:function(){var a=this;hitta.common.Event.register(hitta.common.Events.MAPPIN_TOOLBAR_SHOW,a,function(){hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE,{hmap:a.hmap});a.newMapPin();});hitta.common.Event.register(hitta.common.Events.MAPPIN_TOOLBAR_HIDE,a,a.clear);hitta.common.Event.register(hitta.common.Events.MAPPIN_TOOLBAR_TEXT_UPDATED,a,a.updateText);hitta.common.Event.register(hitta.common.Events.MAPPIN_TOOLBAR_ICON_UPDATED,a,a.updateIcon);hitta.common.Event.register(hitta.common.Events.MAPPIN_TOOLBAR_NEW,a,a.newMapPin);}});Hitta.Map.Element=Class.extend({CLASS_NAME:"Hitta.Map.Element",init:function(a){this.hit={label:"-",display:"${display}",markerId:"${markerId}"};if(a){jq.extend(this.hit,a);}},render:function(){this.create();this.observe();return this.domElement;},create:function(){var b=this.hit.display;if(b.length>30){b=b.substring(0,30)+"...";}var a=this.hit.label;this.domElement=jq("<li>");this.label=jq("<div>").attr("class","count").html(a+".");this.displayName=jq("<div>").attr("class","display-name");if(this.hit.products&&this.hit.products[Hitta.Products.KARTPRIO.id]){this.displayName.addClass("kart-prio");}this.display=jq("<a>").attr({id:this.hit.markerId,href:""}).html(b);this.displayName.append(this.display);this.domElement.append(this.label);this.domElement.append(this.displayName);},onClick:function(){var a=this.hit;if(a.detailPage!==undefined){this.openNewWindow();}},openNewWindow:function(){var a=this.hit.getDetailPageLink();var b=window.open(a,"_blank");b.focus();return false;},onMouseOver:function(){hitta.common.Event.trigger(hitta.common.Events.MARKER_POPUP_SHOW,this.hit.markerId);},onMouseOut:function(){hitta.common.Event.trigger(hitta.common.Events.MARKER_POPUP_HIDE,this.hit.markerId);},observe:function(){var a=this;this.display.bind({click:function(b){b.preventDefault();a.onClick();},mouseover:function(b){b.preventDefault();a.onMouseOver();},mouseout:function(b){b.preventDefault();a.onMouseOut();}});},dispose:function(){this.display.click=null;this.display.mouseover=null;this.display.mouseout=null;this.display=null;this.label=null;this.displayName=null;this.domElement=null;this.hit=null;}});Hitta.Map.LocationElement=Hitta.Map.Element.extend({CLASS_NAME:"Hitta.Map.LocationElement",init:function(a){this._super(a);this.coord=this.hit.poi?this.hit.poi.coord:this.hit.address.coord;this.city=this.hit.poi?this.hit.poi.city:this.hit.address.city;},create:function(){var a="-";if(this.hit.label!=="${label}"){a=this.hit.label;}this.domElement=jq("<li>");this.label=jq("<div>").attr("class","count").html(a+".");this.displayName=jq("<div>").attr("class","display-name");this.display=jq("<a>").attr({id:this.hit.markerId,href:""}).html(this.hit.display);this.displayName.append(this.display);this.domElement.append(this.label);this.domElement.append(this.displayName);},onClick:function(){if(this.coord&&this.coord.east&&this.coord.north){hitta.common.Event.trigger(hitta.common.Events.MAP_FOCUS,{hits:[this.hit]});hitta.common.Event.trigger(hitta.common.Events.MARKER_POPUP_SHOW,this.hit.markerId);hitta.common.Event.trigger(hitta.common.Events.STREETVIEW_NAVIGATE_TO,this.coord);hitta.common.Event.trigger(hitta.common.Events.STATE_UPDATE_HASH,{rlm:hitta.common.Config.RESULT_LIST_MODE.ZOOMED});}}});Hitta.Map.LocationChoiceElement=Hitta.Map.Element.extend({CLASS_NAME:"Hitta.Map.LocationChoiceElement",init:function(a){this._super(a);this.coord=this.hit.poi?this.hit.poi.coord:this.hit.address.coord;this.city=a.city;this.where=a.display.split(" ")[0]+", "+this.city;},create:function(){var b=this.hit.city;if(b.length>30){b=b.substring(0,30)+"...";}var a="-";if(this.hit.label!=="${label}"){a=this.hit.label;}this.domElement=jq("<li>");this.label=jq("<div>").attr("class","count").html(a+".");this.displayName=jq("<div>").attr("class","display-name");this.display=jq("<a>").attr({id:this.hit.markerId,href:""}).html(b);this.displayName.append(this.display);this.domElement.append(this.label);this.domElement.append(this.displayName);},onClick:function(){hitta.common.Event.trigger(hitta.common.Events.SUBMIT_SEARCH_FROM_LOCATION_CHOICE,{where:this.where});}});Hitta.Map.HResultContainer=Hitta.Common.HContainer.extend({CLASS_NAME:"Hitta.Map.HResultContainer",init:function(a){this._super(a);this.resultLists={};this.activeResultLists=[];this.balance={companies:0,persons:0};},add:function(b){var c=b.id;var a=b.resultList;this.balanceResult(a);if(this.resultLists[c]===undefined){this.resultLists[c]=a;this.append(a);this.activeResultLists.push(c);}else{this.refresh(c);this.activeResultLists.push(c);}},balanceResult:function(a){if(a.RESULT_TYPE!==undefined){this.balance[a.RESULT_TYPE]=a.balance;a.balanceHitList(this.balance);}},append:function(a){if(a.RESULT_TYPE!==undefined&&a.RESULT_TYPE==="companies"){this._super(a.renderHTMLTemplate(),true);}else{this._super(a.renderHTMLTemplate());}},refresh:function(b){var a=this.resultLists[b];a.refresh();},show:function(){this._super();for(var c=0,a=this.activeResultLists.length;c<a;c++){var b=this.resultLists[this.activeResultLists[c]];b.show();}},reset:function(){this.activeResultLists=[];this.balance={companies:0,persons:0};this.hide();},resetHeight:function(){var a=0;jq.each(this.content.find(".hit-list"),function(b,c){if(jq(c).css("display")!=="none"){a+=jq(c).height();}});this.content.height(a+5);this.contentRight.height(a+5);}});Hitta.Map.CompanyResult=Class.extend({});Hitta.Map.CompanyResult.prototype={CLASS_NAME:"Hitta.Map.CompanyResult",LABEL_PREV_PAGE:"mapresult.company.label.prevpage",LABEL_PREV_PAGE_DEFAULT:"mapresult.company.label.default-prevpage",LABEL_NEXT_PAGE:"mapresult.company.label.nextpage",PAGE_SIZE:20,RESULT_TYPE:"companies",init:function(){this.hits=[];this.formattedHits=[];this.hitsOnPrevPage=0;this.hitsOnNextPage=0;this.SEARCH_MODE_CONFIG=hitta.common.Config.SEARCH_MODE;this.companyHits=new Hitta.Map.CompanyHits();this.kartPrioHits=new Hitta.Map.KartPrioHits();this.HTMLTemplate=new Hitta.Map.CompanyHTMLTemplate({target:this});},hasHitsOnNextPage:function(){var b=this.getCurrentState().companies;var a=b.startIndex+this.hits.length-1;this.hitsOnNextPage=this.result.companies.total-a>this.PAGE_SIZE?this.PAGE_SIZE:this.result.companies.total-a;return this.hitsOnNextPage>0;},hasHitsOnPrevPage:function(){var a=this.getCurrentPage();var b=a>0;this.hitsOnPrevPage=a>1?this.PAGE_SIZE:"";return b;},getPrevPageLabel:function(){return hitta.common.language.get(this.LABEL_PREV_PAGE,this.hitsOnPrevPage);},getPrevPageDefaultLabel:function(){return hitta.common.language.get(this.LABEL_PREV_PAGE_DEFAULT);},getNextPageLabel:function(){return hitta.common.language.get(this.LABEL_NEXT_PAGE,this.hitsOnNextPage);},setBalance:function(b){var a=this.result;var c=this.kartPrioHits.getHits().length;this.balance=b.companies;if(a.persons.total===0&&(this.balance+c)<this.PAGE_SIZE){this.balance+=c;}this.kartPrioHits.setTotalBalance(this.balance);this.companyHits.setTotalBalance(this.balance);},getCurrentState:function(){return{totalBalance:this.balance,kartprio:this.kartPrioHits.getCurrentState(),companies:this.companyHits.getCurrentState()};},getPrevStartIndex:function(){return{kartprio:this.kartPrioHits.getPrevStartIndex(),companies:this.companyHits.getPrevStartIndex()};},getNextStartIndex:function(){return{kartprio:this.kartPrioHits.getNextStartIndex(),companies:this.companyHits.getNextStartIndex()};},getCurrentPage:function(){return this.companyHits.getCurrentPage();},setResult:function(a){this.result=a;this.kartPrioHits.setResult(a);this.companyHits.setResult(a);},format:function(a,b){this.setResult(a);this.kartPrioHits.format();this.companyHits.format();this.setGlobalHits(a);this.setBalance(b);this.merge();},setGlobalHits:function(a){if(a.companies.attribute){var b=a.companies.attribute;for(var c=0;c<b.length;c++){var d=b[c];if(d.name=="result.countrytotal"){this.globalHits=d.value;return;}}}this.globalHits=0;},getTotalCount:function(){return this.result.companies.total;},merge:function(){this.kartPrioHits.normalize();var a=this.kartPrioHits.getNormalizedHits();this.companyHits.normalize(a.length);var b=this.companyHits.getNormalizedHits();this.hits=jq.merge(jq.merge([],a),b);},renderHTMLTemplate:function(){this.render();return this.HTMLTemplate.getDomElement();},render:function(){this.HTMLTemplate.render();},setSearchMode:function(a){this.searchMode=a;if(this.defaultSearchMode===undefined){this.defaultSearchMode=a;}},show:function(){this.HTMLTemplate.show();},resetPaging:function(){this.defaultSearchMode=undefined;this.companyHits.resetCurrentState();this.companyHits.resetPagingStateHistory();this.kartPrioHits.resetCurrentState();this.kartPrioHits.resetPagingStateHistory();},reset:function(){this.HTMLTemplate.reset();this.hits=[];this.formattedHits=[];},refresh:function(){this.HTMLTemplate.refresh();},getHits:function(){return this.hits;},getResult:function(){return this.formattedHits;},balanceHitList:function(a){this.HTMLTemplate.balanceHitList(a);},pagePrev:function(){var a=this.getPrevStartIndex();if(this.hasHitsOnPrevPage()){this.pagingSearch(a.companies,this.PAGE_SIZE,a.kartprio);}else{this.defaultSearch(a.companies,this.PAGE_SIZE);}},pageNext:function(){var a=this.getNextStartIndex();this.pagingSearch(a.companies,this.PAGE_SIZE,a.kartprio);},pagingSearch:function(c,a,b){if(this.searchMode===this.SEARCH_MODE_CONFIG.MIXED||this.searchMode===this.SEARCH_MODE_CONFIG.COMPANIES){hitta.common.Event.trigger(hitta.common.Events.SEARCH_COMPANY,[c,a,b]);}else{if(this.searchMode===this.SEARCH_MODE_CONFIG.MIXED_ALL||this.searchMode===this.SEARCH_MODE_CONFIG.COMPANIES_ALL){hitta.common.Event.trigger(hitta.common.Events.SEARCH_COMPANY_ALL_PRODUCTS,{startIndex:c,pageCount:a,kartPrioStartIndex:b});}else{if(this.searchMode===this.SEARCH_MODE_CONFIG.GROUP){hitta.common.Event.trigger(hitta.common.Events.SEARCH_GROUP,[c,a]);}else{hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY_COMPANY,[c,a,b]);}}}},defaultSearch:function(b,a){if(this.defaultSearchType===this.SEARCH_MODE_CONFIG.MIXED){hitta.common.Event.trigger(hitta.common.Events.SEARCH_MIXED,[b,a]);}else{if(this.defaultSearchMode===this.SEARCH_MODE_CONFIG.MIXED_ALL){hitta.common.Event.trigger(hitta.common.Events.SEARCH_MIXED_ALL_PRODUCTS,{startIndex:b,pageCount:a});}else{if(this.defaultSearchMode===this.SEARCH_MODE_CONFIG.COMPANIES_ALL){hitta.common.Event.trigger(hitta.common.Events.SEARCH_COMPANY_ALL_PRODUCTS,{startIndex:b,pageCount:a,kartPrioStartIndex:1});}else{if(this.defaultSearchMode===this.SEARCH_MODE_CONFIG.COMPANIES){hitta.common.Event.trigger(hitta.common.Events.SEARCH_COMPANY,[b,a]);}else{if(this.defaultSearchMode===this.SEARCH_MODE_CONFIG.GROUP){hitta.common.Event.trigger(hitta.common.Events.SEARCH_GROUP,[b,a]);}else{hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY,{startIndex:b,pageCount:a});}}}}}}};Hitta.Map.PersonResult=Class.extend({});Hitta.Map.PersonResult.prototype={CLASS_NAME:"Hitta.Map.PersonResult",LABEL_PREV_PAGE:"mapresult.person.label.prevpage",LABEL_PREV_PAGE_DEFAULT:"mapresult.person.label.default-prevpage",LABEL_NEXT_PAGE:"mapresult.person.label.nextpage",PAGE_SIZE:20,RESULT_TYPE:"persons",init:function(){this.hits=[];this.formattedHits=[];this.hitsOnPrevPage=0;this.hitsOnNextPage=0;this.SEARCH_MODE_CONFIG=hitta.common.Config.SEARCH_MODE;this.personHits=new Hitta.Map.PersonHits();this.HTMLTemplate=new Hitta.Map.PersonHTMLTemplate({target:this});},hasHitsOnNextPage:function(){var a=this.getCurrentState().persons;var b=this.result.persons.total-(a.startIndex+a.balance-1);this.hitsOnNextPage=b>this.PAGE_SIZE?this.PAGE_SIZE:b;return this.hitsOnNextPage>0;},hasHitsOnPrevPage:function(){var a=this.getCurrentPage();var b=a>0;this.hitsOnPrevPage=a>1?this.PAGE_SIZE:"";return b;},getPrevPageLabel:function(){return hitta.common.language.get(this.LABEL_PREV_PAGE,this.hitsOnPrevPage);},getPrevPageDefaultLabel:function(){return hitta.common.language.get(this.LABEL_PREV_PAGE_DEFAULT);},getNextPageLabel:function(){return hitta.common.language.get(this.LABEL_NEXT_PAGE,this.hitsOnNextPage);},setBalance:function(a){this.balance=a;this.personHits.setTotalBalance(this.balance);},getCurrentState:function(){return{totalBalance:this.balance,persons:this.personHits.getCurrentState()};},getPrevStartIndex:function(){return{persons:this.personHits.getPrevStartIndex()};},getNextStartIndex:function(){return{persons:this.personHits.getNextStartIndex()};},getCurrentPage:function(){return this.personHits.getCurrentPage();},setResult:function(a){this.result=a;this.personHits.setResult(a);},format:function(a,b){this.setBalance(b.persons);this.setResult(a);this.setGlobalHits(a);this.personHits.format();this.merge();},setGlobalHits:function(a){if(a.persons.attribute){var b=a.persons.attribute;for(var c=0;c<b.length;c++){var d=b[c];if(d.name=="result.countrytotal"){this.globalHits=d.value;return;}}}this.globalHits=0;},getTotalCount:function(){var a=this.result.persons.total;var b=this.result.persons.included;return a<b?b:a;},merge:function(){this.personHits.normalize();var a=this.personHits.getNormalizedHits();this.hits=a;},renderHTMLTemplate:function(){this.render();return this.HTMLTemplate.getDomElement();},render:function(){this.HTMLTemplate.render();},setSearchMode:function(a){this.searchMode=a;if(this.defaultSearchMode===undefined){this.defaultSearchMode=a;}},show:function(){this.HTMLTemplate.show();},resetPaging:function(){this.personHits.resetCurrentState();this.personHits.resetPagingStateHistory();},reset:function(){this.HTMLTemplate.reset();this.hits=[];this.formattedHits=[];},refresh:function(){this.HTMLTemplate.refresh();},getHits:function(){return this.hits;},getResult:function(){return this.formattedHits;},balanceHitList:function(a){this.HTMLTemplate.balanceHitList(a);},pagePrev:function(){var a=this.getPrevStartIndex();if(this.hasHitsOnPrevPage()){this.pagingSearch(a.persons,this.PAGE_SIZE);}else{this.defaultSearch(a.persons,this.PAGE_SIZE);}},pageNext:function(){var a=this.getNextStartIndex();this.pagingSearch(a.persons,this.PAGE_SIZE);},pagingSearch:function(b,a){if(this.searchMode===this.SEARCH_MODE_CONFIG.MIXED||this.searchMode===this.SEARCH_MODE_CONFIG.PERSONS||this.searchMode===this.SEARCH_MODE_CONFIG.MIXED_ALL){hitta.common.Event.trigger(hitta.common.Events.SEARCH_PERSON,[b,a]);}else{hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY_PERSON,[b,a]);}},defaultSearch:function(b,a){if(this.defaultSearchMode===this.SEARCH_MODE_CONFIG.MIXED){hitta.common.Event.trigger(hitta.common.Events.SEARCH_MIXED,[b,a]);}else{if(this.defaultSearchMode===this.SEARCH_MODE_CONFIG.PERSONS){hitta.common.Event.trigger(hitta.common.Events.SEARCH_PERSON,[b,a]);}else{hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY,{startIndex:b,pageCount:a});}}}};Hitta.Map.LocationResult=Class.extend({});Hitta.Map.LocationResult.prototype={CLASS_NAME:"Hitta.Map.LocationResult",LABEL_PREV_PAGE:"mapresult.location.label.prevpage",LABEL_PREV_PAGE_DEFAULT:"mapresult.location.label.default-prevpage",LABEL_NEXT_PAGE:"mapresult.location.label.nextpage",PAGE_SIZE:20,init:function(){this.hits=[];this.formattedHits=[];this.hitsOnPrevPage=0;this.hitsOnNextPage=0;this.locationHits=new Hitta.Map.LocationHits();this.HTMLTemplate=new Hitta.Map.LocationHTMLTemplate({target:this});},hasHitsOnNextPage:function(){var a=this.getCurrentState().locations;var b=a.startIndex+a.balance-1;this.hitsOnNextPage=this.result.locations.total-b>this.PAGE_SIZE?this.PAGE_SIZE:this.result.locations.total-b;return this.hitsOnNextPage>0;},hasHitsOnPrevPage:function(){var a=this.getCurrentPage();var b=a>0;this.hitsOnPrevPage=a>1?this.PAGE_SIZE:"";return b;},getPrevPageLabel:function(){return hitta.common.language.get(this.LABEL_PREV_PAGE,this.hitsOnPrevPage);},getPrevPageDefaultLabel:function(){return hitta.common.language.get(this.LABEL_PREV_PAGE_DEFAULT);},getNextPageLabel:function(){return hitta.common.language.get(this.LABEL_NEXT_PAGE,this.hitsOnNextPage);},setBalance:function(a){this.balance=a;this.locationHits.setTotalBalance(this.balance);},getCurrentState:function(){return{totalBalance:this.balance,locations:this.locationHits.getCurrentState()};},getPrevStartIndex:function(){return{locations:this.locationHits.getPrevStartIndex()};},getNextStartIndex:function(){return{locations:this.locationHits.getNextStartIndex()};},getCurrentPage:function(){return this.locationHits.getCurrentPage();},setResult:function(a){this.result=a;this.locationHits.setResult(a);},format:function(a,b){if(a.locations.location.length===1){a.locations.location[0].getRouteLink=function(){try{var f=this.coordinate||this.address.coordinate;if(!this.displayName||!f){return null;}var c=this.displayName;var d="{url}#stop={north}:{east}~RT90|{address}";d=d.replace("{url}",Hitta.Router.reverse(Hitta.Routes.Application_route));d=d.replace("{north}",f.north);d=d.replace("{east}",f.east);d=d.replace("{address}",c);return d;}catch(e){console.log(e);return"getRouteLink generated error";}};}this.setBalance(b.locations);this.setResult(a);this.locationHits.format();this.merge();},getTotalCount:function(){var a=this.result.locations.total;var b=this.result.locations.included;return a<b?b:a;},merge:function(){this.locationHits.normalize();var a=this.locationHits.getHits();this.hits=a;},renderHTMLTemplate:function(){this.render();return this.HTMLTemplate.getDomElement();},render:function(){this.HTMLTemplate.render();},setSearchMode:function(a){this.searchMode=a;if(this.defaultSearchMode===undefined){this.defaultSearchMode=a;}},show:function(){this.HTMLTemplate.show();},resetPaging:function(){this.locationHits.resetCurrentState();this.locationHits.resetPagingStateHistory();},reset:function(){this.HTMLTemplate.reset();this.hits=[];this.formattedHits=[];},refresh:function(){this.HTMLTemplate.refresh();},getHits:function(){return this.hits;},getResult:function(){return this.formattedHits;},pagePrev:function(){var a=this.getPrevStartIndex();if(this.hasHitsOnPrevPage()){this.pagingSearch(a.locations,this.PAGE_SIZE);}else{this.defaultSearch(a.locations,this.PAGE_SIZE);}},pageNext:function(){var a=this.getNextStartIndex();this.pagingSearch(a.locations,this.PAGE_SIZE);},pagingSearch:function(b,a){if(this.searchMode===hitta.common.Config.SEARCH_MODE.LOCATIONS){hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION,{from:b,to:a});}},defaultSearch:function(b,a){this.pagingSearch(b,a);}};Hitta.Map.LocationChoiceResult=Hitta.Map.LocationResult.extend({CLASS_NAME:"Hitta.Map.LocationChoiceResult",init:function(){this._super();this.HTMLTemplate=new Hitta.Map.LocationChoiceHTMLTemplate({target:this});},pagingSearch:function(b,a){hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION_CHOICE,{from:b,to:a});}});Hitta.Map.TradeByIdResult=Class.extend({});Hitta.Map.TradeByIdResult.prototype={CLASS_NAME:"Hitta.Map.TradeByIdResult",RESULT_TYPE:"companies",init:function(){this.hits=[];this.formattedHits=[];this.HTMLTemplate=new Hitta.Map.TradeByIdHTMLTemplate({target:this});},balanceHitList:function(a){this.hitListBalance=a;},format:function(a){this.result=a;this.hits=a.company;},getTotalCount:function(){return this.result.total;},renderHTMLTemplate:function(){this.render();return this.HTMLTemplate.getDomElement();},render:function(){this.HTMLTemplate.render();},show:function(){this.HTMLTemplate.show();},reset:function(){this.HTMLTemplate.reset();this.hits=[];this.formattedHits=[];},refresh:function(){this.HTMLTemplate.refresh();},getHits:function(){return this.hits;},getResult:function(){return this.formattedHits;}};Hitta.Map.CompanyHits=Class.extend({});Hitta.Map.CompanyHits.prototype={CLASS_NAME:"Hitta.Map.CompanyHits",init:function(){this.hits=[];this.normalizedHits=[];this.currentState={balance:0,startIndex:1};this.pagingStateHistory=[];},setTotalBalance:function(a){this.totalBalance=a;},getCurrentState:function(){return this.currentState;},getPrevStartIndex:function(){var a=this.pagingStateHistory.pop();this.currentState=a;return a.startIndex;},getNextStartIndex:function(){var a={balance:this.currentState.balance,startIndex:this.currentState.startIndex};this.pagingStateHistory.push(a);this.currentState.startIndex+=a.balance;return this.currentState.startIndex;},setResult:function(a){this.result=a;},format:function(){this.reset();if(this.hasHits()){var a=this.result.companies.company;var c=this.result.kartprio!==undefined?this.result.kartprio.company:[];for(var d=0;d<a.length;d++){var f=false;for(var b=0;b<c.length;b++){var e=c[b].product;if(e&&e.length>0&&e[0].code=="6002"){if(c[b].id==a[d].id){f=true;}}}if(!f){this.hits.push(a[d]);}}}},hasHits:function(){return this.result.companies.included>0;},normalize:function(e){var d=this.totalBalance;if(e!==undefined){d-=e;}var b=[];for(var c=0,a=this.hits.length;c<d&&c<a;c++){b.push(this.hits[c]);}this.updateCurrentState(b.length);this.normalizedHits=b;},getHits:function(){return this.hits;},getNormalizedHits:function(){return this.normalizedHits;},updateCurrentState:function(a){this.currentState.balance=a;},getCurrentPage:function(){return this.pagingStateHistory.length;},reset:function(){this.hits=[];this.normalizedHits=[];},resetCurrentState:function(){this.currentState={balance:0,startIndex:1};},resetPagingStateHistory:function(){this.pagingStateHistory=[];}};Hitta.Map.KartPrioHits=Class.extend({});Hitta.Map.KartPrioHits.prototype={CLASS_NAME:"Hitta.Map.KartPrioHits",init:function(){this.hits=[];this.normalizedHits=[];this.currentState={balance:0,startIndex:1};this.pagingStateHistory=[];},setTotalBalance:function(a){this.totalBalance=a;},getCurrentState:function(){return this.currentState;},getPrevStartIndex:function(){var a=this.pagingStateHistory.pop();this.currentState=a;return a.startIndex;},getNextStartIndex:function(){var a={balance:this.currentState.balance,startIndex:this.currentState.startIndex};this.pagingStateHistory.push(a);this.currentState.startIndex+=a.balance;return this.currentState.startIndex;},setResult:function(a){this.result=a;},format:function(){this.reset();if(this.hasHits()){var a=this.result.kartprio.company;for(var b=0;b<a.length;b++){var c=a[b];var d=c.product;if(d&&d.length>0&&d[0].code=="6002"){this.hits.push(c);}}}},hasHits:function(){var a=this.result.kartprio;return a!==undefined&&a.company!==undefined&&a.company.length>0;},normalize:function(e){var d=this.totalBalance;if(e!==undefined){d-=e;}var b=[];for(var c=0,a=this.hits.length;c<d&&c<a;c++){b.push(this.hits[c]);}this.updateCurrentState(b.length);this.normalizedHits=b;},getHits:function(){return this.hits;},getNormalizedHits:function(){return this.normalizedHits;},updateCurrentState:function(a){this.currentState.balance=a;},getCurrentPage:function(){return this.pagingStateHistory.length;},reset:function(){this.hits=[];this.normalizedHits=[];},resetCurrentState:function(){this.currentState={balance:0,startIndex:1};},resetPagingStateHistory:function(){this.pagingStateHistory=[];}};Hitta.Map.PersonHits=Class.extend({});Hitta.Map.PersonHits.prototype={CLASS_NAME:"Hitta.Map.PersonHits",init:function(){this.hits=[];this.normalizedHits=[];this.currentState={balance:0,startIndex:1};this.pagingStateHistory=[];},setTotalBalance:function(a){this.totalBalance=a;},getCurrentState:function(){return this.currentState;},getPrevStartIndex:function(){var a=this.pagingStateHistory.pop();this.currentState=a;return a.startIndex;},getNextStartIndex:function(){var a={balance:this.currentState.balance,startIndex:this.currentState.startIndex};this.pagingStateHistory.push(a);this.currentState.startIndex+=a.balance;return this.currentState.startIndex;},setResult:function(a){this.result=a;},format:function(){this.reset();if(this.hasHits()){var a=this.result.persons.person;for(var b=0;b<a.length;b++){this.hits.push(a[b]);}}},hasHits:function(){return this.result.persons.included>0;},normalize:function(e){var d=this.totalBalance;if(e!==undefined){d-=e;}var b=[];for(var c=0,a=this.hits.length;c<d&&c<a;c++){b.push(this.hits[c]);}this.updateCurrentState(b.length);this.normalizedHits=b;},getHits:function(){return this.hits;},getNormalizedHits:function(){return this.normalizedHits;},updateCurrentState:function(a){this.currentState.balance=a;},getCurrentPage:function(){return this.pagingStateHistory.length;},reset:function(){this.hits=[];this.normalizedHits=[];},resetCurrentState:function(){this.currentState={balance:0,startIndex:1};},resetPagingStateHistory:function(){this.pagingStateHistory=[];}};Hitta.Map.LocationHits=Class.extend({});Hitta.Map.LocationHits.prototype={CLASS_NAME:"Hitta.Map.LocationHits",init:function(){this.hits=[];this.normalizedHits=[];this.currentState={balance:0,startIndex:1};this.pagingStateHistory=[];},setTotalBalance:function(a){this.totalBalance=a;},getCurrentState:function(){return this.currentState;},getPrevStartIndex:function(){var a=this.pagingStateHistory.pop();this.currentState=a;return a.startIndex;},getNextStartIndex:function(){var a={balance:this.currentState.balance,startIndex:this.currentState.startIndex};this.pagingStateHistory.push(a);this.currentState.startIndex+=a.balance;return this.currentState.startIndex;},setResult:function(a){this.result=a;},format:function(){this.reset();if(this.hasHits()){var a=this.result.locations.location;for(var b=0;b<a.length;b++){this.hits.push(a[b]);}}},hasHits:function(){return this.result.locations.included>0;},normalize:function(e){var d=this.totalBalance;if(e!==undefined){d-=e;}var b=[];for(var c=0,a=this.hits.length;c<a;c++){b.push(this.hits[c]);}this.updateCurrentState(b.length);this.normalizedHits=b;},getHits:function(){return this.normalizedHits;},updateCurrentState:function(a){this.currentState.balance=a;},getCurrentPage:function(){return this.pagingStateHistory.length;},reset:function(){this.hits=[];this.normalizedHits=[];},resetCurrentState:function(){this.currentState={balance:0,startIndex:1};},resetPagingStateHistory:function(){this.pagingStateHistory=[];}};Hitta.Map.CompanyHTMLTemplate=Class.extend({});Hitta.Map.CompanyHTMLTemplate.prototype={CLASS_NAME:"Hitta.Map.CompanyHTMLTemplate",init:function(a){this.resultList=a.target;this.domElement=jq("<div>").attr("class","hit-list");this.PagingControl=new Hitta.Map.PagingControl(this.resultList);this.GlobalHitsLink=new Hitta.Map.GlobalHitsLink(function(){hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY_COMPANY_GLOBAL,{startIndex:1,pageCount:20,state:{zoomLevel:1}});});this.hitElements=[];},balanceHitList:function(a){this.hitListBalance=a;},render:function(){this.renderHeader();this.renderBody();this.renderFooter();},getDomElement:function(){return this.domElement;},refresh:function(){this.render();},reset:function(){for(var b=0,a=this.hitElements.length;b<a;b++){var c=this.hitElements[b];c.dispose();}this.hitElements=[];this.hide();},hide:function(){this.domElement.hide();},show:function(){this.domElement.show();},createHeaderContainer:function(){this.headerContainer=jq("<div>").attr("class","header");this.headerLabelArea=jq("<div>").attr("class","headerLabel");this.headerIconElement=jq("<span>").attr("class","company-header-icon");this.headerLabelElement=jq("<h2>").attr("class","company-header-label").html(hitta.common.language.get("mapresult.company.label.header"));this.headerCountElement=jq("<span>").attr("class","result-count").html(this.resultList.getTotalCount());this.renderGlobalCount();this.headerContainer.append(this.headerIconElement);this.headerLabelArea.append(this.headerLabelElement);this.headerContainer.append(this.headerLabelArea);if(this.resultList.getTotalCount()===0){this.headerCountElement.html(hitta.common.language.get("mapresult.company.label.nohits"));}this.headerLabelArea.append(this.headerCountElement);this.headerCountElement.append(this.globalHitsElement);this.domElement.append(this.headerContainer);},renderGlobalCount:function(){this.globalHitsElement=this.renderGlobalHitsLink();this.headerLabelArea.append(this.globalHitsElement);},refreshHeaderContainer:function(){var a=this.resultList.getTotalCount();if(a===0){this.headerCountElement.html(hitta.common.language.get("mapresult.company.label.nohits"));}else{this.headerCountElement.html(a);}this.renderGlobalCount();},createBodyContainer:function(){this.bodyContainer=jq("<ul>").attr("class","body");this.domElement.append(this.bodyContainer);},clearBodyContainer:function(){this.bodyContainer.empty();},getFormattedHit:function(b,a){return new Hitta.Map.Company(b,a);},populateBodyContainer:function(){var b=this.resultList.getHits();for(var e=0,a=b.length;e<a;e++){var f=b[e];var c=this.getFormattedHit(f,e);c.format();this.resultList.formattedHits.push(c);var d=new Hitta.Map.Element(c);this.hitElements.push(d);this.bodyContainer.append(d.render());}},renderHeader:function(){if(this.headerContainer===undefined){this.createHeaderContainer();}else{this.refreshHeaderContainer();}},renderBody:function(){if(this.bodyContainer===undefined){this.createBodyContainer();}else{this.clearBodyContainer();}this.populateBodyContainer();},renderFooter:function(){if(this.PagingControl.isRendered()){this.PagingControl.refresh();}else{this.PagingControl.render();this.domElement.append(this.PagingControl.getDomElement());}this.PagingControl.normalize();},renderGlobalHitsLink:function(){if(this.GlobalHitsLink.isRendered()){this.GlobalHitsLink.refresh(this.resultList,this.resultList.searchMode);return this.GlobalHitsLink.getDomElement();}else{this.GlobalHitsLink.render(this.resultList,this.resultList.searchMode);return this.GlobalHitsLink.getDomElement();}}};Hitta.Map.PersonHTMLTemplate=Class.extend({});Hitta.Map.PersonHTMLTemplate.prototype={CLASS_NAME:"Hitta.Map.PersonHTMLTemplate",init:function(a){this.resultList=a.target;this.domElement=jq("<div>").attr("class","hit-list");this.PagingControl=new Hitta.Map.PagingControl(this.resultList);this.GlobalHitsLink=new Hitta.Map.GlobalHitsLink(function(){hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY_PERSON_GLOBAL,{startIndex:1,pageCount:20,state:{zoomLevel:1}});});this.hitElements=[];},balanceHitList:function(a){this.hitListBalance=a;},render:function(){this.renderHeader();this.renderBody();this.renderFooter();},getDomElement:function(){return this.domElement;},refresh:function(){this.render();},reset:function(){for(var b=0,a=this.hitElements.length;b<a;b++){var c=this.hitElements[b];c.dispose();}this.hitElements=[];this.hide();},hide:function(){this.domElement.hide();},show:function(){this.domElement.show();},createHeaderContainer:function(){this.headerContainer=jq("<div>").attr("class","header");this.headerLabelArea=jq("<div>").attr("class","headerLabel clearfix");this.headerIconElement=jq("<span>").attr("class","person-header-icon");this.headerLabelElement=jq("<h2>").attr("class","person-header-label").html(hitta.common.language.get("mapresult.person.label.header"));this.headerCountElement=jq("<span>").attr("class","result-count").html(this.resultList.getTotalCount());this.renderGlobalCount();this.headerContainer.append(this.headerIconElement);this.headerLabelArea.append(this.headerLabelElement);this.headerContainer.append(this.headerLabelArea);if(this.resultList.getTotalCount()===0){this.headerCountElement.html(hitta.common.language.get("mapresult.person.label.nohits"));}this.headerLabelArea.append(this.headerCountElement);this.domElement.append(this.headerContainer);},renderGlobalCount:function(){this.globalHitsElement=this.renderGlobalHitsLink();this.headerLabelArea.append(this.globalHitsElement);},refreshHeaderContainer:function(){var a=this.resultList.getTotalCount();if(a===0){this.headerCountElement.html(hitta.common.language.get("mapresult.person.label.nohits"));}else{this.headerCountElement.html(a);}this.renderGlobalCount();},createBodyContainer:function(){this.bodyContainer=jq("<ul>").attr("class","body");this.domElement.append(this.bodyContainer);},clearBodyContainer:function(){this.bodyContainer.empty();},populateBodyContainer:function(){var b=this.resultList.getHits();var h=this.hitListBalance.companies;for(var e=0,a=b.length;e<a;e++){var g=b[e];var c=hitta.hash.address?hitta.hash.address:0;var f=new Hitta.Map.Person(g,h+e,c);f.format();this.resultList.formattedHits.push(f);var d=new Hitta.Map.Element(f);this.hitElements.push(d);this.bodyContainer.append(d.render());}},renderHeader:function(){if(this.headerContainer===undefined){this.createHeaderContainer();}else{this.refreshHeaderContainer();}},renderBody:function(){if(this.bodyContainer===undefined){this.createBodyContainer();}else{this.clearBodyContainer();}this.populateBodyContainer();},renderFooter:function(){if(this.PagingControl.isRendered()){this.PagingControl.refresh();}else{this.PagingControl.render();this.domElement.append(this.PagingControl.getDomElement());}this.PagingControl.normalize();},renderGlobalHitsLink:function(){if(this.GlobalHitsLink.isRendered()){this.GlobalHitsLink.refresh(this.resultList,this.resultList.searchMode);return this.GlobalHitsLink.getDomElement();}else{this.GlobalHitsLink.render(this.resultList,this.resultList.searchMode);return this.GlobalHitsLink.getDomElement();}}};Hitta.Map.LocationHTMLTemplate=Class.extend({});Hitta.Map.LocationHTMLTemplate.prototype={CLASS_NAME:"Hitta.Map.LocationHTMLTemplate",init:function(a){this.resultList=a.target;this.domElement=jq("<div>").attr("class","hit-list");this.PagingControl=new Hitta.Map.PagingControl(this.resultList);this.hitElements=[];},render:function(){this.renderHeader();this.renderBody();this.renderFooter();},getDomElement:function(){return this.domElement;},refresh:function(){this.render();},reset:function(){for(var b=0,a=this.hitElements.length;b<a;b++){var c=this.hitElements[b];c.dispose();}this.hitElements=[];this.hide();},hide:function(){this.domElement.hide();},show:function(){this.domElement.show();},createHeaderContainer:function(){this.headerContainer=jq("<div>").attr("class","header");this.headerIconElement=jq("<span>").attr("class","location-header-icon");this.headerLabelElement=jq("<h2>").attr("class","location-header-label").html(hitta.common.language.get("mapresult.location.label.header"));this.headerCountElement=jq("<span>").attr("class","result-count").html(this.resultList.getTotalCount());this.moreLocationsLinkObject=new Hitta.Map.MoreLocationsLink(this.resultList);this.moreLocationsLink=this.renderMoreLocationsLink();this.headerContainer.append(this.headerIconElement);this.headerContainer.append(this.headerLabelElement);this.headerContainer.append(this.headerCountElement);this.headerContainer.append(this.moreLocationsLink);this.domElement.append(this.headerContainer);},refreshHeaderContainer:function(){this.headerLabelElement.html(hitta.common.language.get("mapresult.location.label.header"));this.headerCountElement.html(this.resultList.getTotalCount());this.moreLocationsLink=this.renderMoreLocationsLink();},createBodyContainer:function(){this.bodyContainer=jq("<ul/>").attr("class","body");this.domElement.append(this.bodyContainer);},clearBodyContainer:function(){this.bodyContainer.empty();},populateBodyContainer:function(){var b=this.resultList.getHits();for(var d=0,a=b.length;d<a;d++){var f=b[d];var g=new Hitta.Map.Location(f,d);this.resultList.formattedHits.push(g);var c=new Hitta.Map.LocationElement(g);this.hitElements.push(c);var e=c.render();this.bodyContainer.append(e);}},renderHeader:function(){if(this.headerContainer===undefined){this.createHeaderContainer();}else{this.refreshHeaderContainer();}},renderBody:function(){if(this.bodyContainer===undefined){this.createBodyContainer();}else{this.clearBodyContainer();}this.populateBodyContainer();},renderFooter:function(){if(this.PagingControl.isRendered()){this.PagingControl.refresh();}else{this.PagingControl.render();this.domElement.append(this.PagingControl.getDomElement());}this.PagingControl.normalize();},renderMoreLocationsLink:function(){this.moreLocationsLinkObject.render();return this.moreLocationsLinkObject.getDomElement();}};Hitta.Map.LocationChoiceHTMLTemplate=Hitta.Map.LocationHTMLTemplate.extend({CLASS_NAME:"Hitta.Map.LocationChoiceHTMLTemplate",init:function(a){this.resultList=a.target;this.domElement=jq("<div>").attr("class","hit-list");this.PagingControl=new Hitta.Map.PagingControl(this.resultList);this.hitElements=[];},render:function(){this.renderHeader();this.renderBody();this.renderFooter();},getDomElement:function(){return this.domElement;},refresh:function(){this.render();},reset:function(){for(var b=0,a=this.hitElements.length;b<a;b++){var c=this.hitElements[b];c.dispose();}this.hitElements=[];this.hide();},hide:function(){this.domElement.hide();},show:function(){this.domElement.show();},createHeaderContainer:function(){this.headerContainer=jq("<div>").attr("class","header");this.headerLabelElement=jq("<h2>").attr("class","location-choice-header");this.setHeaderText();this.headerContainer.append(this.headerLabelElement);this.domElement.append(this.headerContainer);},setHeaderText:function(){var a=jq("#where").val().toLowerCase();a=a.charAt(0).toUpperCase()+a.substr(1);var b="{location} finns på följande {count} orter. Vilken menade du?";b=b.replace("{location}",a).replace("{count}",this.resultList.getTotalCount());this.headerLabelElement.html(b);},refreshHeaderContainer:function(){this.setHeaderText();},createBodyContainer:function(){this.bodyContainer=jq("<ul/>").attr("class","body");this.domElement.append(this.bodyContainer);},clearBodyContainer:function(){this.bodyContainer.empty();},populateBodyContainer:function(){var b=this.resultList.getHits();for(var d=0,a=b.length;d<a;d++){var f=b[d];var g=new Hitta.Map.Location(f,d);this.resultList.formattedHits.push(g);var c=new Hitta.Map.LocationChoiceElement(g);this.hitElements.push(c);var e=c.render();this.bodyContainer.append(e);}},renderHeader:function(){if(this.headerContainer===undefined){this.createHeaderContainer();}else{this.refreshHeaderContainer();}},renderBody:function(){if(this.bodyContainer===undefined){this.createBodyContainer();}else{this.clearBodyContainer();}this.populateBodyContainer();},renderFooter:function(){if(this.PagingControl.isRendered()){this.PagingControl.refresh();}else{this.PagingControl.render();this.domElement.append(this.PagingControl.getDomElement());}this.PagingControl.normalize();}});Hitta.Map.TradeByIdHTMLTemplate=Hitta.Map.CompanyHTMLTemplate.extend({CLASS_NAME:"Hitta.Map.TradeByIdHTMLTemplate",init:function(a){this.resultList=a.target;this.domElement=jq("<div>").attr("class","hit-list");this.hitElements=[];},renderGlobalCount:function(){},getFormattedHit:function(b,a){return new Hitta.Map.TradeById(b,a);},renderFooter:function(){if(!this.domElement.find(".footer").size()){this.domElement.append(jq("<div>").attr("class","footer"));}}});Hitta.Map.PagingControl=Class.extend({});Hitta.Map.PagingControl.prototype={CLASS_NAME:"Hitta.Map.PagingControl",init:function(a){this.resultList=a;this.domElement=jq("<div>").attr("class","footer");this.rendered=false;},isRendered:function(){return this.rendered;},render:function(){this.createDOM();this.observeEvents();this.rendered=true;},createDOM:function(){var a=this.resultList;var c=jq("<div>").attr("class","paging");var b=jq("<div>").attr("class","paging");this.prevPageClickElement=jq("<a>").attr("href","").html(a.getPrevPageDefaultLabel());this.nextPageClickElement=jq("<a>").attr("href","").html(a.getNextPageLabel());c.append(this.prevPageClickElement);this.domElement.append(c);b.append(this.nextPageClickElement);this.domElement.append(b);},observeEvents:function(){var a=this;this.prevPageClickElement.bind("click",function(b){b.preventDefault();a.pagePrev();});this.nextPageClickElement.bind("click",function(b){b.preventDefault();a.pageNext();});},pagePrev:function(){this.resultList.pagePrev();},pageNext:function(){this.resultList.pageNext();},refresh:function(){},normalize:function(){var a=this.resultList;if(a.hasHitsOnNextPage()){this.nextPageClickElement.html(a.getNextPageLabel()).show();}else{this.nextPageClickElement.hide();}if(a.hasHitsOnPrevPage()){this.prevPageClickElement.html(a.getPrevPageLabel()).show();}else{this.prevPageClickElement.hide();}},getDomElement:function(){return this.domElement;}};Hitta.Map.GlobalHitsLink=Class.extend({});Hitta.Map.GlobalHitsLink.prototype={CLASS_NAME:"Hitta.Map.GlobalHitsLink",init:function(a){this.domElement=jq("<div/>");this.domElement.css({clear:"both"});this.rendered=false;this.callback=a;this.zoomLevel=null;},isRendered:function(){return this.rendered;},render:function(a,b){this.result=a;this.createDOM(b);this.observeEvents();this.rendered=true;},createDOM:function(b){var a=this.result;if(a.globalHits>0){}this.clickElement=jq("<a>");this.clickElement.addClass("global-hits-link");this.clickElement.attr("title",hitta.common.language.get("mapresult.global.hits.link.title"));this.setHTML(a,b);this.domElement.append(this.clickElement);},setHTML:function(b,f){var e=b.getTotalCount();var d=b.globalHits>=2000&&e>=2000&&b.globalHits!==e;var g=d?"fler":b.globalHits-e;this.clickElement.attr("href","").html(hitta.common.language.get("mapresult.global.hits.link.text").replace("{count}",g));var c=(f===2||(!d&&(g<=0||b.globalHits===undefined)||this.zoomLevel===null));var a=c?this.domElement.addClass("hidden"):this.domElement.removeClass("hidden");},observeEvents:function(){var a=this;this.clickElement.unbind("click");this.clickElement.bind("click",function(b){b.preventDefault();if(a.callback!==undefined){a.callback();}});this.updateZoomLevelOnEvents([hitta.common.Events.SEARCH_BOUNDARY_PERSON_GLOBAL,hitta.common.Events.SEARCH_BOUNDARY_COMPANY_GLOBAL,hitta.common.Events.RESULT_HITS_RENDERED]);},updateZoomLevelOnEvents:function(a){var b=this;jq(a).each(function(c,d){hitta.common.Event.register(d,b,function(e){b.zoomLevel=e.state.zoomLevel;});});},refresh:function(a,b){this.setHTML(a,b);this.observeEvents();},normalize:function(){},getDomElement:function(){return this.domElement;}};Hitta.Map.MoreLocationsLink=Class.extend({});Hitta.Map.MoreLocationsLink.prototype={CLASS_NAME:"Hitta.Map.MoreLocationsLink",init:function(a){this.result=a;this.domElement=jq("<div/>");this.domElement.css({display:"inline","margin-left":"4px",cursor:"pointer"});this.rendered=false;this.zoomLevel=null;},getAttribute:function(a,b){if(jq.isArray(a)){var c=jq.grep(a,function(e,d){return(e.name==b);});return c.length>0?c[0]:undefined;}return undefined;},nextLevel:function(){var a=this.getAttribute(this.result.result.locations.attribute,"result.nextlevel");return a!==undefined?parseInt(a.value,10):-1;},showNextLevel:function(){var a=this.nextLevel();return a>-1&&a<=5;},isRendered:function(){return this.rendered;},render:function(){this.createDOM();this.observeEvents();this.rendered=true;},createDOM:function(){this.domElement.empty();if(this.showNextLevel()){var a=this.result;this.clickElement=jq("<a>");this.clickElement.addClass("global-hits-link");this.setHTML(a);this.domElement.append(this.clickElement);}},setHTML:function(a){var b=Hitta.Map.SearchForm.where.val();var c="mapresult.more.locations.link";this.clickElement.attr("title",hitta.common.language.get(c+".title").replace("{location}",b));this.clickElement.html(hitta.common.language.get(c+".text").replace("{location}",b));},onClick:function(){var b=hitta.common.Config.get("map.result.paging.default-startIndex");var a=hitta.common.Config.get("map.result.paging.default-count");hitta.common.Event.trigger(hitta.common.Events.SEARCH_LOCATION,{from:b,to:a,level:this.nextLevel()});},observeEvents:function(){var a=this;if(this.showNextLevel()){this.clickElement.unbind("click");this.clickElement.bind("click",function(b){b.preventDefault();a.onClick();});}this.updateZoomLevelOnEvents([hitta.common.Events.SEARCH_BOUNDARY_PERSON_GLOBAL,hitta.common.Events.SEARCH_BOUNDARY_COMPANY_GLOBAL,hitta.common.Events.RESULT_HITS_RENDERED]);},updateZoomLevelOnEvents:function(a){var b=this;jq(a).each(function(c,d){hitta.common.Event.register(d,b,function(e){b.zoomLevel=e.state.zoomLevel;});});},refresh:function(a,b){this.setHTML(a,b);this.observeEvents();},normalize:function(){},getDomElement:function(){return this.domElement;}};Hitta.Map.ErrorResult=Class.extend({});Hitta.Map.ErrorResult.prototype={CLASS_NAME:"Hitta.Map.ErrorResult",init:function(){this.domElement=jq("<div>").attr("class","hit-list error");},reset:function(){this.hide();},hide:function(){if(this.domElement){this.domElement.hide();}},show:function(){if(this.domElement){this.domElement.show();}},renderHTMLTemplate:function(){this.domElement.append(hitta.common.language.get("mapresult.error.result-missing"));return this.domElement;},refresh:function(){this.show();}};Hitta.Map.Marker=Class.extend({CLASS_NAME:"Hitta.Map.Marker",init:function(a){this.hit=a;this.domElement=null;this.type="default";},remove:function(){hitta.common.Event.trigger(hitta.common.Events.MARKER_REMOVE,this);this.domElement=null;},getPoint:function(){return new HPointRT90(this.hit.address.coordinate.east,this.hit.address.coordinate.north);},getIcon:function(){var b=Hitta.Router.fromPublic(hitta.common.Config.get("url.images.icon.counter."+this.type,this.hit.index));var a=new HIcon(b);a.size=hitta.common.Config.get("map.marker.size");a.anchor=hitta.common.Config.get("map.marker.anchor");a.infoBoxAnchorBottom=hitta.common.Config.get("map.marker.infoBoxAnchorBottom");a.infoBoxAnchorTop=hitta.common.Config.get("map.marker.infoBoxAnchorTop");return a;},setMarker:function(){var a=this,b=null;this.hMarker=new HMarker(this.getPoint(),this.getIcon());this.hMarker.xitiImp=this.xitiImp;if(this.domElement!==null){b=new HShadeBox({marker:this.hMarker,content:this.domElement.html()});this.hMarker.infoBox=b;this.hMarker.toolTip=new HMarkerToolTip(this.hMarker,jq(this.domElement.html()).find("li.display").html());this.hMarker.setMode(HMarker.MODE_INFOBOX_HOVER);this.hMarker.parentMarker=this;}},makeSticky:function(){this.onCloseListener=HEvent.addListener(this.hMarker,HMarker.EVENT_INFOBOX_CLOSE,function(){this.getInfoBox().mouseIsOver=false;this.setMode(HMarker.MODE_INFOBOX_HOVER);});this.hMarker.setMode(HMarker.MODE_INFOBOX_CLICK);this.hMarker.noClose=true;},onInfoBoxClicked:function(c){var a=c;if(!c){a=window.event;}jq.Event(a).preventDefault();var b=null;if(c.target){b=a.target;}else{if(a.srcElement){b=a.srcElement;}}if(b.nodeType==3){b=b.parentNode;}if(jq(b).attr("id")===this.detailPage.attr("id")){hitta.common.Event.trigger(hitta.common.Events.RESULT_SHOW_DETAIL_PAGE,this.hit.markerId);}return false;},getId:function(){return this.hit.markerId;},create:function(){this.domElement=jq("<div>");this.setContent();},setContent:function(){this.display=jq("<span>").css({"font-weight":"bold",display:"block","padding-bottom":"4px"});this.phones=jq("<span>").css({display:"block"});this.address=jq("<span>").css({display:"block","padding-top":"2px"});this.detailPage=jq("<a>").attr({href:"",id:"info_"+this.hit.markerId,"class":"detail-page"}).css({display:"block","padding-top":"2px"});this.display.html("header information");this.phones.html("phone information");this.address.html("address information");this.detailPage.html("detail page");this.domElement.append(this.display);this.domElement.append(this.phones);this.domElement.append(this.address);this.domElement.append(this.detailPage);},addToMap:function(){hitta.common.Event.trigger(hitta.common.Events.OVERLAY_ADD_TO_MAP,this.render());hitta.common.Event.trigger(hitta.common.Events.OVERLAY_ADD_TO_MAP,this.hMarker.toolTip);},removeFromMap:function(){hitta.common.Event.trigger(hitta.common.Events.OVERLAY_REMOVE_FROM_MAP,this.hMarker);hitta.common.Event.trigger(hitta.common.Events.OVERLAY_REMOVE_FROM_MAP,this.hMarker.toolTip);},register:function(){},render:function(){this.create();this.register();this.setMarker();return this.hMarker;},hide:function(){if(!this.hMarker.noClose){this.hMarker.closeInfoBox();}hitta.common.Event.trigger(hitta.common.Events.MARKER_OPEN_SHOW);},show:function(){if(this.hMarker.xitiImp){hitta.statistics.impression(this.hMarker.xitiImp);delete this.hMarker.xitiImp;}this.hMarker.openInfoBoxBound();hitta.common.Event.trigger(hitta.common.Events.MARKER_OPEN_SHOW,this.hMarker);}});Hitta.Map.LocationMarker=Hitta.Map.Marker.extend({CLASS_NAME:"Hitta.Map.LocationMarker",init:function(a){this._super(a);this.type="location";this.coord=this.hit.poi?this.hit.poi.coord:this.hit.address.coord;this.isSingleHit=false;},getPoint:function(){return new HPointRT90(this.coord.east,this.coord.north);},onInfoBoxClicked:function(c){var a=c;if(!c){a=window.event;}jq.Event(a).preventDefault();var b=null;if(c.target){b=a.target;}else{if(a.srcElement){b=a.srcElement;}}if(b.nodeType==3){b=b.parentNode;}if(jq(b).attr("id")===this.detailPage.attr("id")){if(this.coord&&this.coord.east&&this.coord.north){hitta.common.Event.trigger(hitta.common.Events.MAP_SET_BOUNDS,{hits:[this.hit]});hitta.common.Event.trigger(hitta.common.Events.MARKER_POPUP_SHOW,this.hit.markerId);}}},removeDetailPage:function(){var a=jq(this.hMarker.infoBox.getContentContainer());a.find(".detail-page").css({visibility:"hidden"});},setContent:function(){var a=this.hit;var j=a.address;var b=a.poi;var c;var e=jq("<ul>").attr("class","h-marker-content");var f=jq("<li>").attr("class","display").html(a.display);f.css({width:"115px"});e.append(f);if(j!==undefined){c=jq("<li>").html(j.zipcode+" "+j.city);c.css({width:"115px"});e.append(c);}if(a.type!==undefined){var g=jq("<li>").html("("+a.type+")");e.append(g);}if(!this.isSingleHit){this.detailPage=jq("<a>").attr({href:document.location.hash,id:"zoom_"+this.coord.east+":"+this.coord.north+","+this.coord.east+":"+this.coord.north,"class":"detail-page"}).css({display:"block","padding-top":"2px"}).html("Zooma in");var d=jq("<li>").append(this.detailPage);e.append(d);}this.routePage=jq("<a>");this.routePage.attr({id:"info_"+this.hit.markerId,href:this.hit.getRouteLink(),"class":"route-page failover-disabled"});this.routePage.css({display:"block","padding-top":"2px"});this.routePage.html(hitta.common.language.get("map.marker.popup.route"));this.routePage.attr({target:"_blank"});this.routePage.attr({onClick:"return xt_click(this,'C',"+xtn2+",'vägbeskrivning','N')"});var h=jq("<li>").append(this.routePage);e.append(h);this.domElement.append(e);},onMarkerShow:function(a){if(a===this.hit.markerId){this.removeDetailPage();}},onInfoBoxZoom:function(d){if(d!==undefined&&d.markerId!==undefined&&d.markerId===this.hit.markerId){var a,b;var c=d.boundsSource!==undefined?d.boundsSource:null;if(c){a=c.split("_")[1];a=[a.split(",")[0].split(":"),a.split(",")[1].split(":")];b=new HBoundsRT90(new HPointRT90(a[0][0],a[0][1]),new HPointRT90(a[1][0],a[1][1]));hitta.common.Event.trigger(hitta.common.Events.MAP_FOCUS,{bounds:b});}}},remove:function(){hitta.common.Event.unregister(hitta.common.Events.RESULT_LOCATION_HIT_CLICKED,this,this.onMarkerShow);this._super();},register:function(){hitta.common.Event.register(hitta.common.Events.RESULT_LOCATION_HIT_CLICKED,this,this.onMarkerShow);hitta.common.Event.register(hitta.common.Events.MAP_INFO_BOX_ZOOM,this,this.onInfoBoxZoom);}});Hitta.Map.CompanyMarker=Hitta.Map.Marker.extend({CLASS_NAME:"Hitta.Map.CompanyMarker",init:function(a){this._super(a);this.type="company";},setPhones:function(c){if(this.hit.phones){for(var b=0;b<Math.min(this.hit.phones.length,2);b++){var a=jq("<li>").html([this.hit.phones[b].mapLabel+":",this.hit.phones[b].displayAs].join(" "));c.append(a);}}},setContent:function(){var g=this;var d=jq("<ul>").attr("class","h-marker-content");if(this.hit.logoPath){var f=jq("<li></li>");var b=jq("<img/>");b.attr({src:hitta.common.Config.sv["url.upload"]+this.hit.logoPath,width:"100",height:"50"});f.css({width:"124px",marginLeft:"0"});b.css({margin:"0 auto",display:"block"});f.append(b);d.append(f);this.xitiImp=this.hit.xitiImp;}var e=jq("<li>").attr("class","display").html(this.hit.display);e.css({width:"115px"});d.append(e);this.setPhones(d);var j=jq("<li>").html([this.hit.address.street,this.hit.address.number].join(" "));j.css({width:"115px"});d.append(j);var a=jq("<li>").html(this.hit.address.city);a.css({width:"115px"});d.append(a);if(jq("#company").length===0){this.detailPage=jq("<a>");this.detailPage.attr({href:this.hit.getDetailPageLink(),id:"info_"+this.hit.markerId,"class":"detail-page"});this.detailPage.css({display:"block","padding-top":"2px"});this.detailPage.html(hitta.common.language.get("map.marker.popup.moreinfo"));this.detailPage.attr({target:"_blank"});if(this.xitiImp instanceof Array){this.detailPage.attr({onClick:"return xt_adc(this,'PUB-["+this.xitiImp[1]+"]-["+this.xitiImp[2]+"]-["+this.xitiImp[0]+"]')"});var c=jq("<img>").attr({src:"http://logi118.xiti.com/get.ad?xts=488645&ati=PUB-["+this.xitiImp[1]+"]-["+this.xitiImp[2]+"]-["+this.xitiImp[0]+"]&type=AT&rn="+Math.floor(Math.random()*1000001)+"&url=http://www.hitta.se/public/images/blank.gif"});this.detailPage.append(c);}this.routePage=jq("<a>");this.routePage.attr({href:this.hit.getRouteLink(),id:"info_"+this.hit.markerId,"class":"route-page failover-disabled"});this.routePage.css({display:"block","padding-top":"2px"});this.routePage.html(hitta.common.language.get("map.marker.popup.route"));this.routePage.attr({target:"_blank"});this.routePage.attr({onClick:"return xt_click(this,'C',getXtn2(),'vägbeskrivning','N')"});var h=jq("<li>").append(this.detailPage).append(this.routePage);d.append(h);}this.domElement.append(d);}});Hitta.Map.PersonMarker=Hitta.Map.Marker.extend({CLASS_NAME:"Hitta.Map.PersonMarker",init:function(a){this._super(a);this.type="person";},setContent:function(){var e=jq("<ul>").attr("class","h-marker-content");var f=jq("<li>").attr("class","display").html(this.hit.display);f.css({width:"115px"});e.append(f);if(this.hit.phones){for(var c=0;c<Math.min(this.hit.phones.length,2);c++){var b=jq("<li>").html([this.hit.phones[c].mapLabel+":",this.hit.phones[c].displayAs].join(" "));e.append(b);}}var a=jq("<li>").html([this.hit.address.street,this.hit.address.number].join(" "));a.css({width:"115px"});e.append(a);var g=jq("<li>").html(this.hit.address.city);g.css({width:"115px"});e.append(g);if(jq("#person").length===0){this.detailPage=jq("<a>");this.detailPage.attr({href:this.hit.getDetailPageLink(),"class":"detail-page"});this.detailPage.css({display:"block","padding-top":"2px"});this.detailPage.html(hitta.common.language.get("map.marker.popup.moreinfo"));this.detailPage.attr({target:"_blank"});this.routePage=jq("<a>");this.routePage.attr({href:this.hit.getRouteLink(),id:"info_"+this.hit.markerId,"class":"route-page failover-disabled"});this.routePage.css({display:"block","padding-top":"2px"});this.routePage.html(hitta.common.language.get("map.marker.popup.route"));this.routePage.attr({target:"_blank"});this.routePage.attr({onClick:"return xt_click(this,'C', getXtn2(),'vägbeskrivning','N')"});var d=jq("<li>").append(this.detailPage).append(this.routePage);e.append(d);}this.domElement.append(e);}});Hitta.Map.TradeByIdMarker=Hitta.Map.CompanyMarker.extend({CLASS_NAME:"Hitta.Map.TradeByIdMarker",setPhones:function(c){if(this.hit.phones){for(var b=0;b<Math.min(this.hit.phones.length,2);b++){var a=jq("<li>").html([this.hit.phones[b].mapLabel+":",this.hit.phones[b].displayAs].join(" "));c.append(a);}}}});Hitta.Map.MapMode.DistanceTool=Hitta.Map.MapMode.FloatingTool.extend({CLASS_NAME:"Hitta.Map.MapMode.DistanceTool",init:function(a){this._super(a);this.handler=new Hitta.Map.MapMode.DistanceToolbar(this.id);this.registerListeners();},update:function(a){this.handler.updateDistance(a);},registerListeners:function(){var a=this;hitta.common.Event.register(hitta.common.Events.DISTANCE_MANAGER_UPDATE,a,a.update);}});Hitta.Map.MapMode.CoordinateTool=Hitta.Map.MapMode.FloatingTool.extend({CLASS_NAME:"Hitta.Map.MapMode.CoordinateTool",init:function(a){this._super(a);this.handler=new Hitta.Map.MapMode.CoordinateToolbar(this.id);this.registerListeners();},update:function(a){this.handler.updateCoordinate(a);},registerListeners:function(){var a=this;hitta.common.Event.register(hitta.common.Events.COORDINATE_MANAGER_UPDATE,a,a.update);}});Hitta.Map.MapMode.MapPinTool=Hitta.Map.MapMode.FloatingTool.extend({CLASS_NAME:"Hitta.Map.MapMode.MapPinTool",init:function(a){this._super(a);this.handler=new Hitta.Map.MapMode.MapPinToolbar(this.id);this.registerListeners();},update:function(a){this.handler.updateMapPin(a);},registerListeners:function(){var a=this;hitta.common.Event.register(hitta.common.Events.MAPPIN_MANAGER_UPDATE,a,a.update);}});Hitta.Map.MapMode.DistanceToolbar=Hitta.Map.MapMode.FloatingToolbar.extend({CLASS_NAME:"Hitta.Map.MapMode.DistanceToolbar",renderContent:function(){var b=jq("<div>").attr("class","header");var h=jq("<div>").attr("class","label").html(hitta.common.language.get("distance.toolbar.label"));b.append(h);var c=jq("<div>");var d=jq("<ul>");var j=jq("<li>");var f=jq("<li>");var k=jq('<div class="walk">'+hitta.common.language.get("distance.toolbar.walk")+"</div>");var e=jq('<div class="bicycle">'+hitta.common.language.get("distance.toolbar.bicycle")+"</div>");this.distanceContainer=jq('<li class="distance"></li>');this.distanceContainer.html("0 m");this.walkContainer=jq("<span>");this.walkContainer.html("0 min");var a=jq('<div class="popup-box-separator"></div>');j.append(a);j.append(k);j.append(this.walkContainer);this.bicycleContainer=jq("<span>");this.bicycleContainer.html("0 min");f.append(e);f.append(this.bicycleContainer);d.append(this.distanceContainer);d.append(j);d.append(f);var g=jq('<li class="links">');this.clearLink=jq("<a>");this.clearLink.html(hitta.common.language.get("distance.toolbar.clear"));this.clearLink.attr("href","#");this.undoLink=jq("<a>");this.undoLink.html(hitta.common.language.get("distance.toolbar.undo"));this.undoLink.attr("href","#");this.undoLink.addClass("hidden");this.helpLink=jq("<a>");this.helpLink.attr("href","#");this.helpLink.attr("class","float-right");this.helpLink.html(hitta.common.language.get("distance.toolbar.help"));g.append(this.helpLink);g.append(this.clearLink);g.append(this.undoLink);d.append(g);c.append(d);this.helpContainer=jq("<div>");this.helpContainer.attr("class","distance-help hidden");this.helpContainer.html(hitta.common.language.get("distance.toolbar.help-text"));c.append(this.helpContainer);this.hContainer.setHeader(b);this.hContainer.setContent(c);this.hContainer.makeDraggable();},updateDistance:function(b){var a=b>1000?Math.ceil(b)/1000+" km":Math.ceil(b)+" m";if(this.distanceContainer!==undefined){this.distanceContainer.html(a.replace(/\./g,","));this.walkContainer.html(this.getTimeString(b,6));this.bicycleContainer.html(this.getTimeString(b,17));}},getTimeString:function(g,d){var c=Math.round((((g/1000)/d)*60)*10)/10;var e="";if(c>60){var a=c/60;var f=Math.floor(c/60);var b=a-f;e=f+" h, "+Math.round(b*60)+" min";}else{e=c+" min";}e=e.replace(/\./g,",");return e;},show:function(){hitta.common.Event.trigger(hitta.common.Events.DISTANCE_TOOL_SHOW);this._super();},hide:function(){this.updateDistance(0);hitta.common.Event.trigger(hitta.common.Events.DISTANCE_TOOL_HIDE);this._super();},done:function(){this.undoLink.addClass("hidden");},register:function(){var a=this;a._super();hitta.common.Event.register(hitta.common.Events.DISTANCE_MANAGER_DONE,a,a.done);hitta.common.Event.register(hitta.common.Events.DISTANCE_MANAGER_POINT,a,function(){a.undoLink.removeClass("hidden");});},toggleHelp:function(){if(this.helpContainer.hasClass("hidden")){this.helpContainer.removeClass("hidden");}else{this.helpContainer.addClass("hidden");}},observe:function(){var a=this;a.clearLink.bind("click",function(b){a.updateDistance(0);a.undoLink.addClass("hidden");hitta.common.Event.trigger(hitta.common.Events.DISTANCE_TOOL_CLEAR);});a.undoLink.bind("click",function(b){hitta.common.Event.trigger(hitta.common.Events.DISTANCE_TOOL_UNDO);});a.helpLink.bind("click",function(b){HEvent.stopEvent(b);a.toggleHelp();});}});Hitta.Map.MapMode.CoordinateToolbar=Hitta.Map.MapMode.FloatingToolbar.extend({CLASS_NAME:"Hitta.Map.MapMode.CoordinateToolbar",renderContent:function(){var e=jq("<div>").attr("class","header");var b=jq("<div>").attr("class","logo");var h=jq("<div>").attr("class","label").html(hitta.common.language.get("coordinate.toolbar.label"));var c=jq("<li>").html("<b>"+hitta.common.language.get("coordinate.toolbar.rt90")+"</b>");var f=jq("<li>").html("<b>"+hitta.common.language.get("coordinate.toolbar.wgs84")+"</b>");var k=jq("<li>").html("<b>"+hitta.common.language.get("coordinate.toolbar.decimal")+"</b>");e.append(b);e.append(h);var g=jq("<ul>");g.append(c);var d=jq("<li>");this.rt90container=jq('<input type="text" readonly="true">');d.append(this.rt90container);g.append(d);g.append(f);var j=jq("<li>");this.wgs84container=jq('<input type="text" readonly="true">');j.append(this.wgs84container);g.append(j);g.append(k);var a=jq("<li>");this.decimalContainer=jq('<input type="text" readonly="true">');a.append(this.decimalContainer);g.append(a);this.hContainer.setHeader(e);this.hContainer.setContent(g);this.hContainer.makeDraggable();},show:function(){hitta.common.Event.trigger(hitta.common.Events.COORDINATE_TOOL_SHOW);this._super();},hide:function(){hitta.common.Event.trigger(hitta.common.Events.COORDINATE_TOOL_HIDE);this._super();},updateCoordinate:function(c){var b=c.rt90point;var a=c.wgs84point;this.rt90container.val("X: "+b.north+", Y: "+b.east);this.wgs84container.val(this.unescapeHTML(a.toString()));this.decimalContainer.val(a.lat.toFixed(4)+", "+a.lng.toFixed(4));},unescapeHTML:function(a){return jq("<div />").html(a).text();}});Hitta.Map.MapMode.MapPinToolbar=Hitta.Map.MapMode.FloatingToolbar.extend({CLASS_NAME:"Hitta.Map.MapMode.MapPinToolbar",MAILBOX_ID:"mapPinMailBox",TEXTAREA_MAXCHARS:100,data:"",mailBox:null,renderContent:function(){var g=jq("<div>").attr("class","header");var k=jq("<div>").attr("class","label").html(hitta.common.language.get("map-pin.toolbar.label"));g.append(k);var h=jq("<div>");h.css("position","relative");var e=jq('<div class="instruction">');e.html("1. <strong>"+hitta.common.language.get("map-pin.toolbar.instruction1.1")+"</strong> "+hitta.common.language.get("map-pin.toolbar.instruction1.2"));h.append(e);var c=jq('<div class="instruction">');c.html("2. <strong>"+hitta.common.language.get("map-pin.toolbar.instruction2.1")+"</strong> "+hitta.common.language.get("map-pin.toolbar.instruction2.2"));h.append(c);this.textarea1=jq("<textarea>");h.append(this.textarea1);var b=jq('<div class="instruction">');b.html("3. <strong>"+hitta.common.language.get("map-pin.toolbar.instruction3.1")+"</strong> "+hitta.common.language.get("map-pin.toolbar.instruction3.2"));h.append(b);this.selectField=jq("<div>");this.selectField.attr("id","icon-selector");var j=jq("<div>");j.addClass("selector-arrow");j.attr("id","icon-selector-arrow");var d=jq("<div>");d.addClass("main-sprite-map arrow-down-sprite");d.attr("id","icon-arrow");j.append(d);this.iconList=jq("<ul>");this.iconList.attr("id","icon-list");this.addSelectOptions();h.append(this.selectField);h.append(j);h.append(this.iconList);var a=jq('<div class="instruction">');a.html(hitta.common.language.get("map-pin.toolbar.instruction4.1"));this.showLink=jq("<a></a>");this.showLink.attr("href","#");this.showLink.html(hitta.common.language.get("map-pin.toolbar.show"));a.append(this.showLink);a.append(" "+hitta.common.language.get("map-pin.toolbar.instruction4.2")+" ");this.mailLink=jq("<a></a>");this.mailLink.attr("href","#");this.mailLink.html(hitta.common.language.get("map-pin.toolbar.mail"));a.append(this.mailLink);a.css("margin-top","40px");h.append(a);this.textarea2=jq("<textarea>");h.append(this.textarea2);var f=jq('<div class="popup-box-separator"></div>');h.append(f);this.newLinkContainer=jq("<div></div>");this.newLinkContainer.html("+ ");this.newLinkContainer.addClass("new-map-pin");this.newLink=jq("<a>").html(hitta.common.language.get("map-pin.toolbar.new"));this.newLink.attr("href","#");this.newLinkContainer.append(this.newLink);h.append(this.newLinkContainer);this.hContainer.setHeader(g);this.hContainer.setContent(h);this.hContainer.makeDraggable();},addSelectOptions:function(){var b=hitta.common.Config.mapPinTypes;var g=function(j,k){return function(){jq(this).css({background:'url("'+jq(this).data("icon-url")+'") no-repeat scroll 2px 2px '+j,color:k});};};for(var d=0;d<b.length;d++){var f=Hitta.Router.fromPublic(b[d].iconUrl);var a=b[d].typeName;var e=jq("<li></li>");var h=hitta.common.language.get("map-pin.toolbar.options."+a);var c='url("'+f+'") no-repeat scroll 1px 1px #fff';if(d===0){this.selectField.html(h);this.selectField.css({background:'url("'+f+'") no-repeat scroll 2px 2px #fff'});}e.css("background",c);e.html(h);e.data("icon-url",Hitta.Router.fromPublic(b[d].iconUrl));e.data("text",h);e.mouseover(g("#00f","#fff"));e.mouseout(g("#fff","#003851"));this.iconList.append(e);}jq("#icon-selector, #icon-selector-arrow").live("click",function(){jq("#icon-arrow").toggleClass("arrow-down-sprite").toggleClass("arrow-up-sprite");jq("#icon-list").toggle();});jq("#icon-list li").live("click",function(){var j=jq(this);hitta.common.Event.trigger(hitta.common.Events.MAPPIN_TOOLBAR_ICON_UPDATED,j.data("icon-url"));jq("#icon-list").toggle();jq("#icon-selector").css("background",'url("'+j.data("icon-url")+'") no-repeat scroll 2px 2px #fff');jq("#icon-selector").html(j.data("text"));jq("#icon-arrow").toggleClass("arrow-down-sprite").toggleClass("arrow-up-sprite");});},show:function(){this.resetForm();hitta.common.Event.trigger(hitta.common.Events.MAPPIN_TOOLBAR_SHOW);this._super();this.setInputFocus();},hide:function(){if(this.mailBox!==null){this.mailBox.hide(this.MAILBOX_ID);}hitta.common.Event.trigger(hitta.common.Events.MAPPIN_TOOLBAR_HIDE);this._super();},setInputFocus:function(){this.textarea1.focus();},resetForm:function(){this.textarea1.val("");var a=hitta.common.Config.mapPinTypes;if(a.length>0){var b=Hitta.Router.fromPublic(a[0].iconUrl);var c=hitta.common.language.get("map-pin.toolbar.options."+a[0].typeName);this.selectField.html(c);this.selectField.css({background:'url("'+b+'") no-repeat scroll 2px 2px #fff'});}},updateMapPin:function(b){this.data=encodeURIComponent(b);var a=this.buildUrl();this.textarea2.val(a);},buildUrl:function(){var d={tool:false};hitta.hash.importObject(d);var b=hitta.hash.toHashString();var c=window.location.href.split("#")[0];var a=c+"#";a+=(b.length>0)?b+"&mp="+this.data:"mp="+this.data;return a;},getMailBoxOffset:function(f,b,e){var d=f.top;var a=e-b;var c=Math.max(f.left-a,10);return{left:c,top:d};},observe:function(){var a=this;a.newLink.bind("click",function(b){HEvent.stopEvent(b);a.resetForm();a.setInputFocus();hitta.common.Event.trigger(hitta.common.Events.MAPPIN_TOOLBAR_NEW);});a.textarea1.bind("keydown",function(b){if(b.stopPropagation){b.stopPropagation();}else{b.cancleBubble=true;}});a.textarea1.bind("keypress",function(b){if(b.keyCode===8||(b.keyCode>=37&&b.keyCode<=40)){return true;}if(jq(this).val().length>=a.TEXTAREA_MAXCHARS){return false;}});a.textarea1.bind("keyup",function(){hitta.common.Event.trigger(hitta.common.Events.MAPPIN_TOOLBAR_TEXT_UPDATED,jq(this).val());});a.textarea1.bind("paste",function(){setTimeout(function(){if(a.textarea1.val().length>a.TEXTAREA_MAXCHARS){a.textarea1.val(a.textarea1.val().substring(0,a.TEXTAREA_MAXCHARS));}},0);});a.textarea2.bind("click",function(){jq(this).select();});a.showLink.bind("click",function(c){HEvent.stopEvent(c);var b=a.buildUrl();window.open(b);});a.mailLink.bind("click",function(c){HEvent.stopEvent(c);var b=a.buildUrl();if(a.mailBox===null){a.mailBox=new Hitta.Map.ShareMailBox({parentId:a.MAILBOX_ID,messageLink:b,closeButtonText:hitta.common.language.get("floating.toolbar.close"),setOffsetCallback:function(h){var j=jq("#map-pin .popup-box").offset();var g=jq("#map-pin .popup-box").width();return a.getMailBoxOffset(j,g,h.getWidth());},hBoxContainer:jq("#mapContainer")});a.mailBox.activate();}else{a.mailBox.messageLink=b;var f=jq("#map-pin .popup-box").offset();var d=jq("#map-pin .popup-box").width();a.mailBox.toggle();var e=a.getMailBoxOffset(f,d,a.mailBox.getWidth());a.mailBox.setPosition(e);}});},register:function(){this._super();var a=this;hitta.common.Event.register(hitta.common.Events.SHARE_MAILBOX_SHOW,a,function(b){if(b===a.MAILBOX_ID){a.domElement.addClass("hidden");}});hitta.common.Event.register(hitta.common.Events.SHARE_MAILBOX_HIDE,a,function(b){if(b===a.MAILBOX_ID){a.domElement.removeClass("hidden");}});}});Hitta.Partner.PoiControl=Class.extend({});Hitta.Partner.PoiControl.prototype={CLASS_NAME:"Hitta.Partner.PoiControl",mpMarker:null,init:function(a){this.ROUTE=Hitta.Router.reverse(Hitta.Routes.JsonResultController_getJsonPartnerMapPointUrl);this.mapOptions=null;this.poiMarkers=null;this.mapManager=a;this.map=null;},setMap:function(a){this.map=a;},showPoiMarkers:function(){var e=this.poiMarkers;if(e.length===0){if(this.mpMarker){this.mpMarker.openInfoBoxBound();this.mpMarker.infoBox.update();}}else{for(var c=0,a=e.length;c<a;c++){var b=e[c];this.map.addOverlay(b);if(a===1){b.openInfoBoxBound();b.infoBox.update();}else{b.setMode(HMarker.MODE_INFOBOX_HOVER);}}}function d(){if(this.mapManager.hideInfoBoxes){jq("img.h-marker").each(function(){if(!this.link){jq(this).css("cursor","move");}else{jq(this).on("click",function(){window.location=this.link;});}});}}d.call(this);},escapeHTMLNumericEntities:function(a){return a.replace(/&amp;#(\d+);/g,function(b,c){return String.fromCharCode(c);});},formatPoiData:function(e){this.poiData=[];for(var d=0,a=e.length;d<a;d++){var f={};var c=e[d].name!==undefined?this.escapeHTMLNumericEntities(e[d].name):"";f.east=e[d].east;f.north=e[d].north;f.name=c;f.content=this.escapeHTMLNumericEntities(e[d].content);if(e[d].iconimage!==undefined){var b=e[d].iconimage;f.iconUrl=b.indexOf("images")===0?("/"+b):b;}else{f.iconUrl=undefined;}this.poiData.push(f);}},clearPoiMarkers:function(){if(this.poiMarkers===null){this.poiMarkers=[];}else{for(var b=0,a=this.poiMarkers.length;b<a;b++){this.map.removeOverlay(this.poiMarkers[b]);}this.poiMarkers=[];}},pointWithinBounds:function(a){var d=parseInt(a.east,10);var e=parseInt(a.north,10);var c=this.pointWithin(d,"east");var b=this.pointWithin(e,"north");return c&&b;},pointWithin:function(b,c){var f=false;if(this.map!==undefined){var d=this.map.getBounds();var a=d.sw;var e=d.ne;f=a[c]<=b&&e[c]>=b;}return f;},createPoiMarkers:function(b){this.points=[];this.clearPoiMarkers();function j(k){k.onClose=function(){};k.isInfoBoxOpen=function(){return false;};k.infoBox={init:function(){},update:function(){},mapMove:function(){},remove:function(){},marker:k};}for(var c=0,f=this.poiData.length;c<f;c++){var a=this.poiData[c];if(b||this.pointWithinBounds(a)){var g=jq.extend({},HIcon.H_DEFAULT_ICON,{image:a.iconUrl,size:new HSize("","")});var h=new HPointRT90(a.east,a.north);var d=new HMarker(h,g);var e=['<div class="partner">','   <div class="head">',a.name,"</div>",'   <div class="body">',a.content,"</div>","</div>"];if(typeof this.mapManager.hideInfoBoxes===undefined||!this.mapManager.hideInfoBoxes){d.infoBox=new HShadeBox({content:e.join(""),marker:d});d.setMode(HMarker.MODE_INFOBOX_HOVER);}else{j(d);}this.points.push(h);this.poiMarkers.push(d);}}},showMPUSuccessHandler:function(g){if(g!==undefined&&g.length){this.formatPoiData(g);this.createPoiMarkers(true);var f={width:jq(document).width(),height:jq(document).height()};var e=HBoundsRT90.getMinBounds(this.points);var h=e.getCenter();this.mapOptions.east=h.east;this.mapOptions.north=h.north;this.mapOptions.zoomLevel=this.map.getBoundsZoomLevel(e,f);this.map.setCenter(h,this.mapOptions.zoomLevel,this.mapOptions.mapType);hitta.hash.center=h.toHash();hitta.hash.place();this.addMapControls();this.mapManager.addPermanentPOIs();this.showPoiMarkers();if(this.mapOptions.trade!==undefined&&this.mapOptions.trade!==null){hitta.common.Event.trigger(hitta.common.Events.SEARCH_TRADE_BY_ID,{id:this.mapOptions.trade});}}else{var b=hitta.common.Config.defaultMapOptions;var a=new HPointRT90(b.east,b.north);var c=b.zoomLevel;var d=b.mapType;this.map.setCenter(a,c,d);}},showMPUErrorHandler:function(){var a=new HPointRT90(this.mapOptions.east,this.mapOptions.north);this.map.setCenter(a,this.mapOptions.zoomLevel,this.mapOptions.mapType);hitta.hash.center=a.toHash();hitta.hash.place();this.addMapControls();},showMPU:function(b){this.mapOptions=b;var d=this;var e=jq.parseJSON(this.mapOptions.mpu);var a=encodeURI(e[0].mpu);var c=true;jq.ajax({url:this.ROUTE,data:{path:a,grouped:c},type:"GET",success:function(f){d.showMPUSuccessHandler(f);},error:function(){d.showMPUErrorHandler(arguments);}});},showMP_MPUSuccessHandler:function(d){var a=jq.parseJSON(this.mapOptions.multiPoint)[0];var c=parseInt(a.x,10);var e=parseInt(a.y,10);var f=new HPointRT90(c,e);var b=jq.extend({},HIcon.H_DEFAULT_ICON,{infoBoxAnchorBottom:new HPoint(-8,35),infoBoxAnchorTop:new HPoint(-8,20)});this.mpMarker=new HMarker(f,b);this.mpMarker.infoBox=new HShadeBox({content:'<div style="line-height: 14px; padding:4px">'+a.t+"</div>",marker:this.mpMarker});this.mapOptions.east=c;this.mapOptions.north=e;this.mapOptions.zoomLevel=8;this.map.setCenter(f,this.mapOptions.zoomLevel,this.mapOptions.mapType);this.map.addOverlay(this.mpMarker);this.addMapControls();this.mapManager.addPermanentPOIs();this.processMPU(d,false);},processMPU:function(b,a){this.formatPoiData(b);this.createPoiMarkers(a);this.showPoiMarkers();},showMP_MPU:function(b){this.mapOptions=b;var c=this;var d=jq.parseJSON(this.mapOptions.mpu);var a=encodeURI(d[0].mpu);jq.ajax({url:this.ROUTE,data:{path:a,grouped:false},type:"GET",success:function(e){c.showMP_MPUSuccessHandler(e);},error:function(){c.showMPUErrorHandler(arguments);}});},showMP:function(u){function t(p){p.onClose=function(){};p.isInfoBoxOpen=function(){return false;};p.infoBox={init:function(){},update:function(){},mapMove:function(){},remove:function(){},marker:p};}this.mapOptions=u;var b=[];var q=[];var c=jq.parseJSON(u.multiPoint.replace(/\n/g,""));for(var k=0,o=c.length;k<o;k++){var h=c[k].y;var g=c[k].x;var d=c[k].i;var j=c[k].t;var e=c[k].link;var r=jq.extend({},HIcon.H_DEFAULT_ICON,{image:d,infoBoxAnchorBottom:new HPoint(-8,35),infoBoxAnchorTop:new HPoint(-8,20)});var l=new HPointRT90(h,g);b.push(l);var f=new HMarker(l,r);if(typeof this.mapManager.hideInfoBoxes===undefined||!this.mapManager.hideInfoBoxes){if(j!==""){j=j.replace(/<script/g,"&lt;").replace(/script>/g,"&gt;");f.infoBox=new HShadeBox({content:'<div style="line-height: 14px; padding:4px">'+j+"</div>",marker:f});}}else{t(f);f.link=e;}q.push(f);}if(null===this.mapOptions.north||null===this.mapOptions.east){var a=HBoundsRT90.getMinBounds(b);var m=a.getCenter();this.mapOptions.north=m.north;this.mapOptions.east=m.east;}var s=new HPointRT90(this.mapOptions.east,this.mapOptions.north);this.map.setCenter(s,this.mapOptions.zoomLevel,this.mapOptions.mapType);if(hitta.hash){hitta.hash.center=s.toHash();hitta.hash.place();}this.addMapControls();for(var n=0;n<q.length;n++){this.map.addOverlay(q[n]);this.map.overlays[n].element.link=q[n].link;if(q.length===1){q[n].openInfoBoxBound();if(q[n].infoBox!==undefined){q[n].infoBox.update();}}else{q[n].setMode(HMarker.MODE_INFOBOX_HOVER);}}if(u.vad!==undefined&&u.vad!==null){Hitta.Map.SearchForm.setWhat(u.vad);hitta.common.Event.trigger(hitta.common.Events.SEARCH_BOUNDARY_COMPANY,[1,20,1]);}else{if(u.trade!==undefined&&u.trade!==null){hitta.common.Event.trigger(hitta.common.Events.SEARCH_TRADE_BY_ID,{id:u.trade});}}return false;},showMPP:function(a){this.mapOptions=a;var e=a.mpp;this.formatPoiData(e);this.createPoiMarkers(true);var d={width:jq(document).width(),height:jq(document).height()};var b=HBoundsRT90.getMinBounds(this.points);var c=this.map.getBoundsZoomLevel(b,d);var f=b.getCenter();this.mapOptions.east=f.east;this.mapOptions.north=f.north;this.mapOptions.zoomLevel=c===this.map.getMaxZoomLevel(this.mapOptions.mapType)?c-1:c;this.map.setCenter(f,this.mapOptions.zoomLevel,this.mapOptions.mapType);hitta.hash.center=f.toHash();hitta.hash.place();this.addMapControls();this.mapManager.addPermanentPOIs();this.showPoiMarkers();hitta.common.Event.trigger(hitta.common.Events.MAP_SHOWED);},refresh:function(){if(this.mapOptions===undefined||this.mapOptions===null||this.mapOptions.mpu===undefined||this.mapOptions.mpu===null){return 0;}var l=this;var j=jq.parseJSON(this.mapOptions.mpu)[0].mpu;var k=this.map.getZoom()<3;var c=this.map.getBounds();var h=c.ne;var m=c.sw;var g=m.east;var f=m.north;var d=h.east;var b=h.north;var n=this.map.getZoom();var a=this.map.getCenter();var e=[];e.push("&x=");e.push(a.east);e.push("&y=");e.push(a.north);e.push("&minX=");e.push(g);e.push("&minY=");e.push(f);e.push("&maxX=");e.push(d);e.push("&maxY=");e.push(b);e.push("&minX=");e.push(g);e.push("&zoomLevel=");e.push(n);e.push("&onlyGroupOverLevel=");e.push(0);if(j.indexOf("?")==-1){j+="?nop";}j+=e.join("");jq.ajax({url:this.ROUTE,data:{path:encodeURI(j),grouped:k},type:"GET",success:function(o){l.formatPoiData(o);l.createPoiMarkers(true);l.showPoiMarkers();},error:function(){console.log("Error occurred when map was created from map points");}});},addMapControls:function(){this.mapManager.addMapControls();if(this.mapManager.panControl!==undefined){this.mapManager.panControl.disable();}}};Hitta.Partner.TradeControl=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Partner.TradeControl",xhr:null,search:function(e){var a=hitta.hmap.getCenter();var d=hitta.hmap.fromRT90toContainerPixel(a);var c=hitta.hmap.fromRT90toContainerPixel(hitta.hmap.getBounds().ne);var f=Math.round(hitta.hmap.getDistancePixel(d,c));var b="/json/partner/tradebyid/";if(this.xhr!==null){this.xhr.abort();}this.xhr=jq.ajax({url:b,dataType:"json",data:{id:e.id,point:a.north+":"+a.east,distance:f},timeout:5000,beforeSend:function(){hitta.common.Event.trigger(hitta.common.Events.MAP_SHOW_AJAX_LOADER);},success:function(g){hitta.common.Event.trigger(hitta.common.Events.SEARCH_SUCCESS_TRADE_BY_ID,g.result);hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);},error:function(k,j,g,h){hitta.common.Event.trigger(hitta.common.Events.MAP_HIDE_AJAX_LOADER);}});},onSearchTradeById:function(a){this.trade=a;this.search(a);},onSearchBoundary:function(){if(this.trade!==undefined){this.search(this.trade);}},register:function(){hitta.common.Event.register(hitta.common.Events.SEARCH_TRADE_BY_ID,this,this.onSearchTradeById);hitta.common.Event.register(hitta.common.Events.MAP_MOVE_END,this,this.onSearchBoundary);hitta.common.Event.register(hitta.common.Events.MAP_ZOOM,this,this.onSearchBoundary);}});Hitta.Partner.CoordinateOnClickControl=Hitta.Common.Control.extend({CLASS_NAME:"Hitta.Partner.CoordinateOnClickControl",hMarker:null,init:function(a){this.map=a;},getIcon:function(){var b=Hitta.Router.fromPublic(hitta.common.Config.get("url.images.icon.counter.location","default"));var a=new HIcon(b);a.size=new HSize(25,25);a.anchor=new HPoint(10,11);a.infoBoxAnchorBottom=new HPoint(10,25);a.infoBoxAnchorTop=new HPoint(10,-2);return a;},clearMarker:function(){if(this.hMarker!==null){this.hMarker.remove();}},renderMarker:function(){var c=this;var b="<strong>Vald plats</strong><br>Klicka på kartan där du vill ha punkten.";this.hMarker=new HMarker(this.point,c.getIcon());var a=new HShadeBox({marker:this.hMarker,content:b});this.hMarker.infoBox=a;this.hMarker.setMode(HMarker.MODE_INFOBOX_CLICK);c.map.addOverlay(this.hMarker);this.hMarker.openInfoBoxBound();a.update();},centerMap:function(){this.map.panTo(this.point);},updateHash:function(){var a=this.point;if(a!==undefined&&hitta.hash!==null){hitta.hash.coc="#"+a.east+";"+a.north;hitta.hash.place();}},onMapClick:function(a){this.point=new HPointRT90(a.east,a.north);this.clearMarker();this.renderMarker();this.centerMap();this.updateHash();},setInitialMarker:function(){this.point=this.map.getCenter();this.clearMarker();this.renderMarker();this.updateHash();},observe:function(){var a=this;HEvent.addListener(this.map,HMap.EVENT_MAP_CLICK,function(b){a.onMapClick(b);});},register:function(){hitta.common.Event.register(hitta.common.Events.MAP_SHOWED,this,this.setInitialMarker);}});